import{i as k}from"./legacy.BEeXhY1S.js";import{p as j,b as B}from"./effects.cxkQmux7.js";import{p as S}from"./props.DbzmGua_.js";import{o as z}from"./index-client.CyLyvevL.js";import{a as p}from"./analytics-data.Beyq6bz2.js";import"./store.c-pxfM0-.js";import"./index.BUf4ql09.js";function Y(G,l){j(l,!1);const s=S(l,"moksa",24,()=>({}))()?.token,m=async(t,o)=>{try{const n=new Promise((h,T)=>setTimeout(()=>T(new Error("Request timed out")),1e4)),i=await Promise.race([t(),n]);return i??o}catch(n){return console.error(`Error executing function: ${n}`),o}},a=new Date,c=new Date(a),r=new Date(a);c.setFullYear(a.getFullYear()-1),r.setDate(a.getDate()-7);const e=t=>t.toISOString().split("T")[0],f=async()=>(await fetch("https://api.moksa.ai/store/getAllStoresForDropdown",{method:"GET",headers:{Authorization:`Bearer ${s}`,enableallstores:"true"}})).json(),u=async()=>(await fetch(`https://api.moksa.ai/store/getAllStoresTotals/-1/${e(r)}/${e(a)}`,{method:"GET",headers:{Authorization:`Bearer ${s}`}})).json(),y=async()=>(await fetch(`https://api.moksa.ai/store/getAllStoresWithAisleDetails/1/100/${e(c)}/${e(a)}`,{method:"GET",headers:{Authorization:`Bearer ${s}`}})).json(),d=async()=>(await fetch(`https://api.moksa.ai/store/getAllStoresWithTheftAndCameraDetails/1/100/${e(c)}/${e(a)}`,{method:"GET",headers:{Authorization:`Bearer ${s}`}})).json(),D=async()=>await(await fetch("https://api.moksa.ai/theft/theftDetectionDetailsByStoreid/-1",{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",datetype:"7",startDate:e(r),endDate:e(a)}}))?.json(),$=async()=>(await fetch(`https://api.moksa.ai/store/storeEmployee/getEmployeeEfficiencyByStoreidDynamic/-1/${e(r)}/1/100/${e(a)}`,{method:"GET",headers:{Authorization:`Bearer ${s}`}})).json(),w=async()=>(await fetch(`https://api.moksa.ai/store/storeEmployee/getSafetyDetailsOfAllEmployeesByStore/-1/1/100/${e(r)}/${e(a)}`,{method:"GET",headers:{Authorization:`Bearer ${s}`}})).json(),A=async()=>(await fetch("https://api.moksa.ai/people/getPeopleCount/-1",{method:"GET",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json",datetype:"7",Pagepersize:"100",Pagenumber:"1"}})).json(),E=async()=>(await fetch("https://api.moksa.ai/auth/getAllUsers/1/100",{method:"GET",headers:{Authorization:`Bearer ${s}`}})).json(),g={theftData:()=>D(),stores:()=>f(),allstoreData:()=>u(),aisleData:()=>y(),theftandcamera:()=>d(),busyness:()=>[],efficiency:()=>$(),safetyDetails:()=>w(),usersData:()=>E(),storePeopleCount:()=>A()};z(async()=>{const t=await Promise.all(Object.entries(g).map(async([n,i])=>{const h=await m(i);return[n,h]})),o=Object.fromEntries(t);o?p.set(o):p.set({})}),k(),B()}export{Y as default};
