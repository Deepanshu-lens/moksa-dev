const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./_astro/p5.min.C68dkGfl.js","./_astro/_commonjsHelpers.Cpj98o6Y.js","./_astro/jszip.min.Cs-jn4v1.js"])))=>i.map(i=>d[i]);
import{i as er}from"./legacy.BEeXhY1S.js";import{f as T,p as tr,l as St,c as _,d as Vt,g as s,a as jr,b as rr,m as _e,i as v,t as ie,r as u,ae as da,j as Ie,w as E,s as d,x as xa,aM as Ha,aN as ai,aT as ni,aO as si,aZ as Bs}from"./effects.cxkQmux7.js";import{s as Ye}from"./render.EQ9IInvK.js";import{i as me,a as gn,s as Er,h as oi,f as wn,c as Kt,r as fn}from"./attributes.92vqw3Y3.js";import{e as Dr,i as Nr}from"./each.Cd5X-yTW.js";import{c as ze,a as c,b as D,e as we,t as P,n as ii}from"./template.BwN7TRoD.js";import{s as wt,a as La}from"./class.C7YmhKmI.js";import{k as li,a as ci,s as Kn}from"./axios.pC6j9IOl.js";import{s as Ir,a as ee,m as qr,d as Zr}from"./store.c-pxfM0-.js";import{a as bn,J as di,b as ui}from"./create.BfRhC9QK.js";import{l as Et,s as ir,p as g}from"./props.DbzmGua_.js";import{a as Is,c as fi,o as ma}from"./index-client.CyLyvevL.js";import{b as vn}from"./input.0fwOYEx7.js";import{s as It,b as Ca}from"./this.BmA335U8.js";import{u as ha}from"./user.DTKNVqgd.js";import{c as ua,s as fa,t as Ja,d as In,a as go}from"./camera.BMklx_Km.js";import{s as na,n as zs}from"./node.CqL_Mp_Y.js";import{w as ct,d as Ka,g as De}from"./index.BUf4ql09.js";import{c as ya,s as wa,a as tn,b as Rn}from"./ui.4do1Kz16.js";import{p as hr,C as bo,d as vi}from"./pb.BjVtZEqq.js";import{I as Tr}from"./Icon.BeHKllUs.js";import{p as hi}from"./person-counter.jIMat-6r.js";import{R as hn,T as Un,D as pn,a as vs,b as jn}from"./index.-4Qk7ylv.js";import{b as pi,B as pr}from"./index.DS2EyCWs.js";import{c as Ot}from"./utils.DvemnH4t.js";import{g as mi,u as qn,P as gi,c as bi,d as Sn,e as _i,f as xi,R as yi,A as Hs,a as Vs,b as Gs}from"./video-zoom.DvyvSUUy.js";import{a as Ht}from"./userLogs.FmCv2qlm.js";import{I as mr}from"./Icon.zNx1I3ZC.js";import{c as $i}from"./updater.B0mDEZrk.js";import{C as wi}from"./chevron-left.Dq8xVf1g.js";import{C as Si}from"./chevron-right.BJK95n5D.js";import{R as hs,T as ps,D as ms,G as gs}from"./index.DGa67Ej_.js";import Pi from"./NodeSelection.DqEse5Ht.js";import{R as Ci,T as ki,A as Ei,a as Ti,b as Di,c as Ii,d as zi,e as Li,f as Oi,N as Zn,C as Ni,g as Ai}from"./NodeActionButton.9361UE5w.js";import{I as Ut}from"./input.BV_m_vV0.js";import{R as _o,T as xo,P as yo}from"./index.CkzabP-Y.js";import{R as bs,S as _s,V as xs,b as ys,c as rn,G as Mi}from"./index.mSXJH3kY.js";import{L as rt}from"./label.BHooXELk.js";import{S as kr}from"./switch.BYMMt5NX.js";import{R as $o,T as wo,a as an,b as nn}from"./index.Ch85e_6D.js";import{S as zn}from"./slider.D62fM7UG.js";import{T as Xs,a as Ws,b as Pn,c as la,d as Ys,e as ca}from"./table-row.B5mTp21i.js";import{t as ur}from"./Toaster.svelte_svelte_type_style_lang.DfPlDrph.js";import{C as Qn,M as Js}from"./checkbox.BGojjure.js";import{c as Ls}from"./create-form.CoWsQOMe.js";import{L as Ks}from"./loader-circle.DEuRHtjx.js";import{c as Ri}from"./svelte-component.K-akd4EF.js";import{D as Ui}from"./dialog-description.BChGf6fz.js";import{S as ji}from"./scan-face.CavT0i9k.js";import{P as sn}from"./plus.CWZvKwuD.js";import{X as So}from"./x.Cy1Pf9P9.js";import{S as Fi}from"./select-label.SD_dqOoq.js";import{S as Bi,I as Hi,h as es}from"./html2canvas.esm.HRSrPWSH.js";import{T as Vi,A as Gi}from"./trash.BbnERPCP.js";import{D as $s,a as ws}from"./dropdown-menu-separator.BddZHfjl.js";import{D as qa}from"./dropdown-menu-item.DqcWHNNJ.js";import{C as qs}from"./create.D3kZAqt5.js";import{l as Xi}from"./live-events.CDiEgrqk.js";import{g as Wi}from"./gallery.B6Z2lGKf.js";import{J as Yi}from"./jszip.min.Cs-jn4v1.js";import{E as Ji}from"./EventAlertModal.MCEFOYif.js";import{C as Ki,a as qi,b as Zi,A as Qi}from"./embla-carousel-autoplay.esm.lcG1nLji.js";import"./html.BFAOKdD3.js";import"./index.Dc6kRK_F.js";import"./focus.D50lsZzo.js";import"./chevron-down.CM3qYU2j.js";import"./userDetails.C512u9q6.js";import"./helpers.BekmFVoz.js";import"./create.BgVLX6SM.js";import"./dialog-footer.SCIvGmz3.js";import"./select-label.CKwE8nd7.js";import"./_commonjsHelpers.Cpj98o6Y.js";function el(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"activity"},()=>t,{iconNode:[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function tl(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"arrow-down-z-a"},()=>t,{iconNode:[["path",{d:"m3 16 4 4 4-4"}],["path",{d:"M7 4v16"}],["path",{d:"M15 4h5l-5 6h5"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"}],["path",{d:"M20 18h-5"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function rl(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"arrow-up-z-a"},()=>t,{iconNode:[["path",{d:"m3 8 4-4 4 4"}],["path",{d:"M7 4v16"}],["path",{d:"M15 4h5l-5 6h5"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20"}],["path",{d:"M20 18h-5"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function al(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"calendar-arrow-down"},()=>t,{iconNode:[["path",{d:"m14 18 4 4 4-4"}],["path",{d:"M16 2v4"}],["path",{d:"M18 14v8"}],["path",{d:"M21 11.354V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7.343"}],["path",{d:"M3 10h18"}],["path",{d:"M8 2v4"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function nl(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"calendar-arrow-up"},()=>t,{iconNode:[["path",{d:"m14 18 4-4 4 4"}],["path",{d:"M16 2v4"}],["path",{d:"M18 22v-8"}],["path",{d:"M21 11.343V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h9"}],["path",{d:"M3 10h18"}],["path",{d:"M8 2v4"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function Cn(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"dot"},()=>t,{iconNode:[["circle",{cx:"12.1",cy:"12.1",r:"1"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function sl(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"ellipsis"},()=>t,{iconNode:[["circle",{cx:"12",cy:"12",r:"1"}],["circle",{cx:"19",cy:"12",r:"1"}],["circle",{cx:"5",cy:"12",r:"1"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function ol(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"grip-vertical"},()=>t,{iconNode:[["circle",{cx:"9",cy:"12",r:"1"}],["circle",{cx:"9",cy:"5",r:"1"}],["circle",{cx:"9",cy:"19",r:"1"}],["circle",{cx:"15",cy:"12",r:"1"}],["circle",{cx:"15",cy:"5",r:"1"}],["circle",{cx:"15",cy:"19",r:"1"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function il(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"pen-tool"},()=>t,{iconNode:[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18"}],["path",{d:"m2.3 2.3 7.286 7.286"}],["circle",{cx:"11",cy:"11",r:"2"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function ll(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"pencil"},()=>t,{iconNode:[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}],["path",{d:"m15 5 4 4"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function Po(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"person-standing"},()=>t,{iconNode:[["circle",{cx:"12",cy:"5",r:"1"}],["path",{d:"m9 20 3-6 3 6"}],["path",{d:"m6 8 6 2 6-2"}],["path",{d:"M12 10v4"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function ts(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"picture-in-picture-2"},()=>t,{iconNode:[["path",{d:"M21 9V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h4"}],["rect",{width:"10",height:"7",x:"12",y:"13",rx:"2"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function cl(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"rectangle-horizontal"},()=>t,{iconNode:[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function dl(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"rotate-cw"},()=>t,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function ul(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"scaling"},()=>t,{iconNode:[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M14 15H9v-5"}],["path",{d:"M16 3h5v5"}],["path",{d:"M21 3 9 15"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function fl(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"scan-search"},()=>t,{iconNode:[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2"}],["circle",{cx:"12",cy:"12",r:"3"}],["path",{d:"m16 16-1.9-1.9"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function vl(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"shield-alert"},()=>t,{iconNode:[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}],["path",{d:"M12 8v4"}],["path",{d:"M12 16h.01"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}function hl(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]);mr(a,ir({name:"siren"},()=>t,{iconNode:[["path",{d:"M7 18v-6a5 5 0 1 1 10 0v6"}],["path",{d:"M5 21a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2z"}],["path",{d:"M21 12h1"}],["path",{d:"M18.5 4.5 18 5"}],["path",{d:"M2 12h1"}],["path",{d:"M12 2v1"}],["path",{d:"m4.929 4.929.707.707"}],["path",{d:"M12 12v6"}]],children:(n,o)=>{var i=ze(),l=T(i);It(l,e,"default",{},null),c(n,i)},$$slots:{default:!0}}))}var pl=P("<button><!></button>");function ml(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]),r=Et(t,["asChild","page","el"]);tr(e,!1);const n=Ir(),o=()=>ee(p,"$pageTrigger",n),i=_e();let l=g(e,"asChild",24,()=>{}),f=g(e,"page",8),h=g(e,"el",28,()=>{});const{elements:{pageTrigger:p},getAttrs:m}=mi(),$=m("page"),x=$i();St(()=>(o(),Vt(f())),()=>{_(i,o()(f()))}),St(()=>s(i),()=>{Object.assign(s(i),$)}),jr(),er();var w=ze(),L=T(w);{var S=G=>{var I=ze(),M=T(I);It(M,e,"default",{get builder(){return s(i)}},null),c(G,I)},U=G=>{var I=pl();let M;var ge=v(I);It(ge,e,"default",{get builder(){return s(i)}},q=>{var Y=D();ie(()=>Ye(Y,f().value)),c(q,Y)}),u(I),Ca(I,q=>h(q),()=>h()),bn(I,q=>s(i).action?.(q)),da(()=>we("m-click",I,x)),ie(()=>M=gn(I,M,{type:"button",...s(i),...r})),c(G,I)};me(L,G=>{l()?G(S):G(U,!1)})}c(a,w),rr()}let Ss=ct("");function Co(a){try{Is(a)}catch{return a()}}function gl(a,e){let t=[];const r=l=>{t.push(l)},n=()=>{t.forEach(l=>l()),t=[]},o=Ka(a,l=>(n(),e(l,r)));return Co(n),{...o,subscribe:(...l)=>{const f=o.subscribe(...l);return()=>{f(),n()}}}}function rs(a,e){if(!_n)return()=>{};const t=gl(a,(r,n)=>({stores:r,onUnsubscribe:n})).subscribe(({stores:r,onUnsubscribe:n})=>{const o=e(r);o&&n(o)});return Co(t),t}function bl(a){const e={};return Object.keys(a).forEach(t=>{const r=t,n=a[r];e[r]=ct(n)}),e}function _l(a){return function(e,t){if(t===void 0)return;const r=a[e];r&&r.set(t)}}function Os(a){return Object.keys(a).reduce((e,t)=>a[t]===void 0?e:e+`${t}:${a[t]};`,"")}let Ps=null,Ia=null;function ko(a){switch(a){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function xl(){Ia!==null&&(document.head.removeChild(Ia),Ps=null,Ia=null)}function as(a){if(Ps===a)return;Ps=a;const e=ko(a);Ia===null&&(Ia=document.createElement("style"),document.head.appendChild(Ia)),Ia.innerHTML=`*{cursor: ${e}!important;}`}function yl({defaultSize:a,dragState:e,layout:t,paneData:r,paneIndex:n,precision:o=3}){const i=t[n];let l;return i==null?l=a??"1":r.length===1?l="1":l=i.toPrecision(o),Os({"flex-basis":0,"flex-grow":l,"flex-shrink":1,overflow:"hidden","pointer-events":e!==null?"none":void 0})}function $l({layout:a,panesArray:e,pivotIndices:t}){let r=0,n=100,o=0,i=0;const l=t[0];for(let m=0;m<e.length;m++){const{constraints:$}=e[m],{maxSize:x=100,minSize:w=0}=$;m===l?(r=w,n=x):(o+=w,i+=x)}const f=Math.min(n,100-o),h=Math.max(r,100-i),p=a[l];return{valueMax:f,valueMin:h,valueNow:p}}function Ns(a=null){return a??di(10)}const wl=100,As=10;function Zs(a){try{if(typeof localStorage>"u")throw new Error("localStorage is not supported in this environment");a.getItem=e=>localStorage.getItem(e),a.setItem=(e,t)=>localStorage.setItem(e,t)}catch(e){console.error(e),a.getItem=()=>null,a.setItem=()=>{}}}function Eo(a){return`paneforge:${a}`}function To(a){return a.map(t=>{const{constraints:r,id:n,idIsFromProps:o,order:i}=t;return o?n:i?`${i}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort().join(",")}function Do(a,e){try{const t=Eo(a),r=e.getItem(t),n=JSON.parse(r||"");if(typeof n=="object"&&n!==null)return n}catch{}return null}function Sl(a,e,t){const r=Do(a,t)||{},n=To(e);return r[n]||null}function Pl(a,e,t,r,n){const o=Eo(a),i=To(e),l=Do(a,n)||{};l[i]={expandToSizes:Object.fromEntries(t.entries()),layout:r};try{n.setItem(o,JSON.stringify(l))}catch(f){console.error(f)}}const Qs={};function Cl(a,e=10){let t=null;return(...n)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{a(...n)},e)}}function kl({autoSaveId:a,layout:e,storage:t,paneDataArrayStore:r,paneSizeBeforeCollapseStore:n}){const o=De(r);if(e.length===0||e.length!==o.length)return;let i=Qs[a];i==null&&(i=Cl(Pl,wl),Qs[a]=i);const l=[...o],f=De(n),h=new Map(f);i(a,l,h,e,t)}function Io(a){const e={};for(const t in a){const r=a[t];r!==void 0&&(e[t]=r)}return e}function El(...a){return(...e)=>{for(const t of a)typeof t=="function"&&t(...e)}}function Ta(a,e,t,r){const n=Array.isArray(e)?e:[e];return n.forEach(o=>a.addEventListener(o,t,r)),()=>{n.forEach(o=>a.removeEventListener(o,t,r))}}function Wr(a,e,t=As){return mn(a,e,t)===0}function mn(a,e,t=As){const r=eo(a,t),n=eo(e,t);return Math.sign(r-n)}function Ga(a,e){if(a.length!==e.length)return!1;for(let t=0;t<a.length;t++)if(a[t]!==e[t])return!1;return!0}function eo(a,e){return parseFloat(a.toFixed(e))}function Wt(a,e="Assertion failed!"){if(!a)throw console.error(e),Error(e)}function Ua({paneConstraints:a,paneIndex:e,initialSize:t}){const r=a[e];Wt(r!=null,"Pane constraints should not be null.");const{collapsedSize:n=0,collapsible:o,maxSize:i=100,minSize:l=0}=r;let f=t;return mn(f,l)<0&&(f=Tl(f,o,n,l)),f=Math.min(i,f),parseFloat(f.toFixed(As))}function Tl(a,e,t,r){if(!e)return r;const n=(t+r)/2;return mn(a,n)<0?t:r}function Xa({delta:a,layout:e,paneConstraints:t,pivotIndices:r,trigger:n}){if(Wr(a,0))return e;const o=[...e],[i,l]=r;let f=0;if(n==="keyboard"){{const p=a<0?l:i,m=t[p];if(Wt(m),m.collapsible){const $=e[p];Wt($!=null);const x=t[p];Wt(x);const{collapsedSize:w=0,minSize:L=0}=x;if(Wr($,w)){const S=L-$;mn(S,Math.abs(a))>0&&(a=a<0?0-S:S)}}}{const p=a<0?i:l,m=t[p];Wt(m);const{collapsible:$}=m;if($){const x=e[p];Wt(x!=null);const w=t[p];Wt(w);const{collapsedSize:L=0,minSize:S=0}=w;if(Wr(x,S)){const U=x-L;mn(U,Math.abs(a))>0&&(a=a<0?0-U:U)}}}}{const p=a<0?1:-1;let m=a<0?l:i,$=0;for(;;){const w=e[m];Wt(w!=null);const S=Ua({paneConstraints:t,paneIndex:m,initialSize:100})-w;if($+=S,m+=p,m<0||m>=t.length)break}const x=Math.min(Math.abs(a),Math.abs($));a=a<0?0-x:x}{let m=a<0?i:l;for(;m>=0&&m<t.length;){const $=Math.abs(a)-Math.abs(f),x=e[m];Wt(x!=null);const w=x-$,L=Ua({paneConstraints:t,paneIndex:m,initialSize:w});if(!Wr(x,L)&&(f+=x-L,o[m]=L,f.toPrecision(3).localeCompare(Math.abs(a).toPrecision(3),void 0,{numeric:!0})>=0))break;a<0?m--:m++}}if(Wr(f,0))return e;{const p=a<0?l:i,m=e[p];Wt(m!=null);const $=m+f,x=Ua({paneConstraints:t,paneIndex:p,initialSize:$});if(o[p]=x,!Wr(x,$)){let w=$-x,S=a<0?l:i;for(;S>=0&&S<t.length;){const U=o[S];Wt(U!=null);const G=U+w,I=Ua({paneConstraints:t,paneIndex:S,initialSize:G});if(Wr(U,I)||(w-=I-U,o[S]=I),Wr(w,0))break;a>0?S--:S++}}}const h=o.reduce((p,m)=>m+p,0);return Wr(h,100)?o:e}const _n=typeof document<"u";function Dl(a){return a instanceof HTMLElement}function zo(a){return a.type==="keydown"}function Lo(a){return a.type.startsWith("mouse")}function Oo(a){return a.type.startsWith("touch")}function Il(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]),r=Et(t,["class","page","size","isActive"]);tr(e,!1);let n=g(e,"class",24,()=>{}),o=g(e,"page",12),i=g(e,"size",8,"icon"),l=g(e,"isActive",8,!1);er();var f=Ie(()=>Ot(pi({variant:l()?"outline":"ghost",size:i()}),n()));ml(a,ir({get class(){return s(f)}},()=>r,{get page(){return o()},set page(h){o(h)},$$events:{click(h){ui.call(this,e,h)}},children:(h,p)=>{var m=ze(),$=T(m);It($,e,"default",{},x=>{var w=D();ie(()=>Ye(w,o().value)),c(x,w)}),c(h,m)},$$slots:{default:!0},$$legacy:!0})),rr()}var zl=P('<span><!> <span class="sr-only">More pages</span></span>');function Ll(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]),r=Et(t,["class"]);tr(e,!1);let n=g(e,"class",24,()=>{});er();var o=zl();let i;var l=v(o);sl(l,{class:"h-4 w-4"}),E(2),u(o),ie(()=>i=gn(o,i,{"aria-hidden":!0,class:Ot("flex h-9 w-9 items-center justify-center",n()),...r})),c(a,o),rr()}const Ol="modulepreload",Nl=function(a,e){return new URL(a,e).href},to={},Al=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),f=l?.nonce||l?.getAttribute("nonce");n=Promise.allSettled(t.map(h=>{if(h=Nl(h,r),h in to)return;to[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(!!r)for(let w=i.length-1;w>=0;w--){const L=i[w];if(L.href===h&&(!p||L.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${m}`))return;const x=document.createElement("link");if(x.rel=p?"stylesheet":Ol,p||(x.as="script"),x.crossOrigin="",x.href=h,f&&x.setAttribute("nonce",f),document.head.appendChild(x),p)return new Promise((w,L)=>{x.addEventListener("load",w),x.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};var Ml=P('<div class="m-0"></div>');function Rl(a,e){tr(e,!1);let t=g(e,"target",12,void 0),r=g(e,"sketch",8,void 0),n=g(e,"parentDivStyle",8,"display: block;"),o=g(e,"debug",8,!1),i;const l=fi(),f={ref(){l("ref",t())},instance(){l("instance",i)}};function h($){return t($),{destroy(){t(void 0)}}}function p($,x){return x.forEach(([w,L])=>$[w]=L),$}ma(async()=>{const $=await Al(()=>import("./p5.min.C68dkGfl.js").then(S=>S.p),__vite__mapDeps([0,1,2]),import.meta.url),{default:x}=$,L=Object.entries($).filter(([S,U])=>U instanceof Function&&S[0]!=="_"&&S!=="default");o()&&console.log("available p5 native classes",L),i=new x(S=>(S=p(S,L),o()&&console.log("p5 instance",S),window._p5Instance=S,r()(S)),t()),f.ref(),f.instance()}),er();var m=Ml();bn(m,$=>h?.($)),ie(()=>Er(m,"style",n())),c(a,m),rr()}class Fn extends HTMLElement{constructor(){super(),this.DISCONNECT_TIMEOUT=500,this.RECONNECT_TIMEOUT=500,this.CODECS=["avc1.640029","avc1.64002A","avc1.640033","hvc1.1.6.L153.B0","mp4a.40.2","mp4a.40.5","flac","opus"],this.mode="webrtc,mse,hls,mjpeg",this.media="video,audio",this.background=!1,this.visibilityThreshold=0,this.visibilityCheck=!0,this.pcConfig={bundlePolicy:"max-bundle",iceServers:[{urls:"stun:stun.l.google.com:19302"}],sdpSemantics:"unified-plan"},this.wsState=WebSocket.CLOSED,this.pcState=WebSocket.CLOSED,this.video=null,this.ws=null,this.wsURL="",this.pc=null,this.connectTS=0,this.mseCodecs="",this.disconnectTID=0,this.reconnectTID=0,this.ondata=null,this.onmessage=null}set src(e){typeof e!="string"&&(e=e.toString()),e.startsWith("http")?e="ws"+e.substring(4):e.startsWith("/")&&(e="ws"+location.origin.substring(4)+e),this.wsURL=e,this.onconnect()}play(){this.video.play().catch(()=>{this.video.muted||(this.video.muted=!0,this.video.play().catch(e=>{console.warn(e)}))})}send(e){this.ws&&this.ws.send(JSON.stringify(e))}codecs(e){return this.CODECS.filter(t=>this.media.indexOf(t.indexOf("vc1")>0?"video":"audio")>=0).filter(t=>e(`video/mp4; codecs="${t}"`)).join()}connectedCallback(){if(this.disconnectTID&&(clearTimeout(this.disconnectTID),this.disconnectTID=0),this.video){const e=this.video.seekable;e.length>0&&(this.video.currentTime=e.end(e.length-1)),this.play()}else this.oninit();this.onconnect()}disconnectedCallback(){this.background||this.disconnectTID||this.wsState===WebSocket.CLOSED&&this.pcState===WebSocket.CLOSED||(this.disconnectTID=setTimeout(()=>{this.reconnectTID&&(clearTimeout(this.reconnectTID),this.reconnectTID=0),this.disconnectTID=0,this.ondisconnect()},this.DISCONNECT_TIMEOUT))}oninit(){this.video=document.createElement("video"),this.video.controls=!0,this.video.playsInline=!0,this.video.preload="auto",this.video.style.display="block",this.video.style.width="100%",this.video.style.height="100%",this.appendChild(this.video),this.video.addEventListener("error",t=>{console.warn(t),this.ws&&this.ws.close()});const e=window.navigator.userAgent.match(/Version\/(\d+).+Safari/);if(e){const t=e[1]<"13"?"mp4a.40.2":e[1]<"14"?"flac":"opus";this.CODECS.splice(this.CODECS.indexOf(t))}this.background||("hidden"in document&&this.visibilityCheck&&document.addEventListener("visibilitychange",()=>{document.hidden?this.disconnectedCallback():this.isConnected&&this.connectedCallback()}),"IntersectionObserver"in window&&this.visibilityThreshold&&new IntersectionObserver(r=>{r.forEach(n=>{n.isIntersecting?this.isConnected&&this.connectedCallback():this.disconnectedCallback()})},{threshold:this.visibilityThreshold}).observe(this))}onconnect(){return!this.isConnected||!this.wsURL||this.ws||this.pc?!1:(this.wsState=WebSocket.CONNECTING,this.connectTS=Date.now(),this.ws=new WebSocket(this.wsURL),this.ws.binaryType="arraybuffer",this.ws.addEventListener("open",()=>this.onopen()),this.ws.addEventListener("close",()=>this.onclose()),!0)}ondisconnect(){this.wsState=WebSocket.CLOSED,this.ws&&(this.ws.close(),this.ws=null),this.pcState=WebSocket.CLOSED,this.pc&&(this.pc.getSenders().forEach(e=>{e.track&&e.track.stop()}),this.pc.close(),this.pc=null),this.video.src="",this.video.srcObject=null}onopen(){this.wsState=WebSocket.OPEN,this.ws.addEventListener("message",t=>{if(typeof t.data=="string"){const r=JSON.parse(t.data);for(const n in this.onmessage)this.onmessage[n](r)}else this.ondata(t.data)}),this.ondata=null,this.onmessage={};const e=[];return this.mode.indexOf("mse")>=0&&("MediaSource"in window||"ManagedMediaSource"in window)?(e.push("mse"),this.onmse()):this.mode.indexOf("hls")>=0&&this.video.canPlayType("application/vnd.apple.mpegurl")?(e.push("hls"),this.onhls()):this.mode.indexOf("mp4")>=0&&(e.push("mp4"),this.onmp4()),this.mode.indexOf("webrtc")>=0&&"RTCPeerConnection"in window&&(e.push("webrtc"),this.onwebrtc()),this.mode.indexOf("mjpeg")>=0&&(e.length?this.onmessage.mjpeg=t=>{t.type!=="error"||t.value.indexOf(e[0])!==0||this.onmjpeg()}:(e.push("mjpeg"),this.onmjpeg())),e}onclose(){if(this.wsState===WebSocket.CLOSED)return!1;this.wsState=WebSocket.CONNECTING,this.ws=null;const e=Math.max(this.RECONNECT_TIMEOUT-(Date.now()-this.connectTS),0);return this.reconnectTID=setTimeout(()=>{this.reconnectTID=0,this.onconnect()},e),!0}onmse(){let e;if("ManagedMediaSource"in window){const t=window.ManagedMediaSource;e=new t,e.addEventListener("sourceopen",()=>{this.send({type:"mse",value:this.codecs(t.isTypeSupported)})},{once:!0}),this.video.disableRemotePlayback=!0,this.video.srcObject=e}else e=new MediaSource,e.addEventListener("sourceopen",()=>{URL.revokeObjectURL(this.video.src),this.send({type:"mse",value:this.codecs(MediaSource.isTypeSupported)})},{once:!0}),this.video.src=URL.createObjectURL(e),this.video.srcObject=null;this.play(),this.mseCodecs="",this.onmessage.mse=t=>{if(t.type!=="mse")return;this.mseCodecs=t.value;const r=e.addSourceBuffer(t.value);r.mode="segments",r.addEventListener("updateend",()=>{if(!r.updating)try{if(o>0){const i=n.slice(0,o);o=0,r.appendBuffer(i)}else if(r.buffered&&r.buffered.length){const i=r.buffered.end(r.buffered.length-1)-15,l=r.buffered.start(0);i>l&&(r.remove(l,i),e.setLiveSeekableRange(i,i+15))}}catch{}});const n=new Uint8Array(8*1024*1024);let o=0;this.ondata=i=>{if(r.updating||o>0){const l=new Uint8Array(i);n.set(l,o),o+=l.byteLength}else try{r.appendBuffer(i)}catch{}}}}onwebrtc(){const e=new RTCPeerConnection(this.pcConfig);e.addEventListener("icecandidate",t=>{if(t.candidate&&this.mode.indexOf("webrtc/tcp")>=0&&t.candidate.protocol==="udp")return;const r=t.candidate?t.candidate.toJSON().candidate:"";this.send({type:"webrtc/candidate",value:r})}),e.addEventListener("connectionstatechange",()=>{if(e.connectionState==="connected"){const t=e.getTransceivers().filter(n=>n.currentDirection==="recvonly").map(n=>n.receiver.track),r=document.createElement("video");r.addEventListener("loadeddata",()=>this.onpcvideo(r),{once:!0}),r.srcObject=new MediaStream(t)}else(e.connectionState==="failed"||e.connectionState==="disconnected")&&(e.close(),this.pcState=WebSocket.CLOSED,this.pc=null,this.onconnect())}),this.onmessage.webrtc=t=>{switch(t.type){case"webrtc/candidate":if(this.mode.indexOf("webrtc/tcp")>=0&&t.value.indexOf(" udp ")>0)return;e.addIceCandidate({candidate:t.value,sdpMid:"0"}).catch(r=>{console.warn(r)});break;case"webrtc/answer":e.setRemoteDescription({type:"answer",sdp:t.value}).catch(r=>{console.warn(r)});break;case"error":if(t.value.indexOf("webrtc/offer")<0)return;e.close()}},this.createOffer(e).then(t=>{this.send({type:"webrtc/offer",value:t.sdp})}),this.pcState=WebSocket.CONNECTING,this.pc=e}async createOffer(e){try{this.media.indexOf("microphone")>=0&&(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(n=>{e.addTransceiver(n,{direction:"sendonly"})})}catch(r){console.warn(r)}for(const r of["video","audio"])this.media.indexOf(r)>=0&&e.addTransceiver(r,{direction:"recvonly"});const t=await e.createOffer();return await e.setLocalDescription(t),t}onpcvideo(e){if(this.pc){let t=0,r=0;const n=e.srcObject;n.getVideoTracks().length>0&&(t+=544),n.getAudioTracks().length>0&&(t+=258),this.mseCodecs.indexOf("hvc1.")>=0&&(r+=560),this.mseCodecs.indexOf("avc1.")>=0&&(r+=528),this.mseCodecs.indexOf("mp4a.")>=0&&(r+=257),t>=r?(this.video.srcObject=n,this.play(),this.pcState=WebSocket.OPEN,this.wsState=WebSocket.CLOSED,this.ws&&(this.ws.close(),this.ws=null)):(this.pcState=WebSocket.CLOSED,this.pc&&(this.pc.close(),this.pc=null))}e.srcObject=null}onmjpeg(){this.ondata=e=>{this.video.controls=!1,this.video.poster="data:image/jpeg;base64,"+Fn.btoa(e)},this.send({type:"mjpeg"})}onhls(){this.onmessage.hls=e=>{if(e.type!=="hls")return;const t="http"+this.wsURL.substring(2,this.wsURL.indexOf("/ws"))+"/hls/",r=e.value.replace("hls/",t);this.video.src="data:application/vnd.apple.mpegurl;base64,"+btoa(r),this.play()},this.send({type:"hls",value:this.codecs(e=>this.video.canPlayType(e))})}onmp4(){const e=document.createElement("canvas");let t;const r=document.createElement("video");r.autoplay=!0,r.playsInline=!0,r.muted=!0,r.addEventListener("loadeddata",()=>{t||(e.width=r.videoWidth,e.height=r.videoHeight,t=e.getContext("2d")),t.drawImage(r,0,0,e.width,e.height),this.video.controls=!1,this.video.poster=e.toDataURL("image/jpeg")}),this.ondata=n=>{r.src="data:video/mp4;base64,"+Fn.btoa(n)},this.send({type:"mp4",value:this.codecs(this.video.canPlayType)})}static btoa(e){const t=new Uint8Array(e),r=t.byteLength;let n="";for(let o=0;o<r;o++)n+=String.fromCharCode(t[o]);return window.btoa(n)}}class No extends Fn{constructor(){super(),this.lastTime=0,this.stuckCount=0,this.MAX_STUCK_COUNT=3,this.checkInterval=null,this.playCheckInterval=null,this.lastCheck=Date.now(),this.playAttempts=0,this.MAX_PLAY_ATTEMPTS=3,this.playTimeout=null,this.state="LOADING"}set divMode(e){e!=="loading"&&e!=="error"&&this.startStreamCheck()}set divError(e){}startStreamCheck(){this.checkInterval&&clearInterval(this.checkInterval),this.lastTime=this.video.currentTime,this.stuckCount=0,this.lastCheck=Date.now(),this.checkInterval=setInterval(()=>{const e=this.video.currentTime,t=Date.now();t-this.lastCheck>=1900&&(e===this.lastTime?(this.stuckCount++,console.debug(`Stream stuck check: ${this.stuckCount}/${this.MAX_STUCK_COUNT}`),this.stuckCount>=this.MAX_STUCK_COUNT&&(console.log("Stream appears stuck, refreshing..."),this.refreshStream())):this.stuckCount=0,this.lastTime=e,this.lastCheck=t)},2e3)}startPlaybackMonitor(){this.playCheckInterval&&clearInterval(this.playCheckInterval),this.playCheckInterval=setInterval(()=>{this.video&&this.video.paused&&this.video.readyState>=2&&(console.log("Playback paused, attempting to resume..."),Date.now()-this.lastPlayAttempt>5e3&&(this.playAttempts=0),this.playVideo())},1e3)}changeURL(e){this.wsURL=e,this.refreshStream()}refreshStream(){const e=this.mode,t=this.media;this.ondisconnect(),this.stuckCount=0,this.lastTime=0,this.playAttempts=0,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.playCheckInterval&&(clearInterval(this.playCheckInterval),this.playCheckInterval=null),this.playTimeout&&(clearTimeout(this.playTimeout),this.playTimeout=null),this.mode=e,this.media=t,setTimeout(()=>{this.wsURL&&(this.src=this.wsURL)},1e3)}lastPlayAttempt=0;isPlayPending=!1;set state(e){this._state!==e&&(this._state=e,this.dispatchEvent(new CustomEvent("statechange",{detail:{state:e}})),console.log(`State changed to: ${e}`))}get state(){return this._state}async playVideo(){if(this.isPlayPending){console.log("Play already pending, skipping attempt");return}if(this.playAttempts>=this.MAX_PLAY_ATTEMPTS){console.log("Max play attempts reached, refreshing stream"),this.refreshStream();return}const e=Date.now();if(e-this.lastPlayAttempt<1e3){console.log("Too soon to retry play, waiting...");return}this.isPlayPending=!0,this.lastPlayAttempt=e,this.playAttempts++;try{this.playTimeout&&clearTimeout(this.playTimeout),this.video.muted=!0;const t=this.video.play();this.playTimeout=setTimeout(()=>{this.isPlayPending&&(console.log("Play attempt timed out, retrying..."),this.isPlayPending=!1,this.playVideo())},3e3),await t,clearTimeout(this.playTimeout),this.playTimeout=null,this.isPlayPending=!1,this.playAttempts=0,console.log("Playback started successfully"),this.state="PLAYING"}catch(t){clearTimeout(this.playTimeout),this.playTimeout=null,this.isPlayPending=!1,console.warn("Play attempt failed:",t),t.name==="AbortError"?setTimeout(()=>{this.playVideo()},1500):this.playAttempts>=this.MAX_PLAY_ATTEMPTS&&(console.log("Max play attempts reached after error, refreshing stream"),this.refreshStream())}}oninit(){if(super.oninit(),this.style.display="block",this.style.width="100%",this.style.height="100%",this.style.overflow="hidden",this.style.position="relative",this.video){this.video.style="",Object.assign(this.video.style,{display:"block",width:"100%",height:"100%",position:"absolute",top:"0",left:"0",objectFit:"fill",margin:"0",padding:"0"}),this.video.controls=!1,this.video.muted=!0,this.video.playsInline=!0,this.video.setAttribute("playsinline",""),this.video.setAttribute("webkit-playsinline","");let e=!1;this.video.addEventListener("loadedmetadata",()=>{e||(e=!0,this.playVideo())}),this.video.addEventListener("canplay",()=>{e||(e=!0,this.playVideo())}),this.startPlaybackMonitor(),this.video.addEventListener("pause",()=>{this.isPlayPending||(console.log("Video paused, attempting to resume..."),this.state="LOADING",this.playVideo())}),this.video.addEventListener("playing",()=>{e=!0,this.playAttempts=0,console.log("Playback started"),this.state="PLAYING"})}}onconnect(){return console.debug("stream.onconnect"),super.onconnect()}ondisconnect(){console.debug("stream.ondisconnect"),this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.playCheckInterval&&(clearInterval(this.playCheckInterval),this.playCheckInterval=null),super.ondisconnect()}onopen(){console.debug("stream.onopen");const e=super.onopen();return this.onmessage.stream=t=>{switch(console.debug("stream.onmessge",t),t.type){case"error":break;case"mse":case"hls":case"mp4":case"mjpeg":this.video&&this.video.paused&&this.playVideo();break}},e}onclose(){return console.debug("stream.onclose"),super.onclose()}onpcvideo(e){console.debug("stream.onpcvideo"),super.onpcvideo(e),this.pcState!==WebSocket.CLOSED&&this.video&&this.video.paused&&this.playVideo()}}customElements.define("video-stream",No);const Ul=async a=>{console.log("called her",a),hr.autoCancellation(!1);const e=await hr.collection("personCounter").getFullList({filter:`camera ?= "${a}"`,sort:"-created"});Ss.set(e[0]?.image)};var jl=P("<p>Fetching ...</p>"),Fl=P("<div>No Image</div>"),Bl=P('<img alt="Event" class="w-full h-auto max-h-[350px]" loading="lazy">'),Hl=P("<!> <div><!></div>",1),Vl=P("<!> <!>",1);function Gl(a,e){tr(e,!1);const t=Ir(),r=()=>ee(i(),"$imgDialogOpen",t),n=()=>ee(Ss,"$imageUrl",t);let o=g(e,"loading",8),i=g(e,"imgDialogOpen",8);const l=f=>{f||(Ss.set(""),i().set(!1))};er(),hn(a,{onOpenChange:l,get open(){return qr(),r()},set open(f){Zr(i(),f)},children:(f,h)=>{var p=Vl(),m=T(p);Un(m,{children:(x,w)=>{var L=ze(),S=T(L);It(S,e,"default",{},null),c(x,L)},$$slots:{default:!0}});var $=d(m,2);pn($,{class:"sm:max-w-[600px] z-[70] ",children:(x,w)=>{var L=Hl(),S=T(L);vs(S,{children:(ge,q)=>{jn(ge,{children:(Y,fe)=>{E();var J=D("Heat Map");c(Y,J)},$$slots:{default:!0}})},$$slots:{default:!0}});var U=d(S,2),G=v(U);{var I=ge=>{var q=jl();c(ge,q)},M=ge=>{var q=ze(),Y=T(q);{var fe=ve=>{var de=Fl();c(ve,de)},J=ve=>{var de=Bl();ie(()=>Er(de,"src","data:image/jpeg;base64,"+n())),oi(de),c(ve,de)};me(Y,ve=>{n()?ve(J,!1):ve(fe)},!0)}c(ge,q)};me(G,ge=>{o()?ge(I):ge(M,!1)})}u(U),c(x,L)},$$slots:{default:!0}}),c(f,p)},$$slots:{default:!0},$$legacy:!0}),rr()}var Xl=P('<div><video-stream></video-stream> <div class="absolute left-4 top-2 rounded-md bg-neutral-600 bg-opacity-50 transition-opacity duration-300 text-white flex items-center gap-x-2 text-nowrap p-1 svelte-xug3ph"><span class="size-2 bg-green-700 rounded-full svelte-xug3ph"></span> </div></div>',2),Wl=P('<div class="absolute top-2 right-2 rounded-md bg-black bg-opacity-50 opacity-0 transition-opacity duration-300 group-hover:opacity-100 svelte-xug3ph"><!></div>'),Yl=P('<div class="fixed top-5 right-5 rounded-md bg-black bg-opacity-50 transition-opacity duration-300 svelte-xug3ph"><!></div>'),Jl=P('<div class="absolute left-4 bottom-2 rounded-md bg-neutral-600 bg-opacity-50 transition-opacity duration-300 text-white flex items-center gap-x-2 w-10 svelte-xug3ph"><!> </div>'),Kl=P('<div class="absolute right-10 bottom-2 rounded-md transition-opacity duration-300 flex items-center gap-x-2 w-10 svelte-xug3ph"><span class="size-2 bg-green-700 rounded-full ml-2 svelte-xug3ph"></span> <!></div>'),ql=P('<div><video-stream></video-stream> <!> <!> <div class="absolute left-4 top-2 rounded-md bg-neutral-600 bg-opacity-50 transition-opacity duration-300 text-white flex items-center gap-x-2 text-nowrap p-1 svelte-xug3ph"><span class="size-2 bg-green-700 rounded-full svelte-xug3ph"></span> </div> <!> <!></div>',2);function Ao(a,e){tr(e,!1);const t=Ir(),r=()=>ee(ge,"$isFullScreen",t),n=()=>ee(ha,"$user",t),o=()=>ee(ua,"$cameras",t),i=()=>ee(fa,"$selectedCamera",t),l=()=>ee(hi,"$personCount",t),f=!0;let h=g(e,"url",8,""),p=g(e,"id",8,""),m=g(e,"mode",8,"mse"),$=g(e,"media",8,"video,audio"),x=g(e,"background",8,!1),w=g(e,"visibilityThreshold",8,0),L=g(e,"visibilityCheck",8,!0),S=g(e,"name",8),U=g(e,"isMarkRoi",8,!1),G=[],I=_e(),M=_e("LOADING");const ge=ct(!1);let q=_e(!1),Y=ct(!1);function fe(b){let k=document.getElementById(`grid-cell-${b}`);if(k?.requestFullscreen&&(k.requestFullscreen({navigationUI:"show"}),ge.set(!0),document.addEventListener("fullscreenchange",ve),!document.getElementById(b)?.parentNode.id.includes("_FULL"))){const O=document.createElement("video-stream");O.mode=m(),O.id=b+"_FULL",O.className="video-player rounded-md zoomable-area",O.src=h()+"_FULL",O.wsURL=h()+"_FULL",O.addEventListener("statechange",R=>{if(R.detail.state==="PLAYING"&&r()){console.log("Adding main ",R.detail.state);const F=document.getElementById(b);F&&(be(),F.parentNode?.insertBefore(O,F),console.log("REMOVING ",F),F.remove())}}),document.getElementById(`grid-cell-${b}`)?.appendChild(O)}}function J(){if(document.fullscreenElement&&(document.exitFullscreen(),ge.set(!1),!document.getElementById(p()+"_FULL")?.parentNode.id.includes("_FULL"))){const b=document.createElement("video-stream");b.mode=m(),b.id=p().replace("_FULL",""),b.className="video-player rounded-md zoomable-area",b.src=h().replace("_FULL",""),b.wsURL=h().replace("_FULL","");const k=document.getElementById(`${p()}_FULL`);k?.removeEventListener("statechange",()=>{}),console.log(k,b),b.addEventListener("statechange",O=>{O.detail.state==="PLAYING"&&(console.log("Adding main-sub ",O.detail.state),k&&(k.parentNode?.insertBefore(b,k),k.remove()))}),document.getElementById(p()+"_FULL").parentNode?.appendChild(b)}}function ve(){document.fullscreenElement||(ge.set(!1),document.removeEventListener("fullscreenchange",ve))}const de=async b=>{Y.set(!0),_(q,!0),Ht("User viewed heatmap",n()?.email||"",n()?.id||""),await Ul(b),_(q,!1)};ma(()=>{customElements.get("video-stream")||customElements.define("video-stream",No),s(I)&&(xa(I,s(I).mode=m()),xa(I,s(I).media=$()),xa(I,s(I).background=x()),xa(I,s(I).visibilityThreshold=w()),xa(I,s(I).visibilityCheck=L()),s(I).addEventListener("statechange",b=>{_(M,s(I).state)})),be()}),Is(()=>{s(I)&&s(I).ondisconnect()});function be(){G=document.querySelectorAll(".zoomable-area");let b=1;const k=.2,O=3,R=1;let F=0,H=0,A=!1,se=null,ue=null;G.forEach(oe=>{const Se=oe.querySelector("video");document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||(b=1,F=0,H=0,Se&&qn(Se,b,F,H))}),oe.addEventListener("wheel",te=>{te.preventDefault(),document.fullscreenElement&&(te.deltaY<0?b=Math.min(b+k,O):b=Math.max(b-k,R),Se&&qn(Se,b,F,H))}),oe.addEventListener("mousedown",te=>{document.fullscreenElement&&(A=!0,se=te.pageX-F,ue=te.pageY-H,oe.style.cursor="grabbing")}),oe.addEventListener("mousemove",te=>{if(A&&document.fullscreenElement&&(F=te.pageX-(se??0),H=te.pageY-(ue??0),Se)){const j=Se.getBoundingClientRect(),le=oe.getBoundingClientRect(),B=(j.width*b-le.width)/2,re=(j.height*b-le.height)/2,ke=le.width/2-j.width*b/2,y=le.height/2-j.height*b/2;F=Math.max(ke,Math.min(B,F)),H=Math.max(y,Math.min(re,H)),(F<-le.width/2||F>le.width/2)&&(F=Math.max(-le.width/2,Math.min(le.width/2,F))),(H<-le.height/2||H>le.height/2)&&(H=Math.max(-le.height/2,Math.min(le.height/2,H))),qn(Se,b,F,H)}}),oe.addEventListener("mouseup",()=>{A=!1,oe.style.cursor="grab"}),oe.addEventListener("mouseleave",()=>{A=!1,oe.style.cursor="grab"})})}let N=o().find(b=>b.id===i());St(()=>(s(I),Vt(h())),()=>{s(I)&&h()&&xa(I,s(I).src=h())}),jr(),er();var ne=ze(),Q=T(ne);{var $e=b=>{var k=Xl();const O=Ie(()=>Kt(Ot("zoomable-area h-[100%]",s(M)==="LOADING"?"camera-placeholder":"relative overflow-hidden group")));var R=v(k);ie(()=>wn(R,"class",Ot("video-player rounded-md",i()===p()&&"border-2 border-green-300"))),Ca(R,A=>_(I,A),()=>s(I));var F=d(R,2),H=d(v(F));u(F),u(k),ie(()=>{Er(k,"id",`grid-cell-${p()}`),wt(k,s(O),"svelte-xug3ph"),wn(R,"id",p()),Ye(H,` ${N?.name??""}`)}),we("click",R,()=>fa.set(i()===p()?"":p().replace(/_FULL$/,""))),we("dblclick",R,()=>{r()?(Ht("User exited fullscreen",n()?.email||"",n()?.id||""),J()):(Ht("User entered fullscreen",n()?.email||"",n()?.id||""),fe(p()))}),c(b,k)},Le=b=>{var k=ql();const O=Ie(()=>Kt(Ot("zoomable-area h-[100%]",s(M)==="LOADING"?"camera-placeholder":"relative overflow-hidden group")));var R=v(k);ie(()=>wn(R,"class",Ot("video-player rounded-md",i()===p().replace(/_FULL$/,"")&&"border-2 border-green-300"))),Ca(R,B=>_(I,B),()=>s(I));var F=d(R,2);{var H=B=>{var re=Wl(),ke=v(re);Tr(ke,{icon:"mdi:fullscreen",class:"text-white text-3xl cursor-pointer"}),u(re),we("click",re,()=>fe(p())),c(B,re)},A=B=>{var re=Yl(),ke=v(re);Tr(ke,{icon:"tabler:minimize",class:"text-white text-3xl cursor-pointer"}),u(re),we("click",re,()=>J()),c(B,re)};me(F,B=>{r()?B(A,!1):B(H)})}var se=d(F,2);{var ue=B=>{var re=Jl(),ke=v(re);Po(ke,{size:18});var y=d(ke);ie(()=>Ye(y,` ${l().find(pe=>pe.camera===p())?.count??""}`)),u(re),c(B,re)};me(se,B=>{l().find(re=>re.camera===p())?.count>0&&f&&B(ue)})}var oe=d(se,2),Se=d(v(oe));u(oe);var te=d(oe,2);{var j=B=>{var re=Kl(),ke=d(v(re),2);pr(ke,{variant:"ghost",class:"text-white",$$events:{click:()=>de(p())},children:(y,pe)=>{E();var Z=D("H");c(y,Z)},$$slots:{default:!0}}),u(re),c(B,re)};me(te,B=>{B(j)})}var le=d(te,2);Gl(le,{get loading(){return s(q)},imgDialogOpen:Y}),u(k),ie(()=>{Er(k,"id",`grid-cell-${p()}`),wt(k,s(O),"svelte-xug3ph"),wn(R,"id",p()),Ye(Se,` ${S()??""}`)}),we("click",R,()=>fa.set(i()===p()?"":p().replace(/_FULL$/,""))),we("dblclick",R,()=>{r()?J():fe(p())}),c(b,k)};me(Q,b=>{U()?b($e):b(Le,!1)})}c(a,ne),rr()}var Zl=P('<!> <span class="hidden sm:block">Previous</span>',1),Ql=P('<span class="hidden sm:block">Next</span> <!>',1),ec=P("<!> <!> <!>",1);function tc(a,e){tr(e,!1);const t=Ir(),r=()=>ee(p,"$isMobile",t),n=()=>ee(Ja,"$totalCameras",t),o=()=>ee(wa,"$selectedLayout",t),i=()=>ee(na,"$selectedNode",t),l=ct(1);let f=_e(0),h=_e();const p=ct(!1);ya.subscribe(S=>_(h,S));const m=S=>{const U=(S-1)*s(f),G=U+s(f);In.set(De(ua).slice(U,G))},$=()=>{l.update(S=>{const U=Math.ceil(De(Ja)/s(f));return S<U?(m(S+1),S+1):S})},x=()=>{l.update(S=>S>1?(m(S-1),S-1):S)},w=S=>{const U=Math.ceil(De(Ja)/s(f));S>=1&&S<=U&&(l.set(S),m(S))};ua.subscribe(S=>{const U=De(l),G=Math.ceil(S.length/s(f));Ja.set(S.length),i()?l.set(1):U<G||U>G&&G>0?l.set(G):G===0&&l.set(1),m(De(l))}),wa.subscribe(()=>{l.set(1)}),ma(()=>{const S=()=>{p.set(window.innerWidth<=768)};return S(),window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S)}}),St(()=>(r(),n(),s(h),o()),()=>{if(r())_(f,n());else if(s(h)&&s(h).columns>0&&s(h).rows>0)_(f,s(h).columns*s(h).rows);else if(o()<7)if(o()===0)switch(n()){case 1:_(f,1);break;case 2:_(f,2);break;case 3:_(f,3);break;case 4:_(f,4);break;case 5:_(f,4);break;case 6:_(f,6);break;case 7:_(f,6);break;case 8:_(f,9);break;case 9:_(f,9);break;default:_(f,9);break}else _(f,(o()>0?o():3)**2||parseInt(localStorage.getItem("selectedLayout")||"3")**2);else o()===7?_(f,6):o()===8?_(f,8):o()===9?_(f,13):o()===10&&_(f,10)}),St(()=>s(f),()=>{De(ua).length>0&&s(f)&&m(De(l))}),jr(),er();var L=Ie(()=>s(f)||9);gi(a,{get count(){return n()},get perPage(){return s(L)},siblingCount:1,class:"mt-0",children:Ha,$$slots:{default:(S,U)=>{const G=Ie(()=>U.pages);bi(S,{children:(I,M)=>{var ge=ec(),q=T(ge);Sn(q,{children:(J,ve)=>{_i(J,{$$events:{click:()=>x()},children:(de,be)=>{var N=Zl(),ne=T(N);wi(ne,{class:"h-4 w-4"}),E(2),c(de,N)},$$slots:{default:!0}})},$$slots:{default:!0}});var Y=d(q,2);Dr(Y,1,()=>s(G),J=>J.key,(J,ve)=>{var de=ze(),be=T(de);{var N=Q=>{Sn(Q,{children:($e,Le)=>{Ll($e,{})},$$slots:{default:!0}})},ne=Q=>{Sn(Q,{children:($e,Le)=>{var b=Ie(()=>De(l)===s(ve).value);Il($e,{get page(){return s(ve)},get isActive(){return s(b)},$$events:{click:()=>w(s(ve).value)},children:(k,O)=>{E();var R=D();ie(()=>Ye(R,s(ve).value)),c(k,R)},$$slots:{default:!0}})},$$slots:{default:!0}})};me(be,Q=>{s(ve).type==="ellipsis"?Q(N):Q(ne,!1)})}c(J,de)});var fe=d(Y,2);Sn(fe,{children:(J,ve)=>{xi(J,{$$events:{click:()=>$()},children:(de,be)=>{var N=Ql(),ne=d(T(N),2);Si(ne,{class:"h-4 w-4"}),c(de,N)},$$slots:{default:!0}})},$$slots:{default:!0}}),c(I,ge)},$$slots:{default:!0}})}}}),rr()}var rc=P(`<div class="
        flex
        flex-col
        items-start
        justify-center h-screen w-screen
        dark:bg-dark-add-node
        bg-no-repeat
        pl-32
        bg-light-add-node
        bg-contain
        bg-right
        dark:bg-cover"><form method="POST" class="flex flex-col"><label for="nodeName" class="font-medium text-start self-start mb-2">Node name</label> <input name="name" required class="w-[480px] text-black dark:text-white dark:bg-background bg-transparent font-medium px-4 h-[48px] rounded-md border-2 border-solid border-[#015a62] dark:border-none mb-6"> <button class="flex max-w-[160px] hover:bg-[#015a62]/[.9] dark:bg-transparent bg-[#015a62] border-2 border-white border-solid dark:hover:bg-[white] dark:hover:text-[#015a62] text-md text-white items-center justify-center py-2 px-6 font-medium rounded-lg" type="submit">Add Store</button></form></div>`),ac=P('<button class="absolute bottom-4 left-4"><!></button>'),nc=P('<div class="absolute bottom-3 left-4 flex justify-between items-center py-3 gap-2"><button><!></button> <button><!></button></div>'),sc=P('<div class="relative"><!> <canvas class="absolute top-0 left-0 w-full h-full p-3" style="pointer-events: none;"></canvas> <!> <!></div>'),oc=P('<div class="flex flex-col flex-grow mt-4"><div class="grid grid-cols-1 gap-4 p-4 w-full lg:grid-cols-4 camera-grid pb-[20vh] lg:pb-2"><!></div> <!></div>');function ic(a,e){tr(e,!1);const t=Ir(),r=()=>ee(x,"$isMobile",t),n=()=>ee(ua,"$cameras",t),o=()=>ee(wa,"$selectedLayout",t),i=()=>ee(ha,"$user",t),l=()=>ee(In,"$displayCameras",t),f=()=>ee(zs,"$nodes",t),h=()=>ee(w,"$priorityIndex",t),p=()=>ee(L,"$secondPriIndex",t),m=()=>ee(Ja,"$totalCameras",t);let $=g(e,"STREAM_URL",8);const x=ct(!1),w=ct(0),L=ct(1);let S=_e(),U,G=_e(),I=_e("");const M=new bo("https://vms.lenscorp.cloud"),ge={6:"grid-template-columns: repeat(6, 1fr); grid-template-rows: repeat(6, 1fr);",5:"grid-template-columns: repeat(5, 1fr); grid-template-rows: repeat(5, 1fr);",4:"grid-template-columns: repeat(4, 1fr); grid-template-rows: repeat(4, 1fr);",3:"grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr);",2:"grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(2, 1fr);",1:"grid-template-columns: repeat(1, 1fr); grid-template-rows: repeat(1, 1fr);",7:`
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      grid-template-areas:
        "bigCell1 bigCell1 ."
        "bigCell1 bigCell1 ."
        ". . .";
    `,8:`
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(4, 1fr);
      grid-template-areas:
        "bigCell1 bigCell1 bigCell1 ."
        "bigCell1 bigCell1 bigCell1 ."
        "bigCell1 bigCell1 bigCell1 ."
        ". . . .";
    `,9:`
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(4, 1fr);
      grid-template-areas:
        "bigCell1 bigCell1 . ."
        "bigCell1 bigCell1 . ."
        ". . . ."
        ". . . .";
    `,10:`
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(4, 1fr);
      grid-template-areas:
        "bigCell1 bigCell1 bigCell2 bigCell2"
        "bigCell1 bigCell1 bigCell2 bigCell2"
        ". . . ."
        ". . . .";
    `};function q(N,ne){if(r())return`grid-template-columns: repeat(1, 1fr); grid-template-rows: repeat(${N}, 150px);`;if(U&&U.rows>0&&U.columns>0)return`grid-template-columns: repeat(${U.columns}, 1fr); grid-template-rows: repeat(${U.rows}, 1fr);`;if(ne>0&&ne<11)return ge[ne];if(ne===0)switch(N){case 1:return"grid-template-columns: repeat(1, 1fr); grid-template-rows: repeat(1, 1fr);";case 2:return"grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(2, 1fr);";case 3:return"grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(2, 1fr);";case 4:return"grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(2, 1fr);";case 5:return"grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(3, 1fr);";case 6:return"grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(3, 1fr);";case 7:return"grid-template-columns: repeat(2, 1fr); grid-template-rows: repeat(3, 1fr);";case 8:return"grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr);";case 9:return"grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr);";default:return"grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(3, 1fr);"}}ya.subscribe(N=>{N&&N.rows>0&&N.columns>0?U=N:U={},_(G,q(n().length,o()))});const Y=async()=>{let N,ne;const Q={name:s(I),session:i().session[0]};window.api?(N=await M.collection("node").create(Q),N?ne=hr.collection("node").create(N):ne=await hr.collection("node").create(Q),N?na.set(N.id):ne&&na.set(ne.id)):(N=await hr.collection("node").create(Q),na.set(N.id))};ma(()=>{const N=()=>{x.set(window.innerWidth<=768)};return N(),window.addEventListener("resize",N),()=>{window.removeEventListener("resize",N)}}),In.subscribe(()=>w.set(0));function fe(N,ne,Q){if(N){const $e=N.getContext("2d");$e.clearRect(0,0,N.width,N.height),$e.beginPath();const Le=N.width,b=N.height;ne?.length>0&&ne?.forEach(k=>{const O=k?.x1/100*Le,R=k?.x2/100*Le,F=k?.y1/100*b,H=k?.y2/100*b;$e.moveTo(O,F),$e.lineTo(R,H)}),Q?.length>0&&Q?.forEach(k=>{const O=k?.x/100*Le,R=k?.y/100*b,F=k?.w/100*Le,H=k?.h/100*b,A=(k?.angle||0)*(Math.PI/180);$e.save(),$e.translate(O+F/2,R+H/2),$e.rotate(A),$e.rect(-F/2,-H/2,F,H),$e.restore()}),$e.strokeStyle="blue",$e.lineWidth=1,$e.stroke()}}function J(){setTimeout(()=>{l().forEach((N,ne)=>{let Q=document.getElementById(`stream-canvas-${ne}`);N?.isRoiEnabled&&fe(Q,N?.roiCanvasCoordinates,N?.roiRectangleCoordinates)})},2e3)}In?.subscribe(N=>{J()}),St(()=>(n(),o()),()=>{_(G,q(n().length,o()))}),St(()=>s(S),()=>{go.set(s(S))}),jr(),er();var ve=ze(),de=T(ve);{var be=N=>{var ne=ze(),Q=T(ne);{var $e=b=>{var k=rc(),O=v(k),R=d(v(O),2);fn(R);var F=d(R,2);u(O),u(k),vn(R,()=>s(I),H=>_(I,H)),we("click",F,Y),we("submit",O,H=>H.preventDefault()),c(b,k)},Le=b=>{var k=oc(),O=v(k),R=v(O);li(R,l,A=>{var se=ze(),ue=T(se);Dr(ue,1,l,Nr,(oe,Se,te)=>{var j=sc(),le=v(j),B=Ie(()=>s(Se)?.name),re=Ie(()=>s(Se)?.streamType!=="Default"?s(Se)?.streamType==="Mainstream"?`${s(Se)?.id}_FULL`:`${s(Se)?.id}`:l().length>4?`${s(Se)?.id}`:`${s(Se)?.id}_FULL`),ke=Ie(()=>s(Se)?.streamType!=="Default"?s(Se)?.streamType==="Mainstream"?`${$()}/api/ws?src=${s(Se)?.id}_FULL`:`${$()}/api/ws?src=${s(Se)?.id}`:l().length>4?`${$()}/api/ws?src=${s(Se)?.id}`:`${$()}/api/ws?src=${s(Se)?.id}_FULL`);Ao(le,{get name(){return s(B)},get id(){return s(re)},get url(){return s(ke)}});var y=d(le,2);Er(y,"id",`stream-canvas-${te}`);var pe=d(y,2);{var Z=ae=>{var Ne=ac(),xt=v(Ne);ts(xt,{size:16}),u(Ne),we("click",Ne,()=>{w.set(te)}),c(ae,Ne)};me(pe,ae=>{te!==h()&&o()>6&&o()<10&&ae(Z)})}var V=d(pe,2);{var ye=ae=>{var Ne=nc(),xt=v(Ne),Je=v(xt);ts(Je,{size:16}),u(xt);var xe=d(xt,2),st=v(xe);ts(st,{size:16,class:"scale-x-[-1]"}),u(xe),u(Ne),we("click",xt,()=>{w.set(te)}),we("click",xe,()=>{L.set(te)}),c(ae,Ne)};me(V,ae=>{te!==h()&&te!==p()&&o()===10&&ae(ye)})}u(j),ie(()=>Er(j,"style",o()>6&&o()<10?te===h()&&"grid-area: bigCell1;":o()===10?te===h()?"grid-area: bigCell1;":te===p()&&"grid-area:bigCell2;":"")),c(oe,j)}),c(A,se)}),u(O),Ca(O,A=>_(S,A),()=>s(S));var F=d(O,2);{var H=A=>{tc(A,{})};me(F,A=>{m()>0&&A(H)})}u(k),ie(()=>Er(O,"style",s(G)+"height: calc(100vh - 7.5rem); overflow-y: auto;")),c(b,k)};me(Q,b=>{f().length===0?b($e):b(Le,!1)})}c(N,ne)};me(de,N=>{f()&&i()&&N(be)})}c(a,ve),rr()}const ja={getItem:a=>(Zs(ja),ja.getItem(a)),setItem:(a,e)=>{Zs(ja),ja.setItem(a,e)}},lc={id:null,onLayout:null,keyboardResizeBy:null,autoSaveId:null,direction:"horizontal",storage:ja};function cc(a){const e={...lc,...Io(a)},t=bl(e),{autoSaveId:r,direction:n,keyboardResizeBy:o,storage:i,onLayout:l}=t,f=ct(Ns()),h=ct(null),p=ct([]),m=ct([]),$=ct(!1),x=ct({}),w=ct(new Map),L=ct(0);rs([f,p,m],([b,k,O])=>dc({groupId:b,layout:k,paneDataArray:O})),ma(()=>Q()),rs([r,p,i],([b,k,O])=>{b&&kl({autoSaveId:b,layout:k,storage:O,paneDataArrayStore:m,paneSizeBeforeCollapseStore:w})});function S(b){const k=De(p),O=De(m);if(!b.constraints.collapsible)return;const R=O.map(te=>te.constraints),{collapsedSize:F=0,paneSize:H,pivotIndices:A}=Oa(O,b,k);if(Wt(H!=null),H===F)return;w.update(te=>(te.set(b.id,H),te));const ue=Ma(O,b)===O.length-1?H-F:F-H,oe=Xa({delta:ue,layout:k,paneConstraints:R,pivotIndices:A,trigger:"imperative-api"});if(Ga(k,oe))return;p.set(oe);const Se=De(l);Se&&Se(oe),Wa(O,oe,De(x))}function U(b){const k=De(p),O=De(m),{paneSize:R}=Oa(O,b,k);return R}const G=Ka([m,p,h],([b,k,O])=>(R,F)=>{const H=Ma(b,R);return yl({defaultSize:F,dragState:O,layout:k,paneData:b,paneIndex:H})});function I(b){const k=De(m),O=De(p),{collapsedSize:R=0,collapsible:F,paneSize:H}=Oa(k,b,O);return!F||H>R}function M(b){m.update(k=>{const O=[...k,b];return O.sort((R,F)=>{const H=R.order,A=F.order;return H==null&&A==null?0:H==null?-1:A==null?1:H-A}),O}),$.set(!0)}rs([$],([b])=>{if(!b)return;$.set(!1);const k=De(r),O=De(i),R=De(p),F=De(m);let H=null;if(k){const ue=Sl(k,F,O);ue&&(w.set(new Map(Object.entries(ue.expandToSizes))),H=ue.layout)}H==null&&(H=vc({paneDataArray:F}));const A=hc({layout:H,paneConstraints:F.map(ue=>ue.constraints)});if(Ga(R,A))return;p.set(A);const se=De(l);se&&se(A),Wa(F,A,De(x))});function ge(b){return function(O){O.preventDefault();const R=De(n),F=De(h),H=De(f),A=De(o),se=De(p),ue=De(m),{initialLayout:oe}=F??{},Se=ao(H,b);let te=pc(O,b,R,F,A);if(te===0)return;const j=R==="horizontal";document.dir==="rtl"&&j&&(te=-te);const le=ue.map(ke=>ke.constraints),B=Xa({delta:te,layout:oe??se,paneConstraints:le,pivotIndices:Se,trigger:zo(O)?"keyboard":"mouse-or-touch"}),re=!Ga(se,B);if((Lo(O)||Oo(O))&&De(L)!=te&&(L.set(te),as(re?j?"horizontal":"vertical":j?te<0?"horizontal-min":"horizontal-max":te<0?"vertical-min":"vertical-max")),re){p.set(B);const ke=De(l);ke&&ke(B),Wa(ue,B,De(x))}}}function q(b,k){const O=De(p),R=De(m),F=R.map(te=>te.constraints),{paneSize:H,pivotIndices:A}=Oa(R,b,O);Wt(H!=null);const ue=Ma(R,b)===R.length-1?H-k:k-H,oe=Xa({delta:ue,layout:O,paneConstraints:F,pivotIndices:A,trigger:"imperative-api"});if(Ga(O,oe))return;p.set(oe),De(l)?.(oe),Wa(R,oe,De(x))}function Y(b,k){const O=De(n),R=De(p),F=Ms(b);Wt(F);const H=Ro(O,k);h.set({dragHandleId:b,dragHandleRect:F.getBoundingClientRect(),initialCursorPosition:H,initialLayout:R})}function fe(){xl(),h.set(null)}function J(b){const k=De(m),O=Ma(k,b);O<0||m.update(R=>(R.splice(O,1),x.update(F=>(delete F[b.id],F)),$.set(!0),R))}function ve(b){const k=De(m),O=De(p),{collapsedSize:R=0,collapsible:F,paneSize:H}=Oa(k,b,O);return F===!0&&H===R}function de(b){const k=De(p),O=De(m);if(!b.constraints.collapsible)return;const R=O.map(B=>B.constraints),{collapsedSize:F=0,paneSize:H,minSize:A=0,pivotIndices:se}=Oa(O,b,k);if(H!==F)return;const ue=De(w).get(b.id),oe=ue!=null&&ue>=A?ue:A,te=Ma(O,b)===O.length-1?H-oe:oe-H,j=Xa({delta:te,layout:k,paneConstraints:R,pivotIndices:se,trigger:"imperative-api"});if(Ga(k,j))return;p.set(j),De(l)?.(j),Wa(O,j,De(x))}const be=Ka([n],([b])=>Os({display:"flex","flex-direction":b==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"})),N=Ka([n,f],([b,k])=>({"data-pane-group":"","data-direction":b,"data-pane-group-id":k})),ne=Ka([be,N],([b,k])=>({style:b,...k}));function Q(){const b=De(f),O=xn(b).map(R=>{const F=R.getAttribute("data-pane-resizer-id");if(!F)return ro;const[H,A]=fc(b,F,De(m));if(H==null||A==null)return ro;const ue=Ta(R,"keydown",oe=>{if(oe.defaultPrevented||oe.key!=="Enter")return;oe.preventDefault();const Se=De(m),te=Se.findIndex(Z=>Z.id===H);if(te<0)return;const j=Se[te];Wt(j);const le=De(p),B=le[te],{collapsedSize:re=0,collapsible:ke,minSize:y=0}=j.constraints;if(!(B!=null&&ke))return;const pe=Xa({delta:Wr(B,re)?y-B:re-B,layout:le,paneConstraints:Se.map(Z=>Z.constraints),pivotIndices:ao(b,F),trigger:"keyboard"});le!==pe&&p.set(pe)});return()=>{ue()}});return()=>{O.forEach(R=>R())}}function $e(b){p.set(b)}function Le(){return De(p)}return{methods:{collapsePane:S,expandPane:de,getSize:U,getPaneStyle:G,isCollapsed:ve,isExpanded:I,registerPane:M,registerResizeHandle:ge,resizePane:q,startDragging:Y,stopDragging:fe,unregisterPane:J,setLayout:$e,getLayout:Le},states:{direction:n,dragState:h,groupId:f,paneGroupAttrs:ne,paneGroupSelectors:N,paneGroupStyle:be,layout:p},options:t}}function dc({groupId:a,layout:e,paneDataArray:t}){const r=xn(a);for(let n=0;n<t.length-1;n++){const{valueMax:o,valueMin:i,valueNow:l}=$l({layout:e,panesArray:t,pivotIndices:[n,n+1]}),f=r[n];if(Dl(f)){const h=t[n];f.setAttribute("aria-controls",h.id),f.setAttribute("aria-valuemax",""+Math.round(o)),f.setAttribute("aria-valuemin",""+Math.round(i)),f.setAttribute("aria-valuenow",l!=null?""+Math.round(l):"")}}return()=>{r.forEach(n=>{n.removeAttribute("aria-controls"),n.removeAttribute("aria-valuemax"),n.removeAttribute("aria-valuemin"),n.removeAttribute("aria-valuenow")})}}function xn(a){return _n?Array.from(document.querySelectorAll(`[data-pane-resizer-id][data-pane-group-id="${a}"]`)):[]}function uc(a){if(!_n)return null;const e=document.querySelector(`[data-pane-group][data-pane-group-id="${a}"]`);return e||null}function ro(){}function fc(a,e,t){const r=Ms(e),n=xn(a),o=r?n.indexOf(r):-1,i=t[o]?.id??null,l=t[o+1]?.id??null;return[i,l]}function Ms(a){if(!_n)return null;const e=document.querySelector(`[data-pane-resizer-id="${a}"]`);return e||null}function Mo(a,e){return _n?xn(a).findIndex(n=>n.getAttribute("data-pane-resizer-id")===e)??null:null}function ao(a,e){const t=Mo(a,e);return t!=null?[t,t+1]:[-1,-1]}function Oa(a,e,t){const r=a.map(h=>h.constraints),n=Ma(a,e),o=r[n],l=n===a.length-1?[n-1,n]:[n,n+1],f=t[n];return{...o,paneSize:f,pivotIndices:l}}function Ma(a,e){return a.findIndex(t=>t.id===e.id)}function Wa(a,e,t){e.forEach((r,n)=>{const o=a[n];Wt(o);const{callbacks:i,constraints:l,id:f}=o,{collapsedSize:h=0,collapsible:p}=l,m=t[f];if(!(m==null||r!==m))return;t[f]=r;const{onCollapse:$,onExpand:x,onResize:w}=i;w?.(r,m),p&&($||x)&&(x&&(m==null||m===h)&&r!==h&&x(),$&&(m==null||m!==h)&&r===h&&$())})}function vc({paneDataArray:a}){const e=Array(a.length),t=a.map(o=>o.constraints);let r=0,n=100;for(let o=0;o<a.length;o++){const i=t[o];Wt(i);const{defaultSize:l}=i;l!=null&&(r++,e[o]=l,n-=l)}for(let o=0;o<a.length;o++){const i=t[o];Wt(i);const{defaultSize:l}=i;if(l!=null)continue;const f=a.length-r,h=n/f;r++,e[o]=h,n-=h}return e}function hc({layout:a,paneConstraints:e}){const t=[...a],r=t.reduce((o,i)=>o+i,0);if(t.length!==e.length)throw Error(`Invalid ${e.length} pane layout: ${t.map(o=>`${o}%`).join(", ")}`);if(!Wr(r,100))for(let o=0;o<e.length;o++){const i=t[o];Wt(i!=null);const l=100/r*i;t[o]=l}let n=0;for(let o=0;o<e.length;o++){const i=t[o];Wt(i!=null);const l=Ua({paneConstraints:e,paneIndex:o,initialSize:i});i!=l&&(n+=i-l,t[o]=l)}if(!Wr(n,0))for(let o=0;o<e.length;o++){const i=t[o];Wt(i!=null);const l=i+n,f=Ua({paneConstraints:e,paneIndex:o,initialSize:l});if(i!==f&&(n-=f-i,t[o]=f,Wr(n,0)))break}return t}function pc(a,e,t,r,n){if(zo(a)){const o=t==="horizontal";let i=0;a.shiftKey?i=100:n!=null?i=n:i=10;let l=0;switch(a.key){case"ArrowDown":l=o?0:i;break;case"ArrowLeft":l=o?-i:0;break;case"ArrowRight":l=o?i:0;break;case"ArrowUp":l=o?0:-i;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return r==null?0:mc(a,e,t,r)}function mc(a,e,t,r){const n=t==="horizontal",o=Ms(e);Wt(o);const i=o.getAttribute("data-pane-group-id");Wt(i);const{initialCursorPosition:l}=r,f=Ro(t,a),h=uc(i);Wt(h);const p=h.getBoundingClientRect(),m=n?p.width:p.height;return(f-l)/m*100}function Ro(a,e){const t=a==="horizontal";if(Lo(e))return t?e.clientX:e.clientY;if(Oo(e)){const r=e.touches[0];return Wt(r),t?r.screenX:r.screenY}else throw Error(`Unsupported event type "${e.type}"`)}const Cs=Symbol("PF_GROUP_CTX");function gc(a){const e=cc(Io(a)),t=_l(e.options),r={...e,updateOption:t};return ai(Cs,r),r}function Uo(a){if(!ni(Cs))throw new Error(`${a} components must be rendered with a <PaneGroup> container`);return si(Cs)}var bc=P("<div><!></div>");function _c(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]),r=Et(t,["autoSaveId","direction","id","keyboardResizeBy","onLayoutChange","storage","el","paneGroup","style"]);tr(e,!1);const n=Ir(),o=()=>ee(M,"$groupId",n),i=()=>ee(G,"$paneGroupStyle",n),l=()=>ee(I,"$paneGroupSelectors",n),f=_e();let h=g(e,"autoSaveId",8,null),p=g(e,"direction",8),m=g(e,"id",8,null),$=g(e,"keyboardResizeBy",8,null),x=g(e,"onLayoutChange",8,null),w=g(e,"storage",8,ja),L=g(e,"el",28,()=>{}),S=g(e,"paneGroup",28,()=>{}),U=g(e,"style",24,()=>{});const{states:{paneGroupStyle:G,paneGroupSelectors:I,groupId:M},methods:{setLayout:ge,getLayout:q},updateOption:Y}=gc({autoSaveId:h(),direction:p(),id:m(),keyboardResizeBy:$(),onLayout:x(),storage:w()});S({getLayout:q,setLayout:ge,getId:()=>o()}),St(()=>Vt(h()),()=>{Y("autoSaveId",h())}),St(()=>Vt(p()),()=>{Y("direction",p())}),St(()=>Vt(m()),()=>{Y("id",m())}),St(()=>Vt($()),()=>{Y("keyboardResizeBy",$())}),St(()=>Vt(x()),()=>{Y("onLayout",x())}),St(()=>Vt(w()),()=>{Y("storage",w())}),St(()=>(i(),Vt(U())),()=>{_(f,i()+(U()??""))}),jr(),er();var fe=bc();let J;var ve=v(fe);It(ve,e,"default",{},null),u(fe),Ca(fe,de=>L(de),()=>L()),ie(()=>J=gn(fe,J,{id:o(),...l(),style:s(f),...r})),c(a,fe),rr()}var xc=P("<div><!></div>");function no(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]),r=Et(t,["collapsedSize","collapsible","defaultSize","maxSize","minSize","onCollapse","onExpand","onResize","order","el","pane","id","style"]);tr(e,!1);const n=Ir(),o=()=>ee(q,"$getPaneStyle",n),i=()=>ee(Q,"$groupId",n),l=_e(),f=_e();let h=g(e,"collapsedSize",24,()=>{}),p=g(e,"collapsible",24,()=>{}),m=g(e,"defaultSize",24,()=>{}),$=g(e,"maxSize",24,()=>{}),x=g(e,"minSize",24,()=>{}),w=g(e,"onCollapse",24,()=>{}),L=g(e,"onExpand",24,()=>{}),S=g(e,"onResize",24,()=>{}),U=g(e,"order",24,()=>{}),G=g(e,"el",28,()=>{}),I=g(e,"pane",28,()=>{}),M=g(e,"id",24,()=>{}),ge=g(e,"style",24,()=>{});const{methods:{getPaneStyle:q,registerPane:Y,unregisterPane:fe,collapsePane:J,expandPane:ve,getSize:de,isCollapsed:be,isExpanded:N,resizePane:ne},states:{groupId:Q}}=Uo("Pane"),$e=Ns(M());let Le=_e();I({collapse:()=>{J(s(Le))},expand:()=>ve(s(Le)),getSize:()=>de(s(Le)),isCollapsed:()=>be(s(Le)),isExpanded:()=>N(s(Le)),resize:R=>ne(s(Le),R),getId:()=>$e}),ma(()=>(Y(s(Le)),()=>{fe(s(Le))})),St(()=>(Vt(w()),Vt(L()),Vt(S()),Vt(h()),Vt(p()),Vt(m()),Vt($()),Vt(x()),Vt(M()),Vt(U())),()=>{_(Le,{callbacks:{onCollapse:w(),onExpand:L(),onResize:S()},constraints:{collapsedSize:h(),collapsible:p(),defaultSize:m(),maxSize:$(),minSize:x()},id:$e,idIsFromProps:M()!==void 0,order:U()})}),St(()=>(o(),s(Le),Vt(m()),Vt(ge())),()=>{_(l,o()(s(Le),m())+(ge()??""))}),St(()=>i(),()=>{_(f,{"data-pane":"","data-pane-id":$e,"data-pane-group-id":i()})}),jr(),er();var b=xc();let k;var O=v(b);It(O,e,"default",{},null),u(b),Ca(b,R=>G(R),()=>G()),ie(()=>k=gn(b,k,{style:s(l),...s(f),...r})),c(a,b),rr()}function yc(a,e){let t=()=>{};function r(n){t();const{disabled:o,resizeHandler:i,isDragging:l,stopDragging:f,onDragging:h=void 0}=n;if(o||i===null||!l)return;const p=x=>{i(x)},m=x=>{i(x)},$=()=>{a.blur(),f(),h&&h(!1)};t=El(Ta(document.body,"contextmenu",$),Ta(document.body,"mousemove",p),Ta(document.body,"touchmove",p,{passive:!1}),Ta(document.body,"mouseleave",m),Ta(window,"mouseup",$),Ta(window,"touchend",$))}return r(e),{update:r,onDestroy(){t()}}}var $c=P("<div><!></div>");function wc(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]),r=Et(t,["disabled","onDraggingChange","tabIndex","el","id","style"]);tr(e,!1);const n=Ir(),o=()=>ee(ge,"$dragState",n),i=()=>ee(q,"$groupId",n),l=()=>ee(M,"$direction",n),f=_e(),h=_e(),p=_e();let m=g(e,"disabled",8,!1),$=g(e,"onDraggingChange",24,()=>{}),x=g(e,"tabIndex",8,0),w=g(e,"el",12,null),L=g(e,"id",24,()=>{}),S=g(e,"style",24,()=>{});const{methods:{registerResizeHandle:U,startDragging:G,stopDragging:I},states:{direction:M,dragState:ge,groupId:q}}=Uo("PaneResizer"),Y=Ns(L());let fe=_e(!1),J=_e(null);function ve(){const Q=w();Q&&(Q.blur(),I(),$()?.(!1))}ma(()=>{m()?_(J,null):_(J,U(Y))});function de(Q){if(m()||!s(J)||Q.defaultPrevented)return;if(["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home"].includes(Q.key)){Q.preventDefault(),s(J)(Q);return}if(Q.key!=="F6")return;Q.preventDefault();const Le=xn(i()),b=Mo(i(),Y);if(b===null)return;const k=Q.shiftKey?b>0?b-1:Le.length-1:b+1<Le.length?b+1:0;Le[k].focus()}St(()=>o(),()=>{_(f,o()?.dragHandleId===Y)}),St(()=>Vt(m()),()=>{m()?_(J,null):_(J,U(Y))}),St(()=>(l(),Vt(S())),()=>{_(h,Os({cursor:ko(l()),"touch-action":"none","user-select":"none","-webkit-user-select":"none","-webkit-touch-callout":"none"})+S())}),St(()=>(l(),i(),s(f),s(fe),Vt(m())),()=>{_(p,{"data-direction":l(),"data-pane-group-id":i(),"data-active":s(f)?"pointer":s(fe)?"keyboard":void 0,"data-enabled":!m(),"data-pane-resizer-id":Y,"data-pane-resizer":""})}),jr(),er();var be=$c();let N;var ne=v(be);It(ne,e,"default",{},null),u(be),Ca(be,Q=>w(Q),()=>w()),bn(be,(Q,$e)=>yc?.(Q,$e),()=>({disabled:m(),resizeHandler:s(J),stopDragging:I,isDragging:s(f),onDragging:$()})),da(()=>we("keydown",be,de)),da(()=>we("blur",be,()=>_(fe,!1))),da(()=>we("focus",be,()=>_(fe,!0))),da(()=>we("mousedown",be,Q=>{Q.preventDefault(),G(Y,Q),$()?.(!0)})),da(()=>we("mouseup",be,ve)),da(()=>we("touchcancel",be,ve)),da(()=>we("touchend",be,ve)),da(()=>we("touchstart",be,Q=>{Q.preventDefault(),G(Y,Q),$()?.(!0)})),ie(()=>N=gn(be,N,{role:"separator",style:s(h),tabindex:x(),...s(p),...r})),c(a,be),rr()}var Sc=P('<div class="bg-border z-10 flex h-4 w-3 items-center justify-center rounded-sm border"><!></div>');function Pc(a,e){tr(e,!1);let t=g(e,"withHandle",8,!1),r=g(e,"el",28,()=>{}),n=g(e,"class",24,()=>{});er();var o=Ie(()=>Ot("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-offset-1 data-[direction=vertical]:h-px data-[direction=vertical]:w-full data-[direction=vertical]:after:left-0 data-[direction=vertical]:after:h-1 data-[direction=vertical]:after:w-full data-[direction=vertical]:after:-translate-y-1/2 data-[direction=vertical]:after:translate-x-0 [&[data-direction=vertical]>div]:rotate-90",n()));wc(a,{get class(){return s(o)},get el(){return r()},set el(i){r(i)},children:(i,l)=>{var f=ze(),h=T(f);{var p=m=>{var $=Sc(),x=v($);ol(x,{class:"h-2.5 w-2.5"}),u($),c(m,$)};me(h,m=>{t()&&m(p)})}c(i,f)},$$slots:{default:!0},$$legacy:!0}),rr()}function Cc(a,e){const t=Et(e,["children","$$slots","$$events","$$legacy"]),r=Et(t,["class","direction","paneGroup","el"]);tr(e,!1);let n=g(e,"class",24,()=>{}),o=g(e,"direction",8),i=g(e,"paneGroup",28,()=>{}),l=g(e,"el",28,()=>{});er();var f=Ie(()=>Ot("flex h-full w-full data-[direction=vertical]:flex-col",n()));_c(a,ir({get direction(){return o()},get class(){return s(f)}},()=>r,{get el(){return l()},set el(h){l(h)},get paneGroup(){return i()},set paneGroup(h){i(h)},children:(h,p)=>{var m=ze(),$=T(m);It($,e,"default",{},null),c(h,m)},$$slots:{default:!0},$$legacy:!0})),rr()}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function so(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(a);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,r)}return t}function oa(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?so(Object(t),!0).forEach(function(r){kc(a,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):so(Object(t)).forEach(function(r){Object.defineProperty(a,r,Object.getOwnPropertyDescriptor(t,r))})}return a}function Ln(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ln=function(e){return typeof e}:Ln=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(a)}function kc(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function pa(){return pa=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=t[r])}return a},pa.apply(this,arguments)}function Ec(a,e){if(a==null)return{};var t={},r=Object.keys(a),n,o;for(o=0;o<r.length;o++)n=r[o],!(e.indexOf(n)>=0)&&(t[n]=a[n]);return t}function Tc(a,e){if(a==null)return{};var t=Ec(a,e),r,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);for(n=0;n<o.length;n++)r=o[n],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(a,r)&&(t[r]=a[r])}return t}var Dc="1.15.6";function va(a){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(a)}var ga=va(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),yn=va(/Edge/i),oo=va(/firefox/i),on=va(/safari/i)&&!va(/chrome/i)&&!va(/android/i),Rs=va(/iP(ad|od|hone)/i),jo=va(/chrome/i)&&va(/android/i),Fo={capture:!1,passive:!1};function yt(a,e,t){a.addEventListener(e,t,!ga&&Fo)}function _t(a,e,t){a.removeEventListener(e,t,!ga&&Fo)}function Bn(a,e){if(e){if(e[0]===">"&&(e=e.substring(1)),a)try{if(a.matches)return a.matches(e);if(a.msMatchesSelector)return a.msMatchesSelector(e);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(e)}catch{return!1}return!1}}function Bo(a){return a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode}function aa(a,e,t,r){if(a){t=t||document;do{if(e!=null&&(e[0]===">"?a.parentNode===t&&Bn(a,e):Bn(a,e))||r&&a===t)return a;if(a===t)break}while(a=Bo(a))}return null}var io=/\s+/g;function Gr(a,e,t){if(a&&e)if(a.classList)a.classList[t?"add":"remove"](e);else{var r=(" "+a.className+" ").replace(io," ").replace(" "+e+" "," ");a.className=(r+(t?" "+e:"")).replace(io," ")}}function He(a,e,t){var r=a&&a.style;if(r){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(t=a.currentStyle),e===void 0?t:t[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=t+(typeof t=="string"?"":"px")}}function Ba(a,e){var t="";if(typeof a=="string")t=a;else do{var r=He(a,"transform");r&&r!=="none"&&(t=r+" "+t)}while(!e&&(a=a.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(t)}function Ho(a,e,t){if(a){var r=a.getElementsByTagName(e),n=0,o=r.length;if(t)for(;n<o;n++)t(r[n],n);return r}return[]}function sa(){var a=document.scrollingElement;return a||document.documentElement}function or(a,e,t,r,n){if(!(!a.getBoundingClientRect&&a!==window)){var o,i,l,f,h,p,m;if(a!==window&&a.parentNode&&a!==sa()?(o=a.getBoundingClientRect(),i=o.top,l=o.left,f=o.bottom,h=o.right,p=o.height,m=o.width):(i=0,l=0,f=window.innerHeight,h=window.innerWidth,p=window.innerHeight,m=window.innerWidth),(e||t)&&a!==window&&(n=n||a.parentNode,!ga))do if(n&&n.getBoundingClientRect&&(He(n,"transform")!=="none"||t&&He(n,"position")!=="static")){var $=n.getBoundingClientRect();i-=$.top+parseInt(He(n,"border-top-width")),l-=$.left+parseInt(He(n,"border-left-width")),f=i+o.height,h=l+o.width;break}while(n=n.parentNode);if(r&&a!==window){var x=Ba(n||a),w=x&&x.a,L=x&&x.d;x&&(i/=L,l/=w,m/=w,p/=L,f=i+p,h=l+m)}return{top:i,left:l,bottom:f,right:h,width:m,height:p}}}function lo(a,e,t){for(var r=Pa(a,!0),n=or(a)[e];r;){var o=or(r)[t],i=void 0;if(i=n>=o,!i)return r;if(r===sa())break;r=Pa(r,!1)}return!1}function Va(a,e,t,r){for(var n=0,o=0,i=a.children;o<i.length;){if(i[o].style.display!=="none"&&i[o]!==Ve.ghost&&(r||i[o]!==Ve.dragged)&&aa(i[o],t.draggable,a,!1)){if(n===e)return i[o];n++}o++}return null}function Us(a,e){for(var t=a.lastElementChild;t&&(t===Ve.ghost||He(t,"display")==="none"||e&&!Bn(t,e));)t=t.previousElementSibling;return t||null}function Kr(a,e){var t=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)a.nodeName.toUpperCase()!=="TEMPLATE"&&a!==Ve.clone&&(!e||Bn(a,e))&&t++;return t}function co(a){var e=0,t=0,r=sa();if(a)do{var n=Ba(a),o=n.a,i=n.d;e+=a.scrollLeft*o,t+=a.scrollTop*i}while(a!==r&&(a=a.parentNode));return[e,t]}function Ic(a,e){for(var t in a)if(a.hasOwnProperty(t)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===a[t][r])return Number(t)}return-1}function Pa(a,e){if(!a||!a.getBoundingClientRect)return sa();var t=a,r=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var n=He(t);if(t.clientWidth<t.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return sa();if(r||e)return t;r=!0}}while(t=t.parentNode);return sa()}function zc(a,e){if(a&&e)for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);return a}function ns(a,e){return Math.round(a.top)===Math.round(e.top)&&Math.round(a.left)===Math.round(e.left)&&Math.round(a.height)===Math.round(e.height)&&Math.round(a.width)===Math.round(e.width)}var ln;function Vo(a,e){return function(){if(!ln){var t=arguments,r=this;t.length===1?a.call(r,t[0]):a.apply(r,t),ln=setTimeout(function(){ln=void 0},e)}}}function Lc(){clearTimeout(ln),ln=void 0}function Go(a,e,t){a.scrollLeft+=e,a.scrollTop+=t}function Xo(a){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(a).cloneNode(!0):t?t(a).clone(!0)[0]:a.cloneNode(!0)}function Wo(a,e,t){var r={};return Array.from(a.children).forEach(function(n){var o,i,l,f;if(!(!aa(n,e.draggable,a,!1)||n.animated||n===t)){var h=or(n);r.left=Math.min((o=r.left)!==null&&o!==void 0?o:1/0,h.left),r.top=Math.min((i=r.top)!==null&&i!==void 0?i:1/0,h.top),r.right=Math.max((l=r.right)!==null&&l!==void 0?l:-1/0,h.right),r.bottom=Math.max((f=r.bottom)!==null&&f!==void 0?f:-1/0,h.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var Ur="Sortable"+new Date().getTime();function Oc(){var a=[],e;return{captureAnimationState:function(){if(a=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(n){if(!(He(n,"display")==="none"||n===Ve.ghost)){a.push({target:n,rect:or(n)});var o=oa({},a[a.length-1].rect);if(n.thisAnimationDuration){var i=Ba(n,!0);i&&(o.top-=i.f,o.left-=i.e)}n.fromRect=o}})}},addAnimationState:function(r){a.push(r)},removeAnimationState:function(r){a.splice(Ic(a,{target:r}),1)},animateAll:function(r){var n=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var o=!1,i=0;a.forEach(function(l){var f=0,h=l.target,p=h.fromRect,m=or(h),$=h.prevFromRect,x=h.prevToRect,w=l.rect,L=Ba(h,!0);L&&(m.top-=L.f,m.left-=L.e),h.toRect=m,h.thisAnimationDuration&&ns($,m)&&!ns(p,m)&&(w.top-m.top)/(w.left-m.left)===(p.top-m.top)/(p.left-m.left)&&(f=Ac(w,$,x,n.options)),ns(m,p)||(h.prevFromRect=p,h.prevToRect=m,f||(f=n.options.animation),n.animate(h,w,m,f)),f&&(o=!0,i=Math.max(i,f),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},f),h.thisAnimationDuration=f)}),clearTimeout(e),o?e=setTimeout(function(){typeof r=="function"&&r()},i):typeof r=="function"&&r(),a=[]},animate:function(r,n,o,i){if(i){He(r,"transition",""),He(r,"transform","");var l=Ba(this.el),f=l&&l.a,h=l&&l.d,p=(n.left-o.left)/(f||1),m=(n.top-o.top)/(h||1);r.animatingX=!!p,r.animatingY=!!m,He(r,"transform","translate3d("+p+"px,"+m+"px,0)"),this.forRepaintDummy=Nc(r),He(r,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),He(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){He(r,"transition",""),He(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},i)}}}}function Nc(a){return a.offsetWidth}function Ac(a,e,t,r){return Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*r.animation}var Na=[],ss={initializeByDefault:!0},$n={mount:function(e){for(var t in ss)ss.hasOwnProperty(t)&&!(t in e)&&(e[t]=ss[t]);Na.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Na.push(e)},pluginEvent:function(e,t,r){var n=this;this.eventCanceled=!1,r.cancel=function(){n.eventCanceled=!0};var o=e+"Global";Na.forEach(function(i){t[i.pluginName]&&(t[i.pluginName][o]&&t[i.pluginName][o](oa({sortable:t},r)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](oa({sortable:t},r)))})},initializePlugins:function(e,t,r,n){Na.forEach(function(l){var f=l.pluginName;if(!(!e.options[f]&&!l.initializeByDefault)){var h=new l(e,t,e.options);h.sortable=e,h.options=e.options,e[f]=h,pa(r,h.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var i=this.modifyOption(e,o,e.options[o]);typeof i<"u"&&(e.options[o]=i)}},getEventProperties:function(e,t){var r={};return Na.forEach(function(n){typeof n.eventProperties=="function"&&pa(r,n.eventProperties.call(t[n.pluginName],e))}),r},modifyOption:function(e,t,r){var n;return Na.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[t]=="function"&&(n=o.optionListeners[t].call(e[o.pluginName],r))}),n}};function Mc(a){var e=a.sortable,t=a.rootEl,r=a.name,n=a.targetEl,o=a.cloneEl,i=a.toEl,l=a.fromEl,f=a.oldIndex,h=a.newIndex,p=a.oldDraggableIndex,m=a.newDraggableIndex,$=a.originalEvent,x=a.putSortable,w=a.extraEventProperties;if(e=e||t&&t[Ur],!!e){var L,S=e.options,U="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!ga&&!yn?L=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(L=document.createEvent("Event"),L.initEvent(r,!0,!0)),L.to=i||t,L.from=l||t,L.item=n||t,L.clone=o,L.oldIndex=f,L.newIndex=h,L.oldDraggableIndex=p,L.newDraggableIndex=m,L.originalEvent=$,L.pullMode=x?x.lastPutMode:void 0;var G=oa(oa({},w),$n.getEventProperties(r,e));for(var I in G)L[I]=G[I];t&&t.dispatchEvent(L),S[U]&&S[U].call(e,L)}}var Rc=["evt"],Rr=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.evt,o=Tc(r,Rc);$n.pluginEvent.bind(Ve)(e,t,oa({dragEl:W,parentEl:Qt,ghostEl:et,rootEl:Yt,nextEl:Da,lastDownEl:On,cloneEl:Jt,cloneHidden:Sa,dragStarted:Za,putSortable:xr,activeSortable:Ve.active,originalEvent:n,oldIndex:Fa,oldDraggableIndex:cn,newIndex:Xr,newDraggableIndex:$a,hideGhostForTarget:qo,unhideGhostForTarget:Zo,cloneNowHidden:function(){Sa=!0},cloneNowShown:function(){Sa=!1},dispatchSortableEvent:function(l){Or({sortable:t,name:l,originalEvent:n})}},o))};function Or(a){Mc(oa({putSortable:xr,cloneEl:Jt,targetEl:W,rootEl:Yt,oldIndex:Fa,oldDraggableIndex:cn,newIndex:Xr,newDraggableIndex:$a},a))}var W,Qt,et,Yt,Da,On,Jt,Sa,Fa,Xr,cn,$a,kn,xr,Ra=!1,Hn=!1,Vn=[],ka,ra,os,is,uo,fo,Za,Aa,dn,un=!1,En=!1,Nn,Cr,ls=[],ks=!1,Gn=[],Wn=typeof document<"u",Tn=Rs,vo=yn||ga?"cssFloat":"float",Uc=Wn&&!jo&&!Rs&&"draggable"in document.createElement("div"),Yo=function(){if(Wn){if(ga)return!1;var a=document.createElement("x");return a.style.cssText="pointer-events:auto",a.style.pointerEvents==="auto"}}(),Jo=function(e,t){var r=He(e),n=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=Va(e,0,t),i=Va(e,1,t),l=o&&He(o),f=i&&He(i),h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+or(o).width,p=f&&parseInt(f.marginLeft)+parseInt(f.marginRight)+or(i).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&l.float&&l.float!=="none"){var m=l.float==="left"?"left":"right";return i&&(f.clear==="both"||f.clear===m)?"vertical":"horizontal"}return o&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||h>=n&&r[vo]==="none"||i&&r[vo]==="none"&&h+p>n)?"vertical":"horizontal"},jc=function(e,t,r){var n=r?e.left:e.top,o=r?e.right:e.bottom,i=r?e.width:e.height,l=r?t.left:t.top,f=r?t.right:t.bottom,h=r?t.width:t.height;return n===l||o===f||n+i/2===l+h/2},Fc=function(e,t){var r;return Vn.some(function(n){var o=n[Ur].options.emptyInsertThreshold;if(!(!o||Us(n))){var i=or(n),l=e>=i.left-o&&e<=i.right+o,f=t>=i.top-o&&t<=i.bottom+o;if(l&&f)return r=n}}),r},Ko=function(e){function t(o,i){return function(l,f,h,p){var m=l.options.group.name&&f.options.group.name&&l.options.group.name===f.options.group.name;if(o==null&&(i||m))return!0;if(o==null||o===!1)return!1;if(i&&o==="clone")return o;if(typeof o=="function")return t(o(l,f,h,p),i)(l,f,h,p);var $=(i?l:f).options.group.name;return o===!0||typeof o=="string"&&o===$||o.join&&o.indexOf($)>-1}}var r={},n=e.group;(!n||Ln(n)!="object")&&(n={name:n}),r.name=n.name,r.checkPull=t(n.pull,!0),r.checkPut=t(n.put),r.revertClone=n.revertClone,e.group=r},qo=function(){!Yo&&et&&He(et,"display","none")},Zo=function(){!Yo&&et&&He(et,"display","")};Wn&&!jo&&document.addEventListener("click",function(a){if(Hn)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Hn=!1,!1},!0);var Ea=function(e){if(W){e=e.touches?e.touches[0]:e;var t=Fc(e.clientX,e.clientY);if(t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);r.target=r.rootEl=t,r.preventDefault=void 0,r.stopPropagation=void 0,t[Ur]._onDragOver(r)}}},Bc=function(e){W&&W.parentNode[Ur]._isOutsideThisEl(e.target)};function Ve(a,e){if(!(a&&a.nodeType&&a.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a,this.options=e=pa({},e),a[Ur]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Jo(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,l){i.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ve.supportPointer!==!1&&"PointerEvent"in window&&(!on||Rs),emptyInsertThreshold:5};$n.initializePlugins(this,a,t);for(var r in t)!(r in e)&&(e[r]=t[r]);Ko(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:Uc,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?yt(a,"pointerdown",this._onTapStart):(yt(a,"mousedown",this._onTapStart),yt(a,"touchstart",this._onTapStart)),this.nativeDraggable&&(yt(a,"dragover",this),yt(a,"dragenter",this)),Vn.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),pa(this,Oc())}Ve.prototype={constructor:Ve,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Aa=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,W):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,r=this.el,n=this.options,o=n.preventOnFilter,i=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,f=(l||e).target,h=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||f,p=n.filter;if(Kc(r),!W&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||n.disabled)&&!h.isContentEditable&&!(!this.nativeDraggable&&on&&f&&f.tagName.toUpperCase()==="SELECT")&&(f=aa(f,n.draggable,r,!1),!(f&&f.animated)&&On!==f)){if(Fa=Kr(f),cn=Kr(f,n.draggable),typeof p=="function"){if(p.call(this,e,f,this)){Or({sortable:t,rootEl:h,name:"filter",targetEl:f,toEl:r,fromEl:r}),Rr("filter",t,{evt:e}),o&&e.preventDefault();return}}else if(p&&(p=p.split(",").some(function(m){if(m=aa(h,m.trim(),r,!1),m)return Or({sortable:t,rootEl:m,name:"filter",targetEl:f,fromEl:r,toEl:r}),Rr("filter",t,{evt:e}),!0}),p)){o&&e.preventDefault();return}n.handle&&!aa(h,n.handle,r,!1)||this._prepareDragStart(e,l,f)}}},_prepareDragStart:function(e,t,r){var n=this,o=n.el,i=n.options,l=o.ownerDocument,f;if(r&&!W&&r.parentNode===o){var h=or(r);if(Yt=o,W=r,Qt=W.parentNode,Da=W.nextSibling,On=r,kn=i.group,Ve.dragged=W,ka={target:W,clientX:(t||e).clientX,clientY:(t||e).clientY},uo=ka.clientX-h.left,fo=ka.clientY-h.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,W.style["will-change"]="all",f=function(){if(Rr("delayEnded",n,{evt:e}),Ve.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!oo&&n.nativeDraggable&&(W.draggable=!0),n._triggerDragStart(e,t),Or({sortable:n,name:"choose",originalEvent:e}),Gr(W,i.chosenClass,!0)},i.ignore.split(",").forEach(function(p){Ho(W,p.trim(),cs)}),yt(l,"dragover",Ea),yt(l,"mousemove",Ea),yt(l,"touchmove",Ea),i.supportPointer?(yt(l,"pointerup",n._onDrop),!this.nativeDraggable&&yt(l,"pointercancel",n._onDrop)):(yt(l,"mouseup",n._onDrop),yt(l,"touchend",n._onDrop),yt(l,"touchcancel",n._onDrop)),oo&&this.nativeDraggable&&(this.options.touchStartThreshold=4,W.draggable=!0),Rr("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(yn||ga))){if(Ve.eventCanceled){this._onDrop();return}i.supportPointer?(yt(l,"pointerup",n._disableDelayedDrag),yt(l,"pointercancel",n._disableDelayedDrag)):(yt(l,"mouseup",n._disableDelayedDrag),yt(l,"touchend",n._disableDelayedDrag),yt(l,"touchcancel",n._disableDelayedDrag)),yt(l,"mousemove",n._delayedDragTouchMoveHandler),yt(l,"touchmove",n._delayedDragTouchMoveHandler),i.supportPointer&&yt(l,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(f,i.delay)}else f()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){W&&cs(W),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;_t(e,"mouseup",this._disableDelayedDrag),_t(e,"touchend",this._disableDelayedDrag),_t(e,"touchcancel",this._disableDelayedDrag),_t(e,"pointerup",this._disableDelayedDrag),_t(e,"pointercancel",this._disableDelayedDrag),_t(e,"mousemove",this._delayedDragTouchMoveHandler),_t(e,"touchmove",this._delayedDragTouchMoveHandler),_t(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?yt(document,"pointermove",this._onTouchMove):t?yt(document,"touchmove",this._onTouchMove):yt(document,"mousemove",this._onTouchMove):(yt(W,"dragend",this),yt(Yt,"dragstart",this._onDragStart));try{document.selection?An(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ra=!1,Yt&&W){Rr("dragStarted",this,{evt:t}),this.nativeDraggable&&yt(document,"dragover",Bc);var r=this.options;!e&&Gr(W,r.dragClass,!1),Gr(W,r.ghostClass,!0),Ve.active=this,e&&this._appendGhost(),Or({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ra){this._lastX=ra.clientX,this._lastY=ra.clientY,qo();for(var e=document.elementFromPoint(ra.clientX,ra.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ra.clientX,ra.clientY),e!==t);)t=e;if(W.parentNode[Ur]._isOutsideThisEl(e),t)do{if(t[Ur]){var r=void 0;if(r=t[Ur]._onDragOver({clientX:ra.clientX,clientY:ra.clientY,target:e,rootEl:t}),r&&!this.options.dragoverBubble)break}e=t}while(t=Bo(t));Zo()}},_onTouchMove:function(e){if(ka){var t=this.options,r=t.fallbackTolerance,n=t.fallbackOffset,o=e.touches?e.touches[0]:e,i=et&&Ba(et,!0),l=et&&i&&i.a,f=et&&i&&i.d,h=Tn&&Cr&&co(Cr),p=(o.clientX-ka.clientX+n.x)/(l||1)+(h?h[0]-ls[0]:0)/(l||1),m=(o.clientY-ka.clientY+n.y)/(f||1)+(h?h[1]-ls[1]:0)/(f||1);if(!Ve.active&&!Ra){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(et){i?(i.e+=p-(os||0),i.f+=m-(is||0)):i={a:1,b:0,c:0,d:1,e:p,f:m};var $="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");He(et,"webkitTransform",$),He(et,"mozTransform",$),He(et,"msTransform",$),He(et,"transform",$),os=p,is=m,ra=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!et){var e=this.options.fallbackOnBody?document.body:Yt,t=or(W,!0,Tn,!0,e),r=this.options;if(Tn){for(Cr=e;He(Cr,"position")==="static"&&He(Cr,"transform")==="none"&&Cr!==document;)Cr=Cr.parentNode;Cr!==document.body&&Cr!==document.documentElement?(Cr===document&&(Cr=sa()),t.top+=Cr.scrollTop,t.left+=Cr.scrollLeft):Cr=sa(),ls=co(Cr)}et=W.cloneNode(!0),Gr(et,r.ghostClass,!1),Gr(et,r.fallbackClass,!0),Gr(et,r.dragClass,!0),He(et,"transition",""),He(et,"transform",""),He(et,"box-sizing","border-box"),He(et,"margin",0),He(et,"top",t.top),He(et,"left",t.left),He(et,"width",t.width),He(et,"height",t.height),He(et,"opacity","0.8"),He(et,"position",Tn?"absolute":"fixed"),He(et,"zIndex","100000"),He(et,"pointerEvents","none"),Ve.ghost=et,e.appendChild(et),He(et,"transform-origin",uo/parseInt(et.style.width)*100+"% "+fo/parseInt(et.style.height)*100+"%")}},_onDragStart:function(e,t){var r=this,n=e.dataTransfer,o=r.options;if(Rr("dragStart",this,{evt:e}),Ve.eventCanceled){this._onDrop();return}Rr("setupClone",this),Ve.eventCanceled||(Jt=Xo(W),Jt.removeAttribute("id"),Jt.draggable=!1,Jt.style["will-change"]="",this._hideClone(),Gr(Jt,this.options.chosenClass,!1),Ve.clone=Jt),r.cloneId=An(function(){Rr("clone",r),!Ve.eventCanceled&&(r.options.removeCloneOnHide||Yt.insertBefore(Jt,W),r._hideClone(),Or({sortable:r,name:"clone"}))}),!t&&Gr(W,o.dragClass,!0),t?(Hn=!0,r._loopId=setInterval(r._emulateDragOver,50)):(_t(document,"mouseup",r._onDrop),_t(document,"touchend",r._onDrop),_t(document,"touchcancel",r._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(r,n,W)),yt(document,"drop",r),He(W,"transform","translateZ(0)")),Ra=!0,r._dragStartId=An(r._dragStarted.bind(r,t,e)),yt(document,"selectstart",r),Za=!0,window.getSelection().removeAllRanges(),on&&He(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,r=e.target,n,o,i,l=this.options,f=l.group,h=Ve.active,p=kn===f,m=l.sort,$=xr||h,x,w=this,L=!1;if(ks)return;function S(b,k){Rr(b,w,oa({evt:e,isOwner:p,axis:x?"vertical":"horizontal",revert:i,dragRect:n,targetRect:o,canSort:m,fromSortable:$,target:r,completed:G,onMove:function(R,F){return Dn(Yt,t,W,n,R,or(R),e,F)},changed:I},k))}function U(){S("dragOverAnimationCapture"),w.captureAnimationState(),w!==$&&$.captureAnimationState()}function G(b){return S("dragOverCompleted",{insertion:b}),b&&(p?h._hideClone():h._showClone(w),w!==$&&(Gr(W,xr?xr.options.ghostClass:h.options.ghostClass,!1),Gr(W,l.ghostClass,!0)),xr!==w&&w!==Ve.active?xr=w:w===Ve.active&&xr&&(xr=null),$===w&&(w._ignoreWhileAnimating=r),w.animateAll(function(){S("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==$&&($.animateAll(),$._ignoreWhileAnimating=null)),(r===W&&!W.animated||r===t&&!r.animated)&&(Aa=null),!l.dragoverBubble&&!e.rootEl&&r!==document&&(W.parentNode[Ur]._isOutsideThisEl(e.target),!b&&Ea(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),L=!0}function I(){Xr=Kr(W),$a=Kr(W,l.draggable),Or({sortable:w,name:"change",toEl:t,newIndex:Xr,newDraggableIndex:$a,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=aa(r,l.draggable,t,!0),S("dragOver"),Ve.eventCanceled)return L;if(W.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||w._ignoreWhileAnimating===r)return G(!1);if(Hn=!1,h&&!l.disabled&&(p?m||(i=Qt!==Yt):xr===this||(this.lastPutMode=kn.checkPull(this,h,W,e))&&f.checkPut(this,h,W,e))){if(x=this._getDirection(e,r)==="vertical",n=or(W),S("dragOverValid"),Ve.eventCanceled)return L;if(i)return Qt=Yt,U(),this._hideClone(),S("revert"),Ve.eventCanceled||(Da?Yt.insertBefore(W,Da):Yt.appendChild(W)),G(!0);var M=Us(t,l.draggable);if(!M||Xc(e,x,this)&&!M.animated){if(M===W)return G(!1);if(M&&t===e.target&&(r=M),r&&(o=or(r)),Dn(Yt,t,W,n,r,o,e,!!r)!==!1)return U(),M&&M.nextSibling?t.insertBefore(W,M.nextSibling):t.appendChild(W),Qt=t,I(),G(!0)}else if(M&&Gc(e,x,this)){var ge=Va(t,0,l,!0);if(ge===W)return G(!1);if(r=ge,o=or(r),Dn(Yt,t,W,n,r,o,e,!1)!==!1)return U(),t.insertBefore(W,ge),Qt=t,I(),G(!0)}else if(r.parentNode===t){o=or(r);var q=0,Y,fe=W.parentNode!==t,J=!jc(W.animated&&W.toRect||n,r.animated&&r.toRect||o,x),ve=x?"top":"left",de=lo(r,"top","top")||lo(W,"top","top"),be=de?de.scrollTop:void 0;Aa!==r&&(Y=o[ve],un=!1,En=!J&&l.invertSwap||fe),q=Wc(e,r,o,x,J?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,En,Aa===r);var N;if(q!==0){var ne=Kr(W);do ne-=q,N=Qt.children[ne];while(N&&(He(N,"display")==="none"||N===et))}if(q===0||N===r)return G(!1);Aa=r,dn=q;var Q=r.nextElementSibling,$e=!1;$e=q===1;var Le=Dn(Yt,t,W,n,r,o,e,$e);if(Le!==!1)return(Le===1||Le===-1)&&($e=Le===1),ks=!0,setTimeout(Vc,30),U(),$e&&!Q?t.appendChild(W):r.parentNode.insertBefore(W,$e?Q:r),de&&Go(de,0,be-de.scrollTop),Qt=W.parentNode,Y!==void 0&&!En&&(Nn=Math.abs(Y-or(r)[ve])),I(),G(!0)}if(t.contains(W))return G(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){_t(document,"mousemove",this._onTouchMove),_t(document,"touchmove",this._onTouchMove),_t(document,"pointermove",this._onTouchMove),_t(document,"dragover",Ea),_t(document,"mousemove",Ea),_t(document,"touchmove",Ea)},_offUpEvents:function(){var e=this.el.ownerDocument;_t(e,"mouseup",this._onDrop),_t(e,"touchend",this._onDrop),_t(e,"pointerup",this._onDrop),_t(e,"pointercancel",this._onDrop),_t(e,"touchcancel",this._onDrop),_t(document,"selectstart",this)},_onDrop:function(e){var t=this.el,r=this.options;if(Xr=Kr(W),$a=Kr(W,r.draggable),Rr("drop",this,{evt:e}),Qt=W&&W.parentNode,Xr=Kr(W),$a=Kr(W,r.draggable),Ve.eventCanceled){this._nulling();return}Ra=!1,En=!1,un=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Es(this.cloneId),Es(this._dragStartId),this.nativeDraggable&&(_t(document,"drop",this),_t(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),on&&He(document.body,"user-select",""),He(W,"transform",""),e&&(Za&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),et&&et.parentNode&&et.parentNode.removeChild(et),(Yt===Qt||xr&&xr.lastPutMode!=="clone")&&Jt&&Jt.parentNode&&Jt.parentNode.removeChild(Jt),W&&(this.nativeDraggable&&_t(W,"dragend",this),cs(W),W.style["will-change"]="",Za&&!Ra&&Gr(W,xr?xr.options.ghostClass:this.options.ghostClass,!1),Gr(W,this.options.chosenClass,!1),Or({sortable:this,name:"unchoose",toEl:Qt,newIndex:null,newDraggableIndex:null,originalEvent:e}),Yt!==Qt?(Xr>=0&&(Or({rootEl:Qt,name:"add",toEl:Qt,fromEl:Yt,originalEvent:e}),Or({sortable:this,name:"remove",toEl:Qt,originalEvent:e}),Or({rootEl:Qt,name:"sort",toEl:Qt,fromEl:Yt,originalEvent:e}),Or({sortable:this,name:"sort",toEl:Qt,originalEvent:e})),xr&&xr.save()):Xr!==Fa&&Xr>=0&&(Or({sortable:this,name:"update",toEl:Qt,originalEvent:e}),Or({sortable:this,name:"sort",toEl:Qt,originalEvent:e})),Ve.active&&((Xr==null||Xr===-1)&&(Xr=Fa,$a=cn),Or({sortable:this,name:"end",toEl:Qt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Rr("nulling",this),Yt=W=Qt=et=Da=Jt=On=Sa=ka=ra=Za=Xr=$a=Fa=cn=Aa=dn=xr=kn=Ve.dragged=Ve.ghost=Ve.clone=Ve.active=null,Gn.forEach(function(e){e.checked=!0}),Gn.length=os=is=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":W&&(this._onDragOver(e),Hc(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,r=this.el.children,n=0,o=r.length,i=this.options;n<o;n++)t=r[n],aa(t,i.draggable,this.el,!1)&&e.push(t.getAttribute(i.dataIdAttr)||Jc(t));return e},sort:function(e,t){var r={},n=this.el;this.toArray().forEach(function(o,i){var l=n.children[i];aa(l,this.options.draggable,n,!1)&&(r[o]=l)},this),t&&this.captureAnimationState(),e.forEach(function(o){r[o]&&(n.removeChild(r[o]),n.appendChild(r[o]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return aa(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var r=this.options;if(t===void 0)return r[e];var n=$n.modifyOption(this,e,t);typeof n<"u"?r[e]=n:r[e]=t,e==="group"&&Ko(r)},destroy:function(){Rr("destroy",this);var e=this.el;e[Ur]=null,_t(e,"mousedown",this._onTapStart),_t(e,"touchstart",this._onTapStart),_t(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(_t(e,"dragover",this),_t(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Vn.splice(Vn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Sa){if(Rr("hideClone",this),Ve.eventCanceled)return;He(Jt,"display","none"),this.options.removeCloneOnHide&&Jt.parentNode&&Jt.parentNode.removeChild(Jt),Sa=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Sa){if(Rr("showClone",this),Ve.eventCanceled)return;W.parentNode==Yt&&!this.options.group.revertClone?Yt.insertBefore(Jt,W):Da?Yt.insertBefore(Jt,Da):Yt.appendChild(Jt),this.options.group.revertClone&&this.animate(W,Jt),He(Jt,"display",""),Sa=!1}}};function Hc(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault()}function Dn(a,e,t,r,n,o,i,l){var f,h=a[Ur],p=h.options.onMove,m;return window.CustomEvent&&!ga&&!yn?f=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(f=document.createEvent("Event"),f.initEvent("move",!0,!0)),f.to=e,f.from=a,f.dragged=t,f.draggedRect=r,f.related=n||e,f.relatedRect=o||or(e),f.willInsertAfter=l,f.originalEvent=i,a.dispatchEvent(f),p&&(m=p.call(h,f,i)),m}function cs(a){a.draggable=!1}function Vc(){ks=!1}function Gc(a,e,t){var r=or(Va(t.el,0,t.options,!0)),n=Wo(t.el,t.options,et),o=10;return e?a.clientX<n.left-o||a.clientY<r.top&&a.clientX<r.right:a.clientY<n.top-o||a.clientY<r.bottom&&a.clientX<r.left}function Xc(a,e,t){var r=or(Us(t.el,t.options.draggable)),n=Wo(t.el,t.options,et),o=10;return e?a.clientX>n.right+o||a.clientY>r.bottom&&a.clientX>r.left:a.clientY>n.bottom+o||a.clientX>r.right&&a.clientY>r.top}function Wc(a,e,t,r,n,o,i,l){var f=r?a.clientY:a.clientX,h=r?t.height:t.width,p=r?t.top:t.left,m=r?t.bottom:t.right,$=!1;if(!i){if(l&&Nn<h*n){if(!un&&(dn===1?f>p+h*o/2:f<m-h*o/2)&&(un=!0),un)$=!0;else if(dn===1?f<p+Nn:f>m-Nn)return-dn}else if(f>p+h*(1-n)/2&&f<m-h*(1-n)/2)return Yc(e)}return $=$||i,$&&(f<p+h*o/2||f>m-h*o/2)?f>p+h/2?1:-1:0}function Yc(a){return Kr(W)<Kr(a)?1:-1}function Jc(a){for(var e=a.tagName+a.className+a.src+a.href+a.textContent,t=e.length,r=0;t--;)r+=e.charCodeAt(t);return r.toString(36)}function Kc(a){Gn.length=0;for(var e=a.getElementsByTagName("input"),t=e.length;t--;){var r=e[t];r.checked&&Gn.push(r)}}function An(a){return setTimeout(a,0)}function Es(a){return clearTimeout(a)}Wn&&yt(document,"touchmove",function(a){(Ve.active||Ra)&&a.cancelable&&a.preventDefault()});Ve.utils={on:yt,off:_t,css:He,find:Ho,is:function(e,t){return!!aa(e,t,e,!1)},extend:zc,throttle:Vo,closest:aa,toggleClass:Gr,clone:Xo,index:Kr,nextTick:An,cancelNextTick:Es,detectDirection:Jo,getChild:Va,expando:Ur};Ve.get=function(a){return a[Ur]};Ve.mount=function(){for(var a=arguments.length,e=new Array(a),t=0;t<a;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ve.utils=oa(oa({},Ve.utils),r.utils)),$n.mount(r)})};Ve.create=function(a,e){return new Ve(a,e)};Ve.version=Dc;var sr=[],Qa,Ts,Ds=!1,ds,us,Xn,en;function qc(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return a.prototype={dragStarted:function(t){var r=t.originalEvent;this.sortable.nativeDraggable?yt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?yt(document,"pointermove",this._handleFallbackAutoScroll):r.touches?yt(document,"touchmove",this._handleFallbackAutoScroll):yt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var r=t.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?_t(document,"dragover",this._handleAutoScroll):(_t(document,"pointermove",this._handleFallbackAutoScroll),_t(document,"touchmove",this._handleFallbackAutoScroll),_t(document,"mousemove",this._handleFallbackAutoScroll)),ho(),Mn(),Lc()},nulling:function(){Xn=Ts=Qa=Ds=en=ds=us=null,sr.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,r){var n=this,o=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(o,i);if(Xn=t,r||this.options.forceAutoScrollFallback||yn||ga||on){fs(t,this.options,l,r);var f=Pa(l,!0);Ds&&(!en||o!==ds||i!==us)&&(en&&ho(),en=setInterval(function(){var h=Pa(document.elementFromPoint(o,i),!0);h!==f&&(f=h,Mn()),fs(t,n.options,h,r)},10),ds=o,us=i)}else{if(!this.options.bubbleScroll||Pa(l,!0)===sa()){Mn();return}fs(t,this.options,Pa(l,!1),!1)}}},pa(a,{pluginName:"scroll",initializeByDefault:!0})}function Mn(){sr.forEach(function(a){clearInterval(a.pid)}),sr=[]}function ho(){clearInterval(en)}var fs=Vo(function(a,e,t,r){if(e.scroll){var n=(a.touches?a.touches[0]:a).clientX,o=(a.touches?a.touches[0]:a).clientY,i=e.scrollSensitivity,l=e.scrollSpeed,f=sa(),h=!1,p;Ts!==t&&(Ts=t,Mn(),Qa=e.scroll,p=e.scrollFn,Qa===!0&&(Qa=Pa(t,!0)));var m=0,$=Qa;do{var x=$,w=or(x),L=w.top,S=w.bottom,U=w.left,G=w.right,I=w.width,M=w.height,ge=void 0,q=void 0,Y=x.scrollWidth,fe=x.scrollHeight,J=He(x),ve=x.scrollLeft,de=x.scrollTop;x===f?(ge=I<Y&&(J.overflowX==="auto"||J.overflowX==="scroll"||J.overflowX==="visible"),q=M<fe&&(J.overflowY==="auto"||J.overflowY==="scroll"||J.overflowY==="visible")):(ge=I<Y&&(J.overflowX==="auto"||J.overflowX==="scroll"),q=M<fe&&(J.overflowY==="auto"||J.overflowY==="scroll"));var be=ge&&(Math.abs(G-n)<=i&&ve+I<Y)-(Math.abs(U-n)<=i&&!!ve),N=q&&(Math.abs(S-o)<=i&&de+M<fe)-(Math.abs(L-o)<=i&&!!de);if(!sr[m])for(var ne=0;ne<=m;ne++)sr[ne]||(sr[ne]={});(sr[m].vx!=be||sr[m].vy!=N||sr[m].el!==x)&&(sr[m].el=x,sr[m].vx=be,sr[m].vy=N,clearInterval(sr[m].pid),(be!=0||N!=0)&&(h=!0,sr[m].pid=setInterval(function(){r&&this.layer===0&&Ve.active._onTouchMove(Xn);var Q=sr[this.layer].vy?sr[this.layer].vy*l:0,$e=sr[this.layer].vx?sr[this.layer].vx*l:0;typeof p=="function"&&p.call(Ve.dragged.parentNode[Ur],$e,Q,a,Xn,sr[this.layer].el)!=="continue"||Go(sr[this.layer].el,$e,Q)}.bind({layer:m}),24))),m++}while(e.bubbleScroll&&$!==f&&($=Pa($,!1)));Ds=h}},30),Qo=function(e){var t=e.originalEvent,r=e.putSortable,n=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,l=e.hideGhostForTarget,f=e.unhideGhostForTarget;if(t){var h=r||o;l();var p=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,m=document.elementFromPoint(p.clientX,p.clientY);f(),h&&!h.el.contains(m)&&(i("spill"),this.onSpill({dragEl:n,putSortable:r}))}};function js(){}js.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var n=Va(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),r&&r.animateAll()},drop:Qo};pa(js,{pluginName:"revertOnSpill"});function Fs(){}Fs.prototype={onSpill:function(e){var t=e.dragEl,r=e.putSortable,n=r||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Qo};pa(Fs,{pluginName:"removeOnSpill"});Ve.mount(new qc);Ve.mount(Fs,js);const Zc=()=>{if(typeof window>"u")return"https://vms.lenscorp.cloud/camera";if(window&&window.api?.navigate)return"http://localhost:2323";{const a=window.location.hostname;return!0?"https://vms.lenscorp.cloud/camera":`http://${a}:2323`}};var Qc=P("<!> <!>",1),ed=P("<!> <!>",1),td=P("<!> <!> <!>",1),rd=P(`<div class="flex flex-col pb-4"><!> <!> <div class="text-rose-500 text-xs pt-2"><!></div></div> <div class="flex flex-col pb-4"><!> <!> <div class="text-rose-500 text-xs pt-2"><!></div> <div class="space-y-4"><div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-neutral-900 rounded-lg"><div class="flex-1 pr-6"><h4 class="font-medium text-sm text-gray-700 dark:text-gray-300 mb-1">Internal Network Camera</h4> <p class="text-xs text-gray-500 dark:text-gray-400 leading-relaxed">Select this if the camera is only accessible within your local
                  network (e.g., <span class="font-mono bg-gray-100 dark:bg-neutral-800 px-1 py-0.5 rounded">192.168.x.x</span> or <span class="font-mono bg-gray-100 dark:bg-neutral-800 px-1 py-0.5 rounded">10.x.x.x</span>).</p></div> <div class="flex items-center"><!></div></div> <div class="flex items-center justify-between p-4 bg-gray-50 dark:bg-neutral-900 rounded-lg"><div class="flex-1 pr-6"><h4 class="font-medium text-sm text-gray-700 dark:text-gray-300 mb-1">Enable Cloud Streaming</h4> <p class="text-xs text-gray-500 dark:text-gray-400 leading-relaxed">Stream your camera feed through our secure cloud platform to
                  enable: <span class="block mt-1 ml-2"> Remote viewing from anywhere</span> <span class="block ml-2"> AI-powered analytics and processing</span> <span class="block ml-2"> Secure access management</span></p></div> <div class="flex items-center"><!></div></div></div></div> <div class="flex flex-col pb-4"><!> <div class="flex flex-wrap py-4 justify-between gap-x-10 items-start"><div class="flex items-center gap-1"><!> <!></div> <div class="flex items-center gap-1"><!> <!></div> <div class="flex items-center gap-1"><!> <!></div> <div class="flex items-center gap-1 mr-6 md:mr-auto"><!> <!></div></div> <div class="flex flex-col items-start justify-between md:justify-start pb-4 w-full gap-4 mt-5"><!> <!></div></div> <div class="flex flex-col mx-auto"><!></div>`,1),ad=P("<!> <!>",1),nd=P('<div class="flex items-center space-x-2 pb-4 gap-x-16 w-full"><!> <!></div> <div class="flex items-center justify-between pb-4"><!> <div class="w-[75%]"><!> <div class="text-rose-500 text-xs pt-2"><!></div></div></div> <div class="flex items-center justify-between pb-4"><!> <div class="w-[75%]"><!> <div class="text-rose-500 text-xs pt-2"><!></div></div></div> <div class="flex items-center gap-x-[7rem] pb-4"><!> <div class="flex items-center space-x-4"><!> <span>.</span> <!> <span>.</span> <!></div></div> <div class="flex items-center justify-between pb-4"><!> <div class="w-[75%]"><!> <div class="text-rose-500 text-xs pt-2"><!></div></div></div> <div class="flex items-center gap-x-[7rem]"><!> <div class="flex items-center space-x-4"><div class="flex-1"><!> <!></div> <div class="flex-1"><!> <!></div></div></div> <div class="flex flex-col pb-4"><!> <div class="flex flex-wrap py-4 justify-between gap-x-10 items-start"><div class="flex items-center gap-1"><!> <!></div> <div class="flex items-center gap-1"><!> <!></div> <div class="flex items-center gap-1"><!> <!></div> <div class="flex items-center gap-1 mr-6 md:mr-auto"><!> <!></div></div> <div class="flex flex-col items-start justify-between md:justify-start pb-4 w-full gap-4 mt-5"><!> <!></div></div> <div class="flex flex-col mx-auto"><!></div>',1),sd=P('<div class="mt-3"><!> <div class="flex items-center gap-3 w-full"><div class="flex items-center space-x-3 w-full mt-3"><!> <span>.</span> <!> <span>.</span> <!> <span>.</span> <!></div></div></div>'),od=P("<p>Fetch Cameras</p>"),id=P('<!> <p class="text-xs">Fetching Cameres...</p>',1),ld=P("<!> <!> <!> <!> <!> <!>",1),cd=P("<!> <!> <!> <!> <!> <!>",1),dd=P("<!> <!>",1),ud=P('<div class="flex flex-col items-stretch justify pb-4 gap-4 w-full h-[15rem] overflow-auto"><!></div>'),fd=P('<div class="flex items-center justify-between pb-4"><!> <div class="w-[75%]"><!> <div class="text-rose-500 text-xs pt-2"><!></div></div></div> <div class="flex items-center justify-between pb-4"><!> <div class="w-[75%]"><!> <div class="text-rose-500 text-xs pt-2"><!></div></div></div> <div><!> <div class="flex items-center gap-3 w-full"><div class="flex items-center space-x-3 w-full mt-3"><!> <span>.</span> <!> <span>.</span> <!> <span>.</span> <!></div></div></div> <!> <div class="flex flex-col items-start justify-between pb-4 gap-y-3 mt-2"><!> <div class="w-full"><!> <div class="text-rose-500 text-xs pt-2"><!></div></div></div> <div class="flex items-center justify-between pb-4"><!></div> <!>',1),vd=P("<!> <!> <!> <!>",1),hd=P('<div class="flex flex-col pb-4"><!> <div class="flex flex-wrap py-4 justify-between gap-x-10 items-start"><div class="flex items-center gap-1"><!> <!></div> <div class="flex items-center gap-1"><!> <!></div> <div class="flex items-center gap-1"><!> <!></div> <div class="flex items-center gap-1 mr-6 md:mr-auto"><!> <!></div></div> <div class="flex flex-col items-start justify-between md:justify-start pb-4 w-full gap-4 mt-5"><!> <!></div></div> <div class="flex flex-col mx-auto"><!></div>',1),pd=P('<div class="flex flex-col sm:flex-row items-center justify-between pb-4"><!> <div class="flex items-center space-x-2"><!> <!> <!></div></div> <div class="flex flex-col pb-4"><!> <!> <div class="text-rose-500 text-xs pt-2"><!></div></div> <!> <!>',1),md=P("<!> <!> <!>",1),gd=P("<!> <!> <!>",1),bd=P("<!> <!>",1),_d=P("<!> Adding...",1),xd=P('<div><h4 class="mb-5">Select the cameras you want to register</h4> <div class="w-full"><div class="rounded-md border"><!></div></div> <div class="flex items-center justify-between py-4"><!> <div class="w-[75%]"><!> <div class="text-rose-500 text-xs pt-2"><!></div></div></div> <div class="flex items-center justify-between pb-4"><!> <div class="w-[75%]"><!> <div class="text-rose-500 text-xs pt-2"><!></div></div></div> <div class="flex flex-col mx-auto"><!></div></div>'),yd=P('<form class="space-y-4 mt-4 w-full max-h-[calc(100vh-12rem)] overflow-y-auto p-4 rounded-md"><div class="flex flex-col sm:flex-row items-center justify-between border-b pb-8"><!> <!></div> <!></form>');function $d(a,e){tr(e,!1);const t=Ir(),r=()=>ee(ha,"$user",t),n=()=>ee(pe,"$isLocalNetwork",t),o=()=>ee(Z,"$streamToCloud",t),i=()=>ee($e,"$isBulk",t),l=()=>ee(G,"$cameraMethod",t),f=()=>ee(F,"$selectedOnvifCameras",t),h=()=>ee(ue,"$errors",t),p=()=>ee(Le,"$discoveryData",t),m=()=>ee(R,"$clickedSubmit",t),$=new bo("https://vms.lenscorp.cloud");let x=g(e,"cameraName",12,""),w=g(e,"mainUrl",12,""),L=g(e,"subUrl",12,""),S=g(e,"doneSubmit",12,!1),U=g(e,"modalOpen",8),G=ct("manual"),I=_e(""),M=_e(""),ge="",q=_e(""),Y=_e(""),fe=_e(""),J=_e(""),ve=_e(""),de=_e(""),be=_e(""),N=_e(""),ne=_e(""),Q=_e("rtsp"),$e=ct(!0),Le=ct([]);const b=ct([]);let k=_e([]),O=_e(!1),R=ct(!1),F=ct([]),H=_e(1),A=_e(255);const{form:se,errors:ue,reset:oe,isSubmitting:Se}=Ls({initialValues:{name:"",url:"",subUrl:""},onSubmit:async z=>{j(),oe()},onError:z=>{console.error("Form validation failed:",z)}});function te(){const z=window.location.hostname;return z==="localhost"||z==="127.0.0.1"}const j=async()=>{if(s(Q)==="rtsp")try{const z={name:x(),url:w(),subUrl:L(),node:na,save:!0,session:r()?.session[0],isLocalNetwork:n(),streamToCloud:o(),fps:1};if(window.api||te()){const C=await $.collection("camera").create(z);C?await hr.collection("camera").create(C):await hr.collection("camera").create(z)}else{const C=await hr.collection("camera").create(z)}S(!0),U().set(!1),Ht("Camera added successfully via rtsp",r()?.email||"",r()?.id||""),ur.success("Camera added successfully")}catch(z){console.error("Failed to add camera:",z)}else if(s(Q)==="spectra"){s(M)?.includes("@")?_(M,s(M).replace("@","%40")):s(M)?.includes("#")?_(M,s(M).replace("#","%23")):s(M)?.includes("&")?_(M,s(M).replace("&","%26")):s(M)?.includes("?")?_(M,s(M).replace("?","%3F")):s(M)?.includes("/")?_(M,s(M).replace("/","%2F")):s(M)?.includes("$")&&_(M,s(M).replace("$","%24"));for(let z=s(H);z<=s(A);z++){let C=`rtsp://${s(I)}:${s(M)}@${s(q)}.${s(Y)}.${s(fe)}.${z}:${Number(s(ne))}/lkm/live/1/1`,K=`rtsp://${s(I)}:${s(M)}@${s(q)}.${s(Y)}.${s(fe)}.${z}:${Number(s(ne))}/lkm/live/1/2`;try{const Pe={name:`camera-${z}`,hostname:ge,username:s(I),password:s(M),port:Number(s(ne)),url:C,subUrl:K,node:na,save:!0,session:r()?.session[0],fps:1};if(window.api||te()){const Ae=await $.collection("camera").create(Pe);Ae?await hr.collection("camera").create(Ae):await hr.collection("camera").create(Pe)}else{const Ae=await hr.collection("camera").create(Pe)}S(!0)}catch(Pe){console.error("Failed to add camera:",Pe)}}S(!0),U().set(!1),Ht("Camera added successfully via spectra",r()?.email||"",r()?.id||""),ur.success("Camera added successfully")}else V()},le=Zc(),B=async()=>{_(O,!0);try{if(i()&&s(J)>=s(N))throw new Error("Start IP can not be less than end IP");let z;if(i()?z=await fetch(`${le}/discover-cameras?startIp=${s(q)}.${s(Y)}.${s(fe)}.${s(J)}&endIp=${s(ve)}.${s(de)}.${s(be)}.${s(N)}&username=${s(I)}&password=${s(M)}&port=${s(ne)}`):z=await fetch(`${le}/discover-cameras?startIp=${s(q)}.${s(Y)}.${s(fe)}.${s(J)}&endIp=${s(q)}.${s(Y)}.${s(fe)}.${s(J)}&username=${s(I)}&password=${s(M)}&port=${s(ne)}`),!z.ok)throw new Error(`Error: ${z.status} ${z.statusText}`);const C=await z.json();C?.cameras?.length===0&&ur.error("No cameras found"),_(k,C.cameras||[])}catch(z){console.error("Failed to fetch ONVIF cameras:",z),ur.error(z?.message||"Failed to fetch ONVIF cameras")}finally{_(O,!1)}},re=z=>{b.update(C=>C?.includes(z)?C?.filter(K=>K!==z):[...C,z])},ke=async()=>{try{await fetch("http://localhost:3000/onvif/discovery/start",{method:"GET",headers:{"Content-Type":"application/json"}}).then(async z=>{const C=await z.json();Le.set(C?.devices||C)})}catch(z){ur.error(z?.message||"Something went wrong while intializing onvif!"),console.log(z?.message,"err")}},y=z=>[/^10\./,/^172\.(1[6-9]|2[0-9]|3[0-1])\./,/^192\.168\./,/^127\./,/^169\.254\./].some(K=>K.test(z));let pe=ct(!1),Z=ct(!1);const V=async()=>{const z=f().map(async Ee=>{const pt=`${le}/get-stream-uris?ip=${Ee.ipAddress}&username=${s(I)}&password=${s(M)}&port=${s(ne)}`;try{const ot=await fetch(pt,{method:"GET",headers:{"Content-Type":"application/json"}});if(!ot.ok)throw new Error(`Error: ${ot.status} ${ot.statusText}`);const Nt=await ot.json();return Ht("Camera added successfully via rtsp to db method",r()?.email||"",r()?.id||""),{camera:Ee.cameraName,data:Nt}}catch(ot){return console.error(`Failed to fetch stream URIs for ${Ee.cameraName}:`,ot),{camera:Ee.cameraName,error:ot.message}}}),C=await Promise.all(z),Ae=(Ee=>Ee.map((pt,ot)=>{const Nt=pt.data.streams;return F?.length>1?{name:x(),url:Nt[0]?.streamUri||"",subUrl:Nt[1]?.streamUri||"",motionSensitivity:33,node:na,save:!0,fps:1}:{name:x()+`-${ot+1}`,url:Nt[0]?.streamUri||"",subUrl:Nt[1]?.streamUri||"",motionSensitivity:33,node:na,save:!0,isLocalNetwork:pe,streamToCloud:o(),fps:1}}))(C).map(async Ee=>{try{if(window.api||te()){const pt=await $.collection("camera").create(Ee);pt?await hr.collection("camera").create(pt):await hr.collection("camera").create(Ee)}else{const pt=await hr.collection("camera").create(Ee)}}catch(pt){console.error("Failed to add camera:",pt)}});await Promise.all(Ae),ur.success("Camera added successfully"),U().set(!1),location.reload()},ye=(z,C)=>{if("key"in z&&z.key==="."){z.preventDefault();const Ae=document.getElementById(C);Ae&&Ae.focus();return}if("key"in z&&(z.key==="Backspace"||z.key==="Delete"))return;const K=z.target;let Pe=K.value;if(Pe=Pe.replace(/[^\d]/g,""),Pe.length>3&&(Pe=Pe.slice(0,3)),K.value=Pe,Pe.length===3&&parseInt(Pe)<=255){const Ae=document.getElementById(C);Ae&&Ae.focus()}};St(()=>l(),()=>{l()==="automatic"&&ke()}),St(()=>Vt(w()),()=>{if(w())try{const z=w().match(/@([^:/@]+)/);if(z&&z[1]){const C=z[1];pe.set(y(C))}}catch(z){console.error("Error parsing IP address:",z)}}),jr(),er();var ae=yd(),Ne=v(ae),xt=v(Ne);rt(xt,{class:"text-left mb-2",children:(z,C)=>{E();var K=D("Select method of adding camera");c(z,K)},$$slots:{default:!0}});var Je=d(xt,2);bs(Je,{onSelectedChange:z=>G.set(z?.value),children:(z,C)=>{var K=ed(),Pe=T(K);_s(Pe,{class:"w-full sm:w-1/3",children:(Ee,pt)=>{xs(Ee,{placeholder:"Manual"})},$$slots:{default:!0}});var Ae=d(Pe,2);ys(Ae,{children:(Ee,pt)=>{var ot=Qc(),Nt=T(ot);rn(Nt,{value:"manual",children:(ar,Ce)=>{E();var Xe=D("Manual");c(ar,Xe)},$$slots:{default:!0}});var qt=d(Nt,2);rn(qt,{value:"automatic",children:(ar,Ce)=>{E();var Xe=D("Automatic");c(ar,Xe)},$$slots:{default:!0}}),c(Ee,ot)},$$slots:{default:!0}}),c(z,K)},$$slots:{default:!0}}),u(Ne);var xe=d(Ne,2);{var st=z=>{var C=pd(),K=T(C),Pe=v(K);rt(Pe,{class:"text-left mb-2",children:(X,it)=>{E();var qe=D("Insert a new camera to node");c(X,qe)},$$slots:{default:!0}});var Ae=d(Pe,2),Ee=v(Ae);rt(Ee,{for:"single",class:"text-xs font-normal",children:(X,it)=>{E();var qe=D("Single Upload");c(X,qe)},$$slots:{default:!0}});var pt=d(Ee,2);kr(pt,{id:"bulk",onCheckedChange:()=>$e.set(!i()),get checked(){return qr(),i()},set checked(X){Zr($e,X)},$$legacy:!0});var ot=d(pt,2);rt(ot,{for:"bulk",class:"text-xs font-normal",children:(X,it)=>{E();var qe=D("Bulk Upload");c(X,qe)},$$slots:{default:!0}}),u(Ae),u(K);var Nt=d(K,2),qt=v(Nt);rt(qt,{class:"text-left mb-2",children:(X,it)=>{E();var qe=D("Camera Name");c(X,qe)},$$slots:{default:!0}});var ar=d(qt,2);Ut(ar,{type:"text",name:"name",placeholder:"Home-Garage",get value(){return x()},set value(X){x(X)},$$legacy:!0});var Ce=d(ar,2),Xe=v(Ce);{var Ge=X=>{var it=D();ie(()=>Ye(it,h().name)),c(X,it)};me(Xe,X=>{h().name&&X(Ge)})}u(Ce),u(Nt);var lt=d(Nt,2);$o(lt,{get value(){return s(Q)},set value(X){_(Q,X)},children:(X,it)=>{var qe=vd(),ut=T(qe);wo(ut,{class:"grid w-full grid-cols-3",children:(je,at)=>{var Re=td(),Oe=T(Re);an(Oe,{value:"onvif",children:(Fe,tt)=>{E();var vt=D("ONVIF");c(Fe,vt)},$$slots:{default:!0}});var We=d(Oe,2);an(We,{value:"rtsp",children:(Fe,tt)=>{E();var vt=D("RTSP");c(Fe,vt)},$$slots:{default:!0}});var Ze=d(We,2);an(Ze,{value:"spectra",children:(Fe,tt)=>{E();var vt=D("Custom");c(Fe,vt)},$$slots:{default:!0}}),c(je,Re)},$$slots:{default:!0}});var Me=d(ut,2);nn(Me,{value:"rtsp",class:"p-3",children:(je,at)=>{var Re=rd(),Oe=T(Re),We=v(Oe);rt(We,{class:"text-left mb-2",children:(Ue,Rt)=>{E();var gt=D("Main URL");c(Ue,gt)},$$slots:{default:!0}});var Ze=d(We,2);Ut(Ze,{type:"text",name:"url",placeholder:"rtsp://admin:password@123.123.123.123/stream/1",get value(){return w()},set value(Ue){w(Ue)},$$legacy:!0});var Fe=d(Ze,2),tt=v(Fe);{var vt=Ue=>{var Rt=D();ie(()=>Ye(Rt,h().url)),c(Ue,Rt)};me(tt,Ue=>{h().url&&Ue(vt)})}u(Fe),u(Oe);var zt=d(Oe,2),ht=v(zt);rt(ht,{class:"text-left mb-2",children:(Ue,Rt)=>{E();var gt=D("Sub URL");c(Ue,gt)},$$slots:{default:!0}});var Tt=d(ht,2);Ut(Tt,{type:"text",name:"subUrl",placeholder:"rtsp://admin:password@123.123.123.123/stream/2",get value(){return L()},set value(Ue){L(Ue)},$$legacy:!0});var Ct=d(Tt,2),Xt=v(Ct);{var Dt=Ue=>{var Rt=D();ie(()=>Ye(Rt,h().subUrl)),c(Ue,Rt)};me(Xt,Ue=>{h().subUrl&&Ue(Dt)})}u(Ct);var mt=d(Ct,2),Be=v(mt),Qe=d(v(Be),2),Mt=v(Qe);kr(Mt,{id:"internal-network",class:"data-[state=checked]:bg-primary",onCheckedChange:Ue=>pe.set(Ue),get checked(){return qr(),n()},set checked(Ue){Zr(pe,Ue)},$$legacy:!0}),u(Qe),u(Be);var jt=d(Be,2),dt=d(v(jt),2),Lt=v(dt);kr(Lt,{id:"stream-to-cloud",class:"data-[state=checked]:bg-primary",onCheckedChange:Ue=>Z.set(Ue),get checked(){return qr(),o()},set checked(Ue){Zr(Z,Ue)},$$legacy:!0}),u(dt),u(jt),u(mt),u(zt);var kt=d(zt,2),Gt=v(kt);rt(Gt,{class:"text-left mb-2",children:(Ue,Rt)=>{E();var gt=D("Features");c(Ue,gt)},$$slots:{default:!0}});var nr=d(Gt,2),lr=v(nr),cr=v(lr);kr(cr,{id:"feedSaving"});var gr=d(cr,2);rt(gr,{for:"feedSaving",class:"text-xs font-normal text-nowrap",children:(Ue,Rt)=>{E();var gt=D("Feed Saving");c(Ue,gt)},$$slots:{default:!0}}),u(lr);var yr=d(lr,2),dr=v(yr);kr(dr,{id:"vehicleScan"});var $r=d(dr,2);rt($r,{for:"vehicleScan",class:"text-xs font-normal text-nowrap",children:(Ue,Rt)=>{E();var gt=D("Vehicle Scan");c(Ue,gt)},$$slots:{default:!0}}),u(yr);var zr=d(yr,2),fr=v(zr);kr(fr,{id:"faceScan"});var Fr=d(fr,2);rt(Fr,{for:"faceScan",class:"text-xs font-normal text-nowrap",children:(Ue,Rt)=>{E();var gt=D("Face Scan");c(Ue,gt)},$$slots:{default:!0}}),u(zr);var br=d(zr,2),wr=v(br);kr(wr,{id:"priority"});var Sr=d(wr,2);rt(Sr,{for:"priority",class:"text-xs font-normal text-nowrap",children:(Ue,Rt)=>{E();var gt=D("Priority");c(Ue,gt)},$$slots:{default:!0}}),u(br),u(nr);var Ar=d(nr,2),ce=v(Ar);rt(ce,{class:"text-left mb-2 text-nowrap",children:(Ue,Rt)=>{E();var gt=D("Motion Sensitivity");c(Ue,gt)},$$slots:{default:!0}});var $t=d(ce,2);zn($t,{value:[0],max:255,step:1,class:"text-left w-[80%]"}),u(Ar),u(kt);var Ft=d(kt,2),Br=v(Ft);pr(Br,{variant:"brand",type:"submit",class:"font-semibold",children:(Ue,Rt)=>{E();var gt=D("Confirm");c(Ue,gt)},$$slots:{default:!0}}),u(Ft),c(je,Re)},$$slots:{default:!0}});var Te=d(Me,2);nn(Te,{value:"spectra",class:"p-3",children:(je,at)=>{var Re=nd(),Oe=T(Re),We=v(Oe);rt(We,{class:"text-left mb-2",children:(he,nt)=>{E();var bt=D("Select Client");c(he,bt)},$$slots:{default:!0}});var Ze=d(We,2);bs(Ze,{children:(he,nt)=>{var bt=ad(),za=T(bt);_s(za,{class:"w-full sm:w-1/3",children:(Jn,ei)=>{xs(Jn,{placeholder:"Spectra"})},$$slots:{default:!0}});var Yn=d(za,2);ys(Yn,{children:(Jn,ei)=>{rn(Jn,{value:"spectra",children:(ti,Xu)=>{E();var ri=D("Spectra");c(ti,ri)},$$slots:{default:!0}})},$$slots:{default:!0}}),c(he,bt)},$$slots:{default:!0}}),u(Oe);var Fe=d(Oe,2),tt=v(Fe);rt(tt,{children:(he,nt)=>{E();var bt=D("User Name");c(he,bt)},$$slots:{default:!0}});var vt=d(tt,2),zt=v(vt);Ut(zt,{type:"text",name:"userName",placeholder:"Camera portal username",class:" text-xs",get value(){return s(I)},set value(he){_(I,he)},$$legacy:!0});var ht=d(zt,2),Tt=v(ht);{var Ct=he=>{var nt=D();ie(()=>Ye(nt,h().userName)),c(he,nt)};me(Tt,he=>{h().userName&&he(Ct)})}u(ht),u(vt),u(Fe);var Xt=d(Fe,2),Dt=v(Xt);rt(Dt,{children:(he,nt)=>{E();var bt=D("Password");c(he,bt)},$$slots:{default:!0}});var mt=d(Dt,2),Be=v(mt);Ut(Be,{type:"password",name:"password",placeholder:"Camera portal password",class:"text-xs",get value(){return s(M)},set value(he){_(M,he)},$$legacy:!0});var Qe=d(Be,2),Mt=v(Qe);{var jt=he=>{var nt=D();ie(()=>Ye(nt,h().password)),c(he,nt)};me(Mt,he=>{h().password&&he(jt)})}u(Qe),u(mt),u(Xt);var dt=d(Xt,2),Lt=v(dt);rt(Lt,{children:(he,nt)=>{E();var bt=D("Base IP");c(he,bt)},$$slots:{default:!0}});var kt=d(Lt,2),Gt=v(kt);Ut(Gt,{type:"number",class:"text-xs",placeholder:"192",get value(){return s(q)},set value(he){_(q,he)},$$legacy:!0});var nr=d(Gt,4);Ut(nr,{type:"number",class:"text-xs",placeholder:"168",get value(){return s(Y)},set value(he){_(Y,he)},$$legacy:!0});var lr=d(nr,4);Ut(lr,{type:"number",class:"text-xs",placeholder:"1",get value(){return s(fe)},set value(he){_(fe,he)},$$legacy:!0}),u(kt),u(dt);var cr=d(dt,2),gr=v(cr);rt(gr,{children:(he,nt)=>{E();var bt=D("HTTP Port");c(he,bt)},$$slots:{default:!0}});var yr=d(gr,2),dr=v(yr);Ut(dr,{type:"text",name:"httpPort",placeholder:"Port",class:" text-xs",get value(){return s(ne)},set value(he){_(ne,he)},$$legacy:!0});var $r=d(dr,2),zr=v($r);{var fr=he=>{var nt=D();ie(()=>Ye(nt,h().httpPort)),c(he,nt)};me(zr,he=>{h().httpPort&&he(fr)})}u($r),u(yr),u(cr);var Fr=d(cr,2),br=v(Fr);rt(br,{class:"text-left mb-2",children:(he,nt)=>{E();var bt=D("Range");c(he,bt)},$$slots:{default:!0}});var wr=d(br,2),Sr=v(wr),Ar=v(Sr);rt(Ar,{class:"text-xs mb-1",children:(he,nt)=>{E();var bt=D("Start Host");c(he,bt)},$$slots:{default:!0}});var ce=d(Ar,2);Ut(ce,{type:"number",min:0,get max(){return s(A)},class:"text-xs w-16",placeholder:"Min value",get value(){return s(H)},set value(he){_(H,he)},$$legacy:!0}),u(Sr);var $t=d(Sr,2),Ft=v($t);rt(Ft,{class:"text-xs mb-1",children:(he,nt)=>{E();var bt=D("End Host");c(he,bt)},$$slots:{default:!0}});var Br=d(Ft,2);Ut(Br,{type:"number",get min(){return s(H)},max:255,class:"text-xs w-16",placeholder:"Max value",get value(){return s(A)},set value(he){_(A,he)},$$legacy:!0}),u($t),u(wr),u(Fr);var Ue=d(Fr,2),Rt=v(Ue);rt(Rt,{class:"text-left mb-2",children:(he,nt)=>{E();var bt=D("Features");c(he,bt)},$$slots:{default:!0}});var gt=d(Rt,2),Lr=v(gt),Qr=v(Lr);kr(Qr,{id:"feedSaving"});var Bt=d(Qr,2);rt(Bt,{for:"feedSaving",class:"text-xs font-normal text-nowrap",children:(he,nt)=>{E();var bt=D("Feed Saving");c(he,bt)},$$slots:{default:!0}}),u(Lr);var Yr=d(Lr,2),ia=v(Yr);kr(ia,{id:"vehicleScan"});var ba=d(ia,2);rt(ba,{for:"vehicleScan",class:"text-xs font-normal text-nowrap",children:(he,nt)=>{E();var bt=D("Vehicle Scan");c(he,bt)},$$slots:{default:!0}}),u(Yr);var _r=d(Yr,2),Pr=v(_r);kr(Pr,{id:"faceScan"});var ea=d(Pr,2);rt(ea,{for:"faceScan",class:"text-xs font-normal text-nowrap",children:(he,nt)=>{E();var bt=D("Face Scan");c(he,bt)},$$slots:{default:!0}}),u(_r);var Hr=d(_r,2),ta=v(Hr);kr(ta,{id:"priority"});var _a=d(ta,2);rt(_a,{for:"priority",class:"text-xs font-normal text-nowrap",children:(he,nt)=>{E();var bt=D("Priority");c(he,bt)},$$slots:{default:!0}}),u(Hr),u(gt);var Zt=d(gt,2),Vr=v(Zt);rt(Vr,{class:"text-left mb-2 text-nowrap",children:(he,nt)=>{E();var bt=D("Motion Sensitivity");c(he,bt)},$$slots:{default:!0}});var vr=d(Vr,2);zn(vr,{value:[0],max:255,step:1,class:"text-left w-[80%]"}),u(Zt),u(Ue);var Jr=d(Ue,2),Mr=v(Jr);pr(Mr,{variant:"brand",type:"submit",class:"font-semibold",children:(he,nt)=>{E();var bt=D("Confirm");c(he,bt)},$$slots:{default:!0}}),u(Jr),c(je,Re)},$$slots:{default:!0}});var ft=d(Te,2);nn(ft,{value:"onvif",class:"p-3",children:(je,at)=>{var Re=fd(),Oe=T(Re),We=v(Oe);rt(We,{children:(ce,$t)=>{E();var Ft=D("User Name");c(ce,Ft)},$$slots:{default:!0}});var Ze=d(We,2),Fe=v(Ze);Ut(Fe,{type:"text",name:"userName",placeholder:"Camera portal username",class:" text-xs",get value(){return s(I)},set value(ce){_(I,ce)},$$legacy:!0});var tt=d(Fe,2),vt=v(tt);{var zt=ce=>{var $t=D();ie(()=>Ye($t,h().userName)),c(ce,$t)};me(vt,ce=>{h().userName&&ce(zt)})}u(tt),u(Ze),u(Oe);var ht=d(Oe,2),Tt=v(ht);rt(Tt,{children:(ce,$t)=>{E();var Ft=D("Password");c(ce,Ft)},$$slots:{default:!0}});var Ct=d(Tt,2),Xt=v(Ct);Ut(Xt,{type:"password",name:"password",placeholder:"Camera portal password",class:"text-xs",get value(){return s(M)},set value(ce){_(M,ce)},$$legacy:!0});var Dt=d(Xt,2),mt=v(Dt);{var Be=ce=>{var $t=D();ie(()=>Ye($t,h().password)),c(ce,$t)};me(mt,ce=>{h().password&&ce(Be)})}u(Dt),u(Ct),u(ht);var Qe=d(ht,2),Mt=v(Qe);rt(Mt,{class:"mb-3",children:(ce,$t)=>{E();var Ft=D("Base IP");c(ce,Ft)},$$slots:{default:!0}});var jt=d(Mt,2),dt=v(jt),Lt=v(dt);Ut(Lt,{id:"ip1",type:"text",class:"text-xs",placeholder:"192",maxlength:"3",get value(){return s(q)},set value(ce){_(q,ce)},$$events:{input:ce=>ye(ce,"ip2"),keydown:ce=>ye(ce,"ip2")},$$legacy:!0});var kt=d(Lt,4);Ut(kt,{id:"ip2",type:"text",class:"text-xs",placeholder:"168",maxlength:"3",get value(){return s(Y)},set value(ce){_(Y,ce)},$$events:{input:ce=>ye(ce,"ip3"),keydown:ce=>ye(ce,"ip3")},$$legacy:!0});var Gt=d(kt,4);Ut(Gt,{id:"ip3",type:"text",class:"text-xs",placeholder:"1",maxlength:"3",get value(){return s(fe)},set value(ce){_(fe,ce)},$$events:{input:ce=>ye(ce,"ip4"),keydown:ce=>ye(ce,"ip4")},$$legacy:!0});var nr=d(Gt,4);Ut(nr,{id:"ip4",type:"text",class:"text-xs",placeholder:"1",maxlength:"3",get value(){return s(J)},set value(ce){_(J,ce)},$$legacy:!0}),u(dt),u(jt),u(Qe);var lr=d(Qe,2);{var cr=ce=>{var $t=sd(),Ft=v($t);rt(Ft,{class:"mb-3",children:(Bt,Yr)=>{E();var ia=D("End IP");c(Bt,ia)},$$slots:{default:!0}});var Br=d(Ft,2),Ue=v(Br),Rt=v(Ue);Ut(Rt,{id:"endIp1",type:"text",class:"text-xs",placeholder:"192",maxlength:"3",get value(){return s(ve)},set value(Bt){_(ve,Bt)},$$events:{input:Bt=>ye(Bt,"endIp2"),keydown:Bt=>ye(Bt,"endIp2")},$$legacy:!0});var gt=d(Rt,4);Ut(gt,{id:"endIp2",type:"text",class:"text-xs",placeholder:"168",maxlength:"3",get value(){return s(de)},set value(Bt){_(de,Bt)},$$events:{input:Bt=>ye(Bt,"endIp3"),keydown:Bt=>ye(Bt,"endIp3")},$$legacy:!0});var Lr=d(gt,4);Ut(Lr,{id:"endIp3",type:"text",class:"text-xs",placeholder:"1",maxlength:"3",get value(){return s(be)},set value(Bt){_(be,Bt)},$$events:{input:Bt=>ye(Bt,"endIp4"),keydown:Bt=>ye(Bt,"endIp4")},$$legacy:!0});var Qr=d(Lr,4);Ut(Qr,{id:"endIp4",type:"text",class:"text-xs",placeholder:"1",maxlength:"3",get value(){return s(N)},set value(Bt){_(N,Bt)},$$legacy:!0}),u(Ue),u(Br),u($t),c(ce,$t)};me(lr,ce=>{i()&&ce(cr)})}var gr=d(lr,2),yr=v(gr);rt(yr,{children:(ce,$t)=>{E();var Ft=D("HTTP Port");c(ce,Ft)},$$slots:{default:!0}});var dr=d(yr,2),$r=v(dr);Ut($r,{type:"text",name:"httpPort",placeholder:"Port",class:" text-xs",get value(){return s(ne)},set value(ce){_(ne,ce)},$$legacy:!0});var zr=d($r,2),fr=v(zr);{var Fr=ce=>{var $t=D();ie(()=>Ye($t,h().httpPort)),c(ce,$t)};me(fr,ce=>{h().httpPort&&ce(Fr)})}u(zr),u(dr),u(gr);var br=d(gr,2),wr=v(br);pr(wr,{variant:"brand",type:"button",class:"font-semibold w-full",$$events:{click:B},children:(ce,$t)=>{var Ft=ze(),Br=T(Ft);{var Ue=gt=>{var Lr=od();c(gt,Lr)},Rt=gt=>{var Lr=id(),Qr=T(Lr);Ks(Qr,{class:"animate-spin",size:14}),E(2),c(gt,Lr)};me(Br,gt=>{s(O)?gt(Rt,!1):gt(Ue)})}c(ce,Ft)},$$slots:{default:!0}}),u(br);var Sr=d(br,2);{var Ar=ce=>{var $t=ud(),Ft=v($t);Xs(Ft,{children:(Br,Ue)=>{var Rt=dd(),gt=T(Rt);Ws(gt,{children:(Qr,Bt)=>{Pn(Qr,{children:(Yr,ia)=>{var ba=ld(),_r=T(ba);la(_r,{class:"w-[50px]",children:(Zt,Vr)=>{Qn(Zt,{onCheckedChange:vr=>{vr?(F.set(s(k).map(Jr=>({ipAddress:Jr.ipAddress,cameraName:Jr.cameraName,brandName:Jr.brandName,hardwareId:Jr.hardwareId,serialNumber:Jr.serialNumber}))),console.log(f())):F.set([])}})},$$slots:{default:!0}});var Pr=d(_r,2);la(Pr,{children:(Zt,Vr)=>{E();var vr=D("Camera Name");c(Zt,vr)},$$slots:{default:!0}});var ea=d(Pr,2);la(ea,{children:(Zt,Vr)=>{E();var vr=D("IP Address");c(Zt,vr)},$$slots:{default:!0}});var Hr=d(ea,2);la(Hr,{children:(Zt,Vr)=>{E();var vr=D("Brand");c(Zt,vr)},$$slots:{default:!0}});var ta=d(Hr,2);la(ta,{children:(Zt,Vr)=>{E();var vr=D("Hardware ID");c(Zt,vr)},$$slots:{default:!0}});var _a=d(ta,2);la(_a,{children:(Zt,Vr)=>{E();var vr=D("Serial Number");c(Zt,vr)},$$slots:{default:!0}}),c(Yr,ba)},$$slots:{default:!0}})},$$slots:{default:!0}});var Lr=d(gt,2);Ys(Lr,{children:(Qr,Bt)=>{var Yr=ze(),ia=T(Yr);Dr(ia,1,()=>s(k),Nr,(ba,_r)=>{Pn(ba,{children:(Pr,ea)=>{var Hr=cd(),ta=T(Hr);ca(ta,{class:"font-medium",children:(Mr,he)=>{var nt=Ie(()=>f().map(bt=>bt.ipAddress).includes(s(_r).ipAddress));Qn(Mr,{onCheckedChange:bt=>bt?F.update(za=>[...za,s(_r)]):F.update(za=>za.filter(Yn=>Yn.ipAddress!==s(_r).ipAddress)),get checked(){return s(nt)}})},$$slots:{default:!0}});var _a=d(ta,2);ca(_a,{children:(Mr,he)=>{E();var nt=D();ie(()=>Ye(nt,s(_r).cameraName)),c(Mr,nt)},$$slots:{default:!0}});var Zt=d(_a,2);ca(Zt,{children:(Mr,he)=>{E();var nt=D();ie(()=>Ye(nt,s(_r).ipAddress)),c(Mr,nt)},$$slots:{default:!0}});var Vr=d(Zt,2);ca(Vr,{children:(Mr,he)=>{E();var nt=D();ie(()=>Ye(nt,s(_r).brandName)),c(Mr,nt)},$$slots:{default:!0}});var vr=d(Vr,2);ca(vr,{children:(Mr,he)=>{E();var nt=D();ie(()=>Ye(nt,s(_r).hardwareId)),c(Mr,nt)},$$slots:{default:!0}});var Jr=d(vr,2);ca(Jr,{children:(Mr,he)=>{E();var nt=D();ie(()=>Ye(nt,s(_r).serialNumber)),c(Mr,nt)},$$slots:{default:!0}}),c(Pr,Hr)},$$slots:{default:!0}})}),c(Qr,Yr)},$$slots:{default:!0}}),c(Br,Rt)},$$slots:{default:!0}}),u($t),c(ce,$t)};me(Sr,ce=>{s(k).length>0&&ce(Ar)})}c(je,Re)},$$slots:{default:!0}}),c(X,qe)},$$slots:{default:!0},$$legacy:!0});var At=d(lt,2);{var Ke=X=>{var it=hd(),qe=T(it),ut=v(qe);rt(ut,{class:"text-left mb-2",children:(mt,Be)=>{E();var Qe=D("Features");c(mt,Qe)},$$slots:{default:!0}});var Me=d(ut,2),Te=v(Me),ft=v(Te);kr(ft,{id:"feedSaving"});var je=d(ft,2);rt(je,{for:"feedSaving",class:"text-xs font-normal text-nowrap",children:(mt,Be)=>{E();var Qe=D("Feed Saving");c(mt,Qe)},$$slots:{default:!0}}),u(Te);var at=d(Te,2),Re=v(at);kr(Re,{id:"vehicleScan"});var Oe=d(Re,2);rt(Oe,{for:"vehicleScan",class:"text-xs font-normal text-nowrap",children:(mt,Be)=>{E();var Qe=D("Vehicle Scan");c(mt,Qe)},$$slots:{default:!0}}),u(at);var We=d(at,2),Ze=v(We);kr(Ze,{id:"faceScan"});var Fe=d(Ze,2);rt(Fe,{for:"faceScan",class:"text-xs font-normal text-nowrap",children:(mt,Be)=>{E();var Qe=D("Face Scan");c(mt,Qe)},$$slots:{default:!0}}),u(We);var tt=d(We,2),vt=v(tt);kr(vt,{id:"priority"});var zt=d(vt,2);rt(zt,{for:"priority",class:"text-xs font-normal text-nowrap",children:(mt,Be)=>{E();var Qe=D("Priority");c(mt,Qe)},$$slots:{default:!0}}),u(tt),u(Me);var ht=d(Me,2),Tt=v(ht);rt(Tt,{class:"text-left mb-2 text-nowrap",children:(mt,Be)=>{E();var Qe=D("Motion Sensitivity");c(mt,Qe)},$$slots:{default:!0}});var Ct=d(Tt,2);zn(Ct,{value:[0],max:255,step:1,class:"text-left w-[80%]"}),u(ht),u(qe);var Xt=d(qe,2),Dt=v(Xt);pr(Dt,{variant:"brand",type:"submit",class:"font-semibold",children:(mt,Be)=>{E();var Qe=D("Confirm");c(mt,Qe)},$$slots:{default:!0}}),u(Xt),c(X,it)};me(At,X=>{s(Q)==="onvif"&&s(k)?.length>0&&X(Ke)})}c(z,C)},Pt=z=>{var C=xd(),K=d(v(C),2),Pe=v(K),Ae=v(Pe);Xs(Ae,{children:(Me,Te)=>{var ft=bd(),je=T(ft);Ws(je,{children:(Re,Oe)=>{Pn(Re,{children:(We,Ze)=>{var Fe=md(),tt=T(Fe);la(tt,{class:"w-[100px]"});var vt=d(tt,2);la(vt,{children:(ht,Tt)=>{E();var Ct=D("Model");c(ht,Ct)},$$slots:{default:!0}});var zt=d(vt,2);la(zt,{children:(ht,Tt)=>{E();var Ct=D("IP");c(ht,Ct)},$$slots:{default:!0}}),c(We,Fe)},$$slots:{default:!0}})},$$slots:{default:!0}});var at=d(je,2);Ys(at,{children:(Re,Oe)=>{var We=ze(),Ze=T(We);Dr(Ze,1,p,Nr,(Fe,tt)=>{Pn(Fe,{children:(vt,zt)=>{var ht=gd(),Tt=T(ht);ca(Tt,{class:"font-medium",children:(Dt,mt)=>{Qn(Dt,{onCheckedChange:()=>re(s(tt))})},$$slots:{default:!0}});var Ct=d(Tt,2);ca(Ct,{children:(Dt,mt)=>{E();var Be=D();ie(()=>Ye(Be,s(tt)?.hardware)),c(Dt,Be)},$$slots:{default:!0}});var Xt=d(Ct,2);ca(Xt,{children:(Dt,mt)=>{E();var Be=D();ie(()=>Ye(Be,s(tt).xaddrs[0]?.split("//")[1]?.split("/")[0])),c(Dt,Be)},$$slots:{default:!0}}),c(vt,ht)},$$slots:{default:!0}})}),c(Re,We)},$$slots:{default:!0}}),c(Me,ft)},$$slots:{default:!0}}),u(Pe),u(K);var Ee=d(K,2),pt=v(Ee);rt(pt,{children:(Me,Te)=>{E();var ft=D("User Name");c(Me,ft)},$$slots:{default:!0}});var ot=d(pt,2),Nt=v(ot);Ut(Nt,{type:"text",name:"userName",placeholder:"Camera portal username",class:" text-xs",get value(){return s(I)},set value(Me){_(I,Me)},$$legacy:!0});var qt=d(Nt,2),ar=v(qt);{var Ce=Me=>{var Te=D();ie(()=>Ye(Te,h().userName)),c(Me,Te)};me(ar,Me=>{h().userName&&Me(Ce)})}u(qt),u(ot),u(Ee);var Xe=d(Ee,2),Ge=v(Xe);rt(Ge,{children:(Me,Te)=>{E();var ft=D("Password");c(Me,ft)},$$slots:{default:!0}});var lt=d(Ge,2),At=v(lt);Ut(At,{type:"password",name:"password",placeholder:"Camera portal password",class:"text-xs",get value(){return s(M)},set value(Me){_(M,Me)},$$legacy:!0});var Ke=d(At,2),X=v(Ke);{var it=Me=>{var Te=D();ie(()=>Ye(Te,h().password)),c(Me,Te)};me(X,Me=>{h().password&&Me(it)})}u(Ke),u(lt),u(Xe);var qe=d(Xe,2),ut=v(qe);pr(ut,{variant:"brand",class:"font-semibold",$$events:{click:()=>{R.set(!0),j().then(()=>console.log("Hey")),console.log("Hey2")}},children:(Me,Te)=>{var ft=ze(),je=T(ft);{var at=Oe=>{var We=_d(),Ze=T(We);Ks(Ze,{class:"animate-spin"}),E(),c(Oe,We)},Re=Oe=>{var We=D("Add Cameras");c(Oe,We)};me(je,Oe=>{m()?Oe(at):Oe(Re,!1)})}c(Me,ft)},$$slots:{default:!0}}),u(qe),u(C),c(z,C)};me(xe,z=>{l()==="manual"?z(st):z(Pt,!1)})}u(ae),bn(ae,z=>se?.(z)),c(a,ae),rr()}var wd=P("<button><!> </button>"),Sd=P('<div class="border-2 border-dashed border-gray-200 rounded-lg p-8"><div class="text-center text-gray-500"><button class="flex items-center gap-2 mx-auto text-blue-500"><!> Get started by adding your first label</button></div></div>'),Pd=P('<div class="flex items-center gap-4"><input type="text" placeholder="Name of the label" class="flex-1 p-2 border rounded-md"> <input type="text" placeholder="Input field" class="flex-1 p-2 border rounded-md"></div>'),Cd=P('<div class="flex flex-col gap-4"><!> <button class="flex items-center gap-2 text-blue-500 hover:bg-gray-50 p-2 rounded"><!> Add new</button></div>'),kd=P('<div class="mt-8"><!></div>'),Ed=P('<div class="space-y-4"><div class="flex items-center justify-between"><div><h3 class="text-lg font-semibold"> </h3> <p class="text-gray-500">Save camera feed directly to your device</p></div> <!></div> <!></div>'),Td=P('<div class="bg-[#000B40] text-white p-6"><!> <!></div> <div class="flex h-[400px]"><div class="w-64 bg-gray-100 p-2 space-y-1"></div> <div class="flex-1 p-6"></div></div> <div class="flex justify-end gap-3 p-4 border-t"><!> <!></div>',1),Dd=P("<!> <!>",1);function Id(a,e){tr(e,!1);const t=Ir(),r=()=>ee(na,"$selectedNode",t);let n=g(e,"cameraName",8,""),o=g(e,"cameraURL",8,""),i=g(e,"cameraId",8,""),l=g(e,"save",12),f=g(e,"face",8),h=g(e,"running",8),p=g(e,"token",8),m=g(e,"faceDetectionThreshold",8,.6),$=g(e,"faceSearchThreshold",8,.3),x=g(e,"runningDetectionThreshold",8,.75),w=g(e,"saveDuration",8),L=g(e,"saveFolder",8),S=g(e,"motion",8,1e3),U=g(e,"priority",8),G=g(e,"intrusionDetection",8),I=g(e,"intrusionPerson",8),M=g(e,"intrusionVehicle",8),ge=g(e,"intrusionPersonThresh",8,.3),q=g(e,"intrusionVehicleThresh",8,.3),Y=g(e,"lineCrossing",8),fe=g(e,"linePerson",8),J=g(e,"lineVehicle",8),ve=g(e,"linePersonThresh",8,.3),de=g(e,"lineVehicleThresh",8,.3),be=g(e,"personCount",8),N=g(e,"subUrl",8),ne=g(e,"theft",8),Q=g(e,"safety",8),$e=g(e,"person",8),Le=g(e,"employeEE",8),b=g(e,"heatmap",8),k=g(e,"theftDetectionThresh",8,.5),O=g(e,"showOptions",8),R=g(e,"isSettingsDialogOpen",8);g(e,"cameraNo",8);let F=g(e,"moksaId",8),H=g(e,"user",8),A=_e(!1),se=_e("theft-detection");const ue=[{id:"theft-detection",label:"Theft Detection",icon:ji},{id:"heatmap",label:"Heatmap",icon:el},{id:"person-count",label:"Person Count",icon:vl},{id:"kitchen-safety",label:"Kitchen Safety",icon:Po},{id:"employee-safety",label:"Employee Safety",icon:hl}];let oe=_e({"employee-safety":[],"theft-detection":[],heatmap:[],"person-count":[],"kitchen-safety":[]});const Se=async()=>{setTimeout(()=>{console.log(O().set(""))},1e3),await fetch("/api/camera/editCamera",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({cameraId:i(),nodeId:r().id,name:n(),url:o(),subUrl:N(),face:f(),save:l(),running:h(),faceDetectionThreshold:m(),faceSearchThreshold:$(),runningThresh:x(),saveDuration:w(),saveFolder:L(),motionThresh:S()===0?1e3:S(),priority:U()===!0?1:0,intrusionDetection:G(),intrusionPerson:I(),intrusionVehicle:M(),intrusionPersonThresh:ge(),intrusionVehicleThresh:q(),lineCrossing:Y(),linePerson:fe(),lineVehicle:J(),linePersonThresh:ve(),lineVehicleThresh:de(),personCount:be(),theft:ne(),safety:Q(),person:$e(),theftDetectionThresh:k(),employeEE:Le(),heatmap:b()})}).then(()=>{ur("Camera settings updated."),_(A,!1)});const te={heat:b()||!1,count:$e()||!1,theft:ne()||!1,kitchenhygiene:Q()||!1,rtsp:!1};await(await fetch("/api/camera/updateFeatures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({storeId:r().moksaId,camId:F(),feature:te})})).json();const le={},B={},re={},ke={},y={};for(const Z of ue)s(oe)[Z.id].forEach(V=>{V.name&&V.value&&(Z.id==="employee-safety"?le[V.name]=V.value:Z.id==="theft-detection"?B[V.name]=V.value:Z.id==="heatmap"?re[V.name]=V.value:Z.id==="person-count"?ke[V.name]=V.value:Z.id==="kitchen-safety"&&(y[V.name]=V.value))});const pe={lensCameraId:i(),triggerDeployment:!0,storeId:r()?.moksaId};Object.keys(le).length>0&&(pe.mobileCustomerVars={isEnabled:"True",...le}),Object.keys(B).length>0&&(pe.theftCustomerVars={isEnabled:"True",...B}),Object.keys(re).length>0&&(pe.heatmapCustomerVars={isEnabled:"True",...re}),Object.keys(ke).length>0&&(pe.peopleCustomerVars={isEnabled:"True",...ke}),Object.keys(y).length>0&&(pe.kitchenCustomerVars={isEnabled:"True",...y}),await ci.post(`https://api.moksa.ai/store/updateCustomerVars/${r()?.moksaId}`,pe,{headers:{Authorization:`Bearer ${p()}`,"Content-Type":"application/json"}}).then(Z=>{console.log("Customer variables updated:",Z.data)}).catch(Z=>{console.error("Error updating customer variables:",Z.response?.data||Z.message)})};St(()=>(s(A),Vt(R())),()=>{s(A)?R().set(!0):R().set(!1)}),jr(),er(),hn(a,{get open(){return s(A)},set open(te){_(A,te)},children:(te,j)=>{var le=Dd(),B=T(le);Un(B,{children:(ke,y)=>{var pe=ze(),Z=T(pe);It(Z,e,"default",{},null),c(ke,pe)},$$slots:{default:!0}});var re=d(B,2);pn(re,{class:"sm:max-w-[900px] scale-90 2xl:scale-100 max-h-[90%] overflow-y-scroll",children:(ke,y)=>{var pe=Td(),Z=T(pe),V=v(Z);jn(V,{class:"text-xl font-semibold",children:(z,C)=>{E();var K=D("Camera Settings");c(z,K)},$$slots:{default:!0}});var ye=d(V,2);Ui(ye,{class:"text-gray-300",children:(z,C)=>{E();var K=D();ie(()=>Ye(K,`Change settings for ${n()??""} camera`)),c(z,K)},$$slots:{default:!0}}),u(Z);var ae=d(Z,2),Ne=v(ae);Dr(Ne,5,()=>ue,Nr,(z,C)=>{var K=wd(),Pe=v(K);Ri(Pe,()=>s(C).icon,(Ee,pt)=>{pt(Ee,{class:"w-5 h-5"})});var Ae=d(Pe);u(K),ie(()=>{wt(K,`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm
            ${(s(se)===s(C).id?"bg-blue-500 text-white":"hover:bg-gray-200")??""}`),Ye(Ae,` ${s(C).label??""}`)}),we("click",K,()=>_(se,s(C).id)),c(z,K)}),u(Ne);var xt=d(Ne,2);Dr(xt,5,()=>ue,Nr,(z,C)=>{var K=ze(),Pe=T(K);{var Ae=Ee=>{var pt=Ed(),ot=v(pt),Nt=v(ot),qt=v(Nt),ar=v(qt,!0);u(qt),E(2),u(Nt);var Ce=d(Nt,2);kr(Ce,{get checked(){return l()},set checked(lt){l(lt)},$$legacy:!0}),u(ot);var Xe=d(ot,2);{var Ge=lt=>{var At=kd(),Ke=v(At);{var X=qe=>{var ut=Sd(),Me=v(ut),Te=v(Me),ft=v(Te);sn(ft,{class:"w-5 h-5"}),E(),u(Te),u(Me),u(ut),we("click",Te,()=>xa(oe,s(oe)[s(se)]=[...s(oe)[s(se)],{name:"",value:""}])),c(qe,ut)},it=qe=>{var ut=Cd(),Me=v(ut);Dr(Me,1,()=>s(oe)[s(se)],Nr,(je,at,Re)=>{var Oe=Pd(),We=v(Oe);fn(We);var Ze=d(We,2);fn(Ze),u(Oe),vn(We,()=>s(at).name,Fe=>(s(at).name=Fe,Bs(()=>s(oe)[s(se)]))),vn(Ze,()=>s(at).value,Fe=>(s(at).value=Fe,Bs(()=>s(oe)[s(se)]))),c(je,Oe)});var Te=d(Me,2),ft=v(Te);sn(ft,{class:"w-4 h-4"}),E(),u(Te),u(ut),we("click",Te,()=>xa(oe,s(oe)[s(se)]=[...s(oe)[s(se)],{name:"",value:""}])),c(qe,ut)};me(Ke,qe=>{s(oe)[s(se)].length===0?qe(X):qe(it,!1)})}u(At),c(lt,At)};me(Xe,lt=>{l()&&lt(Ge)})}u(pt),ie(()=>Ye(ar,s(C).label)),c(Ee,pt)};me(Pe,Ee=>{s(se)===s(C).id&&Ee(Ae)})}c(z,K)}),u(xt),u(ae);var Je=d(ae,2),xe=v(Je);pr(xe,{variant:"outline",$$events:{click:()=>_(A,!1)},children:(z,C)=>{E();var K=D("Cancel");c(z,K)},$$slots:{default:!0}});var st=d(xe,2),Pt=Ie(()=>H()?.role==="admin");pr(st,{get disabled(){return s(Pt)},$$events:{click:Se},children:(z,C)=>{E();var K=D("Save");c(z,K)},$$slots:{default:!0}}),u(Je),c(ke,pe)},$$slots:{default:!0}}),c(te,le)},$$slots:{default:!0},$$legacy:!0}),rr()}var zd=P('<form class="space-y-4 mt-4"><div class="flex items-center justify-between pb-4"><!> <div class="w-full"><!> <div class="text-rose-500 text-xs pt-2"><!></div></div></div> <div class="flex items-center justify-between pb-4"><!> <div class="w-full"><!> <div class="text-rose-500 text-xs pt-2"><!></div></div></div> <div class="flex items-center justify-between pb-4"><!> <div class="w-full"><!> <div class="text-rose-500 text-xs pt-2"><!></div></div></div> <div class="flex flex-1 flex-col mx-auto"><!></div></form>');function Ld(a,e){tr(e,!1);const t=Ir(),r=()=>ee(p,"$cameraName",t),n=()=>ee(m,"$mainUrl",t),o=()=>ee($,"$subUrl",t),i=()=>ee(ha,"$user",t),l=()=>ee(w,"$errors",t);let f=g(e,"camera",8),h=g(e,"modalOpen",8),p=ct(f()?.name),m=ct(f()?.url),$=ct(f()?.subUrl);const{form:x,errors:w,reset:L}=Ls({initialValues:{name:r(),url:n(),subUrl:o()},onSubmit:async A=>{const se={name:A.name,url:A.url,subUrl:A.subUrl};try{await hr.collection("camera").update(f().id,se),h().set(!1),Ht("Camera updated successfully",i()?.email||"",i()?.id||""),ur.success("Camera updated successfully!")}catch(ue){ur.error("Failed to update camera."),console.error(ue)}},onError:A=>{console.error("Form validation failed:",A)}});St(()=>Vt(f()),()=>{f()&&L({name:f().name,url:f().url,subUrl:f().subUrl})}),jr(),er();var S=zd(),U=v(S),G=v(U);rt(G,{children:(A,se)=>{E();var ue=D("Camera Name");c(A,ue)},$$slots:{default:!0}});var I=d(G,2),M=v(I);Ut(M,{type:"text",name:"name",placeholder:"Home-Garage",get value(){return qr(),r()},set value(A){Zr(p,A)},$$legacy:!0});var ge=d(M,2),q=v(ge);{var Y=A=>{var se=D();ie(()=>Ye(se,l().name)),c(A,se)};me(q,A=>{l().name&&A(Y)})}u(ge),u(I),u(U);var fe=d(U,2),J=v(fe);rt(J,{children:(A,se)=>{E();var ue=D("Main URL");c(A,ue)},$$slots:{default:!0}});var ve=d(J,2),de=v(ve);Ut(de,{type:"text",name:"url",placeholder:"rtsp://admin:password@123.123.123.123/stream/1",get value(){return qr(),n()},set value(A){Zr(m,A)},$$legacy:!0});var be=d(de,2),N=v(be);{var ne=A=>{var se=D();ie(()=>Ye(se,l().url)),c(A,se)};me(N,A=>{l().url&&A(ne)})}u(be),u(ve),u(fe);var Q=d(fe,2),$e=v(Q);rt($e,{children:(A,se)=>{E();var ue=D("Sub URL");c(A,ue)},$$slots:{default:!0}});var Le=d($e,2),b=v(Le);Ut(b,{type:"text",name:"subUrl",placeholder:"rtsp://admin:password@123.123.123.123/stream/2",get value(){return qr(),o()},set value(A){Zr($,A)},$$legacy:!0});var k=d(b,2),O=v(k);{var R=A=>{var se=D();ie(()=>Ye(se,l().subUrl)),c(A,se)};me(O,A=>{l().subUrl&&A(R)})}u(k),u(Le),u(Q);var F=d(Q,2),H=v(F);pr(H,{type:"submit",variant:"brand",children:(A,se)=>{E();var ue=D("Update Camera");c(A,ue)},$$slots:{default:!0}}),u(F),u(S),bn(S,A=>x?.(A)),c(a,S),rr()}var Od=P("<!> <!>",1),Nd=P("<!> <!>",1),Ad=P("<!> <!>",1),Md=P("<!> <!>",1),Rd=P("<!> <!>",1),Ud=P("<!> <!>",1),jd=P('<article class="w-full h-full bg-gradient-to-b pb-4 from-[#000000]/60 via-[#000000]/75 to-[#000000]/100"><span class="bg-black text-white flex px-1 items-center justify-between"><p class="text-white font-semibold">PTZ Control</p> <button><!></button></span> <div class="flex items-center justify-evenly mt-6"><span class="flex flex-col items-center justify-center gap-2"><span class="h-[75px] w-[35px] p-2 rounded-2xl bg-[#202020] interior text-white flex flex-col items-center justify-between"><button><!></button> <button><!></button></span> <p class="text-sm text-white">Focus</p></span> <span><span class="size-[120px] p-2 rounded-full bg-gradient-to-b border border-gray-800 shadow-custom-inset drop-shadow-3xl drop-shadow-gray-200 dark:border-gray-600 dark:shadow-gray-600 text-white flex flex-col items-center justify-center relative"><span class="size-[80px] rounded-full bg-gradient-to-b shadow-lg drop-shadow-md shadow-gray-700 dark:border-gray-600 dark:shadow-gray-600 text-white border border-solid relative"><!></span> <button class="absolute text-white top-1/2 left-1 -translate-y-1/2"><!></button> <button class="absolute text-white top-1 left-1/2 -translate-x-1/2"><!></button> <button class="absolute text-white top-1/2 right-1 -translate-y-1/2"><!></button> <button class="absolute text-white bottom-1 right-1/2 translate-x-1/2"><!></button></span></span> <span class="flex flex-col items-center justify-center gap-2"><span class="h-[75px] w-[35px] p-2 rounded-2xl bg-[#202020] text-white flex flex-col items-center justify-between"><button><!></button> <button><!></button></span> <p class="text-sm text-white">Zoom</p></span></div> <div class="flex flex-col items-start justify-center gap-2 my-2 px-4"><p class="text-sm text-white">Camera speed</p> <!></div> <div class="flex flex-col items-start justify-center gap-1 my-2 px-4"><p class="text-sm text-[#202020]">Presets</p> <!></div></article>'),Fd=P("<!> <!>",1),Bd=P("<!> <!>",1),Hd=P("<!> <!>",1),Vd=P("<!> <!>",1),Gd=P("<!> <!>",1);function Xd(a,e){tr(e,!1);const t=Ir(),r=()=>ee(m,"$index",t),n=()=>ee(x,"$presets",t),o=()=>ee($,"$status",t),i=()=>ee(Pt,"$ptzControl",t),l=()=>ee(C,"$cameraName",t),f=()=>ee(ha,"$user",t),h=()=>ee(st,"$modalOpen",t),p=()=>ee(w,"$isPtzOpen",t);let m=ct(null),$=ct(null),x=ct([]),w=ct(!1);g(e,"isAllFullScreen",8);let L=g(e,"cameraId",8),S=g(e,"name",8),U=g(e,"url",8),G=g(e,"save",8),I=g(e,"face",8),M=g(e,"vehicle",8),ge=g(e,"faceDetectionThreshold",8),q=g(e,"faceSearchThreshold",8),Y=g(e,"vehicleDetectionThreshold",8),fe=g(e,"vehiclePlateThreshold",8),J=g(e,"vehicleOCRThreshold",8),ve=g(e,"saveDuration",8),de=g(e,"saveFolder",8),be=g(e,"motion",8),N=g(e,"priority",8),ne=g(e,"running",8),Q=g(e,"runningThresh",8),$e=g(e,"intrusionDetection",8),Le=g(e,"intrusionPerson",8),b=g(e,"intrusionVehicle",8),k=g(e,"intrusionPersonThresh",8),O=g(e,"intrusionVehicleThresh",8),R=g(e,"lineCrossing",8),F=g(e,"linePerson",8),H=g(e,"lineVehicle",8),A=g(e,"linePersonThresh",8),se=g(e,"lineVehicleThresh",8),ue=g(e,"personCount",8),oe=g(e,"showOptions",8),Se=g(e,"token",8);g(e,"role",8),g(e,"ptz",8),g(e,"preset",8);let te=g(e,"theft",8),j=g(e,"theftDetectionThresh",8),le=g(e,"safety",8),B=g(e,"person",8),re=g(e,"employeEE",8),ke=g(e,"heatmap",8),y=g(e,"cameraNo",8),pe=g(e,"moksaId",8);async function Z(){await fetch(`http://localhost:3000/onvif/status/${r()}`,{method:"GET"}).then(async Ce=>{const Xe=await Ce.json();$.set(Xe)}).catch(Ce=>console.log(Ce))}async function V(){await fetch(`http://localhost:3000/onvif/presets/${r()}`,{method:"GET"}).then(async Ce=>{const Xe=await Ce.json(),Ge=Object.entries(Xe).map(([lt,At])=>({name:lt,token:At}));x.set(Ge)}).catch(Ce=>console.log(Ce))}async function ye(){try{await fetch(`http://localhost:3000/onvif/set-preset/${r()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({presetName:`Preset ${n().length}`})}).then(async Ce=>{const Xe=await Ce.json();if(!Ce?.ok)throw new Error(Xe?.message);await V(),ur.success("Preset Saved Successfully!")})}catch(Ce){ur.error(Ce?.message||"Something went wrong while intializing onvif!"),console.log(Ce?.message,"err")}}async function ae(Ce,Xe){await fetch(`http://localhost:3000/onvif/relative-move/${r()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({x:Ce==="left"?-.2:Ce==="right"?.2:0,y:Ce==="up"?.2:Ce==="down"?-.2:0,zoom:Xe===void 0?o().position.zoom:Xe,speed:{x:Ce[0],y:Ce[0],zoom:Xe}})}).then(async Ge=>{const lt=await Ge.json();console.log(lt),await Z()}).catch(Ge=>console.log(Ge))}async function Ne(Ce,Xe){await fetch(`http://localhost:3000/onvif/relative-move/${r()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({speed:{x:Ce[0],y:Ce[0],zoom:Xe}})}).then(async Ge=>{const lt=await Ge.json();console.log(lt),await Z()}).catch(Ge=>console.log(Ge))}async function xt(Ce){await fetch(`http://localhost:3000/onvif/goto-preset/${r()}`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({preset:Ce.token})}).then(async Xe=>{const Ge=await Xe.json();console.log(Ge),ur.success(`Moved to preset: ${Ce.name}`)}).catch(Xe=>console.log(Xe))}Is(async()=>{console.log("stop called"),await fetch(`http://localhost:3000/onvif/stop/${m}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pantilt:!0,zoom:!0})}).then(async Ce=>{const Xe=await Ce.json();console.log(Xe)}).catch(Ce=>console.log(Ce))});let Je=g(e,"action",8),xe=g(e,"camera",8),st=ct(!1),Pt=ct(""),z=ct(!1),C=ct(xe()?xe().name:""),K=_e(xe()?xe().url:""),Pe=_e(xe()?xe().subUrl:""),Ae=_e(!1);const Ee=ct(!1);i().url?.split("rtsp://")?.[1]?.split(":")?.[0],i().url?.split(":")?.[2]?.split("@")?.[0],i().url?.split("@")?.[1]?.split("/")?.[0]?.split(":")?.[0],i().preset,i().lastCords,Ls({onSubmit:async Ce=>{console.log(vi.schema.omit({id:!0}).safeParse(Ce)),console.log("Form submitted with:",Ce);const Xe={name:l(),url:s(K),subUrl:s(Pe),motionSensitivity:33,node:na};await hr.collection("camera").update(xe().id,Xe),st.set(!1),Ht("Camera updated successfully",f()?.email||"",f()?.id||"");const Ge=document.getElementById(`stream-${xe().id}`);Ge&&Ge.setAttribute("data-url",`
wss://view.lenscorp.cloud/api/ws?src=${xe().id}`)},onError:Ce=>{console.error("Form validation failed:",Ce)}});const pt=async()=>{await hr.collection("camera").delete(xe().id),Ht("Camera deleted successfully",f()?.email||"",f()?.id||"")};St(()=>(h(),Vt(xe())),()=>{h()&&xe()&&C.set(xe()?.name||"")}),St(()=>s(Ae),()=>{s(Ae)&&(st.set(!1),_(Ae,!1))}),jr(),er();var ot=ze(),Nt=T(ot);{var qt=Ce=>{hn(Ce,{get open(){return qr(),h()},set open(Xe){Zr(st,Xe)},children:(Xe,Ge)=>{var lt=Nd(),At=T(lt);Un(At,{children:(X,it)=>{var qe=ze(),ut=T(qe);It(ut,e,"default",{},null),c(X,qe)},$$slots:{default:!0}});var Ke=d(At,2);pn(Ke,{class:"!w-2/3 h-92",children:(X,it)=>{var qe=Od(),ut=T(qe);vs(ut,{children:(Te,ft)=>{jn(Te,{class:"border-b pb-4",children:(je,at)=>{E();var Re=D("Add Camera");c(je,Re)},$$slots:{default:!0}})},$$slots:{default:!0}});var Me=d(ut,2);$d(Me,{modalOpen:st,get $cameraName(){return qr(),l()},set $cameraName(Te){Zr(C,Te)},get mainUrl(){return s(K)},set mainUrl(Te){_(K,Te)},get subUrl(){return s(Pe)},set subUrl(Te){_(Pe,Te)},get doneSubmit(){return s(Ae)},set doneSubmit(Te){_(Ae,Te)},$$legacy:!0}),c(X,qe)},$$slots:{default:!0}}),c(Xe,lt)},$$slots:{default:!0},$$legacy:!0})},ar=Ce=>{var Xe=ze(),Ge=T(Xe);{var lt=Ke=>{hn(Ke,{get open(){return qr(),h()},set open(X){Zr(st,X)},children:(X,it)=>{var qe=Md(),ut=T(qe);Un(ut,{children:(Te,ft)=>{var je=ze(),at=T(je);It(at,e,"default",{},null),c(Te,je)},$$slots:{default:!0}});var Me=d(ut,2);pn(Me,{class:"lg:!w-1/2 xl:!w-1/3",children:(Te,ft)=>{var je=Ad(),at=T(je);vs(at,{children:(Oe,We)=>{jn(Oe,{class:"border-b pb-4",children:(Ze,Fe)=>{E();var tt=D("Edit Camera");c(Ze,tt)},$$slots:{default:!0}})},$$slots:{default:!0}});var Re=d(at,2);Ld(Re,{get camera(){return xe()},modalOpen:st}),c(Te,je)},$$slots:{default:!0}}),c(X,qe)},$$slots:{default:!0},$$legacy:!0})},At=Ke=>{var X=ze(),it=T(X);{var qe=Me=>{_o(Me,{get open(){return qr(),p()},set open(Te){Zr(w,Te)},children:(Te,ft)=>{var je=Fd(),at=T(je);xo(at,{asChild:!0,children:Ha,$$slots:{default:(Oe,We)=>{const Ze=Ie(()=>We.builder);var Fe=Ie(()=>[s(Ze)]);pr(Oe,{get builders(){return s(Fe)},variant:"outline",size:"sm",class:"text-xs",$$events:{click:()=>Pt.set(xe())},children:(tt,vt)=>{E();var zt=D("Ptz");c(tt,zt)},$$slots:{default:!0}})}}});var Re=d(at,2);yo(Re,{class:"w-80 p-0",alignOffset:200,children:(Oe,We)=>{var Ze=jd(),Fe=v(Ze),tt=d(v(Fe),2),vt=v(tt);So(vt,{onclick:()=>w.set(!1)}),u(tt),u(Fe);var zt=d(Fe,2),ht=v(zt),Tt=v(ht),Ct=v(Tt),Xt=v(Ct);sn(Xt,{size:"16"}),u(Ct);var Dt=d(Ct,2),mt=v(Dt);Js(mt,{size:"16"}),u(Dt),u(Tt),E(2),u(ht);var Be=d(ht,2),Qe=v(Be),Mt=v(Qe),jt=v(Mt);pr(jt,{class:"absolute text-white bg-gradient-to-b from-[#202020] to-[#141414] top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",$$events:{click:()=>ye()},children:(ce,$t)=>{sn(ce,{size:"20"})},$$slots:{default:!0}}),u(Mt);var dt=d(Mt,2),Lt=v(dt);Cn(Lt,{size:"20"}),u(dt);var kt=d(dt,2),Gt=v(kt);Cn(Gt,{size:"20"}),u(kt);var nr=d(kt,2),lr=v(nr);Cn(lr,{size:"20"}),u(nr);var cr=d(nr,2),gr=v(cr);Cn(gr,{size:"20"}),u(cr),u(Qe),u(Be);var yr=d(Be,2),dr=v(yr),$r=v(dr),zr=v($r);sn(zr,{size:"16"}),u($r);var fr=d($r,2),Fr=v(fr);Js(Fr,{size:"16"}),u(fr),u(dr),E(2),u(yr),u(zt);var br=d(zt,2),wr=d(v(br),2);zn(wr,{class:"w-full bg-[#181818]",rangeBg:"bg-[red]",max:1,step:.1,onValueChange:ce=>Ne(ce,0)}),u(br);var Sr=d(br,2),Ar=d(v(Sr),2);bs(Ar,{portal:null,children:(ce,$t)=>{var Ft=Ud(),Br=T(Ft);_s(Br,{class:"w-full bg-[#202020] text-white",children:(Rt,gt)=>{xs(Rt,{placeholder:"Select a Preset"})},$$slots:{default:!0}});var Ue=d(Br,2);ys(Ue,{class:"bg-[#202020]",children:(Rt,gt)=>{Mi(Rt,{children:(Lr,Qr)=>{var Bt=Rd(),Yr=T(Bt);Fi(Yr,{class:"text-white",children:(Pr,ea)=>{E();var Hr=D("Presets");c(Pr,Hr)},$$slots:{default:!0}});var ia=d(Yr,2);{var ba=Pr=>{var ea=ze(),Hr=T(ea);Dr(Hr,1,n,Nr,(_a,Zt)=>{var Vr=Ie(()=>s(Zt)?.token),vr=Ie(()=>s(Zt)?.name);rn(_a,{class:"text-white",get value(){return s(Vr)},get label(){return s(vr)},$$events:{click:()=>xt(s(Zt))},children:(Jr,Mr)=>{E();var he=D();ie(()=>Ye(he,s(Zt)?.name)),c(Jr,he)},$$slots:{default:!0}})}),c(Pr,ea)},_r=Pr=>{rn(Pr,{class:"text-white",value:null,label:null,children:(ea,Hr)=>{E();var ta=D("No Presets");c(ea,ta)},$$slots:{default:!0}})};me(ia,Pr=>{n().length>0?Pr(ba):Pr(_r,!1)})}c(Lr,Bt)},$$slots:{default:!0}})},$$slots:{default:!0}}),c(ce,Ft)},$$slots:{default:!0}}),u(Sr),u(Ze),we("click",tt,()=>{Pt.set(""),z.set(!1)}),we("click",Ct,()=>Ne("",.1)),we("click",Dt,()=>Ne("",.1)),we("click",dt,()=>ae("left",0)),we("click",kt,()=>ae("up",0)),we("click",nr,()=>ae("right",0)),we("click",cr,()=>ae("down",0)),we("click",$r,()=>ae("",.1)),we("click",fr,()=>ae("",-.1)),c(Oe,Ze)},$$slots:{default:!0}}),c(Te,je)},$$slots:{default:!0},$$legacy:!0})},ut=Me=>{var Te=ze(),ft=T(Te);{var je=Re=>{Id(Re,{get camera(){return xe()},get token(){return Se()},user:ha,isSettingsDialogOpen:Ee,get showOptions(){return oe()},get cameraName(){return S()},get save(){return G()},get face(){return I()},get vehicle(){return M()},get running(){return ne()},get runningDetectionThreshold(){return Q()},get cameraId(){return L()},get faceDetectionThreshold(){return ge()},get faceSearchThreshold(){return q()},get vehicleDetectionThreshold(){return Y()},get vehiclePlateThreshold(){return fe()},get vehicleOCRThreshold(){return J()},get saveFolder(){return de()},get saveDuration(){return ve()},get motion(){return be()},get priority(){return N()},get intrusionDetection(){return $e()},get intrusionPerson(){return Le()},get intrusionVehicle(){return b()},get intrusionPersonThresh(){return k()},get intrusionVehicleThresh(){return O()},get lineCrossing(){return R()},get linePerson(){return F()},get lineVehicle(){return H()},get linePersonThresh(){return A()},get lineVehicleThresh(){return se()},get personCount(){return ue()},get cameraURL(){return U()},get subUrl(){return s(Pe)},get theft(){return te()},get person(){return B()},get safety(){return le()},get employeEE(){return re()},get theftDetectionThresh(){return j()},get heatmap(){return ke()},get cameraNo(){return y()},get moksaId(){return pe()},children:(Oe,We)=>{var Ze=ze(),Fe=T(Ze);It(Fe,e,"default",{},null),c(Oe,Ze)},$$slots:{default:!0}})},at=Re=>{Ci(Re,{children:(Oe,We)=>{var Ze=Gd(),Fe=T(Ze);ki(Fe,{children:(vt,zt)=>{var ht=ze(),Tt=T(ht);It(Tt,e,"default",{},null),c(vt,ht)},$$slots:{default:!0}});var tt=d(Fe,2);Ei(tt,{children:(vt,zt)=>{var ht=Vd(),Tt=T(ht);Ti(Tt,{children:(Xt,Dt)=>{var mt=Bd(),Be=T(mt);Di(Be,{children:(Mt,jt)=>{E();var dt=D("Are you absolutely sure?");c(Mt,dt)},$$slots:{default:!0}});var Qe=d(Be,2);Ii(Qe,{children:(Mt,jt)=>{E();var dt=D(`Deleting a camera cannot be undone. This will permanently delete your
          camera from our servers.`);c(Mt,dt)},$$slots:{default:!0}}),c(Xt,mt)},$$slots:{default:!0}});var Ct=d(Tt,2);zi(Ct,{children:(Xt,Dt)=>{var mt=Hd(),Be=T(mt);Li(Be,{children:(Mt,jt)=>{E();var dt=D("Cancel");c(Mt,dt)},$$slots:{default:!0}});var Qe=d(Be,2);Oi(Qe,{class:"bg-rose-500 text-white",$$events:{click:pt},children:(Mt,jt)=>{E();var dt=D("Delete");c(Mt,dt)},$$slots:{default:!0}}),c(Xt,mt)},$$slots:{default:!0}}),c(vt,ht)},$$slots:{default:!0}}),c(Oe,Ze)},$$slots:{default:!0}})};me(ft,Re=>{Je()==="settings"?Re(je):Re(at,!1)},!0)}c(Me,Te)};me(it,Me=>{Je()==="ptz"?Me(qe):Me(ut,!1)},!0)}c(Ke,X)};me(Ge,Ke=>{Je()==="edit"?Ke(lt):Ke(At,!1)},!0)}c(Ce,Xe)};me(Nt,Ce=>{Je()==="add"?Ce(qt):Ce(ar,!1)})}c(a,ot),rr()}var Wd=P("<!> <!>",1);function Ya(a,e){tr(e,!1);const t=Ir(),r=()=>ee(ua,"$cameras",t);let n=g(e,"action",8),o=g(e,"icon",8,!1),i=g(e,"camera",8),l=_e(!0);er(),Xd(a,{get action(){return n()},get camera(){return i()},children:(f,h)=>{var p=Wd(),m=T(p);{var $=S=>{var U=Ie(()=>`text-xs ${n()==="add"&&r().length===0&&s(l)&&"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg focus:outline-none shadow-lg hover:from-blue-600 hover:via-purple-600 hover:to-pink-600 transition-all duration-300"}`);pr(S,{get class(){return s(U)},variant:"outline",get title(){return n()},size:"sm",$$events:{click:()=>{s(l)&&n()==="add"&&r().length===0&&_(l,!1)}},children:(G,I)=>{var M=ze(),ge=T(M);{var q=fe=>{ll(fe,{size:12})},Y=fe=>{var J=ze(),ve=T(J);{var de=N=>{Bi(N,{size:13})},be=N=>{var ne=ze(),Q=T(ne);{var $e=b=>{var k=Ie(()=>`${n()==="add"&&"solar:videocamera-add-outline"}`);Tr(b,{get icon(){return s(k)},class:"w-5 h-5"})},Le=b=>{Vi(b,{size:13})};me(Q,b=>{n()==="add"?b($e):b(Le,!1)},!0)}c(N,ne)};me(ve,N=>{n()==="settings"?N(de):N(be,!1)},!0)}c(fe,J)};me(ge,fe=>{n()==="edit"?fe(q):fe(Y,!1)})}c(G,M)},$$slots:{default:!0}})},x=S=>{var U=Ie(()=>`text-xs ${n()==="add"&&r().length===0&&s(l)&&"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 text-white px-4 py-2 rounded-lg focus:outline-none shadow-lg hover:from-blue-600 hover:via-purple-600 hover:to-pink-600 transition-all duration-300"}`);pr(S,{variant:"outline",size:"sm",get class(){return s(U)},children:(G,I)=>{E();var M=D();ie(()=>Ye(M,n().charAt(0).toUpperCase()+n().slice(1))),c(G,M)},$$slots:{default:!0}})};me(m,S=>{o()?S($):S(x,!1)})}var w=d(m,2);{var L=S=>{};me(w,S=>{n()==="add"&&r().length===0&&s(l)&&S(L)})}c(f,p)},$$slots:{default:!0}}),rr()}var Yd=P('<div class="flex items-center gap-x-2 justify-between w-full"><span>Camera Name</span> <span><!></span></div>'),Jd=P('<div class="flex items-center gap-x-2 w-full justify-between"><span>RTSP URL</span> <span><!></span></div>'),Kd=P("<!> <!>",1),qd=P("<!> <!> <!>",1),Zd=P("<!> <!>",1),Qd=P("<span>Date (created on)</span> <span><!></span>",1),eu=P("<span>Camera Name</span> <span><!></span>",1),tu=P("<!> <!>",1),ru=P("<!> <!> <!>",1),au=P("<!> <!>",1),nu=P('<span class="absolute left-0 -top-2 z-10 py-0.5 px-2 bg-purple-200 rounded-2xl text-xs text-black"> </span>'),su=P('<article><!> <div class="grid gap-1 flex-grow"><h3 class="text-sm font-medium whitespace-nowrap truncate"> </h3> <p> </p></div> <div class="flex flex-row gap-0 xl:ml-auto space-x-2 list-none cursor-pointer items-end"><!> <!> <!> <!></div> <!></article>'),ou=P('<section class="border-l overflow-y-auto w-full"><div class="w-full p-2 px-4"><div><!> <div><!> <!> <!></div></div> <div class="border-t mt-2 mb-4 w-full"></div> <div id="camera-items"><div class="flex justify-between gap-2 items-center"><!> <div class="relative w-11/12"><!> <!></div> <!> <!></div> <div class="item-count text-xs text-gray-500 flex items-center gap-x-2 w-full justify-center"><span> </span> | <span> </span></div></div> <div class="overflow-y-auto max-h-[calc(100vh-14rem)]"></div></div></section>');function po(a,e){tr(e,!1);const t=Ir(),r=()=>ee(ua,"$cameras",t),n=()=>ee(zs,"$nodes",t),o=()=>ee(ha,"$user",t),i=()=>ee(fa,"$selectedCamera",t),l=()=>ee(na,"$selectedNode",t);let f=_e(),h=_e(null),p=_e("asc"),m=_e("name"),$=_e(!1),x=_e(r()),w=_e({});ma(()=>{s(f)&&Ve.create(s(f),{animation:250,chosenClass:"chosen",dragClass:"dragged",handle:".my-handle"})});function L(se,ue,oe){return[...se].sort((Se,te)=>{let j=0;if(ue==="created")j=new Date(te.created).getTime()-new Date(Se.created).getTime();else{const le=ke=>ke.match(/\d+/g)?parseInt(ke.match(/\d+/g)[0],10):0,B=Se.name?.toLowerCase(),re=te.name?.toLowerCase();if(B===re)j=0;else{const ke=le(B),y=le(re);B.replace(/\d+/g,"")===re.replace(/\d+/g,"")?j=ke-y:j=B.localeCompare(re)}}return oe==="asc"?j:-j})}function S(se){s(h)===se?_(p,s(p)==="asc"?"desc":"asc"):(_(h,se),_(p,"asc")),_($,!0),_(m,se)}function U(se){let ue=se.target.value?.toLowerCase(),oe=r().filter(Se=>{const te=Se.name?.toLowerCase().includes(ue),j=Se.url?.toLowerCase().includes(ue),le=Se.subUrl&&Se.subUrl?.toLowerCase().includes(ue);return s(m)==="name"?te:j||le});_($,!1),_(x,oe)}St(()=>(s($),r(),s(h),s(p)),()=>{_(x,s($)?L(r(),s(h),s(p)):r())}),St(()=>(s(x),n()),()=>{_(w,{cameras:s(x)?.length||0,nodes:n()?.length})}),jr(),er();var G=ou(),I=v(G),M=v(I);wt(M,"flex justify-between items-center gap-4 w-full");var ge=v(M);Pi(ge,{});var q=d(ge,2);const Y=Ie(()=>Kt(Ot("flex items-center","space-x-2")));var fe=v(q);Zn(fe,{action:"add"});var J=d(fe,2);Zn(J,{action:"edit"});var ve=d(J,2);Zn(ve,{action:"delete"}),u(q),u(M);var de=d(M,4);wt(de,"flex flex-col gap-4 w-full mx-auto max-h-[calc(100vh-3rem)] overflow-y-auto mb-4");var be=v(de),N=v(be);hs(N,{children:(se,ue)=>{var oe=Zd(),Se=T(oe);ps(Se,{asChild:!0,children:Ha,$$slots:{default:(j,le)=>{const B=Ie(()=>le.builder);var re=Ie(()=>[s(B)]);pr(j,{get builders(){return s(re)},class:"text-xs h-10",variant:"outline",size:"sm",children:(ke,y)=>{Gi(ke,{size:17})},$$slots:{default:!0}})}}});var te=d(Se,2);ms(te,{class:"w-36 mr-8",children:(j,le)=>{var B=qd(),re=T(B);$s(re,{children:(pe,Z)=>{E();var V=D("Search By");c(pe,V)},$$slots:{default:!0}});var ke=d(re,2);ws(ke,{});var y=d(ke,2);gs(y,{children:(pe,Z)=>{var V=Kd(),ye=T(V);qa(ye,{class:"flex items-center justify-between",$$events:{click:()=>{S("name"),Ht("User sorted cameras by name",o()?.email||"",o()?.id||""),_(m,"name")}},children:(Ne,xt)=>{var Je=Yd(),xe=d(v(Je),2),st=v(xe);{var Pt=z=>{qs(z,{class:"mr-2",size:12})};me(st,z=>{s(m)==="name"&&z(Pt)})}u(xe),u(Je),c(Ne,Je)},$$slots:{default:!0}});var ae=d(ye,2);qa(ae,{class:"flex items-center justify-between",$$events:{click:()=>{S("url"),Ht("User sorted cameras by url",o()?.email||"",o()?.id||""),_(m,"url")}},children:(Ne,xt)=>{var Je=Jd(),xe=d(v(Je),2),st=v(xe);{var Pt=z=>{qs(z,{class:"mr-2",size:12})};me(st,z=>{s(m)==="url"&&z(Pt)})}u(xe),u(Je),c(Ne,Je)},$$slots:{default:!0}}),c(pe,V)},$$slots:{default:!0}}),c(j,B)},$$slots:{default:!0}}),c(se,oe)},$$slots:{default:!0}});var ne=d(N,2),Q=v(ne);Tr(Q,{icon:"material-symbols:search-rounded",class:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 scale-x-[-1]"});var $e=d(Q,2);Ut($e,{type:"text",name:"text",placeholder:"Search...",class:"pl-10 w-full border rounded-md",$$events:{input:U}}),u(ne);var Le=d(ne,2);hs(Le,{children:(se,ue)=>{var oe=au(),Se=T(oe);ps(Se,{asChild:!0,children:Ha,$$slots:{default:(j,le)=>{const B=Ie(()=>le.builder);var re=Ie(()=>[s(B)]);pr(j,{get builders(){return s(re)},class:"text-xs h-10",variant:"outline",size:"sm",children:(ke,y)=>{Tr(ke,{icon:"mdi:filter-outline",class:"w-5 h-5"})},$$slots:{default:!0}})}}});var te=d(Se,2);ms(te,{class:"w-48",children:(j,le)=>{var B=ru(),re=T(B);$s(re,{children:(pe,Z)=>{E();var V=D("Filters");c(pe,V)},$$slots:{default:!0}});var ke=d(re,2);ws(ke,{});var y=d(ke,2);gs(y,{children:(pe,Z)=>{var V=tu(),ye=T(V);qa(ye,{class:"flex items-center justify-between",$$events:{click:()=>{S("created"),Ht("User sorted cameras by date",o()?.email||"",o()?.id||"")}},children:(Ne,xt)=>{var Je=Qd(),xe=d(T(Je),2),st=v(xe);{var Pt=C=>{nl(C,{size:15})},z=C=>{al(C,{size:15})};me(st,C=>{s(p)==="asc"?C(Pt):C(z,!1)})}u(xe),c(Ne,Je)},$$slots:{default:!0}});var ae=d(ye,2);qa(ae,{class:"flex items-center justify-between",$$events:{click:()=>{S("name"),Ht("User sorted cameras by name",o()?.email||"",o()?.id||"")}},children:(Ne,xt)=>{var Je=eu(),xe=d(T(Je),2),st=v(xe);{var Pt=C=>{rl(C,{size:15})},z=C=>{tl(C,{size:15})};me(st,C=>{s(p)==="asc"?C(Pt):C(z,!1)})}u(xe),c(Ne,Je)},$$slots:{default:!0}}),c(pe,V)},$$slots:{default:!0}}),c(j,B)},$$slots:{default:!0}}),c(se,oe)},$$slots:{default:!0}});var b=d(Le,2);Ya(b,{action:"add",icon:!0}),u(be);var k=d(be,2),O=v(k),R=v(O);u(O);var F=d(O,2),H=v(F);u(F),u(k),u(de),Ca(de,se=>_(f,se),()=>s(f));var A=d(de,2);Dr(A,5,()=>s(x),Nr,(se,ue)=>{var oe=su();const Se=Ie(()=>Kt(Ot("flex items-center p-4 dark:border bg-accent my-4 hover:border hover:border-primary space-x-4 rounded-xl text-sm z-10 w-full px-4 relative",{"border dark:border-white border-green-400":s(ue).id===i()})));var te=v(oe);Tr(te,{icon:"material-symbols:menu",class:"h-4 w-4 cursor-grab flex-shrink-0 my-handle"});var j=d(te,2),le=v(j),B=v(le,!0);ie(()=>Ye(B,s(ue).name?.length>11?s(ue).name?.substring(0,10)+"...":s(ue).name)),u(le);var re=d(le,2);wt(re,"text-xs w-full truncate");var ke=v(re,!0);ie(()=>Ye(ke,s(ue).url?.split("@")?.[1]?.split("/")?.[0]?.split(":")?.[0])),u(re),u(j);var y=d(j,2),pe=v(y);Ya(pe,{get camera(){return s(ue)},action:"edit",icon:!0});var Z=d(pe,2);Ya(Z,{get camera(){return s(ue)},action:"settings",icon:!0});var V=d(Z,2);Ya(V,{get camera(){return s(ue)},action:"ptz",icon:!0});var ye=d(V,2);Ya(ye,{get camera(){return s(ue)},action:"delete",icon:!0}),u(y);var ae=d(y,2);{var Ne=xt=>{var Je=nu(),xe=v(Je,!0);ie(()=>Ye(xe,n().find(st=>st.id===s(ue)?.node[0])?.name)),u(Je),c(xt,Je)};me(ae,xt=>{l()==="all"&&n()?.find(Je=>Je.id===s(ue)?.node[0])?.name&&xt(Ne)})}u(oe),ie(()=>wt(oe,s(Se),"")),we("click",oe,()=>{i()===s(ue).id?fa.set(""):fa.set(s(ue).id.replace(/_FULL$/,""))}),c(se,oe)}),u(A),u(I),u(G),ie(()=>{wt(q,s(Y),""),Ye(R,`Total Cameras: ${s(w)?.cameras??""}`),Ye(H,`Total Nodes: ${s(w)?.nodes-1}`)}),c(a,G),rr()}var iu=P('<div id="dropdown" class="z-50 text-white text-black flex items-center border justify-center bg-background divide-y divide-gray-100 shadow-dropdown rounded-lg shadow w-40 absolute right-12 p-2"><ul class="py-2 text-sm flex flex-col items-center justify-center gap-2" aria-labelledby="dropdownDefaultButton"><li class="w-full"><span class=" px-4 py-2 hover:bg-[rgba(92,75,221,.1)] rounded-md dark:hover:bg-gray-600 dark:hover:text-white w-full">Current View</span></li>  <li class="w-full"><span class=" px-4 py-2 hover:bg-[rgba(92,75,221,.1)] rounded-md dark:hover:bg-gray-600 dark:hover:text-white w-full">Selected Screen</span></li> <li class="w-full"><span class=" px-4 py-2 hover:bg-[rgba(92,75,221,.1)] rounded-md dark:hover:bg-gray-600 dark:hover:text-white w-full">All Screens</span></li></ul></div>'),lu=P("<button><!></button>"),cu=ii('<rect fill="currentColor"></rect>'),du=P('<svg width="60" height="60" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg"></svg> <span> </span>',1),uu=P('<svg width="60" height="60" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M2 7.25A3.25 3.25 0 0 1 5.25 4h13.5A3.25 3.25 0 0 1 22 7.25v5.56a6.518 6.518 0 0 0-1.5-1.078V7.25a1.75 1.75 0 0 0-1.75-1.75H5.25A1.75 1.75 0 0 0 3.5 7.25v9.5c0 .966.784 1.75 1.75 1.75h5.826c.081.523.224 1.026.422 1.5H5.25A3.25 3.25 0 0 1 2 16.75zm12.278 6.726a2 2 0 0 1-1.441 2.496l-.584.144a5.728 5.728 0 0 0 .006 1.808l.54.13a2 2 0 0 1 1.45 2.51l-.187.631c.44.386.94.699 1.484.922l.494-.519a2 2 0 0 1 2.899 0l.498.525a5.276 5.276 0 0 0 1.483-.913l-.198-.686a2 2 0 0 1 1.441-2.496l.584-.144a5.716 5.716 0 0 0-.006-1.808l-.54-.13a2 2 0 0 1-1.45-2.51l.187-.63a5.282 5.282 0 0 0-1.484-.922l-.493.518a2 2 0 0 1-2.9 0l-.498-.525a5.28 5.28 0 0 0-1.483.912zM17.5 19c-.8 0-1.45-.672-1.45-1.5S16.7 16 17.5 16c.8 0 1.45.672 1.45 1.5S18.3 19 17.5 19"></path></svg> <span>Automatic</span>',1),fu=P("<div><button><!></button></div>"),vu=P('<div class="space-y-2"><h4 class="font-medium leading-none">Screen Layout</h4> <p class="text-muted-foreground text-sm">Set the camera grid settings for your best viewing experience.</p></div> <div class="flex flex-wrap items-center justify-start w-full py-10 px-4"><!> <button><svg width="60" height="60" id="Layer_2" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1068 1067.5"><g id="Layer_1-2" data-name="Layer 1"><rect fill="currentColor" width="708.33" height="708.33" rx="20" ry="20" transform="translate(708.33) rotate(90)"></rect><rect fill="currentColor" x="719.59" y=".75" width="349.16" height="347.67" rx="20" ry="20" transform="translate(1068.75 -719.59) rotate(90)"></rect><rect fill="currentColor" x="719.59" y="359.92" width="349.16" height="347.67" rx="20" ry="20" transform="translate(1427.92 -360.42) rotate(90)"></rect><rect fill="currentColor" x="719.59" y="719.09" width="349.16" height="347.67" rx="20" ry="20" transform="translate(1787.09 -1.24) rotate(90)"></rect><rect fill="currentColor" x="359.92" y="719.09" width="349.16" height="347.67" rx="20" ry="20" transform="translate(1427.42 358.42) rotate(90)"></rect><rect fill="currentColor" x=".25" y="719.09" width="349.16" height="347.67" rx="20" ry="20" transform="translate(1067.75 718.09) rotate(90)"></rect></g></svg> <span>1 + 5</span></button> <button><svg width="60" height="60" id="Layer_2" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1068 1068"><g id="Layer_1-2" data-name="Layer 1"><rect fill="currentColor" x="-.19" y=".19" width="798.37" height="798" rx="20" ry="20" transform="translate(798.19 .19) rotate(90)"></rect><rect fill="currentColor" x="809.44" y=".56" width="259.12" height="258" rx="20" ry="20" transform="translate(1068.56 -809.44) rotate(90)"></rect><rect fill="currentColor" x="809.44" y="270.19" width="259.12" height="258" rx="20" ry="20" transform="translate(1338.19 -539.81) rotate(90)"></rect><rect fill="currentColor" x="809.44" y="539.81" width="259.12" height="258" rx="20" ry="20" transform="translate(1607.81 -270.19) rotate(90)"></rect><rect fill="currentColor" x="809.44" y="809.44" width="259.12" height="258" rx="20" ry="20" transform="translate(1877.44 -.56) rotate(90)"></rect><rect fill="currentColor" x="539.44" y="809.44" width="259.12" height="258" rx="20" ry="20" transform="translate(1607.44 269.44) rotate(90)"></rect><rect fill="currentColor" x="269.44" y="809.44" width="259.12" height="258" rx="20" ry="20" transform="translate(1337.44 539.44) rotate(90)"></rect><rect fill="currentColor" x="-.56" y="809.44" width="259.12" height="258" rx="20" ry="20" transform="translate(1067.44 809.44) rotate(90)"></rect></g></svg> <span>1 + 7</span></button> <button><svg width="60" height="60" id="Layer_2" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1067 1072.23"><g id="Layer_1-2" data-name="Layer 1"><g><rect fill="currentColor" x="808.69" y=".56" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1067.56 -808.69) rotate(90)"></rect><rect fill="currentColor" x="808.69" y="271.8" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1338.81 -537.45) rotate(90)"></rect><rect fill="currentColor" x="808.69" y="542.68" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1609.68 -266.58) rotate(90)"></rect><rect fill="currentColor" x="808.69" y="813.92" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1880.92 4.67) rotate(90)"></rect><rect fill="currentColor" x="538.94" y=".56" width="258.87" height="257.75" rx="20" ry="20" transform="translate(797.81 -538.94) rotate(90)"></rect><rect fill="currentColor" x="538.94" y="271.8" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1069.06 -267.7) rotate(90)"></rect><rect fill="currentColor" x="538.94" y="542.68" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1339.93 3.17) rotate(90)"></rect><rect fill="currentColor" x="538.94" y="813.92" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1611.17 274.42) rotate(90)"></rect><rect fill="currentColor" x="269.19" y="542.68" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1070.18 272.92) rotate(90)"></rect><rect fill="currentColor" x="269.19" y="813.92" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1341.42 544.17) rotate(90)"></rect><rect fill="currentColor" x="-.56" y="542.68" width="258.87" height="257.75" rx="20" ry="20" transform="translate(800.43 542.68) rotate(90)"></rect><rect fill="currentColor" x="-.56" y="813.92" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1071.67 813.92) rotate(90)"></rect><rect fill="currentColor" x="-1.31" y="1.31" width="530.12" height="527.5" rx="20" ry="20" transform="translate(-1.31 528.81) rotate(-90)"></rect></g></g></svg> <span>1 + 12</span></button> <button><svg width="60" height="60" id="Layer_2" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1068 1070.12"><g id="Layer_1-2" data-name="Layer 1"><g><rect fill="currentColor" x="809.19" y="540.56" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1608.06 -269.19) rotate(90)"></rect><rect fill="currentColor" x="809.19" y="811.8" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1879.31 2.05) rotate(90)"></rect><rect fill="currentColor" x="539.44" y="540.56" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1338.31 .56) rotate(90)"></rect><rect fill="currentColor" x="539.44" y="811.8" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1609.56 271.8) rotate(90)"></rect><rect fill="currentColor" x="269.69" y="540.56" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1068.56 270.31) rotate(90)"></rect><rect fill="currentColor" x="269.69" y="811.8" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1339.8 541.56) rotate(90)"></rect><rect fill="currentColor" x="-.06" y="540.56" width="258.87" height="257.75" rx="20" ry="20" transform="translate(798.81 540.06) rotate(90)"></rect><rect fill="currentColor" x="-.06" y="811.8" width="258.87" height="257.75" rx="20" ry="20" transform="translate(1070.05 811.31) rotate(90)"></rect><rect fill="currentColor" width="528" height="528" rx="20" ry="20" transform="translate(0 528) rotate(-90)"></rect><rect fill="currentColor" x="540" width="528" height="528" rx="20" ry="20" transform="translate(540 1068) rotate(-90)"></rect></g></g></svg> <span>2 + 8</span></button> <div><div class="flex justify-center items-center gap-2"><div class="flex flex-col w-full"><input type="number" min="1" max="50" step="1" class="bg-gray rounded-md"> <span class="text-xs">R</span></div> <span class="text-sm">X</span> <div class="flex flex-col w-full"><input type="number" min="1" max="50" step="1" class="bg-gray rounded-md"> <span class="text-xs">C</span></div></div></div></div>',1),hu=P("<!> <!>",1),pu=P('<div class="flex flex-col space-y-8 items-center justify-center px-2 h-screen border-l relative bg-custom-gradient" style="height:calc(100vh - 3rem);"><span class="group flex-col flex items-center justify-center gap-0.5"><button><!></button> <p class="text-xs text-white">Fullscreen</p></span> <span class="group flex-col flex items-center justify-center gap-0.5"><button><!></button> <p>Alerts</p></span> <a target="_blank" rel="noreferrer" class="flex items-center justify-center gap-2 cursor-pointer relative lg:scale-95 2xl:scale-100 hover:text-primary"><span class="group flex-col flex items-center justify-center gap-0.5"><button><!></button> <p class="text-xs text-white">Extend</p></span></a> <span class="group flex-col flex items-center justify-center gap-0.5"><button><!></button> <p>Mark ROI</p></span> <span class="group flex-col flex items-center justify-center gap-0.5"><button><!> <!></button> <p class="text-xs text-black/[.23] text-white">Snip</p></span> <span class="group flex-col flex items-center justify-center gap-0.5"><!> <p class="text-xs text-white">Layouts</p></span></div>');function mu(a,e){tr(e,!1);const t=Ir(),r=()=>ee(wa,"$selectedLayout",t),n=()=>ee(ha,"$user",t),o=()=>ee(ua,"$cameras",t),i=()=>ee(fa,"$selectedCamera",t),l=()=>ee(go,"$captureRef",t),f=()=>ee(tn,"$isAlertPanelOpen",t),h=()=>ee(Rn,"$isRoiPanelOpen",t);let p=_e(0),m=_e(!1),$=_e(!1),x=_e(),w=_e(),L=g(e,"isOpen",8);if(typeof localStorage<"u"){const j=localStorage.getItem("selectedLayout");j!==null&&wa.set(Number(j))}async function S(){await Ht("User clicked on fullscreen layout",n()?.email||"",n()?.id||"");const j=document.getElementsByClassName("camera-grid");j.length>0&&j[0]&&j[0].requestFullscreen&&j[0].requestFullscreen()}const U=async()=>{const j=new Yi;for(let le=0;le<o().length;le++){const B=document.getElementById(`${o()[le].id}`);if(B){const ke=(await es(B)).toDataURL("image/webp");j.file(`screenshot_${o()[le].name}_${o()[le].id}.webp`,ke?.split(";base64,").pop(),{base64:!0})}}j.generateAsync({type:"blob"}).then(function(le){const B=document.createElement("a");B.href=URL.createObjectURL(le),B.download="screenshots.zip",B.click(),URL.revokeObjectURL(B.href),ur.success("Downloaded all screen snips.")})},G=async()=>{if(i()){const j=document.getElementById(`${i()}`);if(j){const B=(await es(j)).toDataURL("image/webp"),re=document.createElement("a");re.href=B,re.download="screenshot.webp",re.click(),ur.success("Downloaded screen snip."),re.remove()}}},I=async()=>{if(l()){const le=(await es(l())).toDataURL("image/webp"),B=document.createElement("a");B.href=le,B.download="screenshot.webp",B.click(),ur.success("Downloaded screen snip."),B.remove()}else console.log("ref unavailable")},M=async()=>{if(!i()){ur.error("Please select a camera first!");return}await Ht("User clicked on mark ROI",n()?.email||"",n()?.id||""),L().set(!0)};ya.subscribe(j=>{j&&j.rows>0&&j.columns>0?(localStorage.setItem("customLayout",JSON.stringify(j)),wa.set(12)):j&&j.rows===0&&j.columns===0?localStorage.setItem("customLayout",JSON.stringify({})):localStorage.setItem("customLayout",JSON.stringify({}))}),wa.subscribe(j=>{j<12&&ya.set({})}),St(()=>ya,()=>{const j=De(ya);j?(_(x,j.rows||0),_(w,j.columns||0)):(_(x,0),_(w,0))}),St(()=>r(),()=>{_(p,r())}),St(()=>s(p),()=>{wa.set(s(p)),typeof localStorage<"u"&&localStorage.setItem("selectedLayout",String(s(p)))}),St(()=>(s(w),s(x),ya),()=>{s(w)>=0&&s(x)>=0?((s(w)===0||s(x)===0)&&localStorage.setItem("customLayout",JSON.stringify({})),ya.set({rows:s(x),columns:s(w)})):localStorage.setItem("customLayout",JSON.stringify({}))}),jr(),er();var ge=pu(),q=v(ge),Y=v(q);wt(Y,"disabled:cursor-not-allowed disabled:opacity-50 text-black/[.4] h-[30px] w-[30px] rounded-full shadow-md group border-2 border-solid border-white/[.4] bg-black text-white group-hover:text-white group-hover:bg-[#015a62] dark:group-hover:bg-[#258d9d] group-hover:border-none grid place-items-center");var fe=v(Y);Tr(fe,{icon:"material-symbols:fullscreen",class:"h-[22px] w-[22px]"}),u(Y),E(2),u(q);var J=d(q,2),ve=v(J);const de=Ie(()=>Kt(Ot("h-[30px] w-[30px] rounded-full shadow-md border-2 border-solid text-white group-hover:text-white group-hover:bg-[#015a62] dark:group-hover:bg-[#258d9d] group-hover:border-none grid place-items-center",{"font-bold bg-[#015a62]":f(),"border-white/[.4] bg-black":!f()})));var be=v(ve);Tr(be,{icon:"material-symbols:notifications-active-outline-rounded",class:"h-[22px] w-[22px]"}),u(ve);var N=d(ve,2);u(J);var ne=d(J,2);Er(ne,"href",window.location.href);var Q=v(ne),$e=v(Q);wt($e,"disabled:cursor-not-allowed disabled:opacity-50  h-[30px] w-[30px] rounded-full shadow-md group border-2 border-solid border-white/[.4] bg-black text-white group-hover:text-white group-hover:bg-[#015a62] dark:group-hover:bg-[#258d9d] group-hover:border-none grid place-items-center");var Le=v($e);Tr(Le,{icon:"material-symbols:screenshot-monitor-outline",class:"h-[22px] w-[22px]"}),u($e),E(2),u(Q),u(ne);var b=d(ne,2),k=v(b);const O=Ie(()=>Kt(Ot("text-black/[.4] h-[30px] w-[30px] rounded-full shadow-md border-2 border-solid text-white group-hover:text-white group-hover:bg-[#015a62] dark:group-hover:bg-[#258d9d] group-hover:border-none grid place-items-center",{"font-bold bg-[#015a62]":h(),"border-white/[.4] bg-black":!h()})));var R=v(k);fl(R,{class:"h-[22px] w-[22px]"}),u(k);var F=d(k,2);u(b);var H=d(b,2),A=v(H),se=v(A);Hi(se,{class:"h-[22px] w-[22px]"});var ue=d(se,2);{var oe=j=>{var le=iu(),B=v(le),re=v(B),ke=v(re);u(re);var y=d(re,2),pe=v(y);u(y);var Z=d(y,2),V=v(Z);u(Z),u(B),u(le),we("click",ke,()=>{console.log("current view"),I(),Ht("User took screenshot of currentView",n()?.email||"",n()?.id||"")}),we("click",pe,()=>{console.log("selected screen"),i()===""?ur.warning("Please select a stream to screen snip."):(G(),Ht("User took screenshot of selected screen",n()?.email||"",n()?.id||""))}),we("click",V,()=>{console.log("all screens"),U(),Ht("User took screenshot of all screens",n()?.email||"",n()?.id||"")}),c(j,le)};me(ue,j=>{s(m)&&j(oe)})}u(A),E(2),u(H);var Se=d(H,2),te=v(Se);_o(te,{children:(j,le)=>{var B=hu(),re=T(B);xo(re,{children:Ha,$$slots:{default:(y,pe)=>{var Z=lu();wt(Z,"disabled:cursor-not-allowed disabled:opacity-50 text-black/[.4] h-[30px] w-[30px] rounded-full shadow-md group border-2 border-solid border-white/[.4] bg-black text-white group-hover:text-white group-hover:bg-[#015a62] dark:group-hover:bg-[#258d9d] group-hover:border-none grid place-items-center");var V=v(Z);Tr(V,{icon:"material-symbols:grid-view-outline-rounded",class:"h-[22px] w-[22px]"}),u(Z),we("click",Z,async()=>{await Ht("User clicked on screen layout",n()?.email||"",n()?.id||"")}),c(y,Z)}}});var ke=d(re,2);yo(ke,{class:"w-fit max-w-md",side:"left",sideOffset:20,children:(y,pe)=>{var Z=vu(),V=d(T(Z),2),ye=v(V);Dr(ye,0,()=>Array.from({length:7},(Ke,X)=>X-1).toReversed(),Nr,(Ke,X)=>{var it=fu();const qe=Ie(()=>Kt(Ot("flex flex-col items-center justify-evenly py-4 mt-2 w-1/3 gap-1 hover:border-[#015a62] hover:border hover:border-solid rounded-md",s(p)===X+1&&"px-2 border border-solid border-[#015a62] rounded-md text-primary hover:border-[#015a62] ")));var ut=v(it),Me=v(ut);{var Te=je=>{var at=du(),Re=T(at);const Oe=Ie(()=>Kt(Ot(s(p)===X+1?"text-primary":"text-muted-foreground")));Dr(Re,5,()=>Array.from({length:(X+1)*(X+1)},(Fe,tt)=>tt),Nr,(Fe,tt)=>{var vt=cu();ie(()=>Er(vt,"x",s(tt)%(X+1)*((100-2*(Math.max(X+1,X+1)-1))/Math.max(X+1,X+1)+2))),ie(()=>Er(vt,"y",Math.floor(s(tt)/(X+1))*((100-2*(Math.max(X+1,X+1)-1))/Math.max(X+1,X+1)+2))),ie(()=>Er(vt,"width",(100-2*(Math.max(X+1,X+1)-1))/Math.max(X+1,X+1))),ie(()=>Er(vt,"height",(100-2*(Math.max(X+1,X+1)-1))/Math.max(X+1,X+1))),ie(()=>Er(vt,"rx",(100-2*(Math.max(X+1,X+1)-1))/Math.max(X+1,X+1)*.2)),c(Fe,vt)}),u(Re);var We=d(Re,2),Ze=v(We);u(We),ie(()=>{La(Re,s(Oe),""),Ye(Ze,`${X+1}:${X+1}`)}),c(je,at)},ft=je=>{var at=uu(),Re=T(at);const Oe=Ie(()=>Kt(Ot(s(p)===X+1?"text-primary":"text-muted-foreground")));E(2),ie(()=>La(Re,s(Oe),"")),c(je,at)};me(Me,je=>{X!=-1?je(Te):je(ft,!1)})}u(ut),u(it),ie(()=>wt(it,s(qe),"")),we("click",ut,je=>{je.preventDefault(),_(p,X+1),Ht(`User selected screen layout ${X+1} x ${X+1}`,n()?.email||"",n()?.id||"")}),c(Ke,it)});var ae=d(ye,2);const Ne=Ie(()=>Kt(Ot("flex flex-col items-center justify-evenly py-4 mt-2 w-1/3 gap-1 hover:border-[#015a62] hover:border hover:border-solid rounded-md",s(p)===7&&"px-2 border border-solid border-[#015a62] rounded-md text-primary")));var xt=v(ae);const Je=Ie(()=>Kt(Ot(s(p)===7?"text-primary":"text-muted-foreground")));E(2),u(ae);var xe=d(ae,2);const st=Ie(()=>Kt(Ot("flex flex-col items-center justify-evenly py-4 mt-2 w-1/3 gap-1 hover:border-[#015a62] hover:border hover:border-solid rounded-md",s(p)===8&&"px-2 border border-solid border-[#015a62] rounded-md text-primary")));var Pt=v(xe);const z=Ie(()=>Kt(Ot(s(p)===8?"text-primary":"text-muted-foreground")));E(2),u(xe);var C=d(xe,2);const K=Ie(()=>Kt(Ot("flex flex-col items-center justify-evenly py-4 mt-2 w-1/3 gap-1 hover:border-[#015a62] hover:border hover:border-solid rounded-md",s(p)===9&&"px-2 border border-solid border-[#015a62] rounded-md text-primary")));var Pe=v(C);const Ae=Ie(()=>Kt(Ot(s(p)===9?"text-primary":"text-muted-foreground")));E(2),u(C);var Ee=d(C,2);const pt=Ie(()=>Kt(Ot("flex flex-col items-center justify-evenly py-4 mt-2 w-1/3 gap-1 hover:border-[#015a62] hover:border hover:border-solid rounded-md",s(p)===10&&"px-2 border border-solid border-[#015a62] rounded-md text-primary")));var ot=v(Ee);const Nt=Ie(()=>Kt(Ot(s(p)===10?"text-primary":"text-muted-foreground")));E(2),u(Ee);var qt=d(Ee,2);const ar=Ie(()=>Kt(Ot("flex flex-col items-center justify-evenly py-[2rem] mt-2 w-1/3 gap-1 hover:border-[#015a62] hover:border hover:border-solid rounded-md",r()>11&&"px-2 border border-solid border-[#015a62] rounded-md text-primary")));var Ce=v(qt),Xe=v(Ce),Ge=v(Xe);fn(Ge),E(2),u(Xe);var lt=d(Xe,4),At=v(lt);fn(At),E(2),u(lt),u(Ce),u(qt),u(V),ie(()=>{wt(ae,s(Ne),""),La(xt,s(Je),""),wt(xe,s(st),""),La(Pt,s(z),""),wt(C,s(K),""),La(Pe,s(Ae),""),wt(Ee,s(pt),""),La(ot,s(Nt),""),wt(qt,s(ar),"")}),we("click",ae,Ke=>{Ke.preventDefault(),Ht("User selected screen layout 1 + 5",n()?.email||"",n()?.id||""),_(p,7)}),we("click",xe,Ke=>{Ke.preventDefault(),Ht("User selected screen layout 1 + 7",n()?.email||"",n()?.id||""),_(p,8)}),we("click",C,Ke=>{Ke.preventDefault(),_(p,9),Ht("User selected screen layout 1 + 12",n()?.email||"",n()?.id||"")}),we("click",Ee,Ke=>{Ke.preventDefault(),_(p,10),Ht("User selected screen layout 2 + 8",n()?.email||"",n()?.id||"")}),vn(Ge,()=>s(x),Ke=>_(x,Ke)),we("input",Ge,Ke=>_(x,parseInt(Ke.target?.value))),we("input",At,Ke=>_(w,parseInt(Ke.target?.value))),vn(At,()=>s(w),Ke=>_(w,Ke)),c(y,Z)},$$slots:{default:!0}}),c(j,B)},$$slots:{default:!0}}),E(2),u(Se),u(ge),ie(()=>{wt(ve,s(de),""),wt(N,`text-xs ${!f()&&"text-white"}`),wt(k,s(O),""),wt(F,`text-xs ${!h()&&"text-white"}`),wt(A,Kt(s(m)?"disabled:cursor-not-allowed relative border-none rounded-full shadow-md h-[40px] w-[40px] text-white bg-[#015a62] grid place-items-center dark:bg-[#015a62]":"disabled:cursor-not-allowed text-black/[.23] h-[40px] w-[40px] rounded-full shadow-md  border-2 border-solid border-black/[.23] dark:border-white/[.23] bg-black text-white group-hover:text-white group-hover:bg-[#015a62] dark:group-hover:bg-[#258d9d] group-hover:border-none grid place-items-center "),"")}),we("click",q,S),we("click",ve,async()=>{await Ht("User clicked on alerts",n()?.email||"",n()?.id||""),tn.update(j=>!j),Rn.set(!1)}),we("click",$e,async()=>{await Ht("User clicked on extend",n()?.email||"",n()?.id||"")}),we("click",k,M),we("click",A,async()=>{await Ht("User clicked on screen snip",n()?.email||"",n()?.id||""),_(m,!s(m)),_($,!1)}),c(a,ge),rr()}var gu=P('<img class="inline-block h-16 w-32 rounded-sm ring-2 ring-black 3xl:w-16 3xl:h-16" alt="">'),bu=P('<!> <span class="flex flex-col w-full m-3"><span class="font-semibold"> </span> <span class="2xl:text-xs text-[10px] leading-tight">Last Seen: <!></span></span>',1);function mo(a,e){tr(e,!1);let t=g(e,"event",8);er(),Ni(a,{class:"bg-[#333] text-white border-none",children:(r,n)=>{Ai(r,{class:"h-[80%] min-w-24 flex items-start py-1",children:(o,i)=>{var l=bu(),f=T(l),h=Ie(()=>[Qi({delay:2e3})]);Ki(f,{opts:{align:"start"},class:"w-20",get plugins(){return s(h)},children:(U,G)=>{qi(U,{class:"m-0",children:(I,M)=>{var ge=ze(),q=T(ge);Dr(q,1,()=>t()?.images,Nr,(Y,fe)=>{Zi(Y,{class:"p-0",children:(J,ve)=>{var de=gu();ie(()=>Er(de,"src","data:image/jpeg;base64,"+s(fe))),c(J,de)},$$slots:{default:!0}})}),c(I,ge)},$$slots:{default:!0}})},$$slots:{default:!0}});var p=d(f,2),m=v(p),$=v(m,!0);u(m);var x=d(m,2),w=d(v(x));{var L=U=>{var G=D("Not yet");c(U,G)},S=U=>{var G=D();ie(()=>Ye(G,new Date(t()?.lastSeen).toLocaleString())),c(U,G)};me(w,U=>{t().lastSeen.length===0?U(L):U(S,!1)})}u(x),u(p),ie(()=>Ye($,t().name)),c(o,l)},$$slots:{default:!0}})},$$slots:{default:!0}}),rr()}const _u=()=>typeof window>"u"?"wss://vms.lenscorp.cloud":window&&window.api?.navigate?"ws://localhost:8080":"wss://vms.lenscorp.cloud";var xu=P("<!> <!>",1),yu=P('<div class="p-3">No whitelisted faces</div>'),$u=P('<div class="flex flex-col gap-4 max-h-[calc(100vh-22rem)] h-60 overflow-y-auto"></div>'),wu=P("<!> <!>",1),Su=P('<div class="p-3">No blacklisted faces</div>'),Pu=P('<div class="flex flex-col gap-4 max-h-[calc(100vh-22rem)] overflow-y-auto h-60"></div>'),Cu=P("<!> <!>",1),ku=P("<!> <!>",1),Eu=P("<span> </span> <!>",1),Tu=P("<!> <!> <!>",1),Du=P("<!> <!>",1),Iu=P('<div class="flex bg-accent p-4 rounded-xl shadow-sm hover:border hover:border-primary relative group overflow-visible cursor-pointer"><div class="flex gap-6 items-center flex-grow"><img class="w-16 h-16 rounded-xl object-cover transform transition-transform duration-300 group-hover:scale-150"> <div class="flex justify-between w-full items-center gap-4"><div class="flex flex-col gap-2 justify-between"><div class="flex items-center space-x-1"><!> <h3 class="text-sm"> </h3></div> <div class="flex flex-col items-start gap-0"><span class="bg-blue-100 text-blue-800 px-2 py-0.5 rounded text-xs"> </span></div></div> <div class="ml-auto text-sm text-muted-foreground text-wrap"><div> </div> <div> </div></div></div></div></div>'),zu=P('<div class="p-3"> </div>'),Lu=P('<div class="flex flex-col gap-3 overflow-y-auto max-h-[calc(100vh-12rem)] overflow-visible"><div class="flex gap-3 items-center justify-between p-2"><!> <!></div> <!></div>'),Ou=P("<!> <!> <!>",1),Nu=P('<div class="border-l flex flex-col p-2 overflow-visible w-full min-w-[360px]"><h1 class="text-lg font-bold p-3">Events</h1> <!></div>'),Au=P('<div class="flex"><!></div>'),Mu=P('<div class="flex"><!></div>'),Ru=P("<div><div><span>Alerts</span> <button><!></button></div></div>"),Uu=P("<div><div><span>Mark ROI</span> <button><!></button></div></div>"),ju=P('<div class="absolute z-50 -translate-x-full top-44 transform -left-8 transition-all duration-500 ease-in-out"><div class="-rotate-90 flex flex-row-reverse items-center origin-top-right"><div><div class="flex items-center justify-center place-items-center my-auto space-x-2"><span>Cameras</span> <button><!></button></div></div> <!></div></div>'),Fu=P('<div class="lg:relative"><!> <!> <!></div>'),Bu=P('<div><div class="relative w-full h-full"><div class="lg:block hidden"><!></div></div></div>'),Hu=P("<!> <!> <!>",1),Vu=P('<div class="relative h-[76vh] w-[97%]"><!> <div class="flex items-center justify-center"><button><!></button> <button><!></button> <button class="flex gap-2 bg-[rgba(0,0,0,.5)] text-white p-2 absolute -bottom-12 left-[60%] -translate-x-1/2 items-center rounded-xl scale-90 z-20 hover:bg-gray-500"><!></button> <button><!></button> <button><!></button></div></div> <div class="bg-transparent z-40 h-[70.5vh] absolute top-5 left-5"><!></div> <canvas id="roicanvas-default" class="bg-transparent z-30 h-[74.5vh] w-[71vw] absolute top-5 left-5 svelte-vy301"></canvas> <div class="w-full p-4 flex items-center gap-4"><!> <!></div>',1),Gu=P('<div class="w-full"><!></div> <div class="hidden lg:block"><!></div> <!>',1);function fv(a,e){tr(e,!1);const t=Ir(),r=()=>ee(Xi,"$liveEvents",t),n=()=>ee(fe,"$roiCamera",t),o=()=>ee(fa,"$selectedCamera",t),i=()=>ee(ha,"$user",t),l=()=>ee(ua,"$cameras",t),f=()=>ee(zs,"$nodes",t),h=()=>ee(tn,"$isAlertPanelOpen",t),p=()=>ee(Rn,"$isRoiPanelOpen",t),m=()=>ee(Wi,"$gallery",t),$=()=>ee(ge,"$isOpen",t),x=_e(),w=_u();let L=_e(1),S=_e(!1),U=_e(),G=_e(!1),I=_e(""),M=_e(""),ge=ct(!1),q=[],Y=[],fe=ct(null),J,ve=_e(!1),de=_e(!1),be=_e(!1),N=_e(!1);function ne(){_(ve,!s(ve)),_(de,!1),_(be,!1),_(N,!1)}const Q=()=>{_(ve,!1),_(de,!s(de)),_(be,!1),_(N,!1)},$e=y=>{let pe,Z,V=null,ye=null,ae=null,Ne=0,xt=0,Je=0,xe=0,st=0,Pt=0;J=y,y.setup=()=>{y.createCanvas(1050,610),y.background(0,0,0,0)},y.draw=()=>{y.clear();for(let C of Y){y.push(),y.translate(C.x+C.w/2,C.y+C.h/2),y.rotate(y.radians(C.angle||0)),y.noFill(),y.stroke(0,0,255),y.strokeWeight(2),y.rectMode(y.CENTER),y.rect(0,0,C.w,C.h);const K=C.w/2,Pe=C.h/2,Ae=10;y.fill(0,255,0),y.noStroke(),y.ellipse(-K,-Pe,Ae),y.ellipse(K,-Pe,Ae),y.ellipse(-K,Pe,Ae),y.ellipse(K,Pe,Ae),y.pop()}for(let C of q)y.stroke(0,0,255),y.strokeWeight(2),y.line(C.x1,C.y1,C.x2,C.y2);V&&(y.noFill(),y.stroke(0,0,255),y.strokeWeight(2),y.rect(V.x,V.y,V.w,V.h)),ye&&(y.stroke(0,0,255),y.strokeWeight(2),y.line(ye.x1,ye.y1,ye.x2,ye.y2))},y.mousePressed=()=>{if(s(be))for(let C of Y){const K=C.x+C.w/2,Pe=C.y+C.h/2,Ae=C.w/2,Ee=C.h/2,pt=[{x:K-Ae,y:Pe-Ee},{x:K+Ae,y:Pe-Ee},{x:K-Ae,y:Pe+Ee},{x:K+Ae,y:Pe+Ee}];for(let ot of pt)if(y.dist(y.mouseX,y.mouseY,ot.x,ot.y)<=10){ae=C,Ne=Math.atan2(y.mouseY-Pe,y.mouseX-K),xt=y.radians(C.angle||0),st=y.mouseX,Pt=y.mouseY;return}}if(s(N))for(let C of Y){const K=C.x+C.w/2,Pe=C.y+C.h/2,Ae=C.w/2,Ee=C.h/2,pt=[{x:K-Ae,y:Pe-Ee},{x:K+Ae,y:Pe-Ee},{x:K-Ae,y:Pe+Ee},{x:K+Ae,y:Pe+Ee}];for(let ot of pt)if(y.dist(y.mouseX,y.mouseY,ot.x,ot.y)<=15){ae=C,Je=C.w,xe=C.h,st=y.mouseX,Pt=y.mouseY;return}}s(de)&&(pe=y.mouseX,Z=y.mouseY,V={x:pe,y:Z,w:0,h:0,angle:0}),s(ve)&&(pe=y.mouseX,Z=y.mouseY,ye={x1:pe,y1:Z,x2:pe,y2:Z})},y.mouseDragged=()=>{if(s(be)&&ae){const C=ae.x+ae.w/2,K=ae.y+ae.h/2,Pe=Math.atan2(y.mouseY-K,y.mouseX-C);ae.angle=y.degrees(xt+(Pe-Ne))}s(N)&&ae&&(ae.w=Je+(y.mouseX-st),ae.h=xe+(y.mouseY-Pt)),s(de)&&V&&(V.w=y.mouseX-pe,V.h=y.mouseY-Z),s(ve)&&ye&&(ye.x2=y.mouseX,ye.y2=y.mouseY)},y.mouseReleased=()=>{if((s(be)||s(N))&&ae){const C=Y.findIndex(K=>K.x===ae.x&&K.y===ae.y);C!==-1&&(Y[C]=ae)}s(de)&&V&&(z(V)||(Y.push(V),V=null)),s(ve)&&ye&&(z(ye)||(q.push(ye),ye=null))};function z(C){for(const K in C)if(typeof C[K]=="number"&&C[K]%1!==0)return!1;return!0}},Le=()=>{_(N,!s(N)),_(de,!1),_(be,!1)},b=()=>{_(be,!s(be)),_(de,!1),_(N,!1)},k=[{filter:"face",label:"Face"},{filter:"person",label:"Person"},{filter:"alpr",label:"Vehicle"},{filter:"heatmap",label:"Heatmap"},{filter:"fire",label:"Fire"}],O={person:"mdi:human",face:"mdi:face-recognition",fire:"mdi:fire",alpr:"mdi:car"};let R=_e(null);function F(y){_(R,{...y})}function H(){_(R,null)}function A(){window.matchMedia("(max-width: 1024px)").matches}function se(y,pe,Z){if(y){const V=y.getContext("2d");V.clearRect(0,0,y.width,y.height),V.beginPath();const ye=y.width,ae=y.height;pe?.length>0&&pe?.forEach(Ne=>{const xt=Ne?.x1/100*ye,Je=Ne?.x2/100*ye,xe=Ne?.y1/100*ae,st=Ne?.y2/100*ae;V.moveTo(xt,xe),V.lineTo(Je,st)}),Z?.length>0&&Z?.forEach(Ne=>{const xt=Ne?.x/100*ye,Je=Ne?.y/100*ae,xe=Ne?.w/100*ye,st=Ne?.h/100*ae,Pt=(Ne?.angle||0)*(Math.PI/180);V.save(),V.translate(xt+xe/2,Je+st/2),V.rotate(Pt),V.rect(-xe/2,-st/2,xe,st),V.restore()}),V.strokeStyle="blue",V.lineWidth=1,V.stroke()}}function ue(){let y=document.getElementById("roicanvas-default");y&&y.getContext("2d").clearRect(0,0,y?.clientWidth,y.height)}const oe=()=>{q=[],Y=[],_(ve,!1),_(de,!1),_(be,!1),_(N,!1),J&&(J.clear(),J.background(0,0,0,0)),fe.update(y=>({...y,roiCanvasCoordinates:[],roiRectangleCoordinates:[]})),ue()};ma(()=>(A(),window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)}));async function Se(){try{let y=document.getElementById("defaultCanvas0");const pe=y?.clientWidth,Z=y?.clientHeight;Y?.pop(),q?.pop();let V=q?.map(ae=>({x1:ae?.x1*100/pe,x2:ae?.x2*100/pe,y1:ae?.y1*100/Z,y2:ae?.y2*100/Z})),ye=Y?.map(ae=>({x:ae?.x*100/pe,y:ae?.y*100/Z,h:ae?.h*100/Z,w:ae?.w*100/pe,angle:ae?.angle}));n()?.isRoiEnabled&&n()?.roiCanvasCoordinates?.length>0&&(V?.length>0?V=[...V,...n()?.roiCanvasCoordinates]:n()?.roiCanvasCoordinates?.length>0&&V?.length===0&&(V=[...n()?.roiCanvasCoordinates])),n()?.isRoiEnabled&&n()?.roiRectangleCoordinates?.length>0&&(ye?.length>0?ye=[...ye,...n()?.roiRectangleCoordinates]:n()?.roiRectangleCoordinates?.length>0&&ye?.length===0&&(ye=[...n()?.roiRectangleCoordinates])),await hr.collection("camera").update(o(),{isRoiEnabled:V?.length>0||ye?.length>0,roiCanvasCoordinates:V?.length>0?V:null,roiRectangleCoordinates:ye?.length>0?ye:null}),Ht("ROI Details Saved Successfully",i()?.email||"",i()?.id||""),q=[],Y=[],ge.set(!1),fe.set(null),_(ve,!1),_(de,!1),J=null,y=null,_(be,!1),_(N,!1),ur.success("ROI Details Saved Successfully")}catch(y){ur?.error(y?.message||"Something went wrong while adding ROI Cameras")}}ge.subscribe(y=>{if(y){let pe=l().find(Z=>Z.id===o());fe.set(pe),q=[],Y=[],setTimeout(()=>{if(n()?.isRoiEnabled&&(n()?.roiCanvasCoordinates?.length>0||n()?.roiRectangleCoordinates?.length>0)){let Z=document.getElementById("roicanvas-default");se(Z,n()?.roiCanvasCoordinates,n()?.roiRectangleCoordinates)}},2e3)}}),St(()=>(r(),s(M),s(I)),()=>{_(x,r().filter(y=>{const Z=s(M).trim()!==""?y.title?.toLowerCase().includes(s(M)?.toLowerCase()):!0,V=s(I)?y.type===s(I):!0;return Z&&V}))}),jr(),er();var te=Gu(),j=T(te),le=v(j);Cc(le,{direction:"horizontal",autoSaveId:"LENSViewPaneSize",style:"height: calc(100vh-3rem);",children:(y,pe)=>{var Z=Hu(),V=T(Z);no(V,{defaultSize:70,children:(xe,st)=>{ic(xe,{STREAM_URL:w})},$$slots:{default:!0}});var ye=d(V,2),ae=Ie(()=>Ot("hidden lg:flex",{"lg:hidden":f()&&f().length<1}));Pc(ye,{withHandle:!0,get class(){return s(ae)}});var Ne=d(ye,2),xt=Ie(()=>`${s(S)?"overflow: hidden;":"overflow: visible;"}`),Je=Ie(()=>Ot("hidden lg:block",{"lg:hidden":f()&&f()?.length<1}));no(Ne,{get style(){return s(xt)},get class(){return s(Je)},maxSize:50,defaultSize:22,collapsible:!0,collapsedSize:0,minSize:0,onResize:xe=>{xe<10?(_(S,!0),s(U).collapse()):(_(S,!1),s(U).expand()),_(G,!0)},get pane(){return s(U)},set pane(xe){_(U,xe)},children:(xe,st)=>{var Pt=Bu(),z=v(Pt),C=v(z),K=v(C);{var Pe=Ae=>{var Ee=Fu(),pt=v(Ee);{var ot=Ge=>{var lt=Au(),At=v(lt);{var Ke=it=>{po(it,{})},X=it=>{var qe=ze(),ut=T(qe);{var Me=Te=>{var ft=Nu(),je=d(v(ft),2);$o(je,{children:(at,Re)=>{var Oe=Ou(),We=T(Oe);wo(We,{class:"w-full",children:(tt,vt)=>{var zt=xu(),ht=T(zt);an(ht,{value:"comfortable",class:"w-1/2",children:(Ct,Xt)=>{E();var Dt=D("Comfortable");c(Ct,Dt)},$$slots:{default:!0}});var Tt=d(ht,2);an(Tt,{value:"informative",class:"w-1/2",children:(Ct,Xt)=>{E();var Dt=D("Informative");c(Ct,Dt)},$$slots:{default:!0}}),c(tt,zt)},$$slots:{default:!0}});var Ze=d(We,2);nn(Ze,{value:"comfortable",class:"w-full min-w-[310px]",children:(tt,vt)=>{yi(tt,{multiple:!0,value:["open"],class:"m-4",children:(zt,ht)=>{var Tt=ku(),Ct=T(Tt);Hs(Ct,{value:"open",children:(Dt,mt)=>{var Be=wu(),Qe=T(Be);Vs(Qe,{children:(jt,dt)=>{E();var Lt=D("Whitelisted");c(jt,Lt)},$$slots:{default:!0}});var Mt=d(Qe,2);Gs(Mt,{children:(jt,dt)=>{var Lt=$u();Dr(Lt,5,()=>m().filter(kt=>!kt.blackList),Nr,(kt,Gt)=>{mo(kt,{get event(){return s(Gt)}})},kt=>{var Gt=yu();c(kt,Gt)}),u(Lt),c(jt,Lt)},$$slots:{default:!0}}),c(Dt,Be)},$$slots:{default:!0}});var Xt=d(Ct,2);Hs(Xt,{value:"item-2",children:(Dt,mt)=>{var Be=Cu(),Qe=T(Be);Vs(Qe,{children:(jt,dt)=>{E();var Lt=D("BlackListed");c(jt,Lt)},$$slots:{default:!0}});var Mt=d(Qe,2);Gs(Mt,{children:(jt,dt)=>{var Lt=Pu();Dr(Lt,5,()=>m().filter(kt=>kt.blackList),Nr,(kt,Gt)=>{mo(kt,{get event(){return s(Gt)}})},kt=>{var Gt=Su();c(kt,Gt)}),u(Lt),c(jt,Lt)},$$slots:{default:!0}}),c(Dt,Be)},$$slots:{default:!0}}),c(zt,Tt)},$$slots:{default:!0}})},$$slots:{default:!0}});var Fe=d(Ze,2);nn(Fe,{value:"informative",children:(tt,vt)=>{var zt=Lu(),ht=v(zt),Tt=v(ht);Ut(Tt,{placeholder:"Search",class:"w-48 focus:outline-none focus:ring-0",get value(){return s(M)},set value(Be){_(M,Be)},$$legacy:!0});var Ct=d(Tt,2);hs(Ct,{children:(Be,Qe)=>{var Mt=Du(),jt=T(Mt);ps(jt,{asChild:!0,children:Ha,$$slots:{default:(Lt,kt)=>{const Gt=Ie(()=>kt.builder);var nr=Ie(()=>[s(Gt)]);pr(Lt,{get builders(){return s(nr)},class:"text-xs h-10",variant:"outline",size:"sm",children:(lr,cr)=>{Tr(lr,{icon:"mdi:filter-outline",class:"w-5 h-5"})},$$slots:{default:!0}})}}});var dt=d(jt,2);ms(dt,{class:"w-48",children:(Lt,kt)=>{var Gt=Tu(),nr=T(Gt);$s(nr,{children:(gr,yr)=>{E();var dr=D("Filters");c(gr,dr)},$$slots:{default:!0}});var lr=d(nr,2);ws(lr,{});var cr=d(lr,2);gs(cr,{children:(gr,yr)=>{var dr=ze(),$r=T(dr);Dr($r,1,()=>k,Nr,(zr,fr)=>{qa(zr,{class:"flex items-center justify-between",$$events:{click:()=>{s(I)==s(fr).filter?_(I,""):_(I,s(fr).filter)}},children:(Fr,br)=>{var wr=Eu(),Sr=T(wr),Ar=v(Sr,!0);u(Sr);var ce=d(Sr,2);{var $t=Ft=>{Tr(Ft,{icon:"mdi:check"})};me(ce,Ft=>{s(I)==s(fr).filter&&Ft($t)})}ie(()=>Ye(Ar,s(fr).label)),c(Fr,wr)},$$slots:{default:!0}})}),c(gr,dr)},$$slots:{default:!0}}),c(Lt,Gt)},$$slots:{default:!0}}),c(Be,Mt)},$$slots:{default:!0}}),u(ht);var Xt=d(ht,2);{var Dt=Be=>{var Qe=ze(),Mt=T(Qe);Dr(Mt,1,()=>s(x),Nr,(jt,dt)=>{var Lt=Iu(),kt=v(Lt),Gt=v(kt),nr=d(Gt,2),lr=v(nr),cr=v(lr),gr=v(cr);{var yr=$t=>{Tr($t,{get icon(){return O[s(dt).type]},width:"20"})};me(gr,$t=>{O[s(dt).type]&&$t(yr)})}var dr=d(gr,2),$r=v(dr,!0);u(dr),u(cr);var zr=d(cr,2),fr=v(zr),Fr=v(fr);ie(()=>Ye(Fr,`Confidence: ${Math.round(s(dt)?.score*100)??""} %`)),u(fr),u(zr),u(lr);var br=d(lr,2),wr=v(br),Sr=v(wr,!0);ie(()=>Ye(Sr,new Date(s(dt)?.created).toLocaleDateString())),u(wr);var Ar=d(wr,2),ce=v(Ar,!0);ie(()=>Ye(ce,new Date(s(dt)?.created).toLocaleTimeString())),u(Ar),u(br),u(nr),u(kt),u(Lt),ie(()=>{Er(Gt,"src","data:image/jpeg;base64,"+s(dt).frameImage),Er(Gt,"alt",s(dt).title||"Unknown Identity"),Ye($r,s(dt).title||"Unknown Identity")}),we("click",Lt,()=>F(s(dt))),c(jt,Lt)}),c(Be,Qe)},mt=Be=>{var Qe=zu(),Mt=v(Qe);ie(()=>Ye(Mt,`No ${k.find(jt=>jt.filter===s(I))?.label??""} events yet. Displaying only live events.`)),u(Qe),c(Be,Qe)};me(Xt,Be=>{s(x).length>0?Be(Dt):Be(mt,!1)})}u(zt),c(tt,zt)},$$slots:{default:!0}}),c(at,Oe)},$$slots:{default:!0}}),u(ft),c(Te,ft)};me(ut,Te=>{s(L)==1&&Te(Me)},!0)}c(it,qe)};me(At,it=>{s(L)==0?it(Ke):it(X,!1)})}u(lt),c(Ge,lt)},Nt=Ge=>{var lt=Mu(),At=v(lt);po(At,{}),u(lt),c(Ge,lt)};me(pt,Ge=>{h()||p()?Ge(ot):Ge(Nt,!1)})}var qt=d(pt,2);{var ar=Ge=>{Ji(Ge,{get event(){return s(R)},onClose:H})};me(qt,Ge=>{s(R)&&Ge(ar)})}var Ce=d(qt,2);{var Xe=Ge=>{var lt=ju(),At=v(lt),Ke=v(At),X=v(Ke),it=d(v(X),2);wt(it,"text-center items-center flex place-items-center hover:bg-foreground/50 hover:dark:text-black hover:text-white rounded-full hover:m-1");var qe=v(it);Tr(qe,{icon:"material-symbols:close-rounded",width:14}),u(it),u(X),u(Ke);var ut=d(Ke,2);{var Me=ft=>{var je=Ru(),at=v(je);wt(at,"flex items-center justify-center place-items-center my-auto space-x-2");var Re=d(v(at),2);wt(Re,"text-center items-center flex place-items-center hover:bg-foreground/50 hover:dark:text-black hover:text-white rounded-full hover:m-1");var Oe=v(Re);Tr(Oe,{icon:"material-symbols:close-rounded",width:14}),u(Re),u(at),u(je),ie(()=>wt(je,`${s(L)==1?"font-bold bg-accent":"bg-background/80 "} cursor-pointer h-[32px] rounded-t-xl  text-black dark:text-white px-3 flex items-center whitespace-nowrap shadow-xl z-40 border dark:border-muted-foreground/10`)),we("click",Re,Kn(()=>tn.set(!1))),we("click",at,()=>{_(L,1),_(S,!1)}),c(ft,je)},Te=ft=>{var je=ze(),at=T(je);{var Re=Oe=>{var We=Uu(),Ze=v(We);wt(Ze,"flex items-center justify-center place-items-center my-auto space-x-2");var Fe=d(v(Ze),2);wt(Fe,"text-center items-center flex place-items-center hover:bg-foreground/50 hover:dark:text-black hover:text-white rounded-full hover:m-1");var tt=v(Fe);Tr(tt,{icon:"material-symbols:close-rounded",width:14}),u(Fe),u(Ze),u(We),ie(()=>wt(We,`${s(L)==1?"font-bold bg-accent":"bg-background/80 "} cursor-pointer h-[32px] rounded-t-xl  text-black dark:text-white px-3 flex items-center whitespace-nowrap shadow-xl z-40 border dark:border-muted-foreground/10`)),we("click",Fe,Kn(()=>Rn.set(!1))),we("click",Ze,()=>{_(L,1),_(S,!1)}),c(Oe,We)};me(at,Oe=>{p()&&Oe(Re)},!0)}c(ft,je)};me(ut,ft=>{h()?ft(Me):ft(Te,!1)})}u(At),u(lt),ie(()=>wt(Ke,`${s(L)==0?"font-bold bg-accent":"bg-background/80 "} cursor-pointer h-[32px] rounded-t-xl  text-black dark:text-white px-3 flex  items-center whitespace-nowrap shadow-xl z-40 border dark:border-muted-foreground/10`)),we("click",it,Kn(()=>tn.set(!1))),we("click",X,()=>_(L,0)),c(Ge,lt)};me(Ce,Ge=>{(h()||p())&&Ge(Xe)})}u(Ee),c(Ae,Ee)};me(K,Ae=>{f()&&f().length>0&&Ae(Pe)})}u(C),u(z),u(Pt),c(xe,Pt)},$$slots:{default:!0},$$legacy:!0}),c(y,Z)},$$slots:{default:!0}}),u(j);var B=d(j,2),re=v(B);mu(re,{isOpen:ge}),u(B);var ke=d(B,2);hn(ke,{get open(){return qr(),$()},set open(y){Zr(ge,y)},children:(y,pe)=>{pn(y,{class:"h-[90vh] max-w-[77vw]",children:(Z,V)=>{var ye=Vu(),ae=T(ye),Ne=v(ae),xt=Ie(()=>o()?.name),Je=Ie(()=>o()?.id),xe=Ie(()=>`${w}/api/ws?src=${o()}`);Ao(Ne,{get name(){return s(xt)},get id(){return s(Je)},get url(){return s(xe)},isMarkRoi:!0});var st=d(Ne,2),Pt=v(st);const z=Ie(()=>Kt(Ot("cursor-pointer flex gap-2 bg-[rgba(0,0,0,.5)] text-white p-2 absolute -bottom-12 left-1/2 -translate-x-1/2 items-center rounded-xl scale-90 z-20",s(ve)&&"bg-gray-500")));var C=v(Pt);il(C,{size:22}),u(Pt);var K=d(Pt,2);const Pe=Ie(()=>Kt(Ot("flex gap-2 bg-[rgba(0,0,0,.5)] text-white p-2 absolute -bottom-12 left-[55%] -translate-x-1/2 items-center rounded-xl scale-90 z-20",s(de)&&"bg-gray-500")));var Ae=v(K);cl(Ae,{size:22}),u(K);var Ee=d(K,2),pt=v(Ee);So(pt,{size:22}),u(Ee);var ot=d(Ee,2);const Nt=Ie(()=>Kt(Ot("cursor-pointer flex gap-2 bg-[rgba(0,0,0,.5)] text-white p-2 absolute top-[47%] -right-16 -translate-x-1/2 items-center rounded-xl scale-90 z-20",s(N)&&"bg-gray-500")));var qt=v(ot);ul(qt,{size:22}),u(ot);var ar=d(ot,2);const Ce=Ie(()=>Kt(Ot("cursor-pointer flex gap-2 bg-[rgba(0,0,0,.5)] text-white p-2 absolute top-[55%] -right-16 -translate-x-1/2 items-center rounded-xl scale-90 z-20",s(be)&&"bg-gray-500")));var Xe=v(ar);dl(Xe,{size:22}),u(ar),u(st),u(ae);var Ge=d(ae,2),lt=v(Ge);Rl(lt,{sketch:$e,parentDivStyle:"position: absolute; top: 0; left: 0; z-index: 10; background: transparent; pointer-events: auto;"}),u(Ge);var At=d(Ge,4),Ke=v(At);pr(Ke,{$$events:{click:()=>{Se()}},children:(it,qe)=>{E();var ut=D("Save");c(it,ut)},$$slots:{default:!0}});var X=d(Ke,2);pr(X,{variant:"secondary",$$events:{click:()=>{ge.set(!1),fa.set(null)}},children:(it,qe)=>{E();var ut=D("Cancel");c(it,ut)},$$slots:{default:!0}}),u(At),ie(()=>{wt(Pt,s(z),"svelte-vy301"),wt(K,s(Pe),"svelte-vy301"),wt(ot,s(Nt),"svelte-vy301"),wt(ar,s(Ce),"svelte-vy301")}),we("click",Pt,ne),we("click",K,Q),we("click",Ee,oe),we("click",ot,Le),we("click",ar,b),c(Z,ye)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),c(a,te),rr()}export{fv as default};
