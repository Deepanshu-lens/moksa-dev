import{a}from"./pb.BjVtZEqq.js";let l=[],n=0;const o=4;let f=u=>{let r=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=r.push(t),()=>{for(let i=n+o;i<l.length;)l[i]===t?l.splice(i,o):i+=o;let s=r.indexOf(t);~s&&(r.splice(s,1),--e.lc)}},notify(t,s){let i=!l.length;for(let c of r)l.push(c,e.value,t,s);if(i){for(n=0;n<l.length;n+=o)l[n](l[n+1],l[n+2],l[n+3]);l.length=0}},off(){},set(t){let s=e.value;s!==t&&(e.value=t,e.notify(s))},subscribe(t){let s=e.listen(t);return t(e.value),s},value:u};return e};const d=()=>{const u=f(null);return{subscribe:u.subscribe,set:r=>{const e=a(r);u.set(e)},update:r=>{const e=u.get(),t=r(e);u.set(a(t))},get:()=>u.get()}},p=d();export{p as u};
