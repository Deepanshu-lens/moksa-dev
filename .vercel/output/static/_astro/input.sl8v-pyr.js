import{y as g,z as x,A as i,k as m,h as S,B as u}from"./effects.BhUQh3a6.js";import{l as k}from"./template.gBe-IW8Y.js";import{i as w}from"./props.B2sXXNEW.js";function q(e,v,a=v){var o=g();k(e,"input",l=>{var f=l?e.defaultValue:e.value;if(f=_(e)?t(f):f,a(f),o&&f!==(f=v())){var c=e.selectionStart,d=e.selectionEnd;e.value=f??"",d!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(d,e.value.length))}}),(m&&e.defaultValue!==e.value||x(v)==null&&e.value)&&a(_(e)?t(e.value):e.value),i(()=>{var l=v();_(e)&&l===t(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}const n=new Set;function z(e,v,a,o,l=o){var f=a.getAttribute("type")==="checkbox",c=e;let d=!1;if(v!==null)for(var b of v)c=c[b]??=[];c.push(a),k(a,"change",()=>{var r=a.__value;f&&(r=h(c,r,a.checked)),l(r)},()=>l(f?[]:null)),i(()=>{var r=o();if(m&&a.defaultChecked!==a.checked){d=!0;return}f?(r=r||[],a.checked=r.includes(a.__value)):a.checked=w(a.__value,r)}),S(()=>{var r=c.indexOf(a);r!==-1&&c.splice(r,1)}),n.has(c)||(n.add(c),u(()=>{c.sort((r,s)=>r.compareDocumentPosition(s)===4?-1:1),n.delete(c)})),u(()=>{if(d){var r;if(f)r=h(c,r,a.checked);else{var s=c.find(y=>y.checked);r=s?.__value}l(r)}})}function h(e,v,a){for(var o=new Set,l=0;l<e.length;l+=1)e[l].checked&&o.add(e[l].__value);return a||o.delete(v),Array.from(o)}function _(e){var v=e.type;return v==="number"||v==="range"}function t(e){return e===""?null:+e}export{z as a,q as b};
