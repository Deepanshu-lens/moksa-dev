import{w as rt}from"./index.Syity6yz.js";import{a as nt}from"./index-client.CAqXSNTC.js";function it(e,t){return Object.keys(e).some(n=>t(e[n]))}function Ce(e,t){return Object.keys(e||{}).reduce((n,i)=>Object.assign(Object.assign({},n),{[i]:t(e[i])}),{})}function v(e){return Object.prototype.toString.call(e)==="[object Object]"}function $(e){return Object.keys(e||{}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:v(e[r])?$(e[r]):Array.isArray(e[r])?[...e[r]]:e[r]}),{})}function st(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function ot(e){return function(t){if(v(t)){const r=K(t,e);return st(r,["key"])}return e}}function K(e,t){return Ce(e,r=>v(r)?K(r,t):Array.isArray(r)?r.map(ot(t)):t)}function he(...e){const t=e.pop(),r=e.shift();if(typeof r=="string")return r;const n=$(r);if(e.length===0)return n;for(const i of e){if(!i)continue;if(typeof i=="string")return i;let s=t(n,i);if(typeof s<"u")return s;const a=Array.from(new Set(Object.keys(n).concat(Object.keys(i))));for(const c of a)if(s=t(n[c],i[c]),typeof s<"u")n[c]=s;else if(v(i[c])&&v(n[c]))n[c]=he(n[c],i[c],t);else if(Array.isArray(i[c]))n[c]=i[c].map((p,h)=>{if(!v(p))return p;const S=Array.isArray(n[c])?n[c][h]:n[c];return he(S,p,t)});else if(v(i[c])){const p=K($(i[c]),void 0);n[c]=he(p,i[c],t)}else typeof i[c]<"u"&&(n[c]=i[c])}return n}function at(e,t){if(!(v(e)&&v(t))){if(Array.isArray(t)){if(t.some(v))return;const r=Array.isArray(e)?e:[];return t.map((n,i)=>{var s;return(s=r[i])!==null&&s!==void 0?s:n})}if(typeof e<"u")return e}}function Be(...e){return he(...e,at)}function Je(...e){return he(...e,()=>{})}function fe(e,t,r){const n=s=>String.prototype.split.call(t,s).filter(Boolean).reduce((a,c)=>a!=null?a[c]:a,e),i=n(/[,[\]]+?/)||n(/[,[\].]+?/);return i===void 0||i===e?r:i}function We(e,t,r){e&&(e=$(e)),v(e)||(e={});const n=Array.isArray(t)?t:t.match(/[^.[\]]+/g)||[],i=n[n.length-1];if(!i)return e;let s=e;for(let a=0;a<n.length-1;a++){const c=n[a];if(!s[c]||!v(s[c])&&!Array.isArray(s[c])){const p=n[a+1];isNaN(Number(p))?s[c]={}:s[c]=[]}s=s[c]}return s[i]=r(s[i]),e}function E(e,t,r){return We(e,t,()=>r)}function Ie(e,t){if(!e||Object(e)!==e)return;typeof e<"u"&&(e=$(e));const r=Array.isArray(t)?t:t.toString().match(/[^.[\]]+/g)||[],n=r.length===1?e:fe(e,r.slice(0,-1).join("."));return Array.isArray(n)?n.splice(Number(r[r.length-1]),1):n==null||delete n[r[r.length-1]],e}function Le(e,t){return it(e,r=>v(r)?Le(r,t):Array.isArray(r)?r.length===0||r.every(n=>typeof n=="string")?t(r):r.some(n=>v(n)?Le(n,t):t(n)):t(r))}function De(e){return e?.nodeName==="INPUT"}function ut(e){return e?.nodeName==="TEXTAREA"}function ke(e){return e?.nodeName==="SELECT"}function He(e){return e?.nodeName==="FIELDSET"}function U(e){return De(e)||ut(e)||ke(e)}function ze(e){return e.nodeType===Node.ELEMENT_NODE}function j(e,t){return t??(U(e)?e.name:"")}function Me(e){let t=e;for(;t&&t.nodeName!=="FORM";){if(t.hasAttribute("data-felte-ignore"))return!0;t=t.parentElement}return!1}function ct(e,t){if(!(v(e)||v(t))){if(e===null||e==="")return t;if(t===null||t===""||!t)return e;if(!(!e||!t)){if(Array.isArray(e)){if(!Array.isArray(t))return[...e,t];const r=[],n=Math.max(t.length,e.length);for(let i=0;i<n;i++){let s=e[i],a=t[i];!v(s)&&!v(a)?(Array.isArray(s)||(s=[s]),Array.isArray(a)||(a=[a]),r.push(...s,...a)):r.push(Te([s??{},a??{}]))}return r.filter(Boolean)}return Array.isArray(t)||(t=[t]),[e,...t].reduce((r,n)=>r.concat(n),[]).filter(Boolean)}}}function Te(e){return he(...e,ct)}function lt(e,t){return t?(Array.isArray(t)?t:[t]).map(n=>n(e)):[]}function qe(e,t){return t?Array.isArray(t)?t.reduce((r,n)=>n(r),e):t(e):e}function Qe(e=8){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";for(let n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}function Ue(e,t,{onInit:r,onEnd:n}={}){let i;return(...s)=>{i||r?.(),i&&clearTimeout(i),i=setTimeout(()=>{e.apply(this,s),i=void 0,n?.()},t)}}function $e(e){if(U(e))return[e];if(e.childElementCount===0)return[];const t=new Set;for(const r of e.children){if(U(r)&&t.add(r),He(r))for(const n of r.elements)U(n)&&t.add(n);r.childElementCount>0&&$e(r).forEach(n=>t.add(n))}return Array.from(t)}function Ye(e){for(const t of e.elements)!U(t)&&!He(t)||e.hasAttribute("data-felte-keep-on-remove")&&!t.hasAttribute("data-felte-keep-on-remove")&&(t.dataset.felteKeepOnRemove=e.dataset.felteKeepOnRemove)}function Ze(e){return e.type.match(/^(number|range)$/)?e.value?+e.value:null:e.value}function Xe(e){var t;let r={},n={};for(const i of e.elements){if(He(i)&&Ye(i),!U(i)||!i.name)continue;const s=j(i);if(De(i)){if(i.type==="checkbox"){if(typeof fe(r,s)>"u"){if(Array.from(e.querySelectorAll(`[name="${i.name}"]`)).filter(p=>U(p)?s===j(p):!1).length===1){r=E(r,s,i.checked),n=E(n,s,!1);continue}r=E(r,s,i.checked?[i.value]:[]),n=E(n,s,!1);continue}Array.isArray(fe(r,s))&&i.checked&&(r=We(r,s,c=>[...c,i.value]));continue}if(i.type==="radio"){if(fe(r,s))continue;r=E(r,s,i.checked?i.value:void 0),n=E(n,s,!1);continue}if(i.type==="file"){r=E(r,s,i.multiple?Array.from(i.files||[]):(t=i.files)===null||t===void 0?void 0:t[0]),n=E(n,s,!1);continue}}else if(ke(i)){if(!i.multiple)r=E(r,s,i.value);else{const p=Array.from(i.selectedOptions).map(h=>h.value);r=E(r,s,p)}n=E(n,s,!1);continue}const a=Ze(i);r=E(r,s,a),n=E(n,s,!1)}return{defaultData:r,defaultTouched:n}}function dt(e,t){var r;if(!U(e))return;const n=t;if(De(e)){if(e.type==="checkbox"){const i=n;if(typeof i>"u"||typeof i=="boolean"){e.checked=!!i;return}Array.isArray(i)&&(i.includes(e.value)?e.checked=!0:e.checked=!1);return}if(e.type==="radio"){const i=n;e.value===i?e.checked=!0:e.checked=!1;return}if(e.type==="file"){if(t instanceof FileList)e.files=t;else if(t instanceof File&&typeof DataTransfer<"u"){const i=new DataTransfer;i.items.add(t),e.files=i.files}else if(typeof DataTransfer<"u"&&Array.isArray(t)&&t.some(i=>i instanceof File)){const i=new DataTransfer;for(const s of t)s instanceof File&&i.items.add(s);e.files=i.files}else(!t||Array.isArray(t)&&!t.length)&&(e.files=null,e.value="");return}}else if(ke(e)){if(e.multiple){if(Array.isArray(n)){e.value=String((r=n[0])!==null&&r!==void 0?r:"");const s=n.map(a=>String(a));for(const a of e.options)s.includes(a.value)?a.selected=!0:a.selected=!1}}else{e.value=String(n??"");for(const s of e.options)s.value===String(n)?s.selected=!0:s.selected=!1}return}e.value=String(n??"")}function Re(e,t){for(const r of e.elements){if(He(r)&&Ye(r),!U(r)||!r.name)continue;const n=j(r);dt(r,fe(t,n))}}function ft(e,...t){const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function le(e){let t;return ft(e,r=>t=r)(),t}class mt extends Error{constructor(t,r){super(t),this.name="FelteSubmitError",this.response=r}}function Ve(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function de(e,t){return Ce(e,r=>v(r)?de(r,t):Array.isArray(r)?r.length===0||r.every(n=>typeof n=="string")?t:r.map(n=>{const i=de(n,t);return Ve(i,["key"])}):t)}function _e(e){return e?Ce(e,t=>v(t)?_e(t):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?t:t.map(r=>{if(!v(r))return r;const n=_e(r);return n.key||(n.key=Qe()),n}):t):{}}function Fe(e){return e?Ce(e,t=>v(t)?Fe(t):Array.isArray(t)?t.length===0||t.every(r=>typeof r=="string")?t:t.map(r=>{if(!v(r))return r;const n=Fe(r);return Ve(n,["key"])}):t):{}}function yt(){class e extends CustomEvent{constructor(i){super("feltesuccess",{detail:i})}}class t extends CustomEvent{constructor(i){super("felteerror",{detail:i,cancelable:!0})}setErrors(i){this.preventDefault(),this.errors=i}}class r extends Event{constructor(){super("feltesubmit",{cancelable:!0})}handleSubmit(i){this.onSubmit=i}handleError(i){this.onError=i}handleSuccess(i){this.onSuccess=i}}return{createErrorEvent:n=>new t(n),createSubmitEvent:()=>new r,createSuccessEvent:n=>new e(n)}}function vt(e){if(e)return async function(){let r=new FormData(e);const n=new URL(e.action),i=e.method.toLowerCase()==="get"?"get":n.searchParams.get("_method")||e.method;let s=e.enctype;e.querySelector('input[type="file"]')&&(s="multipart/form-data"),(i==="get"||s==="application/x-www-form-urlencoded")&&(r=new URLSearchParams(r));let a;i==="get"?(r.forEach((p,h)=>{n.searchParams.append(h,p)}),a={method:i,headers:{Accept:"application/json"}}):a={method:i,body:r,headers:Object.assign(Object.assign({},s!=="multipart/form-data"&&{"Content-Type":s}),{Accept:"application/json"})};const c=await window.fetch(n.toString(),a);if(c.ok)return c;throw new mt("An error occurred while submitting the form",c)}}function je(e,t,r,n){return We(e,t,i=>(typeof i<"u"&&!Array.isArray(i)||(i||(i=[]),typeof n>"u"?i.push(r):i.splice(n,0,r)),i))}function pt(e,t,r,n){return We(e,t,i=>(!i||!Array.isArray(i)||([i[r],i[n]]=[i[n],i[r]]),i))}function bt(e,t,r,n){return We(e,t,i=>(!i||!Array.isArray(i)||i.splice(n,0,i.splice(r,1)[0]),i))}function Ge(e){return typeof e=="function"}function Ae(e){return(r,n)=>{if(typeof r=="string"){const i=r;e(s=>{const a=Ge(n)?n(fe(s,i)):n;return E(s,i,a)})}else e(i=>Ge(r)?r(i):r)}}function At({stores:e,config:t,validateErrors:r,validateWarnings:n,_getCurrentExtenders:i}){var s;let a,c=_e((s=t.initialValues)!==null&&s!==void 0?s:{});const{data:p,touched:h,errors:S,warnings:O,isDirty:N,isSubmitting:T,interacted:D}=e,k=Ae(p.update),C=Ae(h.update),g=Ae(S.update),J=Ae(O.update);function X(u){k(y=>{const m=u(y);return a&&Re(a,m),m})}const _=(u,y,m)=>{Ae(X)(u,y),typeof u=="string"&&m&&C(u,!0)};function se(u,y,m){const P=v(y)?de(y,!1):!1,L=v(P)?K(P,[]):[];y=v(y)?Object.assign(Object.assign({},y),{key:Qe()}):y,S.update(x=>je(x,u,L,m)),O.update(x=>je(x,u,L,m)),h.update(x=>je(x,u,P,m)),p.update(x=>{const G=je(x,u,y,m);return setTimeout(()=>a&&Re(a,G)),G})}function I(u){S.update(u),O.update(u),h.update(u),p.update(y=>{const m=u(y);return setTimeout(()=>a&&Re(a,m)),m})}function B(u){I(y=>Ie(y,u))}function Y(u,y,m){I(P=>pt(P,u,y,m))}function Z(u,y,m){I(P=>bt(P,u,y,m))}function me(u){const y=fe(c,u),m=v(y)?de(y,!1):!1,P=v(m)?K(m,[]):[];p.update(L=>{const x=E(L,u,y);return a&&Re(a,x),x}),h.update(L=>E(L,u,m)),S.update(L=>E(L,u,P)),O.update(L=>E(L,u,P))}const b=Ae(T.update),M=Ae(N.update),V=Ae(D.update);async function oe(){const u=le(p);h.set(de(u,!0)),D.set(null);const y=await r(u);return await n(u),y}function ae(){_($(c)),C(u=>K(u,!1)),D.set(null),N.set(!1)}function F(u){return async function(m){var P,L,x,G,ue,Ee,Se;const{createErrorEvent:Pe,createSubmitEvent:Ne,createSuccessEvent:we}=yt(),te=Ne();a?.dispatchEvent(te);const l=(L=(P=te.onError)!==null&&P!==void 0?P:u?.onError)!==null&&L!==void 0?L:t.onError,o=(G=(x=te.onSuccess)!==null&&x!==void 0?x:u?.onSuccess)!==null&&G!==void 0?G:t.onSuccess,d=(Se=(Ee=(ue=te.onSubmit)!==null&&ue!==void 0?ue:u?.onSubmit)!==null&&Ee!==void 0?Ee:t.onSubmit)!==null&&Se!==void 0?Se:vt(a);if(!d||(m?.preventDefault(),te.defaultPrevented))return;T.set(!0),D.set(null);const f=Fe(le(p)),q=await r(f,u?.validate),ve=await n(f,u?.warn);if(ve&&O.set(Je(K(f,[]),ve)),h.set(de(f,!0)),q&&(h.set(de(q,!0)),Le(q,R=>Array.isArray(R)?R.length>=1:!!R))){await new Promise(R=>setTimeout(R)),i().forEach(R=>{var Q;return(Q=R.onSubmitError)===null||Q===void 0?void 0:Q.call(R,{data:f,errors:q})}),T.set(!1);return}const re={event:m,setFields:_,setData:k,setTouched:C,setErrors:g,setWarnings:J,unsetField:B,addField:se,resetField:me,reset:ae,setInitialValues:ee.setInitialValues,moveField:Z,swapFields:Y,form:a,controls:a&&Array.from(a.elements).filter(U),config:Object.assign(Object.assign({},t),u)};try{const W=await d(f,re);a?.dispatchEvent(we(Object.assign({response:W},re))),await o?.(W,re)}catch(W){const R=Pe(Object.assign({error:W},re));if(a?.dispatchEvent(R),!l&&!R.defaultPrevented)throw W;if(!l&&!R.errors)return;const Q=R.errors||await l?.(W,re);Q&&(h.set(de(Q,!0)),S.set(Q),await new Promise(ne=>setTimeout(ne)),i().forEach(ne=>{var pe;return(pe=ne.onSubmitError)===null||pe===void 0?void 0:pe.call(ne,{data:f,errors:le(S)})}))}finally{T.set(!1)}}}const ee={setData:k,setFields:_,setTouched:C,setErrors:g,setWarnings:J,setIsSubmitting:b,setIsDirty:M,setInteracted:V,validate:oe,reset:ae,unsetField:B,resetField:me,addField:se,swapFields:Y,moveField:Z,createSubmitHandler:F,handleSubmit:F(),setInitialValues:u=>{c=_e(u)}};return{public:ee,private:{_setFormNode(u){a=u},_getInitialValues:()=>c}}}function ht({helpers:e,stores:t,config:r,extender:n,createSubmitHandler:i,handleSubmit:s,_setFormNode:a,_getInitialValues:c,_setCurrentExtenders:p,_getCurrentExtenders:h}){const{setFields:S,setTouched:O,reset:N,setInitialValues:T}=e,{addValidator:D,addTransformer:k,validate:C}=e,{data:g,errors:J,warnings:X,touched:_,isSubmitting:se,isDirty:I,interacted:B,isValid:Y,isValidating:Z}=t;function me(b){b.requestSubmit||(b.requestSubmit=s);function M(l){return function(o){return o({form:b,stage:l,controls:Array.from(b.elements).filter(U),data:g,errors:J,warnings:X,touched:_,isValid:Y,isValidating:Z,isSubmitting:se,isDirty:I,interacted:B,config:r,addValidator:D,addTransformer:k,setFields:S,validate:C,reset:N,createSubmitHandler:i,handleSubmit:s})}}p(n.map(M("MOUNT"))),b.noValidate=!!r.validate;const{defaultData:V,defaultTouched:oe}=Xe(b);a(b),T(Je($(V),c())),S(c()),_.set(oe);function ae(l){const o=j(l),d=Array.from(b.querySelectorAll(`[name="${l.name}"]`)).filter(f=>U(f)?o===j(f):!1);if(d.length!==0)return d.length===1?g.update(f=>E(f,j(l),l.checked)):g.update(f=>E(f,j(l),d.filter(De).filter(q=>q.checked).map(q=>q.value)))}function F(l){const o=b.querySelectorAll(`[name="${l.name}"]`),d=Array.from(o).find(f=>De(f)&&f.checked);g.update(f=>E(f,j(l),d?.value))}function ee(l){var o;const d=Array.from((o=l.files)!==null&&o!==void 0?o:[]);g.update(f=>E(f,j(l),l.multiple?d:d[0]))}function ye(l){if(!l.multiple)g.update(o=>E(o,j(l),l.value));else{const o=Array.from(l.selectedOptions).map(d=>d.value);g.update(d=>E(d,j(l),o))}}function u(l){const o=l.target;if(!o||!U(o)||ke(o)||Me(o)||["checkbox","radio","file"].includes(o.type)||!o.name)return;I.set(!0);const d=Ze(o);B.set(o.name),g.update(f=>E(f,j(o),d))}function y(l){const o=l.target;if(!(!o||!U(o)||Me(o))&&o.name)if(O(j(o),!0),B.set(o.name),(ke(o)||["checkbox","radio","file","hidden"].includes(o.type))&&I.set(!0),o.type==="hidden"&&g.update(d=>E(d,j(o),o.value)),ke(o))ye(o);else if(De(o))o.type==="checkbox"?ae(o):o.type==="radio"?F(o):o.type==="file"&&ee(o);else return}function m(l){const o=l.target;!o||!U(o)||Me(o)||o.name&&(O(j(o),!0),B.set(o.name))}function P(l){l.preventDefault(),N()}const L={childList:!0,subtree:!0};function x(l){let o=le(g),d=le(_),f=le(J),q=le(X);for(const ve of l.reverse()){if(ve.hasAttribute("data-felte-keep-on-remove")&&ve.dataset.felteKeepOnRemove!=="false")continue;const re=/.*(\[[0-9]+\]|\.[0-9]+)\.[^.]+$/;let W=j(ve);const R=le(_);if(re.test(W)){const ne=W.split(".").slice(0,-1).join("."),pe=fe(R,ne);v(pe)&&Object.keys(pe).length<=1&&(W=ne)}o=Ie(o,W),d=Ie(d,W),f=Ie(f,W),q=Ie(q,W)}g.set(o),_.set(d),J.set(f),X.set(q)}const G=Ue(()=>{h().forEach(d=>{var f;return(f=d.destroy)===null||f===void 0?void 0:f.call(d)}),p(n.map(M("UPDATE")));const{defaultData:l,defaultTouched:o}=Xe(b);g.update(d=>Be(d,l)),_.update(d=>Be(d,o)),e.setFields(le(g))},0);let ue=[];const Ee=Ue(()=>{h().forEach(l=>{var o;return(o=l.destroy)===null||o===void 0?void 0:o.call(l)}),p(n.map(M("UPDATE"))),x(ue),ue=[]},0);function Se(l){Array.from(l.addedNodes).some(d=>ze(d)?U(d)?!0:$e(d).length>0:!1)&&G()}function Pe(l){for(const o of l.removedNodes){if(!ze(o))continue;const d=$e(o);d.length!==0&&(ue.push(...d),Ee())}}function Ne(l){for(const o of l)o.type==="childList"&&(o.addedNodes.length>0&&Se(o),o.removedNodes.length>0&&Pe(o))}const we=new MutationObserver(Ne);we.observe(b,L),b.addEventListener("input",u),b.addEventListener("change",y),b.addEventListener("focusout",m),b.addEventListener("submit",s),b.addEventListener("reset",P);const te=J.subscribe(l=>{for(const o of b.elements){if(!U(o)||!o.name)continue;const d=fe(l,j(o)),f=Array.isArray(d)?d.join(`
`):typeof d=="string"?d:void 0;f!==o.dataset.felteValidationMessage&&(f?(o.dataset.felteValidationMessage=f,o.setAttribute("aria-invalid","true")):(delete o.dataset.felteValidationMessage,o.removeAttribute("aria-invalid")))}});return{destroy(){we.disconnect(),b.removeEventListener("input",u),b.removeEventListener("change",y),b.removeEventListener("focusout",m),b.removeEventListener("submit",s),b.removeEventListener("reset",P),te(),h().forEach(l=>{var o;return(o=l.destroy)===null||o===void 0?void 0:o.call(l)})}}}return{form:me}}function Et(e){const t={aborted:!1,priority:e};return{signal:t,abort(){t.aborted=!0}}}function St(e,t){if(v(e))return!t||v(t)&&Object.keys(t).length===0?K(e,null):void 0;if(Array.isArray(e)){if(e.some(v))return;const r=Array.isArray(t)?t:[];return e.map((n,i)=>{const s=r[i];return Array.isArray(s)&&s.length===0?null:n&&s||null})}return Array.isArray(t)&&t.length===0?null:Array.isArray(t)?e?t:null:e&&t?[t]:null}function wt(e,t){if(v(e))return!t||v(t)&&Object.keys(t).length===0?K(e,null):void 0;if(Array.isArray(e)){if(e.some(v))return;const r=Array.isArray(t)?t:[];return e.map((n,i)=>{const s=r[i];return Array.isArray(s)&&s.length===0?null:s||null})}return Array.isArray(t)&&t.length===0?null:Array.isArray(t)?t:t?[t]:null}function gt([e,t]){return he(t,e,St)}function Ot([e,t]){return he(t,e,wt)}function _t(e){return function(r,n,i){const s=Array.isArray(r)?r:[r],a=new Array(s.length),c=e(i),p=c.set,h=c.subscribe;let S;function O(){S=s.map((T,D)=>T.subscribe(k=>{a[D]=k,p(n(a))}))}function N(){S?.forEach(T=>T())}return c.subscribe=function(D){const k=h(D);return()=>{k()}},[c,O,N]}}function Tt(e,t){var r,n,i,s,a,c,p,h,S;const O=_t(e),N=t.initialValues=t.initialValues?_e(qe($(t.initialValues),t.transform)):{},T=de(Fe(N),!1),D=e(T),k=e(0),[C,g,J]=O([D,k],([w,A])=>Le(w,z=>!!z)&&A>=1,!1);delete C.set,delete C.update;function X(w){let A;return async function(z,ce,ie,ge=!1){if(!ie||!z)return;let be=ce&&Object.keys(ce).length>0?ce:K(z,[]);const Oe=Et(ge);if((!A?.signal.priority||ge)&&(A?.abort(),A=Oe),A.signal.priority&&!ge)return;k.update(xe=>xe+1);const Ke=lt(Fe(z),ie);return Ke.forEach(async xe=>{const tt=await xe;Oe.signal.aborted||(be=Te([be,tt]),w.set(be))}),await Promise.all(Ke),A=void 0,k.update(xe=>xe-1),be}}let _=K(T,[]);const se=e(N),I=K(T,[]),B=e(I),Y=e($(I)),[Z,me,b]=O([B,Y],Te,$(I)),M=K(T,[]),V=e(M),oe=e($(M)),[ae,F,ee]=O([V,oe],Te,$(M)),[ye,u,y]=O([Z,D],gt,$(I)),[m,P,L]=O([ae,D],Ot,$(M));let x=!1;const[G,ue,Ee]=O(Z,([w])=>{var A;return x?!Le(w,H=>Array.isArray(H)?H.length>=1:!!H):(x=!0,!t.validate&&!(!((A=t.debounced)===null||A===void 0)&&A.validate))},!t.validate&&!(!((r=t.debounced)===null||r===void 0)&&r.validate));delete G.set,delete G.update;const Se=e(!1),Pe=e(!1),Ne=e(null),we=X(B),te=X(V),l=X(Y),o=X(oe),d=Ue(l,(a=(i=(n=t.debounced)===null||n===void 0?void 0:n.validateTimeout)!==null&&i!==void 0?i:(s=t.debounced)===null||s===void 0?void 0:s.timeout)!==null&&a!==void 0?a:300,{onInit:()=>{k.update(w=>w+1)},onEnd:()=>{k.update(w=>w-1)}}),f=Ue(o,(S=(p=(c=t.debounced)===null||c===void 0?void 0:c.warnTimeout)!==null&&p!==void 0?p:(h=t.debounced)===null||h===void 0?void 0:h.timeout)!==null&&S!==void 0?S:300);async function q(w,A){var H;const z=we(w,_,A??t.validate,!0);if(A)return z;const ce=l(w,_,(H=t.debounced)===null||H===void 0?void 0:H.validate,!0);return Te(await Promise.all([z,ce]))}async function ve(w,A){var H;const z=te(w,_,A??t.warn,!0);if(A)return z;const ce=o(w,_,(H=t.debounced)===null||H===void 0?void 0:H.warn,!0);return Te(await Promise.all([z,ce]))}let re=I,W=M;function R(){const w=se.subscribe(ie=>{var ge,be;const Oe=Fe(ie);we(Oe,_,t.validate),te(Oe,_,t.warn),d(Oe,_,(ge=t.debounced)===null||ge===void 0?void 0:ge.validate),f(Oe,_,(be=t.debounced)===null||be===void 0?void 0:be.warn)}),A=D.subscribe(ie=>{_=K(ie,[])}),H=Z.subscribe(ie=>{re=ie}),z=ae.subscribe(ie=>{W=ie});me(),ue(),F(),u(),P(),g();function ce(){w(),y(),b(),ee(),L(),Ee(),J(),A(),H(),z()}return ce}function Q(w){B.set(w(re)),Y.set({})}function ne(w){V.set(w(W)),oe.set({})}function pe(w){Q(()=>w)}function et(w){ne(()=>w)}return ye.set=pe,ye.update=Q,m.set=et,m.update=ne,{data:se,errors:ye,warnings:m,touched:D,isValid:G,isSubmitting:Se,isDirty:Pe,isValidating:C,interacted:Ne,validateErrors:q,validateWarnings:ve,cleanup:t.preventStoreStart?()=>{}:R(),start:R}}function Dt(e,t){var r,n;(r=e.extend)!==null&&r!==void 0||(e.extend=[]),(n=e.debounced)!==null&&n!==void 0||(e.debounced={}),e.validate&&!Array.isArray(e.validate)&&(e.validate=[e.validate]),e.debounced.validate&&!Array.isArray(e.debounced.validate)&&(e.debounced.validate=[e.debounced.validate]),e.transform&&!Array.isArray(e.transform)&&(e.transform=[e.transform]),e.warn&&!Array.isArray(e.warn)&&(e.warn=[e.warn]),e.debounced.warn&&!Array.isArray(e.debounced.warn)&&(e.debounced.warn=[e.debounced.warn]);function i(F,{debounced:ee,level:ye}={debounced:!1,level:"error"}){var u;const y=ye==="error"?"validate":"warn";(u=e.debounced)!==null&&u!==void 0||(e.debounced={});const m=ee?e.debounced:e;m[y]?m[y]=[...m[y],F]:m[y]=[F]}function s(F){e.transform?e.transform=[...e.transform,F]:e.transform=[F]}const a=Array.isArray(e.extend)?e.extend:[e.extend];let c=[];const p=()=>c,h=F=>{c=F},{isSubmitting:S,isValidating:O,data:N,errors:T,warnings:D,touched:k,isValid:C,isDirty:g,cleanup:J,start:X,validateErrors:_,validateWarnings:se,interacted:I}=Tt(t.storeFactory,e),B=N.update,Y=N.set,Z=F=>B(ee=>_e(qe(F(ee),e.transform))),me=F=>Y(_e(qe(F,e.transform)));N.update=Z,N.set=me;const b=At({extender:a,config:e,addValidator:i,addTransformer:s,validateErrors:_,validateWarnings:se,_getCurrentExtenders:p,stores:{data:N,errors:T,warnings:D,touched:k,isValid:C,isValidating:O,isSubmitting:S,isDirty:g,interacted:I}}),{createSubmitHandler:M,handleSubmit:V}=b.public;c=a.map(F=>F({stage:"SETUP",errors:T,warnings:D,touched:k,data:N,isDirty:g,isValid:C,isValidating:O,isSubmitting:S,interacted:I,config:e,addValidator:i,addTransformer:s,setFields:b.public.setFields,reset:b.public.reset,validate:b.public.validate,handleSubmit:V,createSubmitHandler:M}));const oe=Object.assign({config:e,stores:{data:N,touched:k,errors:T,warnings:D,isSubmitting:S,isValidating:O,isValid:C,isDirty:g,interacted:I},createSubmitHandler:M,handleSubmit:V,helpers:Object.assign(Object.assign({},b.public),{addTransformer:s,addValidator:i}),extender:a,_getCurrentExtenders:p,_setCurrentExtenders:h},b.private),{form:ae}=ht(oe);return Object.assign({data:N,errors:T,warnings:D,touched:k,isValid:C,isSubmitting:S,isValidating:O,isDirty:g,interacted:I,form:ae,cleanup:J,startStores:X},b.public)}function kt(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Nt(e){const t=Dt(e??{},{storeFactory:rt}),{cleanup:r,startStores:n}=t,i=kt(t,["cleanup","startStores"]);return nt(r),i}export{We as _,Nt as c};
