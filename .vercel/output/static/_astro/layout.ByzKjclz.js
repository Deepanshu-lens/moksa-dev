import{i as Bt}from"./legacy.B9Y3TeRD.js";import{f as g,C as Gs,p as Ft,l as M,d as Mt,c as i,g as e,a as na,b as jt,m as _,i as c,r as d,ad as Ta,t as Ee,aM as rn,aN as sn,s as u,w as $e,x as fo,aL as Gt,j as D,aY as po,z as as}from"./effects.D69rIdB6.js";import{c as T,a as n,e as gt,t as S,b as We}from"./template.BAXcjkkR.js";import{l as $t,s as it,p as L}from"./props.B5ES_xWj.js";import{i as ee,a as Sa,s as ya,c as xr}from"./attributes.CKLvY0ho.js";import{s as It}from"./class.aRYY48yX.js";import{s as ra,a as X,b as pt,d as Oa,e as ho}from"./store.LwFfO3GU.js";import{s as Se}from"./render.DCBExBlY.js";import{e as mt,i as aa}from"./each.Btj6gPjv.js";import{p as vo,s as on,a as nn,k as ln}from"./axios.CLW4OKJy.js";import{s as Tt,b as va}from"./this.Dn7i68im.js";import{R as tr,T as Fr,D as ar,a as rr,b as sr}from"./index.DgIroXGH.js";import{t as ua}from"./Toaster.svelte_svelte_type_style_lang.BVmv9t-o.js";import{B as St,b as Ts}from"./index.B4oxMXhh.js";import{I as ia}from"./input.skk1M_av.js";import{D as go}from"./dialog-footer.Cr4M3bkH.js";import{o as Qa,c as Aa,a as mo}from"./index-client.Bg2DNXcU.js";import{w as st,d as qt,a as wa,g as qr}from"./index.PDEF5wc2.js";import{c as Ws}from"./svelte-component.Co8mLa1v.js";import{T as Ua,a as Ha,b as la,c as qa,d as ja,e as Da}from"./table-row.DWG7SB3f.js";import{b as bo,S as $s}from"./square-pen.ToUTzmZV.js";import{L as da}from"./label.DcabNQdc.js";import{p as dn}from"./pb.BjVtZEqq.js";import{s as _o,n as cn}from"./node.BMRk-V2q.js";import"./ui.BlnsDfWm.js";import{S as rs}from"./switch.DqDyBIMU.js";import{X as yr}from"./x.rUR2l-6P.js";import{C as Bs}from"./chevron-down.C5AO3RM7.js";import{A as or,U as Sr,L as un,S as ma,T as xo,C as ir,j as $o,B as yo,k as ys,l as ws,n as fn,o as pn,P as hn,q as vn,e as gn,p as mn,h as bn}from"./chart.CVocvx9p.js";import{T as _n,C as xn}from"./trash-2.DomddqeB.js";import{I as Ia}from"./Icon.C1EnY7QC.js";import{R as pr,S as hr,V as vr,b as gr,G as mr,c as Ca,I as $n}from"./index.BZbAky8g.js";import{s as yn,b as wn,g as kn,R as Cn,T as Dn,D as Sn}from"./index.BtpTrfQ5.js";import{S as An}from"./search.BPlr8GVe.js";import{D as Ys,a as ps}from"./dropdown-menu-separator.C5JxznFF.js";import{t as Ks,o as Pn,n as En,Z as Rn,_ as Tn,g as Zs,w as Ra,a0 as Bn,a1 as Mr,a2 as Gr,a3 as Pr,a4 as hs,a5 as Js,a6 as Or,m as Er,d as Rr,j as vs,a7 as lr,a8 as Xs,a9 as Fn,aa as jn,f as Ln,ab as Wr,q as $r,r as Yr,c as Nn,s as Mn,ac as On,k as La,ad as gs,ae as ms,af as Qs,l as In,a as Ar,b as Na}from"./create.CgS1Srs1.js";import{c as Vr,a as zn,r as Vn,g as Un}from"./updater.DZYzlJzt.js";import{C as Hn}from"./create.B2ks2bsr.js";import{c as Ba}from"./utils.7i5Ab_63.js";import{d as qn}from"./stores.BjKpnT96.js";import{h as Gn}from"./focus.DEihphdD.js";import{C as ss}from"./chevron-right.Csxe3OAU.js";import{C as wo}from"./chevron-left.ctxHc6Mm.js";import{R as wr,T as kr,P as Cr}from"./index._VY2qkCQ.js";import{P as ko}from"./plus.DL-TSNX_.js";import{a as Wn}from"./analytics-data.BXLobr_W.js";import{P as Yn}from"./play.CZaxehXE.js";import"./index.Dc6kRK_F.js";import"./focus.CV-Hft-j.js";import"./input.wlVNyH1y.js";import"./helpers.QZtJwOSr.js";import"./create.Br8GO9uY.js";function Kn(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]);Ia(s,it({name:"chart-area"},()=>a,{iconNode:[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16"}],["path",{d:"M7 11.207a.5.5 0 0 1 .146-.353l2-2a.5.5 0 0 1 .708 0l3.292 3.292a.5.5 0 0 0 .708 0l4.292-4.292a.5.5 0 0 1 .854.353V16a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1z"}]],children:(o,l)=>{var p=T(),f=g(p);Tt(f,t,"default",{},null),n(o,p)},$$slots:{default:!0}}))}function Zn(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]);Ia(s,it({name:"chevron-up"},()=>a,{iconNode:[["path",{d:"m18 15-6-6-6 6"}]],children:(o,l)=>{var p=T(),f=g(p);Tt(f,t,"default",{},null),n(o,p)},$$slots:{default:!0}}))}function Jn(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]);Ia(s,it({name:"clock"},()=>a,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(o,l)=>{var p=T(),f=g(p);Tt(f,t,"default",{},null),n(o,p)},$$slots:{default:!0}}))}function Xn(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]);Ia(s,it({name:"contact-round"},()=>a,{iconNode:[["path",{d:"M16 2v2"}],["path",{d:"M17.915 22a6 6 0 0 0-12 0"}],["path",{d:"M8 2v2"}],["circle",{cx:"12",cy:"12",r:"4"}],["rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}]],children:(o,l)=>{var p=T(),f=g(p);Tt(f,t,"default",{},null),n(o,p)},$$slots:{default:!0}}))}function Qn(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]);Ia(s,it({name:"layout-dashboard"},()=>a,{iconNode:[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"}]],children:(o,l)=>{var p=T(),f=g(p);Tt(f,t,"default",{},null),n(o,p)},$$slots:{default:!0}}))}function el(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]);Ia(s,it({name:"octagon-x"},()=>a,{iconNode:[["path",{d:"m15 9-6 6"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z"}],["path",{d:"m9 9 6 6"}]],children:(o,l)=>{var p=T(),f=g(p);Tt(f,t,"default",{},null),n(o,p)},$$slots:{default:!0}}))}function tl(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]);Ia(s,it({name:"shield-check"},()=>a,{iconNode:[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}],["path",{d:"m9 12 2 2 4-4"}]],children:(o,l)=>{var p=T(),f=g(p);Tt(f,t,"default",{},null),n(o,p)},$$slots:{default:!0}}))}function al(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]);Ia(s,it({name:"shopping-bag"},()=>a,{iconNode:[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"}],["path",{d:"M3 6h18"}],["path",{d:"M16 10a4 4 0 0 1-8 0"}]],children:(o,l)=>{var p=T(),f=g(p);Tt(f,t,"default",{},null),n(o,p)},$$slots:{default:!0}}))}function Ga(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]);Ia(s,it({name:"store"},()=>a,{iconNode:[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4"}],["path",{d:"M2 7h20"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7"}]],children:(o,l)=>{var p=T(),f=g(p);Tt(f,t,"default",{},null),n(o,p)},$$slots:{default:!0}}))}function rl(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]);Ia(s,it({name:"trending-down"},()=>a,{iconNode:[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7"}],["polyline",{points:"16 17 22 17 22 11"}]],children:(o,l)=>{var p=T(),f=g(p);Tt(f,t,"default",{},null),n(o,p)},$$slots:{default:!0}}))}function Ur(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]);Ia(s,it({name:"upload"},()=>a,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"17 8 12 3 7 8"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15"}]],children:(o,l)=>{var p=T(),f=g(p);Tt(f,t,"default",{},null),n(o,p)},$$slots:{default:!0}}))}function Co(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]);Ia(s,it({name:"users"},()=>a,{iconNode:[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}]],children:(o,l)=>{var p=T(),f=g(p);Tt(f,t,"default",{},null),n(o,p)},$$slots:{default:!0}}))}const sl={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,defaultValue:{start:void 0,end:void 0},preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"},{name:Tr}=In("calendar"),ol=["calendar","accessibleHeading"];function nl(s){const t={...sl,...s},a=Ks({...Pn(t,"value","placeholder")}),{preventDeselect:r,numberOfMonths:o,pagedNavigation:l,weekStartsOn:p,fixedWeeks:f,calendarLabel:m,locale:x,minValue:b,maxValue:A,disabled:C,readonly:$,weekdayFormat:h}=a,k=Ks({...En(ol),...t.ids}),w=Rn({defaultValue:t.defaultValue?.start,defaultPlaceholder:t.defaultPlaceholder}),R=Tn(x.get()),N=t.value??st(t.defaultValue),I=Zs(N,t.onValueChange);I.get()||I.set(t.defaultValue);const W=Ra(st(I.get().start??t.defaultValue?.start)),le=Ra(st(I.get().end??t.defaultValue?.end)),Q=t.placeholder??st(t.defaultPlaceholder??w),O=Bn(Zs(Q,t.onPlaceholderChange),t.defaultPlaceholder??w),ve=Ra(st(null)),Y=Ra(st(null)),H=Ra(st(Mr({dateObj:O.get(),weekStartsOn:t.weekStartsOn,locale:t.locale,fixedWeeks:t.fixedWeeks,numberOfMonths:t.numberOfMonths}))),me=Ra(qt([H],([v])=>v.map(y=>y.value))),ye=Ra(qt([me],([v])=>y=>!v.some(F=>Gr(y,F)))),re=Ra(qt([a.isDateDisabled,b,A],([v,y,F])=>P=>!!(v?.(P)||y&&Pr(P,y)||F&&hs(P,F)))),pe=Ra(qt([a.isDateUnavailable],([v])=>y=>!!v?.(y))),Be=qt([W,pe,re],([v,y,F])=>v?y(v)||F(v):!1),Je=qt([le,pe,re],([v,y,F])=>v?y(v)||F(v):!1),ge=qt([W,le,Je,Be],([v,y,F,P])=>!!(P||F||y&&v&&Pr(y,v))),Oe=Ra.derived([H,A,C],([v,y,F])=>{if(!y||!v.length)return!1;if(F)return!0;const U=v[v.length-1].value.add({months:1}).set({day:1});return hs(U,y)}),q=Ra.derived([H,b,C],([v,y,F])=>{if(!y||!v.length)return!1;if(F)return!0;const U=v[0].value.subtract({months:1}).set({day:35});return Pr(U,y)});let K=Js();const Ie=Ra.derived([H,x],([v,y])=>{if(!v.length)return"";if(y!==R.getLocale()&&R.setLocale(y),v.length===1){const B=Or(v[0].value);return`${R.fullMonthAndYear(B)}`}const F=Or(v[0].value),P=Or(v[v.length-1].value),U=R.fullMonth(F),te=R.fullMonth(P),je=R.fullYear(F),Ne=R.fullYear(P);return je===Ne?`${U} - ${te} ${Ne}`:`${U} ${je} - ${te} ${Ne}`}),ae=Ra.derived([Ie,m],([v,y])=>`${y}, ${v}`),ie=Er(Tr(),{stores:[ae,ge,k.calendar,C,$],returned:([v,y,F,P,U])=>({id:F,role:"application","aria-label":v,"data-invalid":y?"":void 0,"data-disabled":P?"":void 0,"data-readonly":U?"":void 0}),action:v=>{ke(v,ae.get()),K=Js();const y=Rr(v,"keydown",Ae);return{destroy(){y()}}}}),_e=Er(Tr("heading"),{stores:[C],returned:([v])=>({"aria-hidden":!0,"data-disabled":v?"":void 0})}),Te=Er(Tr("grid"),{stores:[$,C],returned:([v,y])=>({tabindex:-1,role:"grid","aria-readonly":v?"true":void 0,"aria-disabled":y?"true":void 0,"data-readonly":v?"":void 0,"data-disabled":y?"":void 0})}),se=Er(Tr("prevButton"),{stores:[q],returned:([v])=>{const y=v;return{role:"button",type:"button","aria-label":"Previous","aria-disabled":y?"true":void 0,disabled:y?!0:void 0,"data-disabled":y?"":void 0}},action:v=>({destroy:vs(Rr(v,"click",()=>{xe()}))})}),Le=Er(Tr("nextButton"),{stores:[Oe],returned:([v])=>{const y=v;return{role:"button",type:"button","aria-label":"Next","aria-disabled":y?"true":void 0,disabled:y?!0:void 0,"data-disabled":y?"":void 0}},action:v=>({destroy:vs(Rr(v,"click",()=>{Re()}))})}),de=qt([W],([v])=>y=>v?lr(v,y):!1),He=qt([le],([v])=>y=>v?lr(v,y):!1),Qe=qt([W,le],([v,y])=>F=>v&&lr(v,F)||y&&lr(y,F)?!0:y&&v?Xs(F,v,y):!1),z=Ra.derived([W,le,ve,re,pe],([v,y,F,P,U])=>{if(v&&y||!v||!F)return null;const te=Pr(v,F),je=te?v:F,Ne=te?F:v;return lr(je.add({days:1}),Ne)?{start:je,end:Ne}:Fn(je,Ne,U,P)?{start:je,end:Ne}:null}),Me=Er(Tr("cell"),{stores:[Qe,He,de,z,re,pe,O,ye],returned:([v,y,F,P,U,te,je,Ne])=>(Ue,B)=>{const ce=Or(Ue),oe=U(Ue),he=te(Ue),Ke=jn(Ue,Ln()),E=!Gr(Ue,B),ue=lr(Ue,je),G=Ne(Ue),we=v(Ue),fe=F(Ue),Ye=y(Ue),et=P?Xs(Ue,P.start,P.end):!1;return{role:"button","aria-label":R.custom(ce,{weekday:"long",month:"long",day:"numeric",year:"numeric"}),"aria-selected":we?!0:void 0,"aria-disabled":E||oe||he?!0:void 0,"data-selected":we?!0:void 0,"data-selection-start":fe?!0:void 0,"data-selection-end":Ye?!0:void 0,"data-value":Ue.toString(),"data-disabled":oe||E?"":void 0,"data-unavailable":he?"":void 0,"data-today":Ke?"":void 0,"data-outside-month":E?"":void 0,"data-outside-visible-months":G?"":void 0,"data-focused":ue?"":void 0,"data-highlighted":et?"":void 0,tabindex:ue?0:E||oe?void 0:-1}},action:v=>{const y=()=>{const P=v.getAttribute("data-value"),U=v.getAttribute("data-label"),te=v.hasAttribute("data-disabled");return{value:P,label:U??v.textContent??null,disabled:!!te}};return{destroy:vs(Rr(v,"click",P=>{const U=y();U.disabled||U.value&&De(P,Wr(U.value,O.get()))}),Rr(v,"mouseenter",()=>{const P=y();P.disabled||P.value&&ve.set(Wr(P.value,O.get()))}),Rr(v,"focusin",()=>{const P=y();P.disabled||P.value&&ve.set(Wr(P.value,O.get()))}))}}});$r([x],([v])=>{R.getLocale()!==v&&R.setLocale(v)}),$r([O],([v])=>{if(!Yr||!v||me.get().some(Ne=>Gr(Ne,v)))return;const F=p.get(),P=x.get(),U=f.get(),te=o.get(),je={weekStartsOn:F,locale:P,fixedWeeks:U,numberOfMonths:te};H.set(Mr({...je,dateObj:v}))}),$r([p,x,f,o],([v,y,F,P])=>{const U=O.get();if(!Yr||!U)return;const te={weekStartsOn:v,locale:y,fixedWeeks:F,numberOfMonths:P};H.set(Mr({...te,dateObj:U}))}),$r([ae],([v])=>{if(!Yr)return;const y=document.getElementById(k.accessibleHeading.get());Nn(y)&&(y.textContent=v)}),$r([W],([v])=>{v&&O.get()!==v&&O.set(v)});const Z=qt([H,h,x],([v,y,F])=>v.length?v[0].weeks[0].map(P=>R.dayOfWeek(Or(P),y)):[]);function ke(v,y){if(!Yr)return;const F=document.createElement("div");F.style.cssText=Mn({border:"0px",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0px",position:"absolute","white-space":"nowrap",width:"1px"});const P=document.createElement("div");P.textContent=y,P.id=k.accessibleHeading.get(),P.role="heading",P.ariaLevel="2",v.insertBefore(F,v.firstChild),F.appendChild(P)}function Re(){const v=H.get(),y=o.get();if(l.get()){const F=v[0].value;O.set(F.add({months:y}))}else{const F=v[0].value,P=Mr({dateObj:F.add({months:1}),weekStartsOn:p.get(),locale:x.get(),fixedWeeks:f.get(),numberOfMonths:y});H.set(P),O.set(P[0].value.set({day:1}))}}function xe(){const v=H.get(),y=o.get();if(l.get()){const F=v[0].value;O.set(F.subtract({months:y}))}else{const F=v[0].value,P=Mr({dateObj:F.subtract({months:1}),weekStartsOn:p.get(),locale:x.get(),fixedWeeks:f.get(),numberOfMonths:y});H.set(P),O.set(P[0].value.set({day:1}))}}function Ce(){O.add({years:1})}function ze(){O.subtract({years:1})}const Fe=[La.ARROW_DOWN,La.ARROW_UP,La.ARROW_LEFT,La.ARROW_RIGHT];function Ve(v){O.setDate({year:v})}function j(v){if(v<0||v>11)throw new Error("Month must be between 0 and 11");O.setDate({month:v})}function De(v,y){const F=re.get(),P=pe.get();if(F(y)||P(y))return;const U=Y.get();Y.set(y);const te=W.get(),je=le.get(),Ne=z.get();if(te&&Ne===null){if(lr(te,y)&&!r.get()&&!je){W.set(void 0),O.set(y),K.announce("Selected date is now empty.","polite");return}else if(!je){v.preventDefault(),U&&lr(U,y)&&(W.set(y),K.announce(`Selected Date: ${R.selectedDate(y,!1)}`,"polite"));return}}if(te&&je&&lr(je,y)&&!r.get()){W.set(void 0),le.set(void 0),O.set(y),K.announce("Selected date is now empty.","polite");return}te?je?je&&te&&(le.set(void 0),W.update(()=>(K.announce(`Selected Date: ${R.selectedDate(y,!1)}`,"polite"),y))):le.update(()=>(K.announce(`Selected Dates: ${R.selectedDate(te,!1)} to ${R.selectedDate(y,!1)}`,"polite"),y)):W.update(()=>(K.announce(`Selected Date: ${R.selectedDate(y,!1)}`,"polite"),y))}const Pe=[La.ENTER,La.SPACE];function Ae(v){const y=v.target;if(On(y)&&!(!Fe.includes(v.key)&&!Pe.includes(v.key))&&(v.preventDefault(),v.key===La.ARROW_DOWN&&J(y,7),v.key===La.ARROW_UP&&J(y,-7),v.key===La.ARROW_LEFT&&J(y,-1),v.key===La.ARROW_RIGHT&&J(y,1),v.key===La.SPACE||v.key===La.ENTER)){const F=y.getAttribute("data-value");if(!F)return;De(v,Wr(F,O.get()))}}function J(v,y){const F=k.calendar.get(),P=gs(F);if(!P.length)return;const te=P.indexOf(v)+y;if(ms(te,P)){const je=P[te];return Qs(je,O),je.focus()}if(te<0){if(q.get())return;const Ne=H.get()[0].value,Ue=o.get();O.set(Ne.subtract({months:Ue})),Gs().then(()=>{const B=gs(F);if(!B.length)return;const ce=B.length-Math.abs(te);if(ms(ce,B)){const oe=B[ce];return Qs(oe,O),oe.focus()}})}if(te>=P.length){if(Oe.get())return;const Ne=H.get()[0].value,Ue=o.get();O.set(Ne.add({months:Ue})),Gs().then(()=>{const B=gs(F);if(!B.length)return;const ce=te-P.length;if(ms(ce,B))return B[ce].focus()})}}const Ge=qt([re,O,b,A],([v,y,F,P])=>U=>!!(v(U)||F&&Pr(U,F)||P&&hs(U,P)||!Gr(U,y)));return $r([I],([v])=>{const y=W.get(),F=le.get();if(v?.start&&v?.end){v.start!==y&&W.set(v.start),v.end!==F&&le.set(v.end);return}}),$r([W,le],([v,y])=>{const F=I.get();F&&F?.start===v&&F?.end===y||(v&&y?I.update(P=>P?.start===v&&P?.end===y?P:Pr(y,v)?{start:y,end:v}:{start:v,end:y}):F&&F.start&&F.end&&I.set({start:void 0,end:void 0}))}),{elements:{calendar:ie,heading:_e,grid:Te,cell:Me,nextButton:Le,prevButton:se},states:{placeholder:O.toWritable(),months:H,weekdays:Z,headingValue:Ie,value:I,startValue:W,endValue:le},helpers:{nextPage:Re,prevPage:xe,nextYear:Ce,prevYear:ze,setYear:Ve,setMonth:j,isDateDisabled:Ge,isDateUnavailable:pe},options:a,ids:k}}var ll=S("<div><!></div>");function il(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["checked","onCheckedChange","disabled","asChild","el"]);Ft(t,!1);const o=ra(),l=()=>X(C,"$checkboxItem",o),p=_();let f=L(t,"checked",28,()=>{}),m=L(t,"onCheckedChange",24,()=>{}),x=L(t,"disabled",24,()=>{}),b=L(t,"asChild",8,!1),A=L(t,"el",28,()=>{});const{elements:{checkboxItem:C},states:{checked:$},updateOption:h,getAttrs:k}=yn({disabled:x(),defaultChecked:f(),onCheckedChange:({next:Q})=>(f()!==Q&&(m()?.(Q),f(Q)),Q)}),w=Vr(),R=k("checkbox-item");M(()=>Mt(f()),()=>{f()!==void 0&&$.set(f())}),M(()=>Mt(x()),()=>{h("disabled",x())}),M(()=>l(),()=>{i(p,l())}),M(()=>e(p),()=>{Object.assign(e(p),R)}),na(),Bt();var N=T(),I=g(N);{var W=Q=>{var O=T(),ve=g(O);Tt(ve,t,"default",{get builder(){return e(p)}},null),n(Q,O)},le=Q=>{var O=ll();let ve;var Y=c(O);Tt(Y,t,"default",{get builder(){return e(p)}},null),d(O),va(O,H=>A(H),()=>A()),Ar(O,H=>e(p).action?.(H)),Ta(()=>gt("m-click",O,w)),Ta(()=>gt("m-focusin",O,w)),Ta(()=>gt("m-focusout",O,w)),Ta(()=>gt("m-keydown",O,w)),Ta(()=>gt("m-pointerdown",O,w)),Ta(()=>gt("m-pointerleave",O,w)),Ta(()=>gt("m-pointermove",O,w)),Ta(()=>gt("pointerenter",O,function(H){Na.call(this,t,H)})),Ee(()=>ve=Sa(O,ve,{...e(p),...r})),n(Q,O)};ee(I,Q=>{b()?Q(W):Q(le,!1)})}n(s,N),jt()}var dl=S("<div><!></div>");function cl(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["asChild","el"]);Ft(t,!1);const o=ra(),l=()=>X(m,"$checked",o);let p=L(t,"asChild",8,!1),f=L(t,"el",28,()=>{});const m=wn(),{getAttrs:x}=kn(),b=x("checkbox-indicator");Bt();var A=T(),C=g(A);{var $=k=>{var w=T(),R=g(w);Tt(R,t,"default",{attrs:b,get checked(){return l()}},null),n(k,w)},h=k=>{var w=dl();let R;var N=c(w);{var I=W=>{var le=T(),Q=g(le);Tt(Q,t,"default",{attrs:b,get checked(){return l()}},null),n(W,le)};ee(N,W=>{l()&&W(I)})}d(w),va(w,W=>f(W),()=>f()),Ee(()=>R=Sa(w,R,{...r,...b})),n(k,w)};ee(C,k=>{p()?k($):k(h,!1)})}n(s,A),jt()}function Do(){return{NAME:"calendar",PARTS:["root","prev-button","next-button","heading","grid","day","header","grid-head","head-cell","grid-body","cell","grid-row"]}}function ul(s){const{NAME:t,PARTS:a}=Do(),r=zn(t,a),o={...nl(Vn(s)),getAttrs:r};return rn(t,o),{...o,updateOption:Un(o.options)}}function Wa(){const{NAME:s}=Do();return sn(s)}var fl=S("<div><!></div>");function pl(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["placeholder","onPlaceholderChange","value","onValueChange","preventDeselect","minValue","maxValue","pagedNavigation","weekStartsOn","locale","isDateUnavailable","isDateDisabled","disabled","readonly","fixedWeeks","calendarLabel","asChild","id","weekdayFormat","initialFocus","startValue","numberOfMonths","el"]);Ft(t,!1);const o=ra(),l=()=>X(ie,"$localStartValue",o),p=()=>X(Oe,"$calendar",o),f=()=>X(Ie,"$localMonths",o),m=()=>X(ae,"$weekdays",o),x=()=>X(_e,"$endValue",o),b=_();let A=L(t,"placeholder",28,()=>{}),C=L(t,"onPlaceholderChange",24,()=>{}),$=L(t,"value",28,()=>{}),h=L(t,"onValueChange",24,()=>{}),k=L(t,"preventDeselect",24,()=>{}),w=L(t,"minValue",24,()=>{}),R=L(t,"maxValue",24,()=>{}),N=L(t,"pagedNavigation",24,()=>{}),I=L(t,"weekStartsOn",24,()=>{}),W=L(t,"locale",24,()=>{}),le=L(t,"isDateUnavailable",24,()=>{}),Q=L(t,"isDateDisabled",24,()=>{}),O=L(t,"disabled",24,()=>{}),ve=L(t,"readonly",24,()=>{}),Y=L(t,"fixedWeeks",24,()=>{}),H=L(t,"calendarLabel",24,()=>{}),me=L(t,"asChild",8,!1),ye=L(t,"id",24,()=>{}),re=L(t,"weekdayFormat",24,()=>{}),pe=L(t,"initialFocus",8,!1),Be=L(t,"startValue",28,()=>{}),Je=L(t,"numberOfMonths",24,()=>{}),ge=L(t,"el",28,()=>{});Qa(()=>{!pe()||!ge()||Gn(ge())});const{elements:{calendar:Oe},states:{value:q,placeholder:K,months:Ie,weekdays:ae,startValue:ie,endValue:_e},updateOption:Te,ids:se,getAttrs:Le}=ul({defaultPlaceholder:A(),defaultValue:$(),preventDeselect:k(),minValue:w(),maxValue:R(),pagedNavigation:N(),weekStartsOn:I(),locale:W(),isDateUnavailable:le(),isDateDisabled:Q(),disabled:O(),readonly:ve(),fixedWeeks:Y(),calendarLabel:H(),weekdayFormat:re(),numberOfMonths:Je(),onPlaceholderChange:({next:Re})=>(A()!==Re&&(C()?.(Re),A(Re)),Re),onValueChange:({next:Re})=>($()!==Re&&(h()?.(Re),$(Re)),Re)}),de=Le("root"),He=Vr();let Qe=_(f());M(()=>Mt(ye()),()=>{ye()&&se.calendar.set(ye())}),M(()=>l(),()=>{Be(l())}),M(()=>Mt($()),()=>{$()!==void 0&&q.set($())}),M(()=>Mt(A()),()=>{A()!==void 0&&K.set(A())}),M(()=>Mt(k()),()=>{Te("preventDeselect",k())}),M(()=>Mt(w()),()=>{Te("minValue",w())}),M(()=>Mt(R()),()=>{Te("maxValue",R())}),M(()=>Mt(N()),()=>{Te("pagedNavigation",N())}),M(()=>Mt(I()),()=>{Te("weekStartsOn",I())}),M(()=>Mt(W()),()=>{Te("locale",W())}),M(()=>Mt(le()),()=>{Te("isDateUnavailable",le())}),M(()=>Mt(Q()),()=>{Te("isDateDisabled",Q())}),M(()=>Mt(O()),()=>{Te("disabled",O())}),M(()=>Mt(ve()),()=>{Te("readonly",ve())}),M(()=>Mt(Y()),()=>{Te("fixedWeeks",Y())}),M(()=>Mt(H()),()=>{Te("calendarLabel",H())}),M(()=>Mt(re()),()=>{Te("weekdayFormat",re())}),M(()=>Mt(Je()),()=>{Te("numberOfMonths",Je())}),M(()=>p(),()=>{i(b,p())}),M(()=>e(b),()=>{Object.assign(e(b),de)}),M(()=>f(),()=>{i(Qe,f())}),na(),Bt();var z=T(),Me=g(z);{var Z=Re=>{var xe=T(),Ce=g(xe);Tt(Ce,t,"default",{get builder(){return e(b)},get months(){return e(Qe)},get weekdays(){return m()},get startValue(){return l()},get endValue(){return x()}},null),n(Re,xe)},ke=Re=>{var xe=fl();let Ce;var ze=c(xe);Tt(ze,t,"default",{get builder(){return e(b)},get months(){return e(Qe)},get weekdays(){return m()},get startValue(){return l()},get endValue(){return x()}},null),d(xe),Ar(xe,Fe=>e(b).action?.(Fe)),Ta(()=>gt("m-keydown",xe,He)),va(xe,Fe=>ge(Fe),()=>ge()),Ee(()=>Ce=Sa(xe,Ce,{...e(b),...r})),n(Re,xe)};ee(Me,Re=>{me()?Re(Z):Re(ke,!1)})}n(s,z),jt()}var hl=S("<div><!></div>");function vl(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["date","month","asChild","el"]);Ft(t,!1);const o=ra(),l=()=>X(k,"$cell",o),p=()=>X(w,"$isDateDisabled",o),f=()=>X(R,"$isDateUnavailable",o),m=_(),x=_(),b=_();let A=L(t,"date",8),C=L(t,"month",8),$=L(t,"asChild",8,!1),h=L(t,"el",28,()=>{});const{elements:{cell:k},helpers:{isDateDisabled:w,isDateUnavailable:R},getAttrs:N}=Wa(),I=N("day"),W=Vr();M(()=>(l(),Mt(A()),Mt(C())),()=>{i(m,l()(A(),C()))}),M(()=>e(m),()=>{Object.assign(e(m),I)}),M(()=>(p(),Mt(A())),()=>{i(x,p()(A()))}),M(()=>(f(),Mt(A())),()=>{i(b,f()(A()))}),na(),Bt();var le=T(),Q=g(le);{var O=Y=>{var H=T(),me=g(H);Tt(me,t,"default",{get builder(){return e(m)},get disabled(){return e(x)},get unavailable(){return e(b)}},null),n(Y,H)},ve=Y=>{var H=hl();let me;var ye=c(H);Tt(ye,t,"default",{get builder(){return e(m)},get disabled(){return e(x)},get unavailable(){return e(b)}},re=>{var pe=We();Ee(()=>Se(pe,A().day)),n(re,pe)}),d(H),va(H,re=>h(re),()=>h()),Ar(H,re=>e(m).action?.(re)),Ta(()=>gt("m-click",H,W)),Ta(()=>gt("m-focusin",H,W)),Ta(()=>gt("m-mouseenter",H,W)),Ee(()=>me=Sa(H,me,{...e(m),...r})),n(Y,H)};ee(Q,Y=>{$()?Y(O):Y(ve,!1)})}n(s,le),jt()}var gl=S("<table><!></table>");function ml(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["asChild","el"]);Ft(t,!1);const o=ra(),l=()=>X(x,"$grid",o),p=_();let f=L(t,"asChild",8,!1),m=L(t,"el",28,()=>{});const{elements:{grid:x},getAttrs:b}=Wa(),A=b("grid");M(()=>l(),()=>{i(p,l())}),M(()=>e(p),()=>{Object.assign(e(p),A)}),na(),Bt();var C=T(),$=g(C);{var h=w=>{var R=T(),N=g(R);Tt(N,t,"default",{get builder(){return e(p)}},null),n(w,R)},k=w=>{var R=gl();let N;var I=c(R);Tt(I,t,"default",{get builder(){return e(p)}},null),d(R),va(R,W=>m(W),()=>m()),Ar(R,W=>e(p).action?.(W)),Ee(()=>N=Sa(R,N,{...e(p),...r})),n(w,R)};ee($,w=>{f()?w(h):w(k,!1)})}n(s,C),jt()}var bl=S("<tbody><!></tbody>");function _l(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["asChild","el"]);Ft(t,!1);let o=L(t,"asChild",8,!1),l=L(t,"el",28,()=>{});const{getAttrs:p}=Wa(),f=p("grid-body");Bt();var m=T(),x=g(m);{var b=C=>{var $=T(),h=g($);Tt(h,t,"default",{attrs:f},null),n(C,$)},A=C=>{var $=bl();let h;var k=c($);Tt(k,t,"default",{},null),d($),va($,w=>l(w),()=>l()),Ee(()=>h=Sa($,h,{...r,...f})),n(C,$)};ee(x,C=>{o()?C(b):C(A,!1)})}n(s,m),jt()}var xl=S("<td><!></td>");function $l(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["date","asChild","el"]);Ft(t,!1);const o=ra(),l=()=>X(A,"$isDateDisabled",o),p=()=>X(C,"$isDateUnavailable",o),f=_();let m=L(t,"date",8),x=L(t,"asChild",8,!1),b=L(t,"el",28,()=>{});const{helpers:{isDateDisabled:A,isDateUnavailable:C},getAttrs:$}=Wa();M(()=>(l(),Mt(m()),p()),()=>{i(f,{...$("cell"),"aria-disabled":l()(m())||p()(m()),role:"gridcell"})}),na(),Bt();var h=T(),k=g(h);{var w=N=>{var I=T(),W=g(I);Tt(W,t,"default",{get attrs(){return e(f)}},null),n(N,I)},R=N=>{var I=xl();let W;var le=c(I);Tt(le,t,"default",{get attrs(){return e(f)}},null),d(I),va(I,Q=>b(Q),()=>b()),Ee(()=>W=Sa(I,W,{...r,...e(f)})),n(N,I)};ee(k,N=>{x()?N(w):N(R,!1)})}n(s,h),jt()}var yl=S("<thead><!></thead>");function wl(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["asChild","el"]);Ft(t,!1);let o=L(t,"asChild",8,!1),l=L(t,"el",28,()=>{});const{getAttrs:p}=Wa(),f={...p("grid-head"),"aria-hidden":!0};Bt();var m=T(),x=g(m);{var b=C=>{var $=T(),h=g($);Tt(h,t,"default",{attrs:f},null),n(C,$)},A=C=>{var $=yl();let h;var k=c($);Tt(k,t,"default",{},null),d($),va($,w=>l(w),()=>l()),Ee(()=>h=Sa($,h,{...r,...f})),n(C,$)};ee(x,C=>{o()?C(b):C(A,!1)})}n(s,m),jt()}var kl=S("<th><!></th>");function Cl(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["asChild","el"]);Ft(t,!1);let o=L(t,"asChild",8,!1),l=L(t,"el",28,()=>{});const{getAttrs:p}=Wa(),f=p("head-cell");Bt();var m=T(),x=g(m);{var b=C=>{var $=T(),h=g($);Tt(h,t,"default",{attrs:f},null),n(C,$)},A=C=>{var $=kl();let h;var k=c($);Tt(k,t,"default",{},null),d($),va($,w=>l(w),()=>l()),Ee(()=>h=Sa($,h,{...r,...f})),n(C,$)};ee(x,C=>{o()?C(b):C(A,!1)})}n(s,m),jt()}var Dl=S("<tr><!></tr>");function Sl(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["asChild","el"]);Ft(t,!1);let o=L(t,"asChild",8,!1),l=L(t,"el",28,()=>{});const{getAttrs:p}=Wa(),f=p("grid-row");Bt();var m=T(),x=g(m);{var b=C=>{var $=T(),h=g($);Tt(h,t,"default",{attrs:f},null),n(C,$)},A=C=>{var $=Dl();let h;var k=c($);Tt(k,t,"default",{attrs:f},null),d($),va($,w=>l(w),()=>l()),Ee(()=>h=Sa($,h,{...r,...f})),n(C,$)};ee(x,C=>{o()?C(b):C(A,!1)})}n(s,m),jt()}var Al=S("<header><!></header>");function Pl(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["asChild","el"]);Ft(t,!1);let o=L(t,"asChild",8,!1),l=L(t,"el",28,()=>{});const{getAttrs:p}=Wa(),f=p("header");Bt();var m=T(),x=g(m);{var b=C=>{var $=T(),h=g($);Tt(h,t,"default",{attrs:f},null),n(C,$)},A=C=>{var $=Al();let h;var k=c($);Tt(k,t,"default",{attrs:f},null),d($),va($,w=>l(w),()=>l()),Ee(()=>h=Sa($,h,{...r,...f})),n(C,$)};ee(x,C=>{o()?C(b):C(A,!1)})}n(s,m),jt()}var El=S("<div><!></div>");function Rl(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["asChild","el"]);Ft(t,!1);const o=ra(),l=()=>X(b,"$heading",o),p=()=>X(A,"$headingValue",o),f=_();let m=L(t,"asChild",8,!1),x=L(t,"el",28,()=>{});const{elements:{heading:b},states:{headingValue:A},getAttrs:C}=Wa(),$=C("heading");M(()=>l(),()=>{i(f,l())}),M(()=>e(f),()=>{Object.assign(e(f),$)}),na(),Bt();var h=T(),k=g(h);{var w=N=>{var I=T(),W=g(I);Tt(W,t,"default",{get builder(){return e(f)},get headingValue(){return p()}},null),n(N,I)},R=N=>{var I=El();let W;var le=c(I);Tt(le,t,"default",{get builder(){return e(f)},get headingValue(){return p()}},Q=>{var O=We();Ee(()=>Se(O,p())),n(Q,O)}),d(I),va(I,Q=>x(Q),()=>x()),Ar(I,Q=>e(f).action?.(Q)),Ee(()=>W=Sa(I,W,{...e(f),...r})),n(N,I)};ee(k,N=>{m()?N(w):N(R,!1)})}n(s,h),jt()}var Tl=S("<button><!></button>");function Bl(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["asChild","el"]);Ft(t,!1);const o=ra(),l=()=>X(x,"$nextButton",o),p=_();let f=L(t,"asChild",8,!1),m=L(t,"el",28,()=>{});const{elements:{nextButton:x},getAttrs:b}=Wa(),A=b("next-button"),C=Vr();M(()=>l(),()=>{i(p,l())}),M(()=>e(p),()=>{Object.assign(e(p),A)}),na(),Bt();var $=T(),h=g($);{var k=R=>{var N=T(),I=g(N);Tt(I,t,"default",{get builder(){return e(p)}},null),n(R,N)},w=R=>{var N=Tl();let I;var W=c(N);Tt(W,t,"default",{get builder(){return e(p)}},null),d(N),va(N,le=>m(le),()=>m()),Ar(N,le=>e(p).action?.(le)),Ta(()=>gt("m-click",N,C)),Ee(()=>I=Sa(N,I,{...e(p),type:"button",...r})),n(R,N)};ee(h,R=>{f()?R(k):R(w,!1)})}n(s,$),jt()}var Fl=S("<button><!></button>");function jl(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["asChild","el"]);Ft(t,!1);const o=ra(),l=()=>X(x,"$prevButton",o),p=_();let f=L(t,"asChild",8,!1),m=L(t,"el",28,()=>{});const{elements:{prevButton:x},getAttrs:b}=Wa(),A=b("prev-button"),C=Vr();M(()=>l(),()=>{i(p,l())}),M(()=>e(p),()=>{Object.assign(e(p),A)}),na(),Bt();var $=T(),h=g($);{var k=R=>{var N=T(),I=g(N);Tt(I,t,"default",{get builder(){return e(p)}},null),n(R,N)},w=R=>{var N=Fl();let I;var W=c(N);Tt(W,t,"default",{get builder(){return e(p)}},null),d(N),va(N,le=>m(le),()=>m()),Ar(N,le=>e(p).action?.(le)),Ta(()=>gt("m-click",N,C)),Ee(()=>I=Sa(N,I,{...e(p),type:"button",...r})),n(R,N)};ee(h,R=>{f()?R(k):R(w,!1)})}n(s,$),jt()}var Ll=S('<span class="flex items-center gap-4"><!> <!></span>'),Nl=S('<!> <div class="grid grid-cols-2"><div class="col-span-2 dark:text-white text-black">Are you sure you would like to delete Store with :: <span class="font-medium">name = <span class="font-semibold text-primary"> </span></span></div></div> <div class="flex items-center justify-start gap-3 w-full">Enter your password: <!></div> <!>',1),Ml=S("<!> <!>",1);function Ol(s,t){Ft(t,!1);let a=L(t,"name",8),r=L(t,"moksaId",8),o=L(t,"id",8),l=L(t,"email",8),p=_(!1),f=_("");const m=async()=>{if(console.log("deleted",a(),r(),o()),e(f).length<0){ua.error("Please enter your password"),i(f,"");return}else if(e(f).length<8){ua.error("Incorrect Password"),i(f,"");return}else{const b=await(await fetch("https://api.moksa.ai/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l(),password:e(f)})})).json();b.data&&b.data.token?(console.log("deleting store with id",o()),fetch("/api/store/delete",{method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify({moksaId:r(),id:o()})}).then(()=>{ua("Selected store Deleted!"),addUserLog(`user deleted store with name ${a()} & moksaId ${r()}`),i(p,!1)})):(ua.error("Invalid password, Delete failed"),i(f,""),i(p,!1))}};M(()=>(e(p),Mt(l())),()=>{e(p)&&console.log(l())}),na(),Bt(),tr(s,{get open(){return e(p)},set open(x){i(p,x)},children:(x,b)=>{var A=Ml(),C=g(A);Fr(C,{children:(h,k)=>{var w=T(),R=g(w);Tt(R,t,"default",{},null),n(h,w)},$$slots:{default:!0}});var $=u(C,2);ar($,{class:"sm:max-w-[720px] z-[70] scale-90 sm:scale-100",children:(h,k)=>{var w=Nl(),R=g(w);rr(R,{children:(H,me)=>{sr(H,{children:(ye,re)=>{$e();var pe=We();Ee(()=>Se(pe,`Delete Store : ${a()??""}`)),n(ye,pe)},$$slots:{default:!0}})},$$slots:{default:!0}});var N=u(R,2),I=c(N),W=u(c(I)),le=u(c(W)),Q=c(le,!0);d(le),d(W),d(I),d(N);var O=u(N,2),ve=u(c(O));ia(ve,{type:"password",get value(){return e(f)},set value(H){i(f,H)},$$legacy:!0}),d(O);var Y=u(O,2);go(Y,{children:(H,me)=>{var ye=Ll(),re=c(ye);St(re,{variant:"secondary",$$events:{click:()=>{i(p,!1)}},children:(Be,Je)=>{$e();var ge=We("Cancel");n(Be,ge)},$$slots:{default:!0}});var pe=u(re,2);St(pe,{variant:"destructive",$$events:{click:m},children:(Be,Je)=>{$e();var ge=We("Delete");n(Be,ge)},$$slots:{default:!0}}),d(ye),n(H,ye)},$$slots:{default:!0}}),Ee(()=>Se(Q,a())),n(h,w)},$$slots:{default:!0}}),n(x,A)},$$slots:{default:!0},$$legacy:!0}),jt()}const So=s=>{const t=Object.entries(s),a=t.map(([r])=>r);return qt(t.map(([,r])=>r),r=>Object.fromEntries(r.map((o,l)=>[a[l],o])))};function Wt(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,[]);Ft(t,!1);const o=ra(),l=()=>X(p,"$values",o),p=So(r);Bt();var f=T(),m=g(f);Tt(m,t,"default",it({},l),null),n(s,f),jt()}function eo(s,t){Ft(t,!1);let a=L(t,"instance",28,()=>{}),r=L(t,"config",8),o=L(t,"props",24,()=>{});Bt();var l=T(),p=g(l);{var f=x=>{var b=T(),A=g(b);Ws(A,()=>r().component,(C,$)=>{va($(C,it(()=>o()??{},{$$legacy:!0})),h=>a(h),()=>a())}),n(x,b)},m=x=>{var b=T(),A=g(b);Ws(A,()=>r().component,(C,$)=>{va($(C,it(()=>o()??{},{children:(h,k)=>{var w=T(),R=g(w);mt(R,1,()=>r().children,aa,(N,I)=>{ha(N,{get of(){return e(I)}})}),n(h,w)},$$slots:{default:!0},$$legacy:!0})),h=>a(h),()=>a())}),n(x,b)};ee(p,x=>{r().children.length===0?x(f):x(m,!1)})}n(s,l),jt()}const ks=s=>s?.subscribe instanceof Function,Il=wa(void 0);function zl(s,t){Ft(t,!1);let a=L(t,"config",8),r=_();Qa(function(){return a().eventHandlers.forEach(([x,b])=>{const A=e(r).$$.callbacks[x]??[];A.push(b),fo(r,e(r).$$.callbacks[x]=A)}),function(){a().eventHandlers.forEach(([b,A])=>{const C=e(r).$$.callbacks[b],$=C.findIndex(h=>h===A);C.splice($,1)})}}),Bt();var o=T(),l=g(o);{var p=m=>{Wt(m,{get props(){return a().props},children:Gt,$$slots:{default:(x,b)=>{const A=D(()=>b.props);eo(x,{get config(){return a()},get props(){return e(A)},get instance(){return e(r)},set instance(C){i(r,C)},$$legacy:!0})}}})},f=m=>{eo(m,{get config(){return a()},get props(){return a().props},get instance(){return e(r)},set instance(x){i(r,x)},$$legacy:!0})};ee(l,m=>{ks(a().props)?m(p):m(f,!1)})}n(s,o),jt()}function ha(s,t){Ft(t,!1);const a=ra(),r=()=>X(l,"$readableConfig",a);let o=L(t,"of",8);const l=ks(o())?o():Il;Bt();var p=T(),f=g(p);{var m=b=>{var A=We();Ee(()=>Se(A,r())),n(b,A)},x=b=>{var A=T(),C=g(A);{var $=k=>{var w=We();Ee(()=>Se(w,o())),n(k,w)},h=k=>{zl(k,{get config(){return o()}})};ee(C,k=>{typeof o()!="object"?k($):k(h,!1)},!0)}n(b,A)};ee(f,b=>{ks(o())?b(m):b(x,!1)})}n(s,p),jt()}class Ao{header;footer;height;plugins;constructor({header:t,footer:a,height:r,plugins:o}){this.header=t,this.footer=a,this.height=r,this.plugins=o}isFlat(){return"__flat"in this}isData(){return"__data"in this}isDisplay(){return"__display"in this}isGroup(){return"__group"in this}}class Po extends Ao{__flat=!0;id;constructor({header:t,footer:a,plugins:r,id:o}){super({header:t,footer:a,plugins:r,height:1}),this.id=o??String(t)}}class Vl extends Po{__data=!0;cell;accessorKey;accessorFn;constructor({header:t,footer:a,plugins:r,cell:o,accessor:l,id:p}){if(super({header:t,footer:a,plugins:r,id:"Initialization not complete"}),this.cell=o,l instanceof Function?this.accessorFn=l:this.accessorKey=l,p===void 0&&this.accessorKey===void 0&&t===void 0)throw new Error("A column id, string accessor, or header is required");const f=typeof this.accessorKey=="string"?this.accessorKey:null;this.id=p??f??String(t)}getValue(t){if(this.accessorFn!==void 0)return this.accessorFn(t);if(this.accessorKey!==void 0)return t[this.accessorKey]}}class Ul extends Po{__display=!0;cell;data;constructor({header:t,footer:a,plugins:r,id:o,cell:l,data:p}){super({header:t,footer:a,plugins:r,id:o}),this.cell=l,this.data=p}}class Hl extends Ao{__group=!0;columns;ids;constructor({header:t,footer:a,columns:r,plugins:o}){const l=Math.max(...r.map(p=>p.height))+1;super({header:t,footer:a,height:l,plugins:o}),this.columns=r,this.ids=Eo(r)}}const Eo=s=>s.flatMap(t=>t.isFlat()?[t.id]:t.isGroup()?t.ids:[]),Ro=s=>s.flatMap(t=>t.isFlat()?[t]:t.isGroup()?Ro(t.columns):[]),ql=s=>{const t=new Map;return s.forEach(a=>{t.set(a,(t.get(a)??0)+1)}),t},Gl=s=>Array.from(ql(s).entries()).filter(([,t])=>t!==1).map(([t])=>t),Wl=s=>Object.entries(s).map(([t,a])=>`${t}:${a}`).join(";"),Yl=(s,t)=>s.style===void 0&&t.style===void 0?{...s,...t}:{...s,...t,style:{...typeof s.style=="object"?s.style:{},...typeof t.style=="object"?t.style:{}}},Jr=s=>s.style===void 0||typeof s.style!="object"?s:{...s,style:Wl(s.style)};class os{id;constructor({id:t}){this.id=t}attrsForName={};attrs(){return qt(Object.values(this.attrsForName),t=>{let a={};return t.forEach(r=>{a=Yl(a,r)}),Jr(a)})}propsForName={};props(){return So(this.propsForName)}state;injectState(t){this.state=t}applyHook(t,a){a.props!==void 0&&(this.propsForName[t]=a.props),a.attrs!==void 0&&(this.attrsForName[t]=a.attrs)}}class To extends os{row;constructor({id:t,row:a}){super({id:t}),this.row=a}attrs(){return qt(super.attrs(),t=>({...t,role:"cell"}))}rowColId(){return`${this.row.id}:${this.column.id}`}dataRowColId(){if(this.row.isData())return`${this.row.dataId}:${this.column.id}`}isData(){return"__data"in this}isDisplay(){return"__display"in this}}class Fs extends To{__data=!0;column;label;value;constructor({row:t,column:a,label:r,value:o}){super({id:a.id,row:t}),this.column=a,this.label=r,this.value=o}render(){if(this.label===void 0)return`${this.value}`;if(this.state===void 0)throw new Error("Missing `state` reference");return this.label(this,this.state)}clone(){return new Fs({row:this.row,column:this.column,label:this.label,value:this.value})}}class js extends To{__display=!0;column;label;constructor({row:t,column:a,label:r}){super({id:a.id,row:t}),this.column=a,this.label=r}render(){if(this.state===void 0)throw new Error("Missing `state` reference");return this.label(this,this.state)}clone(){return new js({row:this.row,column:this.column,label:this.label})}}const to=s=>s!==null,cr=s=>s!==void 0;class Kl extends os{cells;cellForId;depth;parentRow;subRows;constructor({id:t,cells:a,cellForId:r,depth:o=0,parentRow:l}){super({id:t}),this.cells=a,this.cellForId=r,this.depth=o,this.parentRow=l}attrs(){return qt(super.attrs(),t=>({...t,role:"row"}))}isData(){return"__data"in this}isDisplay(){return"__display"in this}}class Ls extends Kl{__data=!0;dataId;original;constructor({id:t,dataId:a,original:r,cells:o,cellForId:l,depth:p=0,parentRow:f}){super({id:t,cells:o,cellForId:l,depth:p,parentRow:f}),this.dataId=a,this.original=r}clone({includeCells:t=!1,includeSubRows:a=!1}={}){const r=new Ls({id:this.id,dataId:this.dataId,cellForId:this.cellForId,cells:this.cells,original:this.original,depth:this.depth});if(t){const o=Object.fromEntries(Object.entries(r.cellForId).map(([p,f])=>{const m=f.clone();return m.row=r,[p,m]})),l=r.cells.map(({id:p})=>o[p]);r.cellForId=o,r.cells=l}if(a){const o=this.subRows?.map(l=>l.clone({includeCells:t,includeSubRows:a}));r.subRows=o}else r.subRows=this.subRows;return r}}const Zl=(s,t,{rowDataId:a}={})=>{const r=s.map((o,l)=>{const p=l.toString();return new Ls({id:p,dataId:a!==void 0?a(o,l):p,original:o,cells:[],cellForId:{}})});return s.forEach((o,l)=>{const p=t.map(f=>{if(f.isData()){const m=f,x=m.getValue(o);return new Fs({row:r[l],column:m,label:f.cell,value:x})}if(f.isDisplay()){const m=f;return new js({row:r[l],column:m,label:f.cell})}throw new Error("Unrecognized `FlatColumn` implementation")});r[l].cells=p,t.forEach((f,m)=>{r[l].cellForId[f.id]=p[m]})}),r},Jl=(s,t)=>{const a=s.map(r=>{const o=r.clone();return o.cells=[],o.cellForId={},o});return s.length===0||t.length===0?s:(s.forEach((r,o)=>{const l=r.cells.map(f=>{const m=f.clone();return m.row=a[o],m}),p=t.map(f=>l.find(m=>m.id===f)).filter(cr);a[o].cells=p,l.forEach(f=>{a[o].cellForId[f.id]=f})}),a)},Bo=" ";class Fo extends os{label;colspan;colstart;constructor({id:t,label:a,colspan:r,colstart:o}){super({id:t}),this.label=a,this.colspan=r,this.colstart=o}render(){if(this.label instanceof Function){if(this.state===void 0)throw new Error("Missing `state` reference");return this.label(this,this.state)}return this.label}attrs(){return qt(super.attrs(),t=>({...t,role:"columnheader",colspan:this.colspan}))}isFlat(){return"__flat"in this}isData(){return"__data"in this}isFlatDisplay(){return"__flat"in this&&"__display"in this}isGroup(){return"__group"in this}isGroupDisplay(){return"__group"in this&&"__display"in this}}class ns extends Fo{__flat=!0;constructor({id:t,label:a,colstart:r}){super({id:t,label:a,colspan:1,colstart:r})}clone(){return new ns({id:this.id,label:this.label,colstart:this.colstart})}}class Ns extends ns{__data=!0;accessorKey;accessorFn;constructor({id:t,label:a,accessorKey:r,accessorFn:o,colstart:l}){super({id:t,label:a,colstart:l}),this.accessorKey=r,this.accessorFn=o}clone(){return new Ns({id:this.id,label:this.label,accessorFn:this.accessorFn,accessorKey:this.accessorKey,colstart:this.colstart})}}class ls extends ns{__display=!0;constructor({id:t,label:a=Bo,colstart:r}){super({id:t,label:a,colstart:r})}clone(){return new ls({id:this.id,label:this.label,colstart:this.colstart})}}class is extends Fo{__group=!0;ids;allId;allIds;constructor({label:t,ids:a,allIds:r,colspan:o,colstart:l}){super({id:`[${a.join(",")}]`,label:t,colspan:o,colstart:l}),this.ids=a,this.allId=`[${r.join(",")}]`,this.allIds=r}setIds(t){this.ids=t,this.id=`[${this.ids.join(",")}]`}pushId(t){this.ids=[...this.ids,t],this.id=`[${this.ids.join(",")}]`}clone(){return new is({label:this.label,ids:this.ids,allIds:this.allIds,colspan:this.colspan,colstart:this.colstart})}}class Ms extends is{__display=!0;constructor({label:t=Bo,ids:a,allIds:r,colspan:o=1,colstart:l}){super({label:t,ids:a,allIds:r,colspan:o,colstart:l})}clone(){return new Ms({label:this.label,ids:this.ids,allIds:this.allIds,colspan:this.colspan,colstart:this.colstart})}}const Xl=s=>s.reduce((t,a)=>t+a,0),jo=(s,t)=>{const a=[];for(let r=0;r<t;r++)a.push(Array(s).fill(null));return a},ao=s=>{const t=s.length;if(t===0)return s;const a=s[0].length,r=jo(t,a);for(let o=0;o<a;o++)for(let l=0;l<t;l++)r[o][l]=s[l][o];return r};class Os extends os{cells;constructor({id:t,cells:a}){super({id:t}),this.cells=a}attrs(){return qt(super.attrs(),t=>({...t,role:"row"}))}clone(){return new Os({id:this.id,cells:this.cells})}}const Ql=(s,t=[])=>{const a=ei(s);let r=ao(a);return r=ti(r,t),ai(r),ri(ao(r))},ei=s=>{const t=Xl(s.map(l=>l.isGroup()?l.ids.length:1)),a=Math.max(...s.map(l=>l.height)),r=jo(t,a);let o=0;return s.forEach(l=>{const p=a-l.height;Lo(r,l,p,o),o+=l.isGroup()?l.ids.length:1}),r.map((l,p)=>l.map((f,m)=>{if(f!==null)return f;if(p===a-1)return new ls({id:m.toString(),colstart:m});const x=r[a-1][m]?.id??m.toString();return new Ms({ids:[],allIds:[x],colstart:m})}))},Lo=(s,t,a,r)=>{if(t.isData()){s[s.length-1][r]=new Ns({label:t.header,accessorFn:t.accessorFn,accessorKey:t.accessorKey,id:t.id,colstart:r});return}if(t.isDisplay()){s[s.length-1][r]=new ls({id:t.id,label:t.header,colstart:r});return}if(t.isGroup()){for(let l=0;l<t.ids.length;l++)s[a][r+l]=new is({label:t.header,colspan:1,allIds:t.ids,ids:[],colstart:r});let o=0;t.columns.forEach(l=>{Lo(s,l,a+1,r+o),o+=l.isGroup()?l.ids.length:1});return}},ti=(s,t)=>{if(t.length===0)return s;const a=[];return t.forEach((r,o)=>{const l=s.find(p=>{const f=p[p.length-1];if(!f.isFlat())throw new Error("The last element of each column must be a `FlatHeaderCell`");return f.id===r});l!==void 0&&a.push(l.map(p=>{const f=p.clone();return f.colstart=o,f}))}),a},ai=s=>{s.forEach(t=>{const a=t[t.length-1];if(!a.isFlat())throw new Error("The last element of each column must be a `FlatHeaderCell`");t.forEach(r=>{r.isGroup()&&r.pushId(a.id)})})},ri=s=>s.map((t,a)=>new Os({id:a.toString(),cells:si(t)})),si=s=>{if(s.length===0)return s;const t=[];let a=0,r=1;for(;a<s.length;){const o=s[a].clone();if(!o.isGroup()){t.push(o),a++;continue}r=a+1;const l=[...o.ids];for(;r<s.length;){const p=s[r];if(!p.isGroup()||o.allId!==p.allId)break;l.push(...p.ids),r++}o.setIds(l),o.colspan=r-a,t.push(o),a=r}return t},oi=(s,t,{rowDataId:a}={})=>{const{data:r,plugins:o}=s,l=Ro(t),p=wa(l),f=qt([r,p],([ie,_e])=>Zl(ie,_e,{rowDataId:a})),m=st([]),x=st(),b=st([]),A=st([]),C=st({role:"table"}),$=st({}),h=st({role:"rowgroup"}),k={data:r,columns:t,flatColumns:l,tableAttrs:C,tableHeadAttrs:$,tableBodyAttrs:h,visibleColumns:m,headerRows:x,originalRows:f,rows:b,pageRows:A},w=Object.fromEntries(Object.entries(o).map(([ie,_e])=>{const Te=Object.fromEntries(l.map(se=>{const Le=se.plugins?.[ie];if(Le!==void 0)return[se.id,Le]}).filter(cr));return[ie,_e({pluginName:ie,tableState:k,columnOptions:Te})]})),R=Object.fromEntries(Object.entries(w).map(([ie,_e])=>[ie,_e.pluginState])),N={data:r,columns:t,flatColumns:l,tableAttrs:C,tableHeadAttrs:$,tableBodyAttrs:h,visibleColumns:m,headerRows:x,originalRows:f,rows:b,pageRows:A,pluginStates:R},I=Object.values(w).map(ie=>ie.deriveTableAttrs).filter(cr);let W=wa({role:"table"});I.forEach(ie=>{W=ie(W)});const le=qt(W,ie=>{const _e=Jr(ie);return C.set(_e),_e}),Q=Object.values(w).map(ie=>ie.deriveTableBodyAttrs).filter(cr);let O=wa({});Q.forEach(ie=>{O=ie(O)});const ve=qt(O,ie=>{const _e=Jr(ie);return $.set(_e),_e}),Y=Object.values(w).map(ie=>ie.deriveTableBodyAttrs).filter(cr);let H=wa({role:"rowgroup"});Y.forEach(ie=>{H=ie(H)});const me=qt(H,ie=>{const _e=Jr(ie);return h.set(_e),_e}),ye=Object.values(w).map(ie=>ie.deriveFlatColumns).filter(cr);let re=p;ye.forEach(ie=>{re=ie(re)});const pe=qt(re,ie=>(m.set(ie),ie)),Be=qt([f,pe],([ie,_e])=>Jl(ie,_e.map(Te=>Te.id))),Je=Object.values(w).map(ie=>ie.deriveRows).filter(cr);let ge=Be;Je.forEach(ie=>{ge=ie(ge)});const Oe=qt(ge,ie=>(ie.forEach(_e=>{_e.injectState(N),_e.cells.forEach(Te=>{Te.injectState(N)})}),Object.entries(w).forEach(([_e,Te])=>{ie.forEach(se=>{Te.hooks?.["tbody.tr"]!==void 0&&se.applyHook(_e,Te.hooks["tbody.tr"](se)),se.cells.forEach(Le=>{Te.hooks?.["tbody.tr.td"]!==void 0&&Le.applyHook(_e,Te.hooks["tbody.tr.td"](Le))})})}),b.set(ie),ie)),q=Object.values(w).map(ie=>ie.derivePageRows).filter(cr);let K=Oe;q.forEach(ie=>{K=ie(K)});const Ie=qt(K,ie=>(ie.forEach(_e=>{_e.injectState(N),_e.cells.forEach(Te=>{Te.injectState(N)})}),Object.entries(w).forEach(([_e,Te])=>{ie.forEach(se=>{Te.hooks?.["tbody.tr"]!==void 0&&se.applyHook(_e,Te.hooks["tbody.tr"](se)),se.cells.forEach(Le=>{Te.hooks?.["tbody.tr.td"]!==void 0&&Le.applyHook(_e,Te.hooks["tbody.tr.td"](Le))})})}),A.set(ie),ie)),ae=qt(pe,ie=>{const _e=Ql(t,ie.map(Te=>Te.id));return _e.forEach(Te=>{Te.injectState(N),Te.cells.forEach(se=>{se.injectState(N)})}),Object.entries(w).forEach(([Te,se])=>{_e.forEach(Le=>{se.hooks?.["thead.tr"]!==void 0&&Le.applyHook(Te,se.hooks["thead.tr"](Le)),Le.cells.forEach(de=>{se.hooks?.["thead.tr.th"]!==void 0&&de.applyHook(Te,se.hooks["thead.tr.th"](de))})})}),x.set(_e),_e});return{tableAttrs:le,tableHeadAttrs:ve,tableBodyAttrs:me,visibleColumns:pe,flatColumns:l,headerRows:ae,originalRows:f,rows:Oe,pageRows:Ie,pluginStates:R}};class ni{data;plugins;constructor(t,a){this.data=t,this.plugins=a}createColumns(t){const a=Eo(t),r=Gl(a);if(r.length!==0)throw new Error(`Duplicate column ids not allowed: "${r.join('", "')}"`);return t}column(t){return new Vl(t)}group(t){return new Hl(t)}display(t){return new Ul(t)}createViewModel(t,a){return oi(this,t,a)}}const Ya=(s,t={})=>new ni(s,t),li=({filterValue:s,value:t})=>s===""?!0:String(t).toLowerCase().startsWith(String(s).toLowerCase());wa(void 0);const No=(s={})=>{const t=C=>Object.fromEntries(Object.entries(C).filter(([,$])=>$)),{subscribe:a,update:r,set:o}=st(t(s)),l=C=>{r($=>{const h=C($);return t(h)})};return{subscribe:a,update:l,set:C=>l(()=>C),toggle:C=>{r($=>$[C]===!0?(delete $[C],$):{...$,[C]:!0})},add:C=>{r($=>({...$,[C]:!0}))},addAll:C=>{r($=>({...$,...Object.fromEntries(C.map(h=>[h,!0]))}))},remove:C=>{r($=>(delete $[C],$))},removeAll:C=>{r($=>{for(const h of C)delete $[h];return $})},clear:()=>{o({})}}},ii=s=>s instanceof MouseEvent?s.shiftKey:!1,di=1,ci=({items:s,initialPageSize:t,initialPageIndex:a,serverSide:r,serverItemCount:o})=>{const l=st(t),p=$=>{l.update(h=>{const k=$(h);return Math.max(k,di)})},f=$=>p(()=>$),m=st(a);function x([$,h]){const k=Math.ceil(h/$);return m.update(w=>k>0&&w>=k?k-1:w),k}let b;if(r&&o!=null)b=qt([l,o],x);else{const $=qt(s,h=>h.length);b=qt([l,$],x)}const A=qt(m,$=>$>0),C=qt([m,b],([$,h])=>$<h-1);return{pageSize:{subscribe:l.subscribe,update:p,set:f},pageIndex:m,pageCount:b,serverItemCount:o,hasPreviousPage:A,hasNextPage:C}},nr=({initialPageIndex:s=0,initialPageSize:t=10,serverSide:a=!1,serverItemCount:r}={})=>()=>{const o=st([]),l=st([]),{pageSize:p,pageIndex:f,pageCount:m,hasPreviousPage:x,hasNextPage:b}=ci({items:o,initialPageIndex:s,initialPageSize:t,serverSide:a,serverItemCount:r});return{pluginState:{pageSize:p,pageIndex:f,pageCount:m,hasPreviousPage:x,hasNextPage:b},derivePageRows:$=>qt([$,p,f],([h,k,w])=>{if(o.set(h),a)return l.set(h),h;const R=w*k,N=h.slice(R,R+k);return l.set(N),N})}},Br=(s,t,a)=>s.isData()&&(!a||s.subRows===void 0)?t[s.dataId]===!0:s.subRows===void 0?!1:s.subRows.every(r=>Br(r,t,a)),Cs=(s,t,a)=>s.isData()&&(!a||s.subRows===void 0)?t[s.dataId]===!0:s.subRows===void 0?!1:s.subRows.some(r=>Cs(r,t,a)),Mo=(s,t,a,r)=>{s.isData()&&(a[s.dataId]=t,!r)||s.subRows!==void 0&&s.subRows.forEach(o=>{Mo(o,t,a,r)})},ui=(s,t,a)=>{const{subscribe:r}=qt(t,p=>{if(s.isData()){if(!a)return p[s.dataId]===!0;if(p[s.dataId]===!0)return!0}return Br(s,p,a)}),o=p=>{t.update(f=>{const m=Br(s,f,a),x={...f};return Mo(s,p(m),x,a),s.parentRow!==void 0&&s.parentRow.isData()&&(x[s.parentRow.dataId]=Br(s.parentRow,x,a)),x})};return{subscribe:r,update:o,set:p=>o(()=>p)}},ga=({initialSelectedDataIds:s={},linkDataSubRows:t=!0}={})=>({tableState:a})=>{const r=No(s),o=h=>{const k=ui(h,r,t),w=qt([k,r],([N,I])=>N?!1:Cs(h,I,t)),R=qt(r,N=>Br(h,N,t));return{isSelected:k,isSomeSubRowsSelected:w,isAllSubRowsSelected:R}},l=qt([a.rows,r],([h,k])=>h.every(w=>w.isData()?k[w.dataId]===!0:!0)),p=h=>{if(h){const w=qr(a.rows).map(R=>R.isData()?R.dataId:null).filter(to);r.addAll(w)}else r.clear()},f={subscribe:l.subscribe,update(h){const k=qr(l);p(h(k))},set:p},m=qt([a.rows,r],([h,k])=>h.some(w=>w.isData()?k[w.dataId]===!0:!1)),x=qt([a.pageRows,r],([h,k])=>h.every(w=>w.isData()?k[w.dataId]===!0:!0)),b=h=>{const w=qr(a.pageRows).map(R=>R.isData()?R.dataId:null).filter(to);h?r.addAll(w):r.removeAll(w)},A={subscribe:x.subscribe,update(h){const k=qr(x);b(h(k))},set:b},C=qt([a.pageRows,r],([h,k])=>h.some(w=>w.isData()?k[w.dataId]===!0:!1));return{pluginState:{selectedDataIds:r,getRowState:o,allRowsSelected:f,someRowsSelected:m,allPageRowsSelected:A,somePageRowsSelected:C},hooks:{"tbody.tr":h=>({props:qt(r,w=>{const R=Cs(h,w,t),N=Br(h,w,t);return{selected:h.isData()?w[h.dataId]===!0:N,someSubRowsSelected:R,allSubRowsSelected:N}})})}}},Xr=(s,t)=>Array.isArray(s)&&Array.isArray(t)?fi(s,t):typeof s=="number"&&typeof t=="number"?s-t:s<t?-1:s>t?1:0,fi=(s,t)=>{const a=Math.min(s.length,t.length);for(let r=0;r<a;r++){const o=Xr(s[r],t[r]);if(o!==0)return o}return 0},pi=["asc","desc",void 0],hi=s=>{const{subscribe:t,update:a,set:r}=st(s);return{subscribe:t,update:a,set:r,toggleId:(p,{multiSort:f=!0,toggleOrder:m=pi}={})=>{a(x=>{const b=x.findIndex(w=>w.id===p),C=x[b]?.order,h=(m.findIndex(w=>w===C)+1)%m.length,k=m[h];return f?b===-1&&k!==void 0?[...x,{id:p,order:k}]:k===void 0?[...x.slice(0,b),...x.slice(b+1)]:[...x.slice(0,b),{id:p,order:k},...x.slice(b+1)]:k===void 0?[]:[{id:p,order:k}]})},clearId:p=>{a(f=>{const m=f.findIndex(x=>x.id===p);return m===-1?f:[...f.slice(0,m),...f.slice(m+1)]})}}},Oo=(s,t,a)=>{const r=[...s];r.sort((o,l)=>{for(const p of t){const f=a[p.id]?.invert??!1,m=o.cellForId[p.id],x=l.cellForId[p.id];let b=0;const A=a[p.id]?.compareFn,C=a[p.id]?.getSortValue;if(!m.isData())return 0;const $=m.value,h=x.value;if(A!==void 0)b=A($,h);else if(C!==void 0){const k=C($),w=C(h);b=Xr(k,w)}else if(typeof $=="string"||typeof $=="number")b=Xr($,h);else if($ instanceof Date||h instanceof Date){const k=$ instanceof Date?$.getTime():0,w=h instanceof Date?h.getTime():0;b=Xr(k,w)}if(b!==0){let k=1;return p.order==="desc"&&(k*=-1),f&&(k*=-1),b*k}}return 0});for(let o=0;o<r.length;o++){const{subRows:l}=r[o];if(l===void 0)continue;const p=Oo(l,t,a),f=r[o].clone();f.subRows=p,r[o]=f}return r},Ka=({initialSortKeys:s=[],disableMultiSort:t=!1,isMultiSortEvent:a=ii,toggleOrder:r,serverSide:o=!1}={})=>({columnOptions:l})=>{const p=Object.entries(l).filter(([,A])=>A.disable===!0).map(([A])=>A),f=hi(s),m=st([]);return{pluginState:{sortKeys:f,preSortedRows:m},deriveRows:A=>qt([A,f],([C,$])=>(m.set(C),o?C:Oo(C,$,l))),hooks:{"thead.tr.th":A=>{const C=p.includes(A.id);return{props:qt(f,h=>{const k=h.find(N=>N.id===A.id),w=N=>{A.isData()&&(C||f.toggleId(A.id,{multiSort:t?!1:a(N),toggleOrder:r}))},R=()=>{A.isData()&&(p.includes(A.id)||f.clearId(A.id))};return{order:k?.order,toggle:w,clear:R,disabled:C}})}},"tbody.tr.td":A=>({props:qt(f,$=>({order:$.find(k=>k.id===A.id)?.order}))})}}},Io=(s,t,a,{tableCellMatches:r,fn:o,includeHiddenColumns:l})=>s.map(f=>{const{subRows:m}=f;if(m===void 0)return f;const x=Io(m,t,a,{tableCellMatches:r,fn:o,includeHiddenColumns:l}),b=f.clone();return b.subRows=x,b}).filter(f=>(f.subRows?.length??0)!==0?!0:Object.values(f.cellForId).map(x=>{const b=a[x.id];if(b?.exclude===!0||f.cells.find(h=>h.id===x.id)===void 0&&!l||!x.isData())return!1;let C=x.value;b?.getFilterValue!==void 0&&(C=b?.getFilterValue(C));const $=o({value:String(C),filterValue:t});if($){const h=x.dataRowColId();h!==void 0&&(r[h]=$)}return $}).includes(!0)),Za=({fn:s=li,initialFilterValue:t="",includeHiddenColumns:a=!1,serverSide:r=!1}={})=>({columnOptions:o})=>{const l=st(t),p=st([]),f=No();return{pluginState:{filterValue:l,preFilteredRows:p},deriveRows:b=>qt([b,l],([A,C])=>{p.set(A),f.clear();const $={},h=Io(A,C,o,{tableCellMatches:$,fn:s,includeHiddenColumns:a});return f.set($),r?A:h}),hooks:{"tbody.tr.td":b=>({props:qt([l,f],([C,$])=>{const h=b.dataRowColId();return{matches:C!==""&&h!==void 0&&($[h]??!1)}})})}}};var vi=S('<!> <button class="absolute -top-1 right-4 p-2 grid place-items-center rounded-full text-[#E71D36] bg-[#E71D36]/15 cursor-pointer"><!></button>',1),gi=S("<option> </option>"),mi=S('<div class="px-4 py-2"><!> <form><div class="space-y-4"><div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div></div> <div class="grid grid-cols-4 items-center gap-4 py-2"><!> <div class="col-span-3"><!></div></div> <div class="space-y-2"><!> <span class="relative w-full col-span-3"><select id="store-timezone" class=" w-full border border-[#F2F4F7] rounded-md px-3 py-2"><option disabled selected>Select timezone</option><!></select> <!></span></div> <div class="grid grid-cols-4 items-center gap-4 py-2"><!> <div class="col-span-3"><!></div></div> <div class="grid grid-cols-4 items-center gap-4 py-2 relative"><!> <!> <span class="absolute right-2 top-1/2 -translate-y-1/2"><!></span></div> <div class="grid grid-cols-4 items-center gap-4 py-2 relative"><!> <!> <span class="absolute right-2 top-1/2 -translate-y-1/2"><!></span></div> <div class="mt-6 flex justify-end space-x-3"><!> <!></div></form></div>'),bi=S("<!> <!>",1);function ro(s,t){Ft(t,!1);const a=ra(),r=()=>X(_o,"$selectedNode",a);let o=_(!1),l=L(t,"store",8),p=L(t,"token",8),f=_(l().storeName),m=_(l().location?.split(",")[0]),x=_(l().pincode),b=_(l().country),A=_(l().storeManager),C=l().moksaId,$=L(t,"refreshStoreData",8),h=_(),k=_(),w=_(),R=_(),N=_();const I=["EST","PST","MST","UTC","CST"],W=new Date().toISOString().split("T")[0],le=new Date(new Date().setFullYear(new Date().getFullYear()-1)).toISOString().split("T")[0];let Q=null;const O=async()=>{console.log("fetching store data"),await fetch(`https://api.moksa.ai/store/getStoreByStoreIdWithAllDetails/${C}/${le}/${W}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${p()}`}}).then(Y=>Y.json()).then(Y=>{console.log("store extra data",Y),Y?.status===200&&(Q=Y?.data[0],i(h,Q.openingTime),i(k,Q.closingTime),i(w,Q.is24HrStore),i(R,Q.timezone),i(N,Q.hasKitchen))}).catch(Y=>{console.log(Y)})},ve=async()=>(console.log(e(m),"address here"),console.log(e(b),"countryhere"),await fetch("/api/node/update",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e(f),id:r().id,address:e(m),pincode:e(x),country:e(b),manager:e(A),moksaId:l().moksaId,hasKitchen:e(N),openingTime:e(h),closingTime:e(k),is24HrStore:e(w),timezone:e(R)})}).then(async()=>{ua("Store updated"),i(o,!1),await $()()}),!0);M(()=>e(o),()=>{e(o)&&O()}),na(),Bt(),tr(s,{get open(){return e(o)},set open(Y){i(o,Y)},children:(Y,H)=>{var me=bi(),ye=g(me);Fr(ye,{children:(pe,Be)=>{var Je=T(),ge=g(Je);Tt(ge,t,"default",{},null),n(pe,Je)},$$slots:{default:!0}});var re=u(ye,2);ar(re,{closeButton:!1,class:"sm:max-w-[460px] bg-white shadow-lg rounded-xl",children:(pe,Be)=>{var Je=mi(),ge=c(Je);rr(ge,{class:"relative",children:(G,we)=>{var fe=vi(),Ye=g(fe);sr(Ye,{class:"text-2xl font-semibold mb-6",children:(bt,ut)=>{$e();var dt=We("Edit Store");n(bt,dt)},$$slots:{default:!0}});var et=u(Ye,2),Xe=c(et);yr(Xe,{class:"h-4 w-4"}),d(et),gt("click",et,()=>i(o,!1)),n(G,fe)},$$slots:{default:!0}});var Oe=u(ge,2),q=c(Oe),K=c(q),Ie=c(K);da(Ie,{for:"nodeName",class:"block text-sm font-medium text-gray-700",children:(G,we)=>{$e();var fe=We("Store Name");n(G,fe)},$$slots:{default:!0}});var ae=u(Ie,2);ia(ae,{id:"nodeName",name:"nodeName",placeholder:"Enter store name",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(f)},set value(G){i(f,G)},$$legacy:!0}),d(K);var ie=u(K,2),_e=c(ie);da(_e,{for:"address",class:"block text-sm font-medium text-gray-700",children:(G,we)=>{$e();var fe=We("Address");n(G,fe)},$$slots:{default:!0}});var Te=u(_e,2);ia(Te,{id:"address",name:"address",placeholder:"Enter address",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(m)},set value(G){i(m,G)},$$legacy:!0}),d(ie);var se=u(ie,2),Le=c(se);da(Le,{for:"pincode",class:"block text-sm font-medium text-gray-700",children:(G,we)=>{$e();var fe=We("Pincode");n(G,fe)},$$slots:{default:!0}});var de=u(Le,2);ia(de,{id:"pincode",name:"pincode",placeholder:"Enter pincode",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(x)},set value(G){i(x,G)},$$legacy:!0}),d(se);var He=u(se,2),Qe=c(He);da(Qe,{for:"country",class:"block text-sm font-medium text-gray-700",children:(G,we)=>{$e();var fe=We("Country");n(G,fe)},$$slots:{default:!0}});var z=u(Qe,2);ia(z,{id:"country",name:"country",placeholder:"Enter country",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(b)},set value(G){i(b,G)},$$legacy:!0}),d(He);var Me=u(He,2),Z=c(Me);da(Z,{for:"manager",class:"block text-sm font-medium text-gray-700",children:(G,we)=>{$e();var fe=We("Manager");n(G,fe)},$$slots:{default:!0}});var ke=u(Z,2);ia(ke,{id:"manager",name:"manager",placeholder:"Enter manager name",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(A)},set value(G){i(A,G)},$$legacy:!0}),d(Me),d(q);var Re=u(q,2),xe=c(Re);da(xe,{for:"has-kitchen",children:(G,we)=>{$e();var fe=We("has Kitchen");n(G,fe)},$$slots:{default:!0}});var Ce=u(xe,2),ze=c(Ce);rs(ze,{id:"has-kitchen",get checked(){return e(N)},set checked(G){i(N,G)},$$legacy:!0}),d(Ce),d(Re);var Fe=u(Re,2),Ve=c(Fe);da(Ve,{for:"store-timezone",children:(G,we)=>{$e();var fe=We("Timezone");n(G,fe)},$$slots:{default:!0}});var j=u(Ve,2),De=c(j);Ee(()=>{e(R),po(()=>{})});var Pe=c(De);Pe.value=((Pe.__value="")==null,"");var Ae=u(Pe);mt(Ae,1,()=>I,aa,(G,we)=>{var fe=gi(),Ye={},et=c(fe,!0);d(fe),Ee(()=>{Ye!==(Ye=e(we))&&(fe.value=(fe.__value=e(we))==null?"":e(we)),Se(et,e(we))}),n(G,fe)}),d(De);var J=u(De,2);Bs(J,{class:"absolute pointer-events-none right-3 top-1/2 transform -translate-y-1/2 z-20"}),d(j),d(Fe);var Ge=u(Fe,2),v=c(Ge);da(v,{for:"store-24hr",children:(G,we)=>{$e();var fe=We("24-Hour");n(G,fe)},$$slots:{default:!0}});var y=u(v,2),F=c(y);rs(F,{id:"store-24hr",get checked(){return e(w)},set checked(G){i(w,G)},$$legacy:!0}),d(y),d(Ge);var P=u(Ge,2),U=c(P);da(U,{for:"store-open-time",children:(G,we)=>{$e();var fe=We("Open Time");n(G,fe)},$$slots:{default:!0}});var te=u(U,2);ia(te,{id:"store-open-time",type:"time",class:"col-span-3",get disabled(){return e(w)},get value(){return e(h)},set value(G){i(h,G)},$$legacy:!0});var je=u(te,2),Ne=c(je);yr(Ne,{}),d(je),d(P);var Ue=u(P,2),B=c(Ue);da(B,{for:"store-close-time",children:(G,we)=>{$e();var fe=We("Close Time");n(G,fe)},$$slots:{default:!0}});var ce=u(B,2);ia(ce,{id:"store-close-time",type:"time",class:"col-span-3",get disabled(){return e(w)},get value(){return e(k)},set value(G){i(k,G)},$$legacy:!0});var oe=u(ce,2),he=c(oe);yr(he,{}),d(oe),d(Ue);var Ke=u(Ue,2),E=c(Ke);St(E,{type:"button",variant:"outline",class:"px-4 py-2 border border-[#F2F4F7] rounded-md text-gray-700",$$events:{click:()=>i(o,!1)},children:(G,we)=>{$e();var fe=We("Cancel");n(G,fe)},$$slots:{default:!0}});var ue=u(E,2);St(ue,{type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-md",children:(G,we)=>{$e();var fe=We("Update");n(G,fe)},$$slots:{default:!0}}),d(Ke),d(Oe),d(Je),bo(De,()=>e(R),G=>i(R,G)),gt("click",je,()=>i(h,null)),gt("click",oe,()=>i(k,null)),gt("submit",Oe,vo(ve)),n(pe,Je)},$$slots:{default:!0}}),n(Y,me)},$$slots:{default:!0},$$legacy:!0}),jt()}var _i=S("<!> <!>",1),xi=S("<!> Modify",1),$i=S("<!> Delete",1),yi=S('<span class="w-full flex items-center gap-3"><!> <!></span>'),wi=S("<!> Modify",1),ki=S('<span class="text-sm text-[#727272]"> </span>'),Ci=S('<span class="text-sm text-[#727272] flex items-center min-w-[200px] text-start justify-start gap-2"><!> <button class="ml-2"><!></button></span>'),Di=S('<span class="text-sm text-[#727272] flex items-center text-start justify-start gap-2 min-w-[125px]"><!> </span>'),Si=S('<span class="text-sm text-[#727272] text-left"> </span>'),Ai=S('<div class="col-span-1 px-4 py-3 h-[40px] relative flex items-center gap-3 min-w-1/4"><span><p class="text font-semibold dark:text-white text-black/[.7]">Cameras in Service</p> <p class="dark:text-white text-black/[.7] text-xl font-bold"> </p></span></div> <div class="col-span-1 px-4 py-3 h-[55px] relative flex items-center gap-3 min-w-1/4"><span><p class="text font-semibold dark:text-white text-black/[.7]">Suspicious Activities Detected</p> <p class="dark:text-white text-black/[.7] text-xl font-bold"> </p></span></div> <div class="col-span-1 px-4 py-3 h-[40px] relative flex items-center gap-3 min-w-1/4"><span><p class="text font-semibold dark:text-white text-black/[.7]">Incidents Cleared by Operator</p> <p class="dark:text-white text-black/[.7] text-xl font-bold"> </p></span></div>',1),Pi=S("<!> <!>",1),Ei=S("<!> <!>",1),Ri=S('<div class="flex flex-row items-center justify-center space-x-4 py-4"><!> <div class="flex flex-row gap-2 items-center text-sm text-muted-foreground"><span class="p-2 rounded-md aspect-square bg-[#015a62] bg-opacity-10"> </span> of <span class="p-2 rounded-md aspect-square bg-[#015a62] bg-opacity-20"> </span> Page.</div> <!></div>'),Ti=S('<div class="rounded-md mt-0"><!></div> <!>',1);function Bi(s,t){Ft(t,!1);const a=ra(),r=()=>X(ae,"$expandedRow",a),o=()=>X(e(le),"$tableAttrs",a),l=()=>X(e(I),"$headerRows",a),p=()=>X(e(Q),"$tableBodyAttrs",a),f=()=>X(e(W),"$pageRows",a),m=()=>X(e(ye),"$selectedDataIds",a),x=()=>X(Ie,"$expandedRowData",a),b=()=>X(e(me),"$pageCount",a),A=()=>X(e(H),"$pageIndex",a),C=()=>X(e(Y),"$hasPreviousPage",a),$=()=>X(e(ve),"$hasNextPage",a),h=_(),k=_(),w=_(),R=_(),N=_(),I=_(),W=_(),le=_(),Q=_(),O=_(),ve=_(),Y=_(),H=_(),me=_(),ye=_(),re=_();let pe=L(t,"combinedStores",24,()=>[]),Be=L(t,"token",8),Je=L(t,"user",8),ge=L(t,"refreshStoreData",8);const Oe=Aa(),q=new Date().toISOString().split("T")[0],K=new Date(new Date().setFullYear(new Date().getFullYear()-1)).toISOString().split("T")[0],Ie=st([]);let ae=st(null);async function ie(z,Me){r()===z?(ae.set(null),Ie.set([])):await fetch(`https://api.moksa.ai/store/getStoreByStoreIdWithAllDetails/${Me}/${K}/${q}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${Be()}`}}).then(Z=>Z.json()).then(Z=>{Z?.status===200&&(Ie.set(Z?.data),ae.set(z))}).catch(Z=>{console.log(Z)})}console.log(pe(),"combinedStores");let _e=L(t,"searchStore",8);function Te(z){Oe("rowClick",z)}M(()=>Mt(pe()),()=>{i(h,pe().map(z=>(console.log(z,"store here"),{storeName:z.name,storeImage:z.storeImage,location:`${z.address}, ${z.country}`,storeManager:z.manager,managerImage:z.managerImage,dateOfRegistration:z.createdAt,camerasAssigned:z.camera_count,pincode:z.pincode,country:z.country,moksaId:z.id,lensId:z.lensId})))}),M(()=>e(h),()=>{console.log(e(h),"db data here")}),M(()=>e(h),()=>{i(k,st(e(h)))}),M(()=>e(k),()=>{i(w,wa([],z=>e(k).subscribe(z)))}),M(()=>(e(w),ga),()=>{i(R,Ya(e(w),{page:nr({initialPageSize:3}),sort:Ka(),filter:Za({fn:({filterValue:z,value:Me})=>Me.toLowerCase().includes(z.toLowerCase())}),select:ga()}))}),M(()=>e(R),()=>{i(N,e(R).createColumns([e(R).column({accessor:"storeName",header:"Store Name"}),e(R).column({accessor:"location",header:"Location"}),e(R).column({accessor:"storeManager",header:"Store Manager"}),e(R).column({accessor:"dateOfRegistration",header:"Date of Registration"}),e(R).column({accessor:"camerasAssigned",header:"Cameras Assigned"}),e(R).column({accessor:"action",header:"Action"})]))}),M(()=>(e(I),e(W),e(le),e(Q),e(O),e(R),e(N)),()=>{(z=>(pt(i(I,z.headerRows),"$headerRows",a),pt(i(W,z.pageRows),"$pageRows",a),pt(i(le,z.tableAttrs),"$tableAttrs",a),pt(i(Q,z.tableBodyAttrs),"$tableBodyAttrs",a),i(O,z.pluginStates)))(e(R).createViewModel(e(N)))}),M(()=>(e(ve),e(Y),e(H),e(me),e(O)),()=>{(z=>(pt(i(ve,z.hasNextPage),"$hasNextPage",a),pt(i(Y,z.hasPreviousPage),"$hasPreviousPage",a),pt(i(H,z.pageIndex),"$pageIndex",a),pt(i(me,z.pageCount),"$pageCount",a)))(e(O).page)}),M(()=>(e(ye),e(O)),()=>{(z=>pt(i(ye,z.selectedDataIds),"$selectedDataIds",a))(e(O).select)}),M(()=>(e(re),e(O)),()=>{(z=>pt(i(re,z.filterValue),"$filterValue",a))(e(O).filter)}),M(()=>Mt(_e()),()=>{Oa(e(re),_e())}),na(),Bt();var se=Ti(),Le=g(se),de=c(Le);Ua(de,it(o,{class:"border-b border-x mx-auto w-[100%] flex flex-col pb-10 rounded-md",children:(z,Me)=>{var Z=Ei(),ke=g(Z);Ha(ke,{class:"rounded-lg bg-[#f9f9f9]",children:(xe,Ce)=>{var ze=T(),Fe=g(ze);mt(Fe,1,l,aa,(Ve,j)=>{var De=D(()=>e(j).attrs());Wt(Ve,{get rowAttrs(){return e(De)},children:(Pe,Ae)=>{la(Pe,{class:"bg-transparent flex flex-row border-b items-center justify-between",children:(J,Ge)=>{var v=T(),y=g(v);mt(y,1,()=>e(j).cells,F=>F.id,(F,P)=>{var U=D(()=>e(P).attrs()),te=D(()=>e(P).props());Wt(F,{get attrs(){return e(U)},get props(){return e(te)},children:Gt,$$slots:{default:(je,Ne)=>{const Ue=D(()=>Ne.attrs),B=D(()=>Ne.props);qa(je,it(()=>e(Ue),{class:"text-[#323232] whitespace-nowrap h-full flex items-center justify-center flex-1",children:(ce,oe)=>{var he=D(()=>`hover:bg-transparent text-[#323232] dark:text-white/[.8] font-semibold opacity-60 min-w-[150px] ${e(P).id==="storeName"?"text-center justify-center":""}`);St(ce,{variant:"ghost",get class(){return e(he)},$$events:{click(...Ke){e(B).sort.toggle?.apply(this,Ke)}},children:(Ke,E)=>{var ue=_i(),G=g(ue),we=D(()=>e(P).render());ha(G,{get of(){return e(we)}});var fe=u(G,2);or(fe,{class:"ml-2 h-4 w-4"}),n(Ke,ue)},$$slots:{default:!0}})},$$slots:{default:!0}}))}}})}),n(J,v)},$$slots:{default:!0}})},$$slots:{default:!0}})}),n(xe,ze)},$$slots:{default:!0}});var Re=u(ke,2);ja(Re,it(p,{class:"overflow-x-auto",children:(xe,Ce)=>{var ze=T(),Fe=g(ze);mt(Fe,1,f,Ve=>Ve.id,(Ve,j)=>{var De=D(()=>e(j).attrs());Wt(Ve,{get rowAttrs(){return e(De)},children:Gt,$$slots:{default:(Pe,Ae)=>{const J=D(()=>Ae.rowAttrs);var Ge=Pi(),v=g(Ge),y=D(()=>m()[e(j).id]&&"selected");la(v,it(()=>e(J),{get"data-state"(){return e(y)},class:"bg-transparent flex items-center justify-between border-b border-solid border-[#e4e4e4]",$$events:{click:()=>Te(e(j).original)},children:(U,te)=>{var je=T(),Ne=g(je);mt(Ne,1,()=>e(j).cells,Ue=>Ue.id,(Ue,B)=>{var ce=D(()=>e(B).attrs());Wt(Ue,{get attrs(){return e(ce)},children:Gt,$$slots:{default:(oe,he)=>{const Ke=D(()=>he.attrs);Da(oe,it(()=>e(Ke),{class:"whitespace-nowrap flex-1 flex items-center justify-center",children:(E,ue)=>{var G=T(),we=g(G);{var fe=et=>{var Xe=T(),bt=g(Xe);{var ut=yt=>{var Ct=yi(),Ot=c(Ct);ro(Ot,{get store(){return e(j).original},get token(){return Be()},get refreshStoreData(){return ge()},children:(ot,wt)=>{St(ot,{class:"text-[#4976F4] bg-[#4976F4]/[.1] rounded-full text-xs text-start flex items-center gap-1",variant:"ghost",children:(Dt,Yt)=>{var vt=xi(),kt=g(vt);$s(kt,{size:14}),$e(),n(Dt,vt)},$$slots:{default:!0}})},$$slots:{default:!0}});var xt=u(Ot,2);Ol(xt,{get email(){return Je().email},get name(){return e(j).original.storeName},get moksaId(){return e(j).original.moksaId},get id(){return e(j).original.lensId},children:(ot,wt)=>{St(ot,{class:"text-[#F44336] bg-[#F44336]/[.1] rounded-full text-xs text-start flex items-center gap-1",variant:"ghost",children:(Dt,Yt)=>{var vt=$i(),kt=g(vt);_n(kt,{size:14}),$e(),n(Dt,vt)},$$slots:{default:!0}})},$$slots:{default:!0}}),d(Ct),n(yt,Ct)},dt=yt=>{ro(yt,{get store(){return e(j).original},get token(){return Be()},children:(Ct,Ot)=>{St(Ct,{class:"text-[#4976F4] bg-[#4976F4]/[.1] rounded-full text-xs text-start flex items-center gap-1",variant:"ghost",children:(xt,ot)=>{var wt=wi(),Dt=g(wt);$s(Dt,{size:14}),$e(),n(xt,wt)},$$slots:{default:!0}})},$$slots:{default:!0}})};ee(bt,yt=>{Je()?.role==="superAdmin"?yt(ut):yt(dt,!1)})}n(et,Xe)},Ye=et=>{var Xe=T(),bt=g(Xe);{var ut=yt=>{var Ct=ki(),Ot=c(Ct,!0);Ee(()=>Se(Ot,new Date(e(j).original.dateOfRegistration).toLocaleDateString("en-US",{weekday:"short",month:"long",day:"numeric",year:"numeric"}))),d(Ct),n(yt,Ct)},dt=yt=>{var Ct=T(),Ot=g(Ct);{var xt=wt=>{var Dt=Ci(),Yt=c(Dt);Ga(Yt,{size:20,class:"text-[#3D81FC]"});var vt=u(Yt),kt=u(vt),Kt=c(kt);{var Xt=Jt=>{Zn(Jt,{size:16})},Qt=Jt=>{Bs(Jt,{size:16})};ee(Kt,Jt=>{r()===e(j).id?Jt(Xt):Jt(Qt,!1)})}d(kt),d(Dt),Ee(()=>Se(vt,` ${e(j).original.storeName??""} `)),gt("click",kt,on(()=>ie(e(j).id,e(j).original.moksaId))),n(wt,Dt)},ot=wt=>{var Dt=T(),Yt=g(Dt);{var vt=Kt=>{var Xt=Di(),Qt=c(Xt);Sr(Qt,{size:20,class:"text-[#3D81FC]"});var Jt=u(Qt);d(Xt),Ee(()=>Se(Jt,` ${e(j).original.storeManager??""}`)),n(Kt,Xt)},kt=Kt=>{var Xt=T(),Qt=g(Xt);{var Jt=tt=>{var ct=Si(),nt=c(ct,!0);d(ct),Ee(()=>Se(nt,e(j).original.location)),n(tt,ct)},qe=tt=>{var ct=D(()=>e(B).render());ha(tt,{get of(){return e(ct)}})};ee(Qt,tt=>{e(B).id==="location"?tt(Jt):tt(qe,!1)},!0)}n(Kt,Xt)};ee(Yt,Kt=>{e(B).id==="storeManager"?Kt(vt):Kt(kt,!1)},!0)}n(wt,Dt)};ee(Ot,wt=>{e(B).id==="storeName"?wt(xt):wt(ot,!1)},!0)}n(yt,Ct)};ee(bt,yt=>{e(B).id==="dateOfRegistration"?yt(ut):yt(dt,!1)},!0)}n(et,Xe)};ee(we,et=>{e(B).id==="action"?et(fe):et(Ye,!1)})}n(E,G)},$$slots:{default:!0}}))}}})}),n(U,je)},$$slots:{default:!0}}));var F=u(v,2);{var P=U=>{la(U,{class:"bg-transparent grid grid-cols-4 grid-row-1 gap-4 p-4",children:(te,je)=>{var Ne=Ai(),Ue=g(Ne),B=c(Ue),ce=u(c(B),2),oe=c(ce,!0);d(ce),d(B),d(Ue);var he=u(Ue,2),Ke=c(he),E=u(c(Ke),2),ue=c(E,!0);d(E),d(Ke),d(he);var G=u(he,2),we=c(G),fe=u(c(we),2),Ye=c(fe);d(fe),d(we),d(G),Ee(()=>{Se(oe,x()[0].camera_count),Se(ue,x()[0].theft_detected_count),Se(Ye,`${x()[0].theft_prevented_count??""}/${x()[0].theft_detected_count??""}`)}),n(te,Ne)},$$slots:{default:!0}})};ee(F,U=>{r()===e(j).id&&U(P)})}n(Pe,Ge)}}})}),n(xe,ze)},$$slots:{default:!0}})),n(z,Z)},$$slots:{default:!0}})),d(Le);var He=u(Le,2);{var Qe=z=>{var Me=Ri(),Z=c(Me),ke=D(()=>!C());St(Z,{size:"sm",variant:"outline",class:"bg-transparent hover:bg-[#015a62] hover:text-white text-[#727272] gap-2",get disabled(){return e(ke)},$$events:{click:()=>Oa(e(H),A()-1)},children:(De,Pe)=>{$e();var Ae=We("Previous");n(De,Ae)},$$slots:{default:!0}});var Re=u(Z,2),xe=c(Re),Ce=c(xe,!0);d(xe);var ze=u(xe,2),Fe=c(ze,!0);d(ze),$e(),d(Re);var Ve=u(Re,2),j=D(()=>!$());St(Ve,{size:"sm",variant:"outline",get disabled(){return e(j)},class:"bg-transparent hover:bg-[#015a62] hover:text-white text-[#727272] gap-2",$$events:{click:()=>Oa(e(H),A()+1)},children:(De,Pe)=>{$e();var Ae=We("Next");n(De,Ae)},$$slots:{default:!0}}),d(Me),Ee(()=>{Se(Ce,A()+1<10?"0"+(A()+1):A()+1),Se(Fe,b()<10?"0"+b():b())}),n(z,Me)};ee(He,z=>{b()>1&&z(Qe)})}n(s,se),jt()}var Fi=S('<!> <button class="absolute -top-1 right-4 p-2 grid place-items-center rounded-full text-[#E71D36] bg-[#E71D36]/15 cursor-pointer"><!></button>',1),ji=S("<option> </option>"),Li=S('<div class="px-4 py-2"><!> <form><div class="space-y-4"><div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div></div> <div class="grid grid-cols-4 items-center gap-4 relative py-2"><!> <select id="store-timezone" class="col-span-3 w-full border border-[#F2F4F7] rounded-md px-3 py-2"><option disabled selected>Select timezone</option><!></select> <!></div> <div class="grid grid-cols-4 items-center gap-4 py-2"><!> <div class="col-span-3"><!></div></div> <div class="grid grid-cols-4 items-center gap-4 py-2"><!> <!></div> <div class="grid grid-cols-4 items-center gap-4 py-2"><!> <!></div> <div class="mt-6 flex justify-end space-x-3"><!> <!></div></form></div>'),Ni=S("<!> <!>",1);function zo(s,t){Ft(t,!1);const a=ra(),r=()=>X(_o,"$selectedNode",a);let o=L(t,"refreshStoreData",8),l=_(!1),p=_(""),f=_(""),m=_(""),x=_(""),b=_(""),A=_(),C=_(),$=_(),h=_(),k=_(!1);const w=["EST","PST","MST","UTC","CST"],R=async()=>(console.log(e(p),e(f),e(m),e(x),e(b)),await fetch("/api/node/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e(p),sessionId:r()?.session,address:e(f),pin:e(m),country:e(x),manager:e(b),timezone:e(h),storeOpenTime:e(A),storeCloseTime:e(C),isStore24hr:e($),hasKitchen:e(k)})}).then(async()=>{ua("Store added"),i(l,!1),await o()()}).catch(N=>console.log(N)),!0);Bt(),tr(s,{get open(){return e(l)},set open(N){i(l,N)},children:(N,I)=>{var W=Ni(),le=g(W);Fr(le,{children:(O,ve)=>{var Y=T(),H=g(Y);Tt(H,t,"default",{},null),n(O,Y)},$$slots:{default:!0}});var Q=u(le,2);ar(Q,{closeButton:!1,class:"sm:max-w-[460px] bg-white shadow-lg rounded-xl max-h-[80%] overflow-y-scroll",children:(O,ve)=>{var Y=Li(),H=c(Y);rr(H,{class:"relative",children:(P,U)=>{var te=Fi(),je=g(te);sr(je,{class:"text-2xl font-semibold mb-6",children:(B,ce)=>{$e();var oe=We("Add New Store");n(B,oe)},$$slots:{default:!0}});var Ne=u(je,2),Ue=c(Ne);yr(Ue,{class:"h-4 w-4"}),d(Ne),gt("click",Ne,()=>i(l,!1)),n(P,te)},$$slots:{default:!0}});var me=u(H,2),ye=c(me),re=c(ye),pe=c(re);da(pe,{for:"nodeName",class:"block text-sm font-medium text-gray-700",children:(P,U)=>{$e();var te=We("Store Name");n(P,te)},$$slots:{default:!0}});var Be=u(pe,2);ia(Be,{id:"nodeName",name:"nodeName",placeholder:"Enter store name",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(p)},set value(P){i(p,P)},$$legacy:!0}),d(re);var Je=u(re,2),ge=c(Je);da(ge,{for:"address",class:"block text-sm font-medium text-gray-700",children:(P,U)=>{$e();var te=We("Address");n(P,te)},$$slots:{default:!0}});var Oe=u(ge,2);ia(Oe,{id:"address",name:"address",placeholder:"Enter address",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(f)},set value(P){i(f,P)},$$legacy:!0}),d(Je);var q=u(Je,2),K=c(q);da(K,{for:"pincode",class:"block text-sm font-medium text-gray-700",children:(P,U)=>{$e();var te=We("Zip");n(P,te)},$$slots:{default:!0}});var Ie=u(K,2);ia(Ie,{id:"pincode",name:"pincode",placeholder:"Enter Zip",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(m)},set value(P){i(m,P)},$$legacy:!0}),d(q);var ae=u(q,2),ie=c(ae);da(ie,{for:"country",class:"block text-sm font-medium text-gray-700",children:(P,U)=>{$e();var te=We("Country");n(P,te)},$$slots:{default:!0}});var _e=u(ie,2);ia(_e,{id:"country",name:"country",placeholder:"Enter country",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(x)},set value(P){i(x,P)},$$legacy:!0}),d(ae);var Te=u(ae,2),se=c(Te);da(se,{for:"manager",class:"block text-sm font-medium text-gray-700",children:(P,U)=>{$e();var te=We("Manager");n(P,te)},$$slots:{default:!0}});var Le=u(se,2);ia(Le,{id:"manager",name:"manager",placeholder:"Enter manager name",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(b)},set value(P){i(b,P)},$$legacy:!0}),d(Te);var de=u(Te,2),He=c(de);da(He,{for:"hasKitchen",class:"block text-sm font-medium text-gray-700",children:(P,U)=>{$e();var te=We("Has Kitchen");n(P,te)},$$slots:{default:!0}});var Qe=u(He,2);rs(Qe,{id:"store-has-kitchen",get checked(){return e(k)},set checked(P){i(k,P)},$$legacy:!0}),d(de),d(ye);var z=u(ye,2),Me=c(z);da(Me,{for:"store-timezone",children:(P,U)=>{$e();var te=We("Timezone");n(P,te)},$$slots:{default:!0}});var Z=u(Me,2);Ee(()=>{e(h),po(()=>{})});var ke=c(Z);ke.value=((ke.__value="")==null,"");var Re=u(ke);mt(Re,1,()=>w,aa,(P,U)=>{var te=ji(),je={},Ne=c(te,!0);d(te),Ee(()=>{je!==(je=e(U))&&(te.value=(te.__value=e(U))==null?"":e(U)),Se(Ne,e(U))}),n(P,te)}),d(Z);var xe=u(Z,2);Bs(xe,{class:"absolute pointer-events-none right-3 top-1/2 transform -translate-y-1/2 z-20"}),d(z);var Ce=u(z,2),ze=c(Ce);da(ze,{for:"store-24hr",children:(P,U)=>{$e();var te=We("24-Hour Operation");n(P,te)},$$slots:{default:!0}});var Fe=u(ze,2),Ve=c(Fe);rs(Ve,{id:"store-24hr",get checked(){return e($)},set checked(P){i($,P)},$$legacy:!0}),d(Fe),d(Ce);var j=u(Ce,2),De=c(j);da(De,{for:"store-open-time",children:(P,U)=>{$e();var te=We("Open Time");n(P,te)},$$slots:{default:!0}});var Pe=u(De,2);ia(Pe,{id:"store-open-time",type:"time",class:"col-span-3",get disabled(){return e($)},get value(){return e(A)},set value(P){i(A,P)},$$legacy:!0}),d(j);var Ae=u(j,2),J=c(Ae);da(J,{for:"store-close-time",children:(P,U)=>{$e();var te=We("Close Time");n(P,te)},$$slots:{default:!0}});var Ge=u(J,2);ia(Ge,{id:"store-close-time",type:"time",class:"col-span-3",get disabled(){return e($)},get value(){return e(C)},set value(P){i(C,P)},$$legacy:!0}),d(Ae);var v=u(Ae,2),y=c(v);St(y,{type:"button",variant:"outline",class:"px-4 py-2 border border-[#F2F4F7] rounded-md text-gray-700",$$events:{click:()=>i(l,!1)},children:(P,U)=>{$e();var te=We("Cancel");n(P,te)},$$slots:{default:!0}});var F=u(y,2);St(F,{type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-md",children:(P,U)=>{$e();var te=We("Submit");n(P,te)},$$slots:{default:!0}}),d(v),d(me),d(Y),bo(Z,()=>e(h),P=>i(h,P)),gt("submit",me,vo(R)),n(O,Y)},$$slots:{default:!0}}),n(N,W)},$$slots:{default:!0},$$legacy:!0}),jt()}var Mi=S('<span class="absolute left-2 flex h-3.5 w-3.5 items-center justify-center"><!></span> <!>',1);function so(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["class","checked"]);Ft(t,!1);let o=L(t,"class",24,()=>{}),l=L(t,"checked",28,()=>{});Bt();var p=D(()=>Ba("data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",o()));il(s,it({get class(){return e(p)}},()=>r,{get checked(){return l()},set checked(f){l(f)},$$events:{click(f){Na.call(this,t,f)},keydown(f){Na.call(this,t,f)},focusin(f){Na.call(this,t,f)},focusout(f){Na.call(this,t,f)},pointerdown(f){Na.call(this,t,f)},pointerleave(f){Na.call(this,t,f)},pointermove(f){Na.call(this,t,f)}},children:(f,m)=>{var x=Mi(),b=g(x),A=c(b);cl(A,{children:($,h)=>{Hn($,{class:"h-4 w-4"})},$$slots:{default:!0}}),d(b);var C=u(b,2);Tt(C,t,"default",{},null),n(f,x)},$$slots:{default:!0},$$legacy:!0})),jt()}var Oi=S('<div class="p-2"><!></div> <!>',1),Ii=S("<!> <!>",1),zi=S("<!>Filters",1),Vi=S("<!> <!> <!> <!> <!> <!> <!>",1),Ui=S("<!> <!>",1),Hi=S("<!>Export Reports",1),qi=S('<section class="w-full p-4 flex flex-col gap-4 px-6 max-h-[calc(100vh-75px)] overflow-y-auto overflow-x-clip"><div class="flex items-start justify-between w-full"><div class="grid grid-rows-1 grid-cols-4 gap-4 h-[140px]"><div class="col-span-1 border rounded-lg bg-gradient-to-r from-[#02A7FD] to-[#141C64] px-4 py-3 h-[85px] relative flex items-center gap-3"><span class="size-[60px] grid place-items-center text-white bg-white bg-opacity-20 rounded-full"><!></span> <span><p class="text font-semibold text-white">No. of active cameras</p> <p class="text-white text-xl font-bold"><!></p></span></div> <div class="col-span-1 border rounded-lg h-[85px] bg-gradient-to-r from-[#E4DF00] to-[#89B900] py-3 px-4 relative flex items-center gap-3"><span class="size-[60px] grid place-items-center text-white bg-white bg-opacity-20 rounded-full"><svg width="40" height="40" viewBox="0 0 22 22" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.2503 9.71873L17.5622 10.441C17.604 10.5392 17.6935 10.6045 17.8085 10.627C17.9244 10.648 18.0352 10.6195 18.1188 10.546L18.9301 9.83196C19.0128 9.75921 19.046 9.66096 19.0222 9.55896C18.9983 9.45696 18.9216 9.38046 18.8108 9.34221L18.0583 9.09096L17.2503 9.71873ZM16.1159 12.712C16.5242 12.904 16.808 13.2805 16.8122 13.7163L16.8753 17.9769C16.8838 18.6122 16.306 19.1327 15.5858 19.1402C14.8639 19.1477 14.2724 18.6392 14.2639 18.0054L14.2111 14.4302L11.3747 13.1109L10.9997 12.9362C10.9827 13.0224 10.9648 13.1087 10.9477 13.1934L10.4023 15.9047H10.398C10.3349 16.2257 10.1167 16.5212 9.77157 16.6974L5.34139 18.9826C4.71922 19.3036 3.91896 19.1206 3.55418 18.5716C3.1894 18.0241 3.39736 17.3199 4.02122 16.9989L7.92711 14.9852L8.57485 11.7692C8.54843 11.6792 8.52882 11.5869 8.51774 11.4924C8.40439 10.5804 8.37371 9.78916 8.45042 9.07149C8.95241 7.96973 9.57883 6.83872 11.2451 6.57779C12.0326 6.50129 12.8158 6.68879 13.5053 7.01204C13.5121 7.01579 13.5206 7.01954 13.5274 7.02179C13.8223 7.15979 14.0967 7.32328 14.3481 7.49954C14.3916 7.53029 14.4351 7.56104 14.4768 7.59329L14.9413 8.69953L15.3257 8.40028L15.4322 8.31778L15.572 8.21053L15.8183 8.01853L16.5598 7.44253C16.5862 7.42303 16.6118 7.40428 16.6407 7.38703C16.7328 7.32929 16.8351 7.29103 16.9399 7.27003C17.0575 7.24528 17.1802 7.24303 17.2978 7.26253C17.4811 7.29328 17.6558 7.37578 17.7887 7.50852C18.1075 7.82502 18.0743 8.30953 17.7146 8.58927L16.4277 9.58752L15.1859 10.5513C15.099 10.63 14.9899 10.693 14.8629 10.7335C14.4112 10.8798 13.9092 10.6758 13.7439 10.2768L13.0459 8.61176C13.0152 8.66201 12.9871 8.71376 12.9632 8.76551C12.7297 9.274 12.7169 10.006 12.8515 11.0829C12.8558 11.1212 12.8601 11.1579 12.8626 11.1939L16.1159 12.712ZM11.2068 10.4289C11.1804 10.4177 11.1565 10.4057 11.1301 10.3959L11.2068 10.4289ZM9.14688 6.89038C9.62671 6.46813 10.2574 6.14563 11.1386 6.00913L11.1582 6.00688C12.0966 5.91314 13.0153 6.12764 13.814 6.50188C14.1932 6.68038 14.5495 6.89339 14.8657 7.12813C15.06 7.27213 15.2389 7.42212 15.4043 7.57512L16.1304 7.01037C16.1978 6.95637 16.2719 6.91062 16.3461 6.87012C16.0563 6.39611 15.7461 5.96037 15.4162 5.56437C14.8904 4.93286 14.3168 4.39737 13.7142 3.95188C12.1742 2.81712 10.4304 2.26212 8.73097 2.13763C7.52416 2.04913 6.33948 2.17588 5.26646 2.46612C4.19514 2.75412 3.2372 3.20336 2.47788 3.75988C1.12192 4.75737 0.412832 6.09767 0.879872 7.45895C1.12873 8.18494 2.04066 9.20795 3.147 9.9609C3.74019 10.3659 4.38621 10.6884 5.0041 10.8347C5.58193 10.9727 6.13677 10.9554 6.59445 10.7004C6.92172 10.5182 7.21149 10.2069 7.44075 9.73816C7.53876 9.53865 7.62655 9.34066 7.71603 9.13891C8.06717 8.3514 8.44205 7.51063 9.14688 6.89038ZM14.1284 3.50561C14.1114 3.39611 14.1003 3.28512 14.1003 3.17185C14.1003 1.91635 15.2568 0.900879 16.6809 0.900879C18.1077 0.900879 19.2616 1.91863 19.2616 3.17185C19.2616 4.42736 18.1051 5.44283 16.6809 5.44283C16.4696 5.44283 16.2667 5.41958 16.0699 5.37983C15.4767 4.63808 14.8221 4.01635 14.1284 3.50561Z" fill="currentColor"></path></svg></span> <span><p class="text font-semibold text-white">Suspicious activity</p> <p class="text-white text-xl font-bold"><!></p></span></div> <div class="col-span-1 border rounded-lg bg-gradient-to-r from-[#00FEA3] to-[#007077] px-4 py-3 relative h-[85px] invisible flex items-center gap-3"><span class="size-[60px] grid place-items-center text-white bg-white bg-opacity-20 rounded-full"><!></span> <span><p class="text font-semibold text-white">Busy hours</p> <p class="text-white text-xl font-bold"><!></p></span></div> <div class="invisible col-span-1 border rounded-lg bg-gradient-to-r from-[#FFB156] to-[#FF007A] px-4 py-3 relative h-[85px] flex items-center gap-3"><span class="size-[60px] grid place-items-center text-white bg-white bg-opacity-20 rounded-full"><!></span> <span><p class="text font-semibold text-white">Most visited Aisle</p> <p class="text-white text-xl font-bold"><!></p></span></div></div> <div class="flex items-center justify-end gap-4"><!> <!></div></div> <div class="flex items-center justify-between"><span class="relative"><!> <!> <button class="absolute top-1/2 -translate-y-1/2 right-2"><!></button></span> <span class="flex items-center gap-3"><!> <!></span></div> <div class="h-full w-full rounded-t-xl flex flex-col mt-4"><span class="h-[50px] bg-[#050F40] px-4 py-2 rounded-t-xl"><p class="text-white font-medium text-lg">Stores</p></span> <!></div></section>');function Gi(s,t){Ft(t,!1);const a=ra(),r=()=>X(x,"$cardData",a),o=_(),l=_(),p=_(),f=_(),m=_();let x=st([]),b=L(t,"allStores",28,()=>[]),A=L(t,"theftandcamera",28,()=>[]),C=L(t,"nodes",12),$=L(t,"user",8),h=L(t,"token",8);const k=async()=>{let E=b().filter(fe=>fe.id!==-1);const ue=new Date,G=new Date(ue);G.setFullYear(G.getFullYear()-1);const we=fe=>fe.toISOString().split("T")[0];try{const fe=await Promise.all(E.map(async et=>{const Xe=await fetch(`https://api.moksa.ai/store/getStoreByStoreIdWithAllDetails/${et.id}/${we(G)}/${we(ue)}`,{method:"GET",headers:{Authorization:`Bearer ${h()}`,"Content-Type":"application/json"}});if(!Xe.ok)throw new Error(`Failed to fetch store details for store ${et.id}`);return Xe.json()}));return fe?.length>0&&x.set(fe),fe.flat()}catch(fe){console.error("Error fetching store details:",fe)}};Qa(async()=>{k()});const w=async()=>{const E=new Date,ue=new Date(E),G=new Date(E);ue.setFullYear(E.getFullYear()-1),G.setDate(E.getDate()-7);const we=ut=>ut.toISOString().split("T")[0],fe=await fetch(`https://api.moksa.ai/store/getAllStoresWithTheftAndCameraDetails/1/100/${we(ue)}/${we(E)}`,{method:"GET",headers:{Authorization:`Bearer ${h()}`}}),Ye=await fetch("${import.meta.env.PUBLIC_MOKSA_BASE_URL}/store/getAllStoresForDropdown",{method:"GET",headers:{Authorization:`Bearer ${h()}`,enableallstores:"true"}}),et=await dn.collection("node").getFullList({}),Xe=await fe.json(),bt=await Ye.json();A(Xe?.data?.data===void 0?[]:Xe?.data?.data),b(bt?.data?.data===void 0?[]:bt?.data?.data),C(et),console.log("updated theft and camera",Xe)};console.log(e(o),"combinedStores");const R=b().filter(E=>E.id!==-1).map(E=>({value:E.id,label:E.name}));let N=_(""),I=_("");function W(E){i(N,e(N)===E?"":E)}function le(E){i(I,e(I)===E?"":E)}function Q(E){const ue=String(E);return ue.includes(",")||ue.includes('"')?`"${ue.replace(/"/g,'""')}"`:ue}function O(E,ue,G=[]){const we=E.filter(dt=>dt!=null),fe=Object.keys(we[0]).filter(dt=>!G.includes(dt)).join(","),Ye=we.map(dt=>Object.keys(dt).filter(yt=>!G.includes(yt)).map(yt=>Q(dt[yt])).join(",")).join(`
`),et=fe+`
`+Ye,Xe=new Blob([et],{type:"text/csv"}),bt=URL.createObjectURL(Xe),ut=document.createElement("a");ut.href=bt,ut.download=ue,document.body.appendChild(ut),ut.click(),document.body.removeChild(ut)}let ve=_(0),Y=_(""),H=_("");Aa(),M(()=>(Mt(b()),Mt(A()),Mt(C())),()=>{i(o,b()?.filter(E=>E.id!==-1).map(E=>{const ue=A().find(we=>we.name===E.name)||{},G=C().find(we=>we.moksaId===E.id)||{};return{...E,...ue,lensId:G?G.id:null}}))}),M(()=>e(o),()=>{i(l,[...new Set(e(o).map(E=>E.country))].filter(Boolean))}),M(()=>e(o),()=>{i(p,[...new Set(e(o).map(E=>E.manager))].filter(Boolean))}),M(()=>(e(o),e(N),e(I)),()=>{i(f,e(o).filter(E=>(!e(N)||E.country===e(N))&&(!e(I)||E.manager===e(I))))}),M(()=>e(H),()=>{i(m,R.filter(E=>E.label.toLowerCase().includes(e(H).toLowerCase())))}),na(),Bt();var me=qi(),ye=c(me),re=c(ye),pe=c(re),Be=c(pe),Je=c(Be);xn(Je,{size:40}),d(Be);var ge=u(Be,2),Oe=u(c(ge),2),q=c(Oe);{var K=E=>{var ue=We();Ee(()=>Se(ue,r()[e(ve)]?.data?.[0].camera_count)),n(E,ue)},Ie=E=>{ma(E)};ee(q,E=>{r().length!==0?E(K):E(Ie,!1)})}d(Oe),d(ge),d(pe);var ae=u(pe,2),ie=u(c(ae),2),_e=u(c(ie),2),Te=c(_e);{var se=E=>{var ue=We();Ee(()=>Se(ue,r()[e(ve)]?.data?.[0].theft_detected_count)),n(E,ue)},Le=E=>{ma(E)};ee(Te,E=>{r().length!==0?E(se):E(Le,!1)})}d(_e),d(ie),d(ae);var de=u(ae,2),He=c(de),Qe=c(He);Co(Qe,{size:40}),d(He);var z=u(He,2),Me=u(c(z),2),Z=c(Me);{var ke=E=>{var ue=We();Ee(()=>Se(ue,r()[e(ve)]?.data?.[0].busy_hours===null?"N/A":r()[e(ve)]?.data?.[0].busy_hours)),n(E,ue)},Re=E=>{ma(E)};ee(Z,E=>{r().length!==0?E(ke):E(Re,!1)})}d(Me),d(z),d(de);var xe=u(de,2),Ce=c(xe),ze=c(Ce);al(ze,{size:40}),d(Ce);var Fe=u(Ce,2),Ve=u(c(Fe),2),j=c(Ve);{var De=E=>{var ue=We();Ee(()=>Se(ue,r()[e(ve)]?.data?.[0].aisle_name===null?"N/A":r()[e(ve)]?.data?.[0].aisle_name)),n(E,ue)},Pe=E=>{ma(E)};ee(j,E=>{r().length!==0?E(De):E(Pe,!1)})}d(Ve),d(Fe),d(xe),d(re);var Ae=u(re,2),J=c(Ae);{var Ge=E=>{zo(E,{refreshStoreData:w,children:(ue,G)=>{St(ue,{class:"bg-[#3D81FC] text-white hover:bg-white hover:text-[#3D81FC]",children:(we,fe)=>{$e();var Ye=We("Add Store +");n(we,Ye)},$$slots:{default:!0}})},$$slots:{default:!0}})};ee(J,E=>{$()?.role!=="Operators"&&$()?.role!=="admin"&&$()?.role!=="storeManager"&&$()?.role!=="storeEmployee"&&E(Ge)})}var v=u(J,2);pr(v,{portal:null,children:(E,ue)=>{var G=Ii(),we=g(G);hr(we,{class:"w-[150px] bg-[#F4F4F4] border text-xs px-1 border-[#E0E0E0] rounded-lg bg-transparent",children:(Ye,et)=>{var Xe=D(()=>b().length>0?R?.[e(ve)]?.label:"No Stores");vr(Ye,{get placeholder(){return e(Xe)}})},$$slots:{default:!0}});var fe=u(we,2);gr(fe,{class:"max-h-[200px] overflow-y-auto",children:(Ye,et)=>{var Xe=Oi(),bt=g(Xe),ut=c(bt);ia(ut,{type:"text",placeholder:"Search stores...",class:"mb-2",get value(){return e(H)},set value(yt){i(H,yt)},$$legacy:!0}),d(bt);var dt=u(bt,2);mr(dt,{children:(yt,Ct)=>{var Ot=T(),xt=g(Ot);{var ot=Dt=>{var Yt=T(),vt=g(Yt);mt(vt,1,()=>e(m),aa,(kt,Kt,Xt)=>{Ca(kt,{class:"px-1",get value(){return e(Kt).value},get label(){return e(Kt).label},$$events:{click:()=>i(ve,Xt)},children:(Qt,Jt)=>{$e();var qe=We();Ee(()=>Se(qe,e(Kt).label)),n(Qt,qe)},$$slots:{default:!0}})}),n(Dt,Yt)},wt=Dt=>{Ca(Dt,{disabled:!0,children:(Yt,vt)=>{$e();var kt=We("N/A");n(Yt,kt)},$$slots:{default:!0}})};ee(xt,Dt=>{e(m).length>0?Dt(ot):Dt(wt,!1)})}n(yt,Ot)},$$slots:{default:!0}}),n(Ye,Xe)},$$slots:{default:!0}}),n(E,G)},$$slots:{default:!0}}),d(Ae),d(ye);var y=u(ye,2),F=c(y),P=c(F);ia(P,{class:"w-full max-w-[500px] min-w-[450px] pl-8",placeholder:"Search",get value(){return e(Y)},set value(E){i(Y,E)},$$legacy:!0});var U=u(P,2);An(U,{size:18,class:"absolute top-1/2 -translate-y-1/2 left-2"});var te=u(U,2),je=c(te);{var Ne=E=>{yr(E,{size:18})};ee(je,E=>{e(Y)&&E(Ne)})}d(te),d(F);var Ue=u(F,2),B=c(Ue);Cn(B,{children:(E,ue)=>{var G=Ui(),we=g(G);Dn(we,{children:(Ye,et)=>{St(Ye,{variant:"outline",class:"flex items-center gap-1 text-sm",children:(Xe,bt)=>{var ut=zi(),dt=g(ut);un(dt,{size:18}),$e(),n(Xe,ut)},$$slots:{default:!0}})},$$slots:{default:!0}});var fe=u(we,2);Sn(fe,{class:"max-h-[250px] overflow-y-scroll",children:(Ye,et)=>{var Xe=Vi(),bt=g(Xe);Ys(bt,{children:(ot,wt)=>{$e();var Dt=We("Location");n(ot,Dt)},$$slots:{default:!0}});var ut=u(bt,2);ps(ut,{});var dt=u(ut,2);mt(dt,1,()=>e(l),aa,(ot,wt)=>{var Dt=D(()=>e(N)===e(wt));so(ot,{get checked(){return e(Dt)},onCheckedChange:()=>W(e(wt)),children:(Yt,vt)=>{$e();var kt=We();Ee(()=>Se(kt,e(wt))),n(Yt,kt)},$$slots:{default:!0}})});var yt=u(dt,2);ps(yt,{});var Ct=u(yt,2);Ys(Ct,{children:(ot,wt)=>{$e();var Dt=We("Manager");n(ot,Dt)},$$slots:{default:!0}});var Ot=u(Ct,2);ps(Ot,{});var xt=u(Ot,2);mt(xt,1,()=>e(p),aa,(ot,wt)=>{var Dt=D(()=>e(I)===e(wt));so(ot,{get checked(){return e(Dt)},onCheckedChange:()=>le(e(wt)),children:(Yt,vt)=>{$e();var kt=We();Ee(()=>Se(kt,e(wt))),n(Yt,kt)},$$slots:{default:!0}})}),n(Ye,Xe)},$$slots:{default:!0}}),n(E,G)},$$slots:{default:!0}});var ce=u(B,2);{var oe=E=>{St(E,{class:"flex items-center gap-1 bg-[#3D81FC] text-sm hover:bg-white hover:text-[#3D81FC]",$$events:{click:()=>{const ue=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});O(e(o),`combined_stores_${ue}.csv`),O(r().map(G=>G.data[0]),`stores_${ue}.csv`,["floormap","logo","updatedAt"])}},children:(ue,G)=>{var we=Hi(),fe=g(we);Ur(fe,{size:18}),$e(),n(ue,we)},$$slots:{default:!0}})};ee(ce,E=>{$()?.role!=="Operators"&&$()?.role!=="adminNonPaid"&&$()?.role!=="storeEmployee"&&E(oe)})}d(Ue),d(y);var he=u(y,2),Ke=u(c(he),2);Bi(Ke,{get combinedStores(){return e(f)},get searchStore(){return e(Y)},get token(){return h()},get user(){return $()},refreshStoreData:w}),d(he),d(me),gt("click",te,()=>i(Y,"")),n(s,me),jt()}var Wi=S("<!> <!>",1),Yi=S('<div class="flex items-center min-w-[200px] text-start gap-2 text-sm"><!> <span class="text-sm"> </span></div>'),Ki=S('<span class="flex items-center justify-center text-center"><!></span>'),Zi=S("<!> <!>",1),Ji=S('<div class="m-0"><!></div>');function Xi(s,t){Ft(t,!1);const a=ra(),r=()=>X(e(h),"$tableAttrs",a),o=()=>X(e(C),"$headerRows",a),l=()=>X(e(k),"$tableBodyAttrs",a),p=()=>X(e($),"$pageRows",a),f=_(),m=_(),x=_(),b=_(),A=_(),C=_(),$=_(),h=_(),k=_();let w=L(t,"aisleData",8);console.log("aisledata",w()),Aa(),M(()=>Mt(w()),()=>{i(f,w()?.map(I=>({storeName:I.store,customers:I.noofcustomers,busyHours:I.busyhour,mostVisitedAisle:I.aisle_name})))}),M(()=>e(f),()=>{i(m,st(e(f)))}),M(()=>(e(f),e(m)),()=>{i(x,wa(e(f),I=>e(m).subscribe(I)))}),M(()=>(e(x),ga),()=>{i(b,Ya(e(x),{sort:Ka(),filter:Za({fn:({filterValue:I,value:W})=>W.toLowerCase().includes(I.toLowerCase())}),select:ga()}))}),M(()=>e(b),()=>{i(A,e(b).createColumns([e(b).column({accessor:"storeName",header:"Store Name"}),e(b).column({accessor:"customers",header:"Customers"}),e(b).column({accessor:"busyHours",header:"Busy Hours"})]))}),M(()=>(e(C),e($),e(h),e(k),e(b),e(A)),()=>{(I=>(pt(i(C,I.headerRows),"$headerRows",a),pt(i($,I.pageRows),"$pageRows",a),pt(i(h,I.tableAttrs),"$tableAttrs",a),pt(i(k,I.tableBodyAttrs),"$tableBodyAttrs",a)))(e(b).createViewModel(e(A)))}),na(),Bt();var R=Ji(),N=c(R);Ua(N,it(r,{class:"w-full",children:(I,W)=>{var le=Zi(),Q=g(le);Ha(Q,{children:(ve,Y)=>{var H=T(),me=g(H);mt(me,1,o,aa,(ye,re)=>{var pe=D(()=>e(re).attrs());Wt(ye,{get rowAttrs(){return e(pe)},children:(Be,Je)=>{la(Be,{class:"bg-transparent flex flex-row border-b items-center justify-between",children:(ge,Oe)=>{var q=T(),K=g(q);mt(K,1,()=>e(re).cells,Ie=>Ie.id,(Ie,ae)=>{var ie=D(()=>e(ae).attrs()),_e=D(()=>e(ae).props());Wt(Ie,{get attrs(){return e(ie)},get props(){return e(_e)},children:Gt,$$slots:{default:(Te,se)=>{const Le=D(()=>se.attrs),de=D(()=>se.props);qa(Te,it(()=>e(Le),{class:"text-[#727272] whitespace-nowrap h-full flex items-center justify-center  flex-1 w-full ",children:(He,Qe)=>{var z=D(()=>`hover:bg-transparent text-[#727272] opacity-60 ${e(ae).id==="storeName"?"min-w-[200px] text-start justify-start":""}`);St(He,{variant:"ghost",get class(){return e(z)},$$events:{click(...Me){e(de).sort.toggle?.apply(this,Me)}},children:(Me,Z)=>{var ke=Wi(),Re=g(ke),xe=D(()=>e(ae).render());ha(Re,{get of(){return e(xe)}});var Ce=u(Re,2);or(Ce,{class:"ml-2 h-4 w-4"}),n(Me,ke)},$$slots:{default:!0}})},$$slots:{default:!0}}))}}})}),n(ge,q)},$$slots:{default:!0}})},$$slots:{default:!0}})}),n(ve,H)},$$slots:{default:!0}});var O=u(Q,2);ja(O,it(l,{children:(ve,Y)=>{var H=T(),me=g(H);mt(me,1,p,ye=>ye.id,(ye,re)=>{var pe=D(()=>e(re).attrs());Wt(ye,{get rowAttrs(){return e(pe)},children:Gt,$$slots:{default:(Be,Je)=>{const ge=D(()=>Je.rowAttrs);la(Be,it(()=>e(ge),{class:"border-b flex items-center w-full justify-between",children:(Oe,q)=>{var K=T(),Ie=g(K);mt(Ie,1,()=>e(re).cells,ae=>ae.id,(ae,ie)=>{var _e=D(()=>e(ie).attrs());Wt(ae,{get attrs(){return e(_e)},children:Gt,$$slots:{default:(Te,se)=>{const Le=D(()=>se.attrs);Da(Te,it(()=>e(Le),{class:"w-full flex items-center justify-center whitespace-nowrap",children:(de,He)=>{var Qe=T(),z=g(Qe);{var Me=ke=>{var Re=Yi(),xe=c(Re);Ga(xe,{size:16,class:"flex-shrink-0"});var Ce=u(xe,2),ze=c(Ce,!0);d(Ce),d(Re),Ee(()=>Se(ze,e(re).original.storeName)),n(ke,Re)},Z=ke=>{var Re=T(),xe=g(Re);{var Ce=Fe=>{var Ve=Ki(),j=c(Ve);{var De=Ae=>{xo(Ae,{})},Pe=Ae=>{rl(Ae,{})};ee(j,Ae=>{e(re).original.futurePrediction==="uptrend"?Ae(De):Ae(Pe,!1)})}d(Ve),n(Fe,Ve)},ze=Fe=>{var Ve=D(()=>e(ie).render());ha(Fe,{get of(){return e(Ve)}})};ee(xe,Fe=>{e(ie).id==="futurePrediction"?Fe(Ce):Fe(ze,!1)},!0)}n(ke,Re)};ee(z,ke=>{e(ie).id==="storeName"?ke(Me):ke(Z,!1)})}n(de,Qe)},$$slots:{default:!0}}))}}})}),n(Oe,K)},$$slots:{default:!0}}))}}})}),n(ve,H)},$$slots:{default:!0}})),n(I,le)},$$slots:{default:!0}})),d(R),n(s,R),jt()}var Qi=S(`<div class="flex items-center justify-between w-full p-4 h-[75px]"><div class="flex flex-col gap-3 w-1/3"><div class="flex items-center gap-2"><!> <div class="font-semibold text-xs"> </div></div></div> <div class="flex-col items-center justify-center flex gap-1 w-1/3"><span class="flex items-center gap-2 bg-[#FAAD14] rounded-lg px-1 py-.5"><span class="text-white text-xs">Cameras:</span> <span class="font-medium text-white text-sm"> </span></span> <span class="text-xs text-[#727272]">Manager</span> <span class=" text-[#323232] font-semibold text-xs"> </span></div> <div class="w-1/3 flex justify-end items-end"><div class="circle-progress svelte-h4809x"><svg viewBox="0 0 36 36" class="svelte-h4809x"><path d="M18 2.0845
            a 15.9155 15.9155 0 0 1 0 31.831
            a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#FF007A" stroke-width="3"></path><path d="M18 2.0845
            a 15.9155 15.9155 0 0 1 0 31.831
            a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#FFF900" stroke-width="3"></path></svg> <span class="progress-text svelte-h4809x"> </span></div></div></div>`);function Vo(s,t){Ft(t,!1);const a=ra(),r=()=>X(qn,"$mode",a),o=_();let l=L(t,"storeName",8),p=L(t,"cameraCount",8),f=L(t,"managerName",8),m=L(t,"activeCount",8),x=L(t,"totalCount",8),b=L(t,"bgColor",8);M(()=>(Mt(x()),Mt(m())),()=>{i(o,x()===0?0:Math.round(parseInt(m())/parseInt(x())*100))}),na(),Bt();var A=Qi(),C=c(A),$=c(C),h=c($);Ga(h,{size:18});var k=u(h,2),w=c(k,!0);Ee(()=>Se(w,l().length>12?l().slice(0,12)+"...":l())),d(k),d($),d(C);var R=u(C,2),N=c(R),I=u(c(N),2),W=c(I,!0);d(I),d(N);var le=u(N,4),Q=c(le,!0);Ee(()=>Se(Q,f().length>12?f().slice(0,12)+"...":f())),d(le),d(R);var O=u(R,2),ve=c(O),Y=c(ve),H=u(c(Y));Ee(()=>ya(H,"stroke-dasharray",`${parseInt(m())/parseInt(x())*100}, 100`)),d(Y);var me=u(Y,2);const ye=D(()=>parseInt(m())??""),re=D(()=>(parseInt(x())>1e3?`${Math.round(parseInt(x())/1e3)}k`:parseInt(x()))??"");var pe=c(me);Ee(()=>Se(pe,`${e(ye)}/${e(re)}`)),d(me),d(ve),d(O),d(A),Ee(()=>{ya(A,"style",r()!=="dark"?`background-color: ${b()};`:""),Se(W,p())}),n(s,A),jt()}var ed=S('<div class="flex items-center justify-center w-full h-full min-h-[200px]"><!></div>'),td=S("<!> <!>",1),ad=S('<div class="flex items-center gap-2 min-w-[150px] text-start justify-start"><!> <span class="text-sm font-medium whitespace-nowrap"> </span></div>'),rd=S('<span class="text-sm"> </span>'),sd=S('<span class="text-sm"> </span>'),od=S('<span class="text-sm"> </span>'),nd=S('<span class="text-sm"> </span>'),ld=S('<span class="text-sm"> </span>'),id=S("<!> <!>",1),dd=S('<div class="flex flex-row items-center justify-center space-x-4 py-4"><!> <div class="flex flex-row gap-2 items-center text-sm text-muted-foreground"><span class="p-2 rounded-md aspect-square bg-[#015a62] bg-opacity-10"> </span> of <span class="p-2 rounded-md aspect-square bg-[#015a62] bg-opacity-20"> </span> Page.</div> <!></div>'),cd=S('<div class="m-0"><!> <!></div>');function ud(s,t){Ft(t,!1);const a=ra(),r=()=>X(re(),"$dateRange",a),o=()=>X(pe(),"$selectedStore",a),l=()=>X(e(Y),"$pageIndex",a),p=()=>X(e(H),"$pageCount",a),f=()=>X(e(W),"$tableAttrs",a),m=()=>X(e(N),"$headerRows",a),x=()=>X(e(le),"$tableBodyAttrs",a),b=()=>X(e(I),"$pageRows",a),A=()=>X(e(ve),"$hasPreviousPage",a),C=()=>X(e(O),"$hasNextPage",a),$=_(),h=_(),k=_(),w=_(),R=_(),N=_(),I=_(),W=_(),le=_(),Q=_(),O=_(),ve=_(),Y=_(),H=_();let me=L(t,"efficiency",12),ye=L(t,"token",8),re=L(t,"dateRange",8),pe=L(t,"selectedStore",8),Be=L(t,"value",8),Je=1,ge=0,Oe=_(0),q=_(!1);const K=async()=>{Je++;const de=new Date;let He=new Date(de);switch(r()){case"7 Days":He.setDate(de.getDate()-7);break;case"15 Days":He.setDate(de.getDate()-15);break;case"30 Days":He.setDate(de.getDate()-30);break;case"12 Months":He.setFullYear(de.getFullYear()-1);break;default:He.setDate(de.getDate()-7)}const Qe=Be()?.start?`${Be().start.year}-${String(Be().start.month).padStart(2,"0")}-${String(Be().start.day).padStart(2,"0")}`:"",z=Be()?.end?`${Be().end.year}-${String(Be().end.month).padStart(2,"0")}-${String(Be().end.day).padStart(2,"0")}`:"",Me=ke=>ke.toISOString().split("T")[0];return(await fetch(`https://api.moksa.ai/store/storeEmployee/getEmployeeEfficiencyByStoreidDynamic/${o().value}/${r()==="custom"?Qe:Me(He)}/${Je}/100/${r()==="custom"?z:Me(de)}`,{method:"GET",headers:{Authorization:`Bearer ${ye()}`}})).json()};async function Ie(de){if(Oa(e(Y),de),i(Oe,de),l()===p()-1&&ge<me().total){i(q,!0);const He=await K();me(me().data=[...me()?.data,...He?.data?.data],!0),ge=me()?.data?.length,e(h).set(e($)),i(q,!1)}}M(()=>(r(),o()),()=>{(r()||o())&&i(Oe,0)}),M(()=>Mt(me()),()=>{i($,me()?.data?.map(de=>({employee:`${de?.employee}`,storeName:de?.store_name,customer:de.customer,idle:de.idle,mobile:de.mobile,fillingShelves:de.fillingShelves})))}),M(()=>e($),()=>{i(h,st(e($)))}),M(()=>(e($),e(h)),()=>{i(k,wa(e($),de=>e(h).subscribe(de)))}),M(()=>(e(k),e(Oe),ga),()=>{i(w,Ya(e(k),{page:nr({initialPageIndex:e(Oe),initialPageSize:5}),sort:Ka(),filter:Za({fn:({filterValue:de,value:He})=>He.toLowerCase().includes(de.toLowerCase())}),select:ga()}))}),M(()=>(e(w),Mt(me())),()=>{i(R,e(w).createColumns(me()?.column.filter(de=>!["store_id","first_name","last_name","role","efficiency_score"].includes(de.key)).map(de=>e(w).column({accessor:de.key==="employee_id"?"employee":de.key,header:de.header}))))}),M(()=>(e(N),e(I),e(W),e(le),e(Q),e(w),e(R)),()=>{(de=>(pt(i(N,de.headerRows),"$headerRows",a),pt(i(I,de.pageRows),"$pageRows",a),pt(i(W,de.tableAttrs),"$tableAttrs",a),pt(i(le,de.tableBodyAttrs),"$tableBodyAttrs",a),i(Q,de.pluginStates)))(e(w).createViewModel(e(R)))}),M(()=>(e(O),e(ve),e(Y),e(H),e(Q)),()=>{(de=>(pt(i(O,de.hasNextPage),"$hasNextPage",a),pt(i(ve,de.hasPreviousPage),"$hasPreviousPage",a),pt(i(Y,de.pageIndex),"$pageIndex",a),pt(i(H,de.pageCount),"$pageCount",a)))(e(Q).page)}),na(),Bt();var ae=cd(),ie=c(ae);{var _e=de=>{var He=ed(),Qe=c(He);ma(Qe),d(He),n(de,He)},Te=de=>{Ua(de,it(f,{class:"w-full",children:(He,Qe)=>{var z=id(),Me=g(z);Ha(Me,{children:(ke,Re)=>{var xe=T(),Ce=g(xe);mt(Ce,1,m,aa,(ze,Fe)=>{var Ve=D(()=>e(Fe).attrs());Wt(ze,{get rowAttrs(){return e(Ve)},children:(j,De)=>{la(j,{class:"bg-transparent flex flex-row border-b items-center",children:(Pe,Ae)=>{var J=T(),Ge=g(J);mt(Ge,1,()=>e(Fe).cells,v=>v.id,(v,y)=>{var F=D(()=>e(y).attrs()),P=D(()=>e(y).props());Wt(v,{get attrs(){return e(F)},get props(){return e(P)},children:Gt,$$slots:{default:(U,te)=>{const je=D(()=>te.attrs),Ne=D(()=>te.props);qa(U,it(()=>e(je),{class:"text-[#727272] whitespace-nowrap h-full flex items-center justify-center text-start flex-1 py-2 px-4 w-full",children:(Ue,B)=>{var ce=D(()=>`hover:bg-transparent text-[#727272] opacity-60 min-w-[150px] ${e(y).id==="employee"?"text-start justify-start":""} `);St(Ue,{variant:"ghost",get class(){return e(ce)},$$events:{click(...oe){e(Ne).sort.toggle?.apply(this,oe)}},children:(oe,he)=>{var Ke=td(),E=g(Ke),ue=D(()=>e(y).render());ha(E,{get of(){return e(ue)}});var G=u(E,2);or(G,{class:"ml-2 h-4 w-4"}),n(oe,Ke)},$$slots:{default:!0}})},$$slots:{default:!0}}))}}})}),n(Pe,J)},$$slots:{default:!0}})},$$slots:{default:!0}})}),n(ke,xe)},$$slots:{default:!0}});var Z=u(Me,2);ja(Z,it(x,{children:(ke,Re)=>{var xe=T(),Ce=g(xe);mt(Ce,1,b,ze=>ze.id,(ze,Fe)=>{var Ve=D(()=>e(Fe).attrs());Wt(ze,{get rowAttrs(){return e(Ve)},children:Gt,$$slots:{default:(j,De)=>{const Pe=D(()=>De.rowAttrs);la(j,it(()=>e(Pe),{class:"border-b flex items-center w-full",children:(Ae,J)=>{var Ge=T(),v=g(Ge);mt(v,1,()=>e(Fe).cells,y=>y.id,(y,F)=>{var P=D(()=>e(F).attrs());Wt(y,{get attrs(){return e(P)},children:Gt,$$slots:{default:(U,te)=>{const je=D(()=>te.attrs);Da(U,it(()=>e(je),{class:"flex-1 flex items-center justify-center py-2 px-4 w-full text-center",children:(Ne,Ue)=>{var B=T(),ce=g(B);{var oe=Ke=>{var E=ad(),ue=c(E);Sr(ue,{class:"size-5 text-blue-500 "});var G=u(ue,2),we=c(G,!0);d(G),d(E),Ee(()=>Se(we,e(Fe)?.original?.employee)),n(Ke,E)},he=Ke=>{var E=T(),ue=g(E);{var G=fe=>{var Ye=rd(),et=c(Ye,!0);d(Ye),Ee(()=>Se(et,e(Fe)?.original?.storeName)),n(fe,Ye)},we=fe=>{var Ye=T(),et=g(Ye);{var Xe=ut=>{var dt=sd(),yt=c(dt,!0);d(dt),Ee(()=>Se(yt,e(Fe).original.customer)),n(ut,dt)},bt=ut=>{var dt=T(),yt=g(dt);{var Ct=xt=>{var ot=od(),wt=c(ot,!0);d(ot),Ee(()=>Se(wt,e(Fe).original.idle)),n(xt,ot)},Ot=xt=>{var ot=T(),wt=g(ot);{var Dt=vt=>{var kt=nd(),Kt=c(kt,!0);d(kt),Ee(()=>Se(Kt,e(Fe).original.mobile)),n(vt,kt)},Yt=vt=>{var kt=T(),Kt=g(kt);{var Xt=Jt=>{var qe=ld(),tt=c(qe,!0);d(qe),Ee(()=>Se(tt,e(Fe).original.fillingShelves)),n(Jt,qe)},Qt=Jt=>{var qe=D(()=>e(F).render());ha(Jt,{get of(){return e(qe)}})};ee(Kt,Jt=>{e(F).id==="fillingShelves"?Jt(Xt):Jt(Qt,!1)},!0)}n(vt,kt)};ee(wt,vt=>{e(F).id==="mobile"?vt(Dt):vt(Yt,!1)},!0)}n(xt,ot)};ee(yt,xt=>{e(F).id==="idle"?xt(Ct):xt(Ot,!1)},!0)}n(ut,dt)};ee(et,ut=>{e(F).id==="customer"?ut(Xe):ut(bt,!1)},!0)}n(fe,Ye)};ee(ue,fe=>{e(F).id==="store_name"?fe(G):fe(we,!1)},!0)}n(Ke,E)};ee(ce,Ke=>{e(F).id==="employee"?Ke(oe):Ke(he,!1)})}n(Ne,B)},$$slots:{default:!0}}))}}})}),n(Ae,Ge)},$$slots:{default:!0}}))}}})}),n(ke,xe)},$$slots:{default:!0}})),n(He,z)},$$slots:{default:!0}}))};ee(ie,de=>{e(q)?de(_e):de(Te,!1)})}var se=u(ie,2);{var Le=de=>{var He=dd(),Qe=c(He),z=D(()=>!A());St(Qe,{size:"sm",variant:"outline",class:"bg-transparent hover:bg-[#015a62] hover:text-white text-[#727272] gap-2",get disabled(){return e(z)},$$events:{click:()=>Ie(l()-1)},children:(Fe,Ve)=>{$e();var j=We("Previous");n(Fe,j)},$$slots:{default:!0}});var Me=u(Qe,2),Z=c(Me),ke=c(Z,!0);d(Z);var Re=u(Z,2),xe=c(Re,!0);d(Re),$e(),d(Me);var Ce=u(Me,2),ze=D(()=>!C());St(Ce,{size:"sm",variant:"outline",get disabled(){return e(ze)},class:"bg-transparent hover:bg-[#015a62] hover:text-white text-[#727272] gap-2",$$events:{click:()=>Ie(l()+1)},children:(Fe,Ve)=>{$e();var j=We("Next");n(Fe,j)},$$slots:{default:!0}}),d(He),Ee(()=>{Se(ke,l()+1<10?"0"+(l()+1):l()+1),Se(xe,p()<10?"0"+p():p())}),n(de,He)};ee(se,de=>{p()>1&&de(Le)})}d(ae),n(s,ae),jt()}var fd=S('<div class="flex items-center justify-center w-full h-full min-h-[200px]"><!></div>'),pd=S('<span class="font-semibold text-sm"><!></span>'),hd=S('<div class="flex items-center gap-2 whitespace-nowrap"><span class="text-sm font-medium"> </span></div>'),vd=S('<img src="/images/tick.png" alt="tick" srcset="" class="w-5 h-5">'),gd=S('<img src="/images/cross.png" alt="cross" srcset="" class="w-5 h-5">'),md=S("<span> </span>"),bd=S('<span class="text-sm"> </span>'),_d=S("<!> <!>",1),xd=S('<div class="flex flex-row items-center justify-center space-x-4 py-2"><!> <div class="flex flex-row gap-2 items-center text-sm text-muted-foreground"><span class="p-2 rounded-md aspect-square bg-[#015a62] bg-opacity-10"> </span> of <span class="p-2 rounded-md aspect-square bg-[#015a62] bg-opacity-20"> </span> Page.</div> <!></div>'),$d=S('<img alt="Safety Data Image" class="max-w-full w-auto h-[300px] object-contain border">'),yd=S('<!> <div class="flex items-center justify-center w-full h-full"><!></div>',1),wd=S('<div class="m-0"><!> <!></div> <!>',1);function kd(s,t){Ft(t,!1);const a=ra(),r=()=>X(Je(),"$dateRange",a),o=()=>X(ge(),"$selectedStore",a),l=()=>X(e(Y),"$pageIndex",a),p=()=>X(e(H),"$pageCount",a),f=()=>X(e(W),"$tableAttrs",a),m=()=>X(e(N),"$headerRows",a),x=()=>X(e(le),"$tableBodyAttrs",a),b=()=>X(e(I),"$pageRows",a),A=()=>X(e(ve),"$hasPreviousPage",a),C=()=>X(e(O),"$hasNextPage",a),$=_(),h=_(),k=_(),w=_(),R=_(),N=_(),I=_(),W=_(),le=_(),Q=_(),O=_(),ve=_(),Y=_(),H=_();let me=L(t,"safetyData",12),ye=L(t,"token",8),re=_(!1),pe=_(null),Be=_(!1),Je=L(t,"dateRange",8),ge=L(t,"selectedStore",8),Oe=L(t,"value",8),q=1,K=0,Ie=_(0);const ae=async()=>{q++;const Z=new Date;let ke=new Date(Z);switch(r()){case"7 Days":ke.setDate(Z.getDate()-7);break;case"15 Days":ke.setDate(Z.getDate()-15);break;case"30 Days":ke.setDate(Z.getDate()-30);break;case"12 Months":ke.setFullYear(Z.getFullYear()-1);break;default:ke.setDate(Z.getDate()-7)}const Re=Oe()?.start?`${Oe().start.year}-${String(Oe().start.month).padStart(2,"0")}-${String(Oe().start.day).padStart(2,"0")}`:"",xe=Oe()?.end?`${Oe().end.year}-${String(Oe().end.month).padStart(2,"0")}-${String(Oe().end.day).padStart(2,"0")}`:"",Ce=Fe=>Fe.toISOString().split("T")[0];return(await fetch(`https://api.moksa.ai/store/storeEmployee/getSafetyDetailsOfAllEmployeesByStore/${o().value}/${q}/100/${r()==="custom"?Re:Ce(ke)}/${r()==="custom"?xe:Ce(Z)}`,{method:"GET",headers:{Authorization:`Bearer ${ye()}`}})).json()};async function ie(Z){i(re,!0),i(pe,null),console.log(Z);try{const ke=await fetch(`https://api.moksa.ai/stream?key=${Z}`,{method:"GET",headers:{Authorization:`Bearer ${ye()}`,"Content-Type":"application/json"}});if(!ke.ok)throw new Error("Failed to get image");const Re=await ke.blob(),xe=URL.createObjectURL(Re);i(pe,xe),console.log("Image URL:",e(pe))}catch(ke){console.error("Error fetching image:",ke)}}async function _e(Z){if(Oa(e(Y),Z),i(Ie,Z),l()===p()-1&&K<me().total){i(Be,!0);const ke=await ae();console.log("new data",ke),me(me().data=[...me()?.data,...ke?.data?.data],!0),K=me()?.data?.length,e(h).set(e($)),i(Be,!1)}}M(()=>Mt(me()),()=>{console.log("safetyDataTable",me())}),M(()=>Mt(me()),()=>{i($,me()?.data?.map(Z=>({employee:`${Z.first_name} ${Z.last_name}`,masks:Z.wearing_mask,gloves:Z.wearing_gloves,hairnet:Z.wearing_hair_net,uniform:Z.wearing_uniform,breakingSOPs:Z.time_sop,videoLink:"Image",videourl:Z.img_link})))}),M(()=>(r(),o()),()=>{(r()||o())&&i(Ie,0)}),M(()=>e($),()=>{i(h,st(e($)))}),M(()=>(e($),e(h)),()=>{i(k,wa(e($),Z=>e(h).subscribe(Z)))}),M(()=>(e(k),e(Ie),ga),()=>{i(w,Ya(e(k),{page:nr({initialPageIndex:e(Ie),initialPageSize:4}),sort:Ka(),filter:Za({fn:({filterValue:Z,value:ke})=>ke.toLowerCase().includes(Z.toLowerCase())}),select:ga()}))}),M(()=>e(w),()=>{i(R,e(w).createColumns([e(w).column({accessor:"employee",header:"Employee"}),e(w).column({accessor:"gloves",header:"Gloves"}),e(w).column({accessor:"hairnet",header:"Hairnet"}),e(w).column({accessor:"masks",header:"Mask"}),e(w).column({accessor:"uniform",header:"Uniform"}),e(w).column({accessor:"videoLink",header:"Image"})]))}),M(()=>(e(N),e(I),e(W),e(le),e(Q),e(w),e(R)),()=>{(Z=>(pt(i(N,Z.headerRows),"$headerRows",a),pt(i(I,Z.pageRows),"$pageRows",a),pt(i(W,Z.tableAttrs),"$tableAttrs",a),pt(i(le,Z.tableBodyAttrs),"$tableBodyAttrs",a),i(Q,Z.pluginStates)))(e(w).createViewModel(e(R)))}),M(()=>(e(O),e(ve),e(Y),e(H),e(Q)),()=>{(Z=>(pt(i(O,Z.hasNextPage),"$hasNextPage",a),pt(i(ve,Z.hasPreviousPage),"$hasPreviousPage",a),pt(i(Y,Z.pageIndex),"$pageIndex",a),pt(i(H,Z.pageCount),"$pageCount",a)))(e(Q).page)}),na(),Bt();var Te=wd(),se=g(Te),Le=c(se);{var de=Z=>{var ke=fd(),Re=c(ke);ma(Re),d(ke),n(Z,ke)},He=Z=>{Ua(Z,it(f,{class:"w-full",children:(ke,Re)=>{var xe=_d(),Ce=g(xe);Ha(Ce,{children:(Fe,Ve)=>{var j=T(),De=g(j);mt(De,1,m,aa,(Pe,Ae)=>{var J=D(()=>e(Ae).attrs());Wt(Pe,{get rowAttrs(){return e(J)},children:(Ge,v)=>{la(Ge,{class:"bg-transparent flex flex-row border-b items-center",children:(y,F)=>{var P=T(),U=g(P);mt(U,1,()=>e(Ae).cells,te=>te.id,(te,je)=>{var Ne=D(()=>e(je).attrs()),Ue=D(()=>e(je).props());Wt(te,{get attrs(){return e(Ne)},get props(){return e(Ue)},children:Gt,$$slots:{default:(B,ce)=>{const oe=D(()=>ce.attrs);qa(B,it(()=>e(oe),{class:"text-[#727272] whitespace-nowrap h-full flex items-center justify-center text-start flex-1 py-2 px-4 w-1/4",children:(he,Ke)=>{var E=pd(),ue=c(E),G=D(()=>e(je).render());ha(ue,{get of(){return e(G)}}),d(E),n(he,E)},$$slots:{default:!0}}))}}})}),n(y,P)},$$slots:{default:!0}})},$$slots:{default:!0}})}),n(Fe,j)},$$slots:{default:!0}});var ze=u(Ce,2);ja(ze,it(x,{children:(Fe,Ve)=>{var j=T(),De=g(j);mt(De,1,b,Pe=>Pe.id,(Pe,Ae)=>{var J=D(()=>e(Ae).attrs());Wt(Pe,{get rowAttrs(){return e(J)},children:Gt,$$slots:{default:(Ge,v)=>{const y=D(()=>v.rowAttrs);la(Ge,it(()=>e(y),{class:"border-b flex items-center w-full",children:(F,P)=>{var U=T(),te=g(U);mt(te,1,()=>e(Ae).cells,je=>je.id,(je,Ne)=>{var Ue=D(()=>e(Ne).attrs());Wt(je,{get attrs(){return e(Ue)},children:Gt,$$slots:{default:(B,ce)=>{const oe=D(()=>ce.attrs);Da(B,it(()=>e(oe),{class:"flex-1 flex items-center justify-center py-2 px-4 w-1/6 text-center",children:(he,Ke)=>{var E=T(),ue=g(E);{var G=fe=>{var Ye=hd(),et=c(Ye),Xe=c(et,!0);d(et),d(Ye),Ee(()=>Se(Xe,e(Ae).original.employee)),n(fe,Ye)},we=fe=>{var Ye=T(),et=g(Ye);{var Xe=ut=>{var dt=T(),yt=g(dt);{var Ct=xt=>{var ot=vd();n(xt,ot)},Ot=xt=>{var ot=T(),wt=g(ot);{var Dt=vt=>{var kt=gd();n(vt,kt)},Yt=vt=>{var kt=md(),Kt=c(kt,!0);d(kt),Ee(()=>Se(Kt,e(Ae).original[e(Ne).id])),n(vt,kt)};ee(wt,vt=>{e(Ae).original[e(Ne).id]==="false"?vt(Dt):vt(Yt,!1)},!0)}n(xt,ot)};ee(yt,xt=>{e(Ae).original[e(Ne).id]==="true"?xt(Ct):xt(Ot,!1)})}n(ut,dt)},bt=ut=>{var dt=T(),yt=g(dt);{var Ct=xt=>{var ot=bd(),wt=c(ot,!0);d(ot),Ee(()=>Se(wt,e(Ae).original.breakingSops)),n(xt,ot)},Ot=xt=>{var ot=T(),wt=g(ot);{var Dt=vt=>{St(vt,{variant:"link",class:"text-red-500",$$events:{click:()=>ie(e(Ae).original.videourl)},children:(kt,Kt)=>{$e();var Xt=We();Ee(()=>Se(Xt,e(Ae).original.videoLink)),n(kt,Xt)},$$slots:{default:!0}})},Yt=vt=>{var kt=D(()=>e(Ne).render());ha(vt,{get of(){return e(kt)}})};ee(wt,vt=>{e(Ne).id==="videoLink"?vt(Dt):vt(Yt,!1)},!0)}n(xt,ot)};ee(yt,xt=>{e(Ne).id==="breakingSops"?xt(Ct):xt(Ot,!1)},!0)}n(ut,dt)};ee(et,ut=>{["masks","gloves","hairnet","uniform"].includes(e(Ne).id)?ut(Xe):ut(bt,!1)},!0)}n(fe,Ye)};ee(ue,fe=>{e(Ne).id==="employee"?fe(G):fe(we,!1)})}n(he,E)},$$slots:{default:!0}}))}}})}),n(F,U)},$$slots:{default:!0}}))}}})}),n(Fe,j)},$$slots:{default:!0}})),n(ke,xe)},$$slots:{default:!0}}))};ee(Le,Z=>{e(Be)?Z(de):Z(He,!1)})}var Qe=u(Le,2);{var z=Z=>{var ke=xd(),Re=c(ke),xe=D(()=>!A());St(Re,{size:"sm",variant:"outline",class:"bg-transparent hover:bg-[#015a62] hover:text-white text-[#727272] gap-2",get disabled(){return e(xe)},$$events:{click:()=>_e(l()-1)},children:(Ae,J)=>{$e();var Ge=We("Previous");n(Ae,Ge)},$$slots:{default:!0}});var Ce=u(Re,2),ze=c(Ce),Fe=c(ze,!0);d(ze);var Ve=u(ze,2),j=c(Ve,!0);d(Ve),$e(),d(Ce);var De=u(Ce,2),Pe=D(()=>!C());St(De,{size:"sm",variant:"outline",get disabled(){return e(Pe)},class:"bg-transparent hover:bg-[#015a62] hover:text-white text-[#727272] gap-2",$$events:{click:()=>_e(l()+1)},children:(Ae,J)=>{$e();var Ge=We("Next");n(Ae,Ge)},$$slots:{default:!0}}),d(ke),Ee(()=>{Se(Fe,l()+1<10?"0"+(l()+1):l()+1),Se(j,p()<10?"0"+p():p())}),n(Z,ke)};ee(Qe,Z=>{p()>1&&Z(z)})}d(se);var Me=u(se,2);tr(Me,{get open(){return e(re)},set open(Z){i(re,Z)},children:(Z,ke)=>{ar(Z,{class:"sm:max-w-[720px]",children:(Re,xe)=>{var Ce=yd(),ze=g(Ce);rr(ze,{children:(Pe,Ae)=>{sr(Pe,{children:(J,Ge)=>{$e();var v=We("Safety Event Image View");n(J,v)},$$slots:{default:!0}})},$$slots:{default:!0}});var Fe=u(ze,2),Ve=c(Fe);{var j=Pe=>{var Ae=$d();Ee(()=>ya(Ae,"src",e(pe))),n(Pe,Ae)},De=Pe=>{ma(Pe)};ee(Ve,Pe=>{e(pe)?Pe(j):Pe(De,!1)})}d(Fe),n(Re,Ce)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),n(s,Te),jt()}var Cd=S("<!> <!> <!>",1),Dd=S("<!> <!>",1),Sd=S("<!> <!>",1);function Dr(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["value","placeholder","weekdayFormat","startValue","class"]);Ft(t,!1);let o=L(t,"value",28,()=>{}),l=L(t,"placeholder",28,()=>{}),p=L(t,"weekdayFormat",8,"short"),f=L(t,"startValue",28,()=>{}),m=L(t,"class",24,()=>{});Bt();var x=D(()=>Ba("p-3",m()));pl(s,it({get weekdayFormat(){return p()},get class(){return e(x)}},()=>r,{get value(){return o()},set value(b){o(b)},get placeholder(){return l()},set placeholder(b){l(b)},get startValue(){return f()},set startValue(b){f(b)},$$events:{keydown(b){Na.call(this,t,b)}},children:Gt,$$slots:{default:(b,A)=>{const C=D(()=>A.months),$=D(()=>A.weekdays);var h=Sd(),k=g(h);Rd(k,{children:(R,N)=>{var I=Cd(),W=g(I);Od(W,{});var le=u(W,2);Fd(le,{});var Q=u(le,2);Md(Q,{}),n(R,I)},$$slots:{default:!0}});var w=u(k,2);Bd(w,{children:(R,N)=>{var I=T(),W=g(I);mt(W,1,()=>e(C),aa,(le,Q)=>{Ed(le,{children:(O,ve)=>{var Y=Dd(),H=g(Y);Ld(H,{children:(ye,re)=>{oo(ye,{class:"flex",children:(pe,Be)=>{var Je=T(),ge=g(Je);mt(ge,1,()=>e($),aa,(Oe,q)=>{Nd(Oe,{children:(K,Ie)=>{$e();var ae=We();Ee(()=>Se(ae,e(q).slice(0,2))),n(K,ae)},$$slots:{default:!0}})}),n(pe,Je)},$$slots:{default:!0}})},$$slots:{default:!0}});var me=u(H,2);jd(me,{children:(ye,re)=>{var pe=T(),Be=g(pe);mt(Be,1,()=>e(Q).weeks,aa,(Je,ge)=>{oo(Je,{class:"mt-2 w-full",children:(Oe,q)=>{var K=T(),Ie=g(K);mt(Ie,1,()=>e(ge),aa,(ae,ie)=>{Ad(ae,{get date(){return e(ie)},children:(_e,Te)=>{Pd(_e,{get date(){return e(ie)},get month(){return e(Q).value}})},$$slots:{default:!0}})}),n(Oe,K)},$$slots:{default:!0}})}),n(ye,pe)},$$slots:{default:!0}}),n(O,Y)},$$slots:{default:!0}})}),n(R,I)},$$slots:{default:!0}}),n(b,h)}},$$legacy:!0})),jt()}function Ad(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["date","class"]);Ft(t,!1);let o=L(t,"date",8),l=L(t,"class",24,()=>{});Bt();var p=D(()=>Ba("[&:has([data-selected])]:bg-accent [&:has([data-selected][data-outside-month])]:bg-accent/50 relative h-9 w-9 p-0 text-center text-sm focus-within:relative focus-within:z-20 first:[&:has([data-selected])]:rounded-l-md last:[&:has([data-selected])]:rounded-r-md [&:has([data-selected][data-selection-end])]:rounded-r-md [&:has([data-selected][data-selection-start])]:rounded-l-md",l()));$l(s,it({get date(){return o()},get class(){return e(p)}},()=>r,{children:(f,m)=>{var x=T(),b=g(x);Tt(b,t,"default",{},null),n(f,x)},$$slots:{default:!0}})),jt()}function Pd(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["date","month","class"]);Ft(t,!1);let o=L(t,"date",8),l=L(t,"month",8),p=L(t,"class",24,()=>{});Bt();var f=D(()=>Ba(Ts({variant:"ghost"}),"h-9 w-9 p-0 font-normal data-[selected]:opacity-100","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selection-start]:bg-primary data-[selection-start]:text-primary-foreground data-[selection-start]:hover:bg-primary data-[selection-start]:hover:text-primary-foreground data-[selection-start]:focus:bg-primary data-[selection-start]:focus:text-primary-foreground","data-[selection-end]:bg-primary data-[selection-end]:text-primary-foreground data-[selection-end]:hover:bg-primary data-[selection-end]:hover:text-primary-foreground data-[selection-end]:focus:bg-primary data-[selection-end]:focus:text-primary-foreground","data-[outside-month]:text-muted-foreground [&[data-outside-month][data-selected]]:bg-accent/50 [&[data-outside-month][data-selected]]:text-muted-foreground data-[outside-month]:pointer-events-none data-[outside-month]:opacity-50 [&[data-outside-month][data-selected]]:opacity-30","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through",p()));vl(s,it({get date(){return o()},get month(){return l()},get class(){return e(f)}},()=>r,{$$events:{click(m){Na.call(this,t,m)}},children:Gt,$$slots:{default:(m,x)=>{const b=D(()=>x.disabled),A=D(()=>x.unavailable),C=D(()=>x.builder);var $=T(),h=g($);Tt(h,t,"default",{get disabled(){return e(b)},get unavailable(){return e(A)},get builder(){return e(C)}},k=>{var w=We();Ee(()=>Se(w,o().day)),n(k,w)}),n(m,$)}}})),jt()}function Ed(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["class"]);Ft(t,!1);let o=L(t,"class",24,()=>{});Bt();var l=D(()=>Ba("w-full border-collapse space-y-1",o()));ml(s,it({get class(){return e(l)}},()=>r,{children:(p,f)=>{var m=T(),x=g(m);Tt(x,t,"default",{},null),n(p,m)},$$slots:{default:!0}})),jt()}function Rd(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["class"]);Ft(t,!1);let o=L(t,"class",24,()=>{});Bt();var l=D(()=>Ba("relative flex w-full items-center justify-between pt-1",o()));Pl(s,it({get class(){return e(l)}},()=>r,{children:(p,f)=>{var m=T(),x=g(m);Tt(x,t,"default",{},null),n(p,m)},$$slots:{default:!0}})),jt()}var Td=S("<div><!></div>");function Bd(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["class"]);Ft(t,!1);let o=L(t,"class",24,()=>{});Bt();var l=Td();let p;var f=c(l);Tt(f,t,"default",{},null),d(l),Ee(()=>p=Sa(l,p,{class:Ba("mt-4 flex flex-col space-y-4 sm:flex-row sm:space-x-4 sm:space-y-0",o()),...r})),n(s,l),jt()}function oo(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["class"]);Ft(t,!1);let o=L(t,"class",24,()=>{});Bt();var l=D(()=>Ba("flex",o()));Sl(s,it({get class(){return e(l)}},()=>r,{children:(p,f)=>{var m=T(),x=g(m);Tt(x,t,"default",{},null),n(p,m)},$$slots:{default:!0}})),jt()}function Fd(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["class"]);Ft(t,!1);let o=L(t,"class",24,()=>{});Bt();var l=D(()=>Ba("text-sm font-medium",o()));Rl(s,it({get class(){return e(l)}},()=>r,{children:Gt,$$slots:{default:(p,f)=>{const m=D(()=>f.headingValue);var x=T(),b=g(x);Tt(b,t,"default",{get headingValue(){return e(m)}},A=>{var C=We();Ee(()=>Se(C,e(m))),n(A,C)}),n(p,x)}}})),jt()}function jd(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["class"]);Ft(t,!1);let o=L(t,"class",24,()=>{});Bt();var l=D(()=>Ba(o()));_l(s,it({get class(){return e(l)}},()=>r,{children:(p,f)=>{var m=T(),x=g(m);Tt(x,t,"default",{},null),n(p,m)},$$slots:{default:!0}})),jt()}function Ld(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["class"]);Ft(t,!1);let o=L(t,"class",24,()=>{});Bt();var l=D(()=>Ba(o()));wl(s,it({get class(){return e(l)}},()=>r,{children:(p,f)=>{var m=T(),x=g(m);Tt(x,t,"default",{},null),n(p,m)},$$slots:{default:!0}})),jt()}function Nd(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["class"]);Ft(t,!1);let o=L(t,"class",24,()=>{});Bt();var l=D(()=>Ba("text-muted-foreground w-9 rounded-md text-[0.8rem] font-normal",o()));Cl(s,it({get class(){return e(l)}},()=>r,{children:(p,f)=>{var m=T(),x=g(m);Tt(x,t,"default",{},null),n(p,m)},$$slots:{default:!0}})),jt()}function Md(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["class"]);Ft(t,!1);let o=L(t,"class",24,()=>{});Bt();var l=D(()=>Ba(Ts({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",o()));Bl(s,it({get class(){return e(l)}},()=>r,{$$events:{click(p){Na.call(this,t,p)}},children:Gt,$$slots:{default:(p,f)=>{const m=D(()=>f.builder);var x=T(),b=g(x);Tt(b,t,"default",{get builder(){return e(m)}},A=>{ss(A,{class:"h-4 w-4"})}),n(p,x)}}})),jt()}function Od(s,t){const a=$t(t,["children","$$slots","$$events","$$legacy"]),r=$t(a,["class"]);Ft(t,!1);let o=L(t,"class",24,()=>{});Bt();var l=D(()=>Ba(Ts({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",o()));jl(s,it({get class(){return e(l)}},()=>r,{$$events:{click(p){Na.call(this,t,p)}},children:Gt,$$slots:{default:(p,f)=>{const m=D(()=>f.builder);var x=T(),b=g(x);Tt(b,t,"default",{get builder(){return e(m)}},A=>{wo(A,{class:"h-4 w-4"})}),n(p,x)}}})),jt()}var Id=S("<!> <!>",1),zd=S("<!> Export",1),Vd=S('<div class="p-2"><!></div> <!>',1),Ud=S("<!> <!>",1),Hd=S("<!>Add Store",1),qd=S('<p class="text-center text-gray-500 mt-8">No data available</p>'),Gd=S('<div class="col-span-3 row-span-3 border rounded-md p-4 flex flex-col gap-4 h-[375px] dark:border-white/[.7]"><span class="flex items-center justify-between"><span><p class="text-[#323232] dark:text-white text-lg font-semibold">Store Busy Hours</p> <p class="text-sm font-medium text-[#8C8C8C]">Average busy hours</p></span></span> <div class="h-full w-full"><canvas></canvas></div></div>'),Wd=S('<p class="text-center text-gray-500 mt-8">No data available</p>'),Yd=S('<p class="text-center text-gray-500 mt-8">No data available</p>'),Kd=S('<p class="text-center text-gray-500 mt-8">No data available</p>'),Zd=S('<p class="text-center text-gray-500 mt-8">Store does not have a kitchen</p>'),Jd=S("<!> <!>",1),Xd=S('<div class="col-span-8 row-span-6 border rounded-md flex flex-col rounded-t-xl dark:border-white/[.7] relative"><img alt="storeFloorImg" class=" w-full h-full max-h-[400px] rounded-md"> <canvas id="heatmapCanvas" class="absolute top-0 left-0 w-full h-full opacity-70 pointer-events-none z-[20000000]"></canvas></div>'),Qd=S('<div class="col-span-8 row-span-6 border rounded-md flex flex-col justify-center items-center rounded-t-xl dark:border-white/[.7]"><!></div>'),ec=S('<div class="col-span-8 row-span-6 border rounded-md flex flex-col justify-center items-center rounded-t-xl dark:border-white/[.7]"><p class="text-lg font-semibold">Floor map not available for this store</p></div>'),tc=S('<div class="col-span-8 row-span-8 border flex flex-col rounded-t-xl dark:border-white/[.7] p-4"><div class="flex w-full items-center justify-between pb-2"><p class="text-lg font-semibold"> </p> <div class="flex flex-row-reverse items-start gap-4"><span class="flex items-center border-black h-[40px] border-opacity-[18%] border-[1px] rounded-md dark:border-white"><button>1hr</button> <button>3hr</button> <button>5hr</button> <button>7hr</button> <button>1 Day</button> <button>3 Day</button> <button>7 Day</button> <!></span> <div class="flex flex-col items-end"><div class="w-[200px] h-6 flex"><div class="w-1/3 h-full flex-shrink-0" style="background: linear-gradient(to right, rgb(0, 0, 255), rgb(255, 255, 0))"></div> <div class="w-1/3 h-full flex-shrink-0" style="background: linear-gradient(to right, rgb(255, 255, 0), rgb(255, 165, 0))"></div> <div class="w-1/3 h-full flex-shrink-0" style="background: linear-gradient(to right, rgb(255, 165, 0), rgb(255, 0, 0))"></div></div> <div class="flex justify-between w-[200px] text-xs mt-1"><span>low</span> <span>medium</span> <span>high</span> <span>very high</span></div></div></div></div> <div class="w-full h-full grid grid-cols-8 grid-rows-6"><!></div></div>'),ac=S('<section class="w-full p-4 flex flex-col hide-scrollbar overflow-y-auto max-h-[calc(100vh-75px)]"><div class="flex items-center justify-between"><span class="flex items-center border-black border-opacity-[18%] h-[40px] border-[1px] rounded-md dark:border-white"><button>7 Days</button> <button>15 Days</button> <button>30 Days</button> <button>12 Months</button> <!></span> <span class="flex flex-row-reverse items-center gap-3"><!> <!></span></div> <div><div class="col-span-2 border rounded-lg bg-gradient-to-r from-[#00FEA3] to-[#007077] px-4 py-3 h-[85px] relative"><p class="text-white font-semibold">No. of stores assigned</p> <p class="text-xl font-semibold text-white"> </p> <img src="/images/card1.png" alt="" class="absolute top-0 right-0"></div> <div class="col-span-2 border rounded-lg h-[85px] bg-gradient-to-r from-[#C8C303] to-[#597802] py-3 px-4 relative"><p class="text-white font-semibold">No. of cameras assigned</p> <p class="text-xl font-semibold text-white"> </p> <img src="/images/card2.png" alt="" class="absolute top-0 right-0"></div> <div class="col-span-2 border rounded-lg bg-gradient-to-r from-[#02A7FD] to-[#141C64] px-4 py-3 relative h-[85px]"><p class="text-white font-semibold">Total theft detected</p> <p class="text-xl font-semibold text-white"> </p> <img src="/images/card3.png" alt="" class="absolute top-0 right-0"></div> <div class="col-span-2 border rounded-lg bg-gradient-to-r from-[#FFB156] to-[#FF007A] px-4 py-3 relative h-[85px]"><p class="text-white font-semibold">No. of thefts prevented</p> <p class="text-xl font-semibold text-white"> </p> <img src="/images/card4.png" alt="" class="absolute top-0 right-0"></div> <div class="col-span-5 row-span-3 border rounded-md p-4 flex flex-col gap-4 h-[375px] dark:border-white/[.7]"><span class="flex items-center justify-between"><span><p class="text-[#323232] dark:text-white text-lg font-semibold">Thefts Detected</p> <p class="text-sm font-medium text-[#8C8C8C]">Average Theft Detection</p></span> <span class="flex gap-4 items-center"><span class="flex gap-1 items-center"><span class="w-[10px] h-[10px] bg-gradient-to-r from-[#357DFF] to-[#053895] rounded-full"></span>Detected</span> <span class="flex gap-1 items-center"><span class="w-[10px] h-[10px] bg-gradient-to-r from-[#FFB156] to-[#FF007A] rounded-full"></span>Prevented</span></span></span> <div class="h-full w-full"><canvas></canvas></div></div> <div class="col-span-3 row-span-3 border rounded-md p-4 flex flex-col gap-4 h-[375px] dark:border-white/[.7]"><span class="flex items-center justify-between"><p class="text-[#323232] dark:text-white text-lg font-semibold">All Stores</p> <!></span> <div class="flex flex-col max-h-[300px] overflow-y-auto hide-scrollbar"><!></div></div> <!> <div><span class="flex items-center justify-between font-semibold"><p class="text-[#323232] dark:text-white">Stores Overview</p></span> <div class="w-full h-full max-h-[300px] overflow-y-auto hide-scrollbar relative"><!></div></div> <div class="col-span-4 row-span-3 border rounded-md p-4 flex flex-col gap-4 h-[375px] dark:border-white/[.7]"><span class="flex items-center justify-between"><p class="text-[#323232] dark:text-white text-lg font-semibold">Employee Efficiency</p></span> <span class="w-full h-full"><!></span></div> <div class="col-span-4 row-span-3 border rounded-md p-4 flex flex-col gap-4 h-[375px] dark:border-white/[.7]"><span class="flex items-center justify-between"><p class="text-[#323232] dark:text-white text-lg font-semibold">Kitchen Safety Protocol</p></span> <div class="h-full w-full"><!></div></div> <!></div></section>');function rc(s,t){Ft(t,!1);const a=ra(),r=()=>X(q,"$busynessStoresData",a),o=()=>X(ve,"$dateRange",a),l=()=>X(se,"$selectedStore",a),p=()=>X(ie,"$heatMapData",a),f=()=>X(Y,"$heatMapDateRange",a),m=()=>X(_e,"$floorMaps",a),x=_();let b=L(t,"token",8),A=L(t,"allStores",8),C=L(t,"allStoresData",12),$=L(t,"aisleData",8),h=L(t,"theftandcamera",8),k=L(t,"efficiency",12),w=L(t,"safetyDetails",12),R=L(t,"theftData",8),N=L(t,"user",8),I=L(t,"storePeopleCount",12),W=_(),le=null,Q=null,O=_(),ve=st("7 Days"),Y=st("7"),H=!0,me=st(!1),ye=_(void 0),re=_(void 0),pe=_(void 0),Be=_("Custom"),Je=_("Custom"),ge=_(!1),Oe=_(!1),q=st([]),K=null,Ie=_(null),ae=_(!0),ie=st(null),_e=st([]);console.log(w(),"safetyDetails");const Te=A()?.map(V=>({value:V.id,label:V.name,hasKitchen:V.hasKitchen}));let se=st({value:Te?.[0]?.value,label:Te?.[0]?.label,hasKitchen:Te?.[0]?.hasKitchen});Qa(async()=>{await Pe()});function Le(){if(e(O)&&!Q){const V=e(O).getContext("2d"),be=V.createLinearGradient(0,400,0,0);be.addColorStop(0,"#357DFF"),be.addColorStop(1,"#053895");const Ze=V.createLinearGradient(0,400,0,0);if(Ze.addColorStop(0,"#FFB156"),Ze.addColorStop(1,"#FF007A"),V){ir.register($o,yo,ys,ws);const ft=R()?.data?.map(Ut=>Ut.day_of_week.trim()),ht=R()?.data?.map(Ut=>parseInt(Ut.theft_detected)),Rt=R()?.data?.map(Ut=>parseInt(Ut.theft_prevented));Q=new ir(V,{type:"bar",data:{labels:ft,datasets:[{label:"Theft Detected",data:ht,backgroundColor:be,borderColor:be,borderWidth:1,borderRadius:10},{label:"Theft Prevented",data:Rt,backgroundColor:Ze,borderColor:Ze,borderWidth:1,borderRadius:10}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{precision:0},grid:{color:"rgba(0, 0, 0, 0.1)",drawBorder:!1}},x:{grid:{display:!1}}},plugins:{legend:{display:!1,position:"top"},tooltip:{callbacks:{label(Ut){let ea=Ut.dataset.label||"";return ea&&(ea+=": "),Ut.parsed.y!==null&&(ea+=Ut.parsed.y),ea}}}}}})}}}function de(){if(console.log("called"),e(W)&&!le){console.log("here");const V=e(W).getContext("2d"),be=V.createLinearGradient(400,0,0,e(W).height);if(be.addColorStop(0,"rgba(235, 230, 11, 1)"),be.addColorStop(1,"rgba(7, 225, 164, 1)"),V){ir.register(fn,pn,hn,ws,ys),console.log("busyness",r());const Ze=He(r());le=new ir(V,{type:"line",data:{labels:Ze.labels,datasets:[{label:"Predicted Mean",borderColor:be,backgroundColor:be,borderWidth:2,data:Ze.data,fill:!0,tension:.4,pointBackgroundColor:be,pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{color:"rgba(0,0,0,.05)"},ticks:{autoSkip:!1,font:{size:14}}},y:{display:!0,title:{display:!1,text:"Predicted Mean"},grid:{display:!1},beginAtZero:!0,suggestedMax:Math.max(...Ze.data)+1,ticks:{stepSize:1}}},plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label(ft){return`${ft.dataset.label}: ${ft.parsed.y}`}}}}}})}}}function He(V){return console.log(V),{labels:V.map(be=>`${be.dayName} (${be.hour.slice(0,5)})`),data:V.map(be=>be.predictedMean)}}Qa(()=>{setTimeout(()=>{Le()},100)});let Qe=st([]);async function z(){if(H){H=!1;return}me.set(!0);const V=new Date;let be=new Date(V);switch(o()){case"7 Days":be.setDate(V.getDate()-7);break;case"15 Days":be.setDate(V.getDate()-15);break;case"30 Days":be.setDate(V.getDate()-30);break;case"12 Months":be.setFullYear(V.getFullYear()-1);break;default:be.setDate(V.getDate()-7)}const Ze=ft=>ft.toISOString().split("T")[0];console.log(l().label,l().value);try{const[ft,ht,Rt,Ut,ea]=await Promise.all([fetch(`https://api.moksa.ai/theft/theftDetectionDetailsByStoreid/${l().value}`,{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json",datetype:o()==="7 Days"?"7":o()==="15 Days"?"15":o()==="30 Days"?"30":o()==="12 Months"?"year":"7",startDate:Ze(be),endDate:Ze(V)}}).then(Lt=>Lt.json()),fetch(`https://api.moksa.ai/customerPrediction/storeBusyHourBystoreId/${l().value}`,{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}}).then(Lt=>Lt.json()),fetch(`https://api.moksa.ai/store/storeEmployee/getEmployeeEfficiencyByStoreidDynamic/${l().value}/${Ze(be)}/1/100/${Ze(V)}`,{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}}).then(Lt=>Lt.json()),fetch(`https://api.moksa.ai/store/storeEmployee/getSafetyDetailsOfAllEmployeesByStore/${l().value}/1/100/${Ze(be)}/${Ze(V)}`,{method:"GET",headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}}).then(Lt=>Lt.json()),fetch(`https://api.moksa.ai/store/getAllStoresTotals/${l().value}/${Ze(be)}/${Ze(V)}`,{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}}).then(Lt=>Lt.json())]);console.log(Rt),console.log(Ut),k(Rt?.data),Qe.set(ft),C(ea.data),q.set(ht.data),w(Ut?.data===void 0?[]:Ut?.data),Z(ft),l().value!==-1&&(await De(l().value),setTimeout(()=>{le===null?de():Me(ht.data)},1e3))}catch(ft){console.error("Error fetching store-wise data:",ft)}finally{me.set(!1)}}function Me(V){if(console.log("Updating busyness chart"),le){console.log("Busyness data:",V);const be=He(V);le.data.labels=be.labels,le.data.datasets[0].data=be.data,le.options.scales.y.suggestedMax=Math.max(...be.data)+1,le.update()}}function Z(V){if(console.log("first",V),Q){const be=V?.data?.map(ht=>o()==="7 Days"?ht?.day_of_week?.trim():o()==="12 Months"?ht?.month_name?.trim():ht?.date?.trim()),Ze=V?.data.map(ht=>parseInt(ht.theft_detected)),ft=V?.data.map(ht=>parseInt(ht.theft_prevented));Q.data.labels=be,Q.data.datasets[0].data=Ze,Q.data.datasets[1].data=ft,Q.update()}}async function ke(){if(i(Be,"Custom"),i(ye,void 0),H){H=!1;return}me.set(!0);const V=new Date;let be=new Date(V);switch(o()){case"7 Days":be.setDate(V.getDate()-7);break;case"15 Days":be.setDate(V.getDate()-15);break;case"30 Days":be.setDate(V.getDate()-30);break;case"12 Months":be.setFullYear(V.getFullYear()-1);break;default:be.setDate(V.getDate()-7)}const Ze=ft=>ft.toISOString().split("T")[0];console.log(Ze(be)),console.log(Ze(V));try{const[ft,ht,Rt,Ut,ea,Lt]=await Promise.all([fetch(`https://api.moksa.ai/store/storeEmployee/getEmployeeEfficiencyByStoreidDynamic/${l().value}/${Ze(be)}/1/100/${Ze(V)}`,{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}}).then(oa=>oa.json()),fetch(`https://api.moksa.ai/store/getAllStoresTotals/${l().value}/${Ze(be)}/${Ze(V)}`,{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}}).then(oa=>oa.json()),fetch(`https://api.moksa.ai/store/getAllStoresWithAisleDetails/1/20/${Ze(be)}/${Ze(V)}`,{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}}).then(oa=>oa.json()),fetch("https://api.moksa.ai/theft/theftDetectionDetailsByStoreid/-1",{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json",datetype:o()==="7 Days"?"7":o()==="15 Days"?"15":o()==="30 Days"?"30":o()==="12 Months"?"year":"7",startDate:Ze(be),endDate:Ze(V)}}).then(oa=>oa.json()),fetch(`https://api.moksa.ai/people/getPeopleCount/${l().value}`,{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json",datetype:o()==="7 Days"||o()==="15 Days"?"7":o()==="30 Days"?"30":o()==="12 Months"?"year":"7",Pagepersize:"100",Pagenumber:"1"}}).then(oa=>oa.json()),fetch(`https://api.moksa.ai/store/storeEmployee/getSafetyDetailsOfAllEmployeesByStore/${l().value}/1/100/${Ze(be)}/${Ze(V)}`,{method:"GET",headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}}).then(oa=>oa.json())]);console.log(ft),console.log(ht),console.log(Rt),console.log(Ut),console.log(Lt),I(ea?.data?.data),C(ht.data),k(ft?.data),w(Lt?.data===void 0?[]:Lt?.data),Qe.set(Ut),Z(Ut)}catch(ft){console.error("Error fetching data:",ft)}finally{me.set(!1)}}async function Re(){console.log("fetching custom date data");const V=e(ye)?.start?`${e(ye).start.year}-${String(e(ye).start.month).padStart(2,"0")}-${String(e(ye).start.day).padStart(2,"0")}`:"",be=e(ye)?.end?`${e(ye).end.year}-${String(e(ye).end.month).padStart(2,"0")}-${String(e(ye).end.day).padStart(2,"0")}`:"";console.log(V),console.log(be);try{const[Ze,ft,ht,Rt,Ut,ea]=await Promise.all([fetch(`https://api.moksa.ai/store/storeEmployee/getEmployeeEfficiencyByStoreidDynamic/${l().value}/${V}/1/100/${be}`,{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}}).then(Lt=>Lt.json()),fetch(`https://api.moksa.ai/store/getAllStoresTotals/${l().value}/${V}/${be}`,{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}}).then(Lt=>Lt.json()),fetch(`https://api.moksa.ai/store/getAllStoresWithAisleDetails/1/20/${V}/${be}`,{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}}).then(Lt=>Lt.json()),fetch(`https://api.moksa.ai/theft/theftDetectionDetailsByStoreid/${l().value}`,{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json",datetype:o()==="7 Days"?"7":o()==="15 Days"?"15":o()==="30 Days"?"30":o()==="12 Months"?"year":o()==="custom"?"custom":"7",startDate:V,endDate:be}}).then(Lt=>Lt.json()),fetch("https://api.moksa.ai/people/getPeopleCount/-1",{headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json",Pagepersize:"100",Pagenumber:"1",startdate:V,enddate:be,datetype:"custom"}}).then(Lt=>Lt.json()),fetch(`https://api.moksa.ai/store/storeEmployee/getSafetyDetailsOfAllEmployeesByStore/${l().value}/1/100/${V}/${be}`,{method:"GET",headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}}).then(Lt=>Lt.json())]);console.log(Ze),console.log(ft),console.log(ht),console.log(Rt),I(Ut?.data?.data),C(ft.data),k(Ze?.data),w(ea?.data===void 0?[]:ea?.data),Qe.set(Rt),Z(Rt)}catch(Ze){console.error("Error fetching data:",Ze)}finally{me.set(!1)}}function xe(V){const be=String(V);return be.includes(",")||be.includes('"')?`"${be.replace(/"/g,'""')}"`:be}function Ce(V,be,Ze=[]){const ft=Object.keys(V[0]).filter(oa=>!Ze?.length||!Ze.includes(oa)).join(","),ht=V.map(oa=>Object.keys(oa).filter(Fa=>!Ze?.length||!Ze.includes(Fa)).map(Fa=>xe(oa[Fa])).join(",")).join(`
`),Rt=ft+`
`+ht,Ut=new Blob([Rt],{type:"text/csv"}),ea=URL.createObjectURL(Ut),Lt=document.createElement("a");Lt.href=ea,Lt.download=be,document.body.appendChild(Lt),Lt.click(),document.body.removeChild(Lt)}function ze(){const V=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});$()?.length>0?Ce($(),`dashboard_store_data_${V}.csv`):ua.error("No store data available to export"),k()?.data?.length>0?Ce(k()?.data,`dashboard_employee_efficiency_data_${V}.csv`):ua.error("No employee efficiency data available to export"),w()?.data?.length>0?Ce(w().data,`dashboard_safety_data_${V}.csv`):ua.error("No safety data available to export"),R()?.data?.length>0?Ce(R().data,`dashboard_theft_data_${V}.csv`):ua.error("No theft data available to export"),A()?.length>0?Ce(A(),`dashboard_all_stores_data_${V}.csv`):ua.error("No all stores data available to export")}let Fe=_("");Aa();function Ve(V){se.set(V),z()}function j(){const V=document.getElementById("heatmapCanvas"),be=V.getContext("2d");if(!be)return;const Ze=document.querySelector("img");V.width=Ze.width,V.height=Ze.height;let ft=p().data;if(!Array.isArray(ft)||!Array.isArray(ft[0])){console.error("Heatmap data is not a 2D array:",ft),ua.error("Incorrect heatmap data");return}const ht=Math.max(...ft.map(Rt=>Math.max(...Rt)));console.log("maxvalue",ht);for(let Rt=0;Rt<ft?.length;Rt++)for(let Ut=0;Ut<ft[Rt]?.length;Ut++){const Lt=ft[Rt][Ut]/ht*255;let oa;Lt<=10?oa="rgba(0, 0, 0, 0)":Lt<=50?oa="rgba(0,0,255,1)":Lt<=100?oa="rgba(255, 255, 0, 1)":Lt<=150?oa="rgba(255, 165, 0, 1)":Lt<=200&&(oa="rgba(255, 0, 0,1)"),be.fillStyle=oa,be.fillRect(Ut/ft[Rt].length*V.width,Rt/ft.length*V.height,V.width/ft[Rt].length,V.height/ft.length)}}const De=async V=>{try{const be=await fetch(`https://api.moksa.ai/store/getFloorMapByStoreid/${V}`,{method:"GET",headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}});if(!be.ok)throw new Error(`HTTP error! status: ${be.status}`);const Ze=await be.json();return console.log(`Floor map for store ${V}:`,Ze),_e.update(ft=>[...ft,{storeId:V,img:Ze.data}]),Ze}catch(be){console.error(`Error fetching floor map for store ${V}:`,be)}},Pe=async()=>{A()&&await Promise?.all(A()?.filter(V=>V.id!==-1)?.map(V=>De(V.id)))};async function Ae(){console.log("updateSelectedFloorMap called",f()),i(Je,"custom"),i(re,void 0),i(ae,!0);const V=m().find(be=>be.storeId===l().value);if(K=V?V.img:null,K!==""&&K!==null){const Ze=await(await fetch(`https://api.moksa.ai/heatmap/getHeatMapByTimeAndStoreId/${f()}/${l().value}`,{method:"GET",headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}})).json();console.log("mapData",Ze),ie.set(Ze);const ht=await(await fetch(`https://api.moksa.ai/stream?key=${K}`,{method:"GET",headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}})).blob(),Rt=URL.createObjectURL(ht);i(Ie,Rt),i(ae,!1),setTimeout(()=>{j(p())},100)}else i(Ie,null),i(ae,!1)}async function J(){console.log("updateSelectedFloorMap  custom called",f()),i(ae,!0);const V=e(re)?.start?`${e(re).start.year}-${String(e(re).start.month).padStart(2,"0")}-${String(e(re).start.day).padStart(2,"0")}`:"",be=e(re)?.end?`${e(re).end.year}-${String(e(re).end.month).padStart(2,"0")}-${String(e(re).end.day).padStart(2,"0")}`:"";console.log(V),console.log(be);const Ze=m().find(ft=>ft.storeId===l().value);if(K=Ze?Ze.img:null,K!==""&&K!==null){const ht=await(await fetch(`https://api.moksa.ai/heatmap/getHeatMapByTimeAndStoreId/custom/${l().value}`,{method:"GET",headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json",startdate:V,enddate:be}})).json();console.log("mapData",ht),ie.set(ht);const Ut=await(await fetch(`https://api.moksa.ai/stream?key=${K}`,{method:"GET",headers:{Authorization:`Bearer ${b()}`,"Content-Type":"application/json"}})).blob(),ea=URL.createObjectURL(Ut);i(Ie,ea),i(ae,!1),setTimeout(()=>{j(p())},100)}else i(Ie,null),i(ae,!1)}M(()=>e(ye),()=>{if(e(ye)?.start&&e(ye)?.end){const V=new Date(e(ye).start.year,e(ye).start.month-1,e(ye).start.day),be=new Date(e(ye).end.year,e(ye).end.month-1,e(ye).end.day);i(Be,`${V.toLocaleDateString()} - ${be.toLocaleDateString()}`);const Ze=Math.ceil((be.getTime()-V.getTime())/(1e3*60*60*24));console.log(Ze),ve.set("custom"),setTimeout(()=>{i(ge,!1)},200)}else i(Be,"Custom")}),M(()=>e(re),()=>{if(e(re)?.start&&e(re)?.end){const V=new Date(e(re).start.year,e(re).start.month-1,e(re).start.day),be=new Date(e(re).end.year,e(re).end.month-1,e(re).end.day);i(Je,`${V.toLocaleDateString()} - ${be.toLocaleDateString()}`);const Ze=Math.ceil((be.getTime()-V.getTime())/(1e3*60*60*24));console.log(Ze),Y.set("custom"),setTimeout(()=>{i(Oe,!1)},200)}else i(Je,"Custom")}),M(()=>o(),()=>{o().toLowerCase()!=="custom"&&ke()}),M(()=>(o(),e(ye)),()=>{o().toLowerCase()==="custom"&&(e(ye)?.start||e(ye)?.end)&&Re()}),M(()=>e(Fe),()=>{i(x,Te?.filter(V=>V.label.toLowerCase().includes(e(Fe).toLowerCase())))}),M(()=>(l(),f(),e(re)),()=>{(l().value!==-1||f())&&(e(re)?.start||e(re)?.end?J():Ae())}),na(),Bt();var Ge=ac(),v=c(Ge),y=c(v),F=c(y),P=u(F,2),U=u(P,2),te=u(U,2),je=u(te,2);wr(je,{openFocus:!0,get open(){return e(ge)},set open(V){i(ge,V)},children:(V,be)=>{var Ze=Id(),ft=g(Ze);kr(ft,{asChild:!0,children:Gt,$$slots:{default:(Rt,Ut)=>{const ea=D(()=>Ut.builder);var Lt=D(()=>[e(ea)]),oa=D(()=>`2xl:py-2 2xl:px-3 py-1 px-2  text-sm hover:bg-[#0BA5E9] hover:text-white ${o()==="custom"?"bg-[#0BA5E9] text-white rounded-r-md":"text-black dark:text-white bg-transparent dark:border-white"}`);St(Rt,{get builders(){return e(Lt)},get class(){return e(oa)},$$events:{click:()=>i(ye,void 0)},children:(Fa,Ja)=>{$e();var ne=We();Ee(()=>Se(ne,e(Be))),n(Fa,ne)},$$slots:{default:!0}})}}});var ht=u(ft,2);Cr(ht,{class:"w-auto p-0",align:"start",children:(Rt,Ut)=>{var ea=D(()=>e(ye)?.start);Dr(Rt,{initialFocus:!0,numberOfMonths:2,get placeholder(){return e(ea)},get value(){return e(ye)},set value(Lt){i(ye,Lt)},get startValue(){return e(pe)},set startValue(Lt){i(pe,Lt)},$$legacy:!0})},$$slots:{default:!0}}),n(V,Ze)},$$slots:{default:!0},$$legacy:!0}),d(y);var Ne=u(y,2),Ue=c(Ne);{var B=V=>{St(V,{variant:"outline",class:"flex items-center gap-1 bg-[#3D81FC] text-white",$$events:{click:ze},children:(be,Ze)=>{var ft=zd(),ht=g(ft);Ur(ht,{size:18}),$e(),n(be,ft)},$$slots:{default:!0}})};ee(Ue,V=>{N()?.role!=="Operators"&&N()?.role!=="adminNonPaid"&&N()?.role!=="storeEmployee"&&V(B)})}var ce=u(Ue,2);pr(ce,{portal:null,children:(V,be)=>{var Ze=Ud(),ft=g(Ze);hr(ft,{class:"w-[150px] bg-[#F4F4F4] border text-xs px-1 border-[#E0E0E0] rounded-lg dark:bg-transparent",children:(Rt,Ut)=>{var ea=D(()=>l()?.label);vr(Rt,{get placeholder(){return e(ea)}})},$$slots:{default:!0}});var ht=u(ft,2);gr(ht,{class:"max-h-[200px] overflow-y-auto",children:(Rt,Ut)=>{var ea=Vd(),Lt=g(ea),oa=c(Lt);ia(oa,{type:"text",placeholder:"Search stores...",class:"mb-2",get value(){return e(Fe)},set value(Ja){i(Fe,Ja)},$$legacy:!0}),d(Lt);var Fa=u(Lt,2);mr(Fa,{children:(Ja,ne)=>{var at=T(),lt=g(at);{var _t=Nt=>{var Ht=T(),rt=g(Ht);mt(rt,1,()=>e(x),aa,(Vt,ca)=>{Ca(Vt,{class:"px-1",get value(){return e(ca).value},get label(){return e(ca).label},$$events:{click:()=>Ve(e(ca))},children:(Ea,xa)=>{$e();var $a=We();Ee(()=>Se($a,e(ca).label)),n(Ea,$a)},$$slots:{default:!0}})}),n(Nt,Ht)},Pt=Nt=>{Ca(Nt,{disabled:!0,children:(Ht,rt)=>{$e();var Vt=We("N/A");n(Ht,Vt)},$$slots:{default:!0}})};ee(lt,Nt=>{e(x)?.length>0?Nt(_t):Nt(Pt,!1)})}n(Ja,at)},$$slots:{default:!0}}),n(Rt,ea)},$$slots:{default:!0}}),n(V,Ze)},$$slots:{default:!0}}),d(Ne),d(v);var oe=u(v,2),he=c(oe),Ke=u(c(he),2),E=c(Ke,!0);d(Ke),$e(2),d(he);var ue=u(he,2),G=u(c(ue),2),we=c(G,!0);d(G),$e(2),d(ue);var fe=u(ue,2),Ye=u(c(fe),2),et=c(Ye,!0);d(Ye),$e(2),d(fe);var Xe=u(fe,2),bt=u(c(Xe),2),ut=c(bt,!0);d(bt),$e(2),d(Xe);var dt=u(Xe,2),yt=u(c(dt),2),Ct=c(yt);va(Ct,V=>i(O,V),()=>e(O)),d(yt),d(dt);var Ot=u(dt,2),xt=c(Ot),ot=u(c(xt),2);zo(ot,{children:(V,be)=>{St(V,{variant:"outline",class:"flex items-center gap-1 text-xs",children:(Ze,ft)=>{var ht=Hd(),Rt=g(ht);ko(Rt,{size:14}),$e(),n(Ze,ht)},$$slots:{default:!0}})},$$slots:{default:!0}}),d(xt);var wt=u(xt,2),Dt=c(wt);{var Yt=V=>{var be=qd();n(V,be)},vt=V=>{var be=T(),Ze=g(be);mt(Ze,1,h,aa,(ft,ht,Rt)=>{var Ut=D(()=>parseInt(e(ht).theft_prevented_count)),ea=D(()=>parseInt(e(ht).theft_detected_count));Vo(ft,{get storeName(){return e(ht).name},get cameraCount(){return e(ht).camera_count},get managerName(){return e(ht).manager},get activeCount(){return e(Ut)},get totalCount(){return e(ea)},bgColor:Rt%2===0?"#F5F5F5":"white"})}),n(V,be)};ee(Dt,V=>{h()?.length===0?V(Yt):V(vt,!1)})}d(wt),d(Ot);var kt=u(Ot,2);{var Kt=V=>{var be=Gd(),Ze=u(c(be),2),ft=c(Ze);va(ft,ht=>i(W,ht),()=>e(W)),d(Ze),d(be),n(V,be)};ee(kt,V=>{l().label!=="All Stores"&&V(Kt)})}var Xt=u(kt,2),Qt=u(c(Xt),2),Jt=c(Qt);{var qe=V=>{var be=Wd();n(V,be)},tt=V=>{var be=T(),Ze=g(be);{var ft=ht=>{Xi(ht,{get aisleData(){return I()}})};ee(Ze,ht=>{I()&&ht(ft)},!0)}n(V,be)};ee(Jt,V=>{I()?.length===0?V(qe):V(tt,!1)})}d(Qt),d(Xt);var ct=u(Xt,2),nt=u(c(ct),2),At=c(nt);{var Et=V=>{var be=Yd();n(V,be)},zt=V=>{var be=T(),Ze=g(be);{var ft=ht=>{ud(ht,{get efficiency(){return k()},get token(){return b()},selectedStore:se,dateRange:ve,get value(){return e(ye)}})};ee(Ze,ht=>{k()?.data?.length>0&&ht(ft)},!0)}n(V,be)};ee(At,V=>{k()?.length===0||k()?.data?.length===0?V(Et):V(zt,!1)})}d(nt),d(ct);var ta=u(ct,2),Zt=u(c(ta),2),pa=c(Zt);{var fa=V=>{var be=T(),Ze=g(be);{var ft=Rt=>{var Ut=Kd();n(Rt,Ut)},ht=Rt=>{var Ut=Zd();n(Rt,Ut)};ee(Ze,Rt=>{l().hasKitchen?Rt(ft):Rt(ht,!1)})}n(V,be)},_a=V=>{var be=T(),Ze=g(be);{var ft=ht=>{kd(ht,{get safetyData(){return w()},get token(){return b()},selectedStore:se,dateRange:ve,get value(){return e(ye)}})};ee(Ze,ht=>{w()?.data?.length>0&&ht(ft)},!0)}n(V,be)};ee(pa,V=>{w()?.length===0||w()?.data?.length===0?V(fa):V(_a,!1)})}d(Zt),d(ta);var Pa=u(ta,2);{var ka=V=>{var be=tc(),Ze=c(be),ft=c(Ze),ht=c(ft);d(ft);var Rt=u(ft,2),Ut=c(Rt),ea=c(Ut),Lt=u(ea,2),oa=u(Lt,2),Fa=u(oa,2),Ja=u(Fa,2),ne=u(Ja,2),at=u(ne,2),lt=u(at,2);wr(lt,{openFocus:!0,get open(){return e(Oe)},set open(rt){i(Oe,rt)},children:(rt,Vt)=>{var ca=Jd(),Ea=g(ca);kr(Ea,{asChild:!0,children:Gt,$$slots:{default:($a,za)=>{const br=D(()=>za.builder);var _r=D(()=>[e(br)]),us=D(()=>`2xl:py-2 2xl:px-3 py-1 px-2  text-sm hover:bg-[#0BA5E9] hover:text-white ${f().toLowerCase()==="custom"?"bg-[#0BA5E9] text-white":"text-black dark:text-white bg-transparent dark:border-white"}`);St($a,{get builders(){return e(_r)},get class(){return e(us)},$$events:{click:()=>i(re,void 0)},children:(dr,Lr)=>{$e();var Nr=We();Ee(()=>Se(Nr,e(Je))),n(dr,Nr)},$$slots:{default:!0}})}}});var xa=u(Ea,2);Cr(xa,{class:"w-auto p-0 z-[600000000]",align:"start",children:($a,za)=>{var br=D(()=>e(re)?.start);Dr($a,{initialFocus:!0,numberOfMonths:2,get placeholder(){return e(br)},get value(){return e(re)},set value(_r){i(re,_r)},get startValue(){return e(pe)},set startValue(_r){i(pe,_r)},$$legacy:!0})},$$slots:{default:!0}}),n(rt,ca)},$$slots:{default:!0},$$legacy:!0}),d(Ut),$e(2),d(Rt),d(Ze);var _t=u(Ze,2),Pt=c(_t);{var Nt=rt=>{var Vt=Xd(),ca=c(Vt);$e(2),d(Vt),Ee(()=>ya(ca,"src",e(Ie))),n(rt,Vt)},Ht=rt=>{var Vt=T(),ca=g(Vt);{var Ea=$a=>{var za=Qd(),br=c(za);ma(br),d(za),n($a,za)},xa=$a=>{var za=ec();n($a,za)};ee(ca,$a=>{e(ae)===!0?$a(Ea):$a(xa,!1)},!0)}n(rt,Vt)};ee(Pt,rt=>{e(Ie)!==null&&e(ae)===!1?rt(Nt):rt(Ht,!1)})}d(_t),d(be),Ee(()=>{Se(ht,`Heat Map for ${l().label??""}`),It(ea,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${f()==="1hr"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(Lt,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${f()==="3hr"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(oa,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${f()==="5hr"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(Fa,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${f()==="7hr"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(Ja,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${f()==="1"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(ne,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${f()==="3"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(at,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${f()==="7"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`)}),gt("click",ea,()=>{Y.set("1hr"),i(re,void 0)}),gt("click",Lt,()=>{Y.set("3hr"),i(re,void 0)}),gt("click",oa,()=>{Y.set("5hr"),i(re,void 0)}),gt("click",Fa,()=>{Y.set("7hr"),i(re,void 0)}),gt("click",Ja,()=>{Y.set("1"),i(re,void 0)}),gt("click",ne,()=>{Y.set("3"),i(re,void 0)}),gt("click",at,()=>{Y.set("7"),i(re,void 0)}),n(V,be)};ee(Pa,V=>{l().label!=="All Stores"&&V(ka)})}d(oe),d(Ge),Ee(()=>{It(F,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${o()==="7 Days"?"rounded-l-md bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(P,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${o()==="15 Days"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(U,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${o()==="30 Days"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(te,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${o()==="12 Months"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(oe,`grid grid-cols-8  gap-4 gap-y-10 ${l().label==="All Stores"?"h-[1400px] grid-rows-11":"h-[2000px] grid-rows-12"} mt-4`),Se(E,C()?.totalstorecount),Se(we,C()?.totalcameracount),Se(et,C()?.totaldetectedthefts),Se(ut,C()?.totalpreventedthefts),It(Xt,`${l().label==="All Stores"?"col-span-8 row-span-3":"col-span-5 row-span-3"} border rounded-md p-4 flex flex-col gap-4 h-[375px] dark:border-white/[.7]`)}),gt("click",F,()=>ve.set("7 Days")),gt("click",P,()=>ve.set("15 Days")),gt("click",U,()=>ve.set("30 Days")),gt("click",te,()=>ve.set("12 Months")),n(s,Ge),jt()}const er=Object.create(null);er.open="0";er.close="1";er.ping="2";er.pong="3";er.message="4";er.upgrade="5";er.noop="6";const Qr=Object.create(null);Object.keys(er).forEach(s=>{Qr[er[s]]=s});const Ds={type:"error",data:"parser error"},Uo=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Ho=typeof ArrayBuffer=="function",qo=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,Is=({type:s,data:t},a,r)=>Uo&&t instanceof Blob?a?r(t):no(t,r):Ho&&(t instanceof ArrayBuffer||qo(t))?a?r(t):no(new Blob([t]),r):r(er[s]+(t||"")),no=(s,t)=>{const a=new FileReader;return a.onload=function(){const r=a.result.split(",")[1];t("b"+(r||""))},a.readAsDataURL(s)};function lo(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let bs;function sc(s,t){if(Uo&&s.data instanceof Blob)return s.data.arrayBuffer().then(lo).then(t);if(Ho&&(s.data instanceof ArrayBuffer||qo(s.data)))return t(lo(s.data));Is(s,!1,a=>{bs||(bs=new TextEncoder),t(bs.encode(a))})}const io="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<io.length;s++)zr[io.charCodeAt(s)]=s;const oc=s=>{let t=s.length*.75,a=s.length,r,o=0,l,p,f,m;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);const x=new ArrayBuffer(t),b=new Uint8Array(x);for(r=0;r<a;r+=4)l=zr[s.charCodeAt(r)],p=zr[s.charCodeAt(r+1)],f=zr[s.charCodeAt(r+2)],m=zr[s.charCodeAt(r+3)],b[o++]=l<<2|p>>4,b[o++]=(p&15)<<4|f>>2,b[o++]=(f&3)<<6|m&63;return x},nc=typeof ArrayBuffer=="function",zs=(s,t)=>{if(typeof s!="string")return{type:"message",data:Go(s,t)};const a=s.charAt(0);return a==="b"?{type:"message",data:lc(s.substring(1),t)}:Qr[a]?s.length>1?{type:Qr[a],data:s.substring(1)}:{type:Qr[a]}:Ds},lc=(s,t)=>{if(nc){const a=oc(s);return Go(a,t)}else return{base64:!0,data:s}},Go=(s,t)=>{switch(t){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},Wo="",ic=(s,t)=>{const a=s.length,r=new Array(a);let o=0;s.forEach((l,p)=>{Is(l,!1,f=>{r[p]=f,++o===a&&t(r.join(Wo))})})},dc=(s,t)=>{const a=s.split(Wo),r=[];for(let o=0;o<a.length;o++){const l=zs(a[o],t);if(r.push(l),l.type==="error")break}return r};function cc(){return new TransformStream({transform(s,t){sc(s,a=>{const r=a.length;let o;if(r<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,r);else if(r<65536){o=new Uint8Array(3);const l=new DataView(o.buffer);l.setUint8(0,126),l.setUint16(1,r)}else{o=new Uint8Array(9);const l=new DataView(o.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(r))}s.data&&typeof s.data!="string"&&(o[0]|=128),t.enqueue(o),t.enqueue(a)})}})}let _s;function Kr(s){return s.reduce((t,a)=>t+a.length,0)}function Zr(s,t){if(s[0].length===t)return s.shift();const a=new Uint8Array(t);let r=0;for(let o=0;o<t;o++)a[o]=s[0][r++],r===s[0].length&&(s.shift(),r=0);return s.length&&r<s[0].length&&(s[0]=s[0].slice(r)),a}function uc(s,t){_s||(_s=new TextDecoder);const a=[];let r=0,o=-1,l=!1;return new TransformStream({transform(p,f){for(a.push(p);;){if(r===0){if(Kr(a)<1)break;const m=Zr(a,1);l=(m[0]&128)===128,o=m[0]&127,o<126?r=3:o===126?r=1:r=2}else if(r===1){if(Kr(a)<2)break;const m=Zr(a,2);o=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),r=3}else if(r===2){if(Kr(a)<8)break;const m=Zr(a,8),x=new DataView(m.buffer,m.byteOffset,m.length),b=x.getUint32(0);if(b>Math.pow(2,21)-1){f.enqueue(Ds);break}o=b*Math.pow(2,32)+x.getUint32(4),r=3}else{if(Kr(a)<o)break;const m=Zr(a,o);f.enqueue(zs(l?m:_s.decode(m),t)),r=0}if(o===0||o>s){f.enqueue(Ds);break}}}})}const Yo=4;function ba(s){if(s)return fc(s)}function fc(s){for(var t in ba.prototype)s[t]=ba.prototype[t];return s}ba.prototype.on=ba.prototype.addEventListener=function(s,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(t),this};ba.prototype.once=function(s,t){function a(){this.off(s,a),t.apply(this,arguments)}return a.fn=t,this.on(s,a),this};ba.prototype.off=ba.prototype.removeListener=ba.prototype.removeAllListeners=ba.prototype.removeEventListener=function(s,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+s];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var r,o=0;o<a.length;o++)if(r=a[o],r===t||r.fn===t){a.splice(o,1);break}return a.length===0&&delete this._callbacks["$"+s],this};ba.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),a=this._callbacks["$"+s],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(a){a=a.slice(0);for(var r=0,o=a.length;r<o;++r)a[r].apply(this,t)}return this};ba.prototype.emitReserved=ba.prototype.emit;ba.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};ba.prototype.hasListeners=function(s){return!!this.listeners(s).length};const ds=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,a)=>a(t,0),Ma=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),pc="arraybuffer";function Ko(s,...t){return t.reduce((a,r)=>(s.hasOwnProperty(r)&&(a[r]=s[r]),a),{})}const hc=Ma.setTimeout,vc=Ma.clearTimeout;function cs(s,t){t.useNativeTimers?(s.setTimeoutFn=hc.bind(Ma),s.clearTimeoutFn=vc.bind(Ma)):(s.setTimeoutFn=Ma.setTimeout.bind(Ma),s.clearTimeoutFn=Ma.clearTimeout.bind(Ma))}const gc=1.33;function mc(s){return typeof s=="string"?bc(s):Math.ceil((s.byteLength||s.size)*gc)}function bc(s){let t=0,a=0;for(let r=0,o=s.length;r<o;r++)t=s.charCodeAt(r),t<128?a+=1:t<2048?a+=2:t<55296||t>=57344?a+=3:(r++,a+=4);return a}function Zo(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function _c(s){let t="";for(let a in s)s.hasOwnProperty(a)&&(t.length&&(t+="&"),t+=encodeURIComponent(a)+"="+encodeURIComponent(s[a]));return t}function xc(s){let t={},a=s.split("&");for(let r=0,o=a.length;r<o;r++){let l=a[r].split("=");t[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return t}class $c extends Error{constructor(t,a,r){super(t),this.description=a,this.context=r,this.type="TransportError"}}class Vs extends ba{constructor(t){super(),this.writable=!1,cs(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,a,r){return super.emitReserved("error",new $c(t,a,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const a=zs(t,this.socket.binaryType);this.onPacket(a)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,a={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(a)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const a=_c(t);return a.length?"?"+a:""}}class yc extends Vs{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const a=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||a()})),this.writable||(r++,this.once("drain",function(){--r||a()}))}else a()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const a=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};dc(t,this.socket.binaryType).forEach(a),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,ic(t,a=>{this.doWrite(a,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",a=this.query||{};return this.opts.timestampRequests!==!1&&(a[this.opts.timestampParam]=Zo()),!this.supportsBinary&&!a.sid&&(a.b64=1),this.createUri(t,a)}}let Jo=!1;try{Jo=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const wc=Jo;function kc(){}class Cc extends yc{constructor(t){if(super(t),typeof location<"u"){const a=location.protocol==="https:";let r=location.port;r||(r=a?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,a){const r=this.request({method:"POST",data:t});r.on("success",a),r.on("error",(o,l)=>{this.onError("xhr post error",o,l)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(a,r)=>{this.onError("xhr poll error",a,r)}),this.pollXhr=t}}class Xa extends ba{constructor(t,a,r){super(),this.createRequest=t,cs(this,r),this._opts=r,this._method=r.method||"GET",this._uri=a,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const a=Ko(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");a.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(a);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&r.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var o;r.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=Xa.requestsCount++,Xa.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=kc,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Xa.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Xa.requestsCount=0;Xa.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",co);else if(typeof addEventListener=="function"){const s="onpagehide"in Ma?"pagehide":"unload";addEventListener(s,co,!1)}}function co(){for(let s in Xa.requests)Xa.requests.hasOwnProperty(s)&&Xa.requests[s].abort()}const Dc=function(){const s=Xo({xdomain:!1});return s&&s.responseType!==null}();class Sc extends Cc{constructor(t){super(t);const a=t&&t.forceBase64;this.supportsBinary=Dc&&!a}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Xa(Xo,this.uri(),t)}}function Xo(s){const t=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||wc))return new XMLHttpRequest}catch{}if(!t)try{return new Ma[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Qo=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ac extends Vs{get name(){return"websocket"}doOpen(){const t=this.uri(),a=this.opts.protocols,r=Qo?{}:Ko(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,a,r)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let a=0;a<t.length;a++){const r=t[a],o=a===t.length-1;Is(r,this.supportsBinary,l=>{try{this.doWrite(r,l)}catch{}o&&ds(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",a=this.query||{};return this.opts.timestampRequests&&(a[this.opts.timestampParam]=Zo()),this.supportsBinary||(a.b64=1),this.createUri(t,a)}}const xs=Ma.WebSocket||Ma.MozWebSocket;class Pc extends Ac{createSocket(t,a,r){return Qo?new xs(t,a,r):a?new xs(t,a):new xs(t)}doWrite(t,a){this.ws.send(a)}}class Ec extends Vs{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const a=uc(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(a).getReader(),o=cc();o.readable.pipeTo(t.writable),this._writer=o.writable.getWriter();const l=()=>{r.read().then(({done:f,value:m})=>{f||(this.onPacket(m),l())}).catch(f=>{})};l();const p={type:"open"};this.query.sid&&(p.data=`{"sid":"${this.query.sid}"}`),this._writer.write(p).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let a=0;a<t.length;a++){const r=t[a],o=a===t.length-1;this._writer.write(r).then(()=>{o&&ds(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Rc={websocket:Pc,webtransport:Ec,polling:Sc},Tc=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Bc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ss(s){if(s.length>8e3)throw"URI too long";const t=s,a=s.indexOf("["),r=s.indexOf("]");a!=-1&&r!=-1&&(s=s.substring(0,a)+s.substring(a,r).replace(/:/g,";")+s.substring(r,s.length));let o=Tc.exec(s||""),l={},p=14;for(;p--;)l[Bc[p]]=o[p]||"";return a!=-1&&r!=-1&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=Fc(l,l.path),l.queryKey=jc(l,l.query),l}function Fc(s,t){const a=/\/{2,9}/g,r=t.replace(a,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function jc(s,t){const a={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,o,l){o&&(a[o]=l)}),a}const As=typeof addEventListener=="function"&&typeof removeEventListener=="function",es=[];As&&addEventListener("offline",()=>{es.forEach(s=>s())},!1);class ur extends ba{constructor(t,a){if(super(),this.binaryType=pc,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(a=t,t=null),t){const r=Ss(t);a.hostname=r.host,a.secure=r.protocol==="https"||r.protocol==="wss",a.port=r.port,r.query&&(a.query=r.query)}else a.host&&(a.hostname=Ss(a.host).host);cs(this,a),this.secure=a.secure!=null?a.secure:typeof location<"u"&&location.protocol==="https:",a.hostname&&!a.port&&(a.port=this.secure?"443":"80"),this.hostname=a.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=a.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},a.transports.forEach(r=>{const o=r.prototype.name;this.transports.push(o),this._transportsByName[o]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},a),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=xc(this.opts.query)),As&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},es.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const a=Object.assign({},this.opts.query);a.EIO=Yo,a.transport=t,this.id&&(a.sid=this.id);const r=Object.assign({},this.opts,{query:a,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&ur.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const a=this.createTransport(t);a.open(),this.setTransport(a)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",a=>this._onClose("transport close",a))}onOpen(){this.readyState="open",ur.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const a=new Error("server error");a.code=t.data,this._onError(a);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let a=1;for(let r=0;r<this.writeBuffer.length;r++){const o=this.writeBuffer[r].data;if(o&&(a+=mc(o)),r>0&&a>this._maxPayload)return this.writeBuffer.slice(0,r);a+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,ds(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,a,r){return this._sendPacket("message",t,a,r),this}send(t,a,r){return this._sendPacket("message",t,a,r),this}_sendPacket(t,a,r,o){if(typeof a=="function"&&(o=a,a=void 0),typeof r=="function"&&(o=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const l={type:t,data:a,options:r};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),o&&this.once("flush",o),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},a=()=>{this.off("upgrade",a),this.off("upgradeError",a),t()},r=()=>{this.once("upgrade",a),this.once("upgradeError",a)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(ur.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,a){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),As&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=es.indexOf(this._offlineEventListener);r!==-1&&es.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,a),this.writeBuffer=[],this._prevBufferLen=0}}}ur.protocol=Yo;class Lc extends ur{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let a=this.createTransport(t),r=!1;ur.priorWebsocketSuccess=!1;const o=()=>{r||(a.send([{type:"ping",data:"probe"}]),a.once("packet",A=>{if(!r)if(A.type==="pong"&&A.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",a),!a)return;ur.priorWebsocketSuccess=a.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(b(),this.setTransport(a),a.send([{type:"upgrade"}]),this.emitReserved("upgrade",a),a=null,this.upgrading=!1,this.flush())})}else{const C=new Error("probe error");C.transport=a.name,this.emitReserved("upgradeError",C)}}))};function l(){r||(r=!0,b(),a.close(),a=null)}const p=A=>{const C=new Error("probe error: "+A);C.transport=a.name,l(),this.emitReserved("upgradeError",C)};function f(){p("transport closed")}function m(){p("socket closed")}function x(A){a&&A.name!==a.name&&l()}const b=()=>{a.removeListener("open",o),a.removeListener("error",p),a.removeListener("close",f),this.off("close",m),this.off("upgrading",x)};a.once("open",o),a.once("error",p),a.once("close",f),this.once("close",m),this.once("upgrading",x),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||a.open()},200):a.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const a=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&a.push(t[r]);return a}}let Nc=class extends Lc{constructor(t,a={}){const r=typeof t=="object"?t:a;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(o=>Rc[o]).filter(o=>!!o)),super(t,r)}};function Mc(s,t="",a){let r=s;a=a||typeof location<"u"&&location,s==null&&(s=a.protocol+"//"+a.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=a.protocol+s:s=a.host+s),/^(https?|wss?):\/\//.test(s)||(typeof a<"u"?s=a.protocol+"//"+s:s="https://"+s),r=Ss(s)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const l=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+l+":"+r.port+t,r.href=r.protocol+"://"+l+(a&&a.port===r.port?"":":"+r.port),r}const Oc=typeof ArrayBuffer=="function",Ic=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,en=Object.prototype.toString,zc=typeof Blob=="function"||typeof Blob<"u"&&en.call(Blob)==="[object BlobConstructor]",Vc=typeof File=="function"||typeof File<"u"&&en.call(File)==="[object FileConstructor]";function Us(s){return Oc&&(s instanceof ArrayBuffer||Ic(s))||zc&&s instanceof Blob||Vc&&s instanceof File}function ts(s,t){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let a=0,r=s.length;a<r;a++)if(ts(s[a]))return!0;return!1}if(Us(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return ts(s.toJSON(),!0);for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)&&ts(s[a]))return!0;return!1}function Uc(s){const t=[],a=s.data,r=s;return r.data=Ps(a,t),r.attachments=t.length,{packet:r,buffers:t}}function Ps(s,t){if(!s)return s;if(Us(s)){const a={_placeholder:!0,num:t.length};return t.push(s),a}else if(Array.isArray(s)){const a=new Array(s.length);for(let r=0;r<s.length;r++)a[r]=Ps(s[r],t);return a}else if(typeof s=="object"&&!(s instanceof Date)){const a={};for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=Ps(s[r],t));return a}return s}function Hc(s,t){return s.data=Es(s.data,t),delete s.attachments,s}function Es(s,t){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<t.length)return t[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let a=0;a<s.length;a++)s[a]=Es(s[a],t);else if(typeof s=="object")for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&(s[a]=Es(s[a],t));return s}const qc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Gc=5;var sa;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(sa||(sa={}));class Wc{constructor(t){this.replacer=t}encode(t){return(t.type===sa.EVENT||t.type===sa.ACK)&&ts(t)?this.encodeAsBinary({type:t.type===sa.EVENT?sa.BINARY_EVENT:sa.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let a=""+t.type;return(t.type===sa.BINARY_EVENT||t.type===sa.BINARY_ACK)&&(a+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(a+=t.nsp+","),t.id!=null&&(a+=t.id),t.data!=null&&(a+=JSON.stringify(t.data,this.replacer)),a}encodeAsBinary(t){const a=Uc(t),r=this.encodeAsString(a.packet),o=a.buffers;return o.unshift(r),o}}function uo(s){return Object.prototype.toString.call(s)==="[object Object]"}class Hs extends ba{constructor(t){super(),this.reviver=t}add(t){let a;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");a=this.decodeString(t);const r=a.type===sa.BINARY_EVENT;r||a.type===sa.BINARY_ACK?(a.type=r?sa.EVENT:sa.ACK,this.reconstructor=new Yc(a),a.attachments===0&&super.emitReserved("decoded",a)):super.emitReserved("decoded",a)}else if(Us(t)||t.base64)if(this.reconstructor)a=this.reconstructor.takeBinaryData(t),a&&(this.reconstructor=null,super.emitReserved("decoded",a));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let a=0;const r={type:Number(t.charAt(0))};if(sa[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===sa.BINARY_EVENT||r.type===sa.BINARY_ACK){const l=a+1;for(;t.charAt(++a)!=="-"&&a!=t.length;);const p=t.substring(l,a);if(p!=Number(p)||t.charAt(a)!=="-")throw new Error("Illegal attachments");r.attachments=Number(p)}if(t.charAt(a+1)==="/"){const l=a+1;for(;++a&&!(t.charAt(a)===","||a===t.length););r.nsp=t.substring(l,a)}else r.nsp="/";const o=t.charAt(a+1);if(o!==""&&Number(o)==o){const l=a+1;for(;++a;){const p=t.charAt(a);if(p==null||Number(p)!=p){--a;break}if(a===t.length)break}r.id=Number(t.substring(l,a+1))}if(t.charAt(++a)){const l=this.tryParse(t.substr(a));if(Hs.isPayloadValid(r.type,l))r.data=l;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,a){switch(t){case sa.CONNECT:return uo(a);case sa.DISCONNECT:return a===void 0;case sa.CONNECT_ERROR:return typeof a=="string"||uo(a);case sa.EVENT:case sa.BINARY_EVENT:return Array.isArray(a)&&(typeof a[0]=="number"||typeof a[0]=="string"&&qc.indexOf(a[0])===-1);case sa.ACK:case sa.BINARY_ACK:return Array.isArray(a)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Yc{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const a=Hc(this.reconPack,this.buffers);return this.finishedReconstruction(),a}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Kc=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Hs,Encoder:Wc,get PacketType(){return sa},protocol:Gc},Symbol.toStringTag,{value:"Module"}));function Va(s,t,a){return s.on(t,a),function(){s.off(t,a)}}const Zc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class tn extends ba{constructor(t,a,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=a,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Va(t,"open",this.onopen.bind(this)),Va(t,"packet",this.onpacket.bind(this)),Va(t,"error",this.onerror.bind(this)),Va(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...a){var r,o,l;if(Zc.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(a.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(a),this;const p={type:sa.EVENT,data:a};if(p.options={},p.options.compress=this.flags.compress!==!1,typeof a[a.length-1]=="function"){const b=this.ids++,A=a.pop();this._registerAckCallback(b,A),p.id=b}const f=(o=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||o===void 0?void 0:o.writable,m=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!f||(m?(this.notifyOutgoingListeners(p),this.packet(p)):this.sendBuffer.push(p)),this.flags={},this}_registerAckCallback(t,a){var r;const o=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(o===void 0){this.acks[t]=a;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let f=0;f<this.sendBuffer.length;f++)this.sendBuffer[f].id===t&&this.sendBuffer.splice(f,1);a.call(this,new Error("operation has timed out"))},o),p=(...f)=>{this.io.clearTimeoutFn(l),a.apply(this,f)};p.withError=!0,this.acks[t]=p}emitWithAck(t,...a){return new Promise((r,o)=>{const l=(p,f)=>p?o(p):r(f);l.withError=!0,a.push(l),this.emit(t,...a)})}_addToQueue(t){let a;typeof t[t.length-1]=="function"&&(a=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((o,...l)=>r!==this._queue[0]?void 0:(o!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),a&&a(o)):(this._queue.shift(),a&&a(null,...l)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const a=this._queue[0];a.pending&&!t||(a.pending=!0,a.tryCount++,this.flags=a.flags,this.emit.apply(this,a.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:sa.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,a){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,a),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case sa.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case sa.EVENT:case sa.BINARY_EVENT:this.onevent(t);break;case sa.ACK:case sa.BINARY_ACK:this.onack(t);break;case sa.DISCONNECT:this.ondisconnect();break;case sa.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const a=t.data||[];t.id!=null&&a.push(this.ack(t.id)),this.connected?this.emitEvent(a):this.receiveBuffer.push(Object.freeze(a))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const a=this._anyListeners.slice();for(const r of a)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const a=this;let r=!1;return function(...o){r||(r=!0,a.packet({type:sa.ACK,id:t,data:o}))}}onack(t){const a=this.acks[t.id];typeof a=="function"&&(delete this.acks[t.id],a.withError&&t.data.unshift(null),a.apply(this,t.data))}onconnect(t,a){this.id=t,this.recovered=a&&this._pid===a,this._pid=a,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:sa.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const a=this._anyListeners;for(let r=0;r<a.length;r++)if(t===a[r])return a.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const a=this._anyOutgoingListeners;for(let r=0;r<a.length;r++)if(t===a[r])return a.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const a=this._anyOutgoingListeners.slice();for(const r of a)r.apply(this,t.data)}}}function jr(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}jr.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),a=Math.floor(t*this.jitter*s);s=Math.floor(t*10)&1?s+a:s-a}return Math.min(s,this.max)|0};jr.prototype.reset=function(){this.attempts=0};jr.prototype.setMin=function(s){this.ms=s};jr.prototype.setMax=function(s){this.max=s};jr.prototype.setJitter=function(s){this.jitter=s};class Rs extends ba{constructor(t,a){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(a=t,t=void 0),a=a||{},a.path=a.path||"/socket.io",this.opts=a,cs(this,a),this.reconnection(a.reconnection!==!1),this.reconnectionAttempts(a.reconnectionAttempts||1/0),this.reconnectionDelay(a.reconnectionDelay||1e3),this.reconnectionDelayMax(a.reconnectionDelayMax||5e3),this.randomizationFactor((r=a.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new jr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(a.timeout==null?2e4:a.timeout),this._readyState="closed",this.uri=t;const o=a.parser||Kc;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=a.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var a;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(a=this.backoff)===null||a===void 0||a.setMin(t),this)}randomizationFactor(t){var a;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(a=this.backoff)===null||a===void 0||a.setJitter(t),this)}reconnectionDelayMax(t){var a;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(a=this.backoff)===null||a===void 0||a.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Nc(this.uri,this.opts);const a=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const o=Va(a,"open",function(){r.onopen(),t&&t()}),l=f=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",f),t?t(f):this.maybeReconnectOnOpen()},p=Va(a,"error",l);if(this._timeout!==!1){const f=this._timeout,m=this.setTimeoutFn(()=>{o(),l(new Error("timeout")),a.close()},f);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(o),this.subs.push(p),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Va(t,"ping",this.onping.bind(this)),Va(t,"data",this.ondata.bind(this)),Va(t,"error",this.onerror.bind(this)),Va(t,"close",this.onclose.bind(this)),Va(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(a){this.onclose("parse error",a)}}ondecoded(t){ds(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,a){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new tn(this,t,a),this.nsps[t]=r),r}_destroy(t){const a=Object.keys(this.nsps);for(const r of a)if(this.nsps[r].active)return;this._close()}_packet(t){const a=this.encoder.encode(t);for(let r=0;r<a.length;r++)this.engine.write(a[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,a){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,a),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const a=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(o=>{o?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",o)):t.onreconnect()}))},a);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ir={};function fr(s,t){typeof s=="object"&&(t=s,s=void 0),t=t||{};const a=Mc(s,t.path||"/socket.io"),r=a.source,o=a.id,l=a.path,p=Ir[o]&&l in Ir[o].nsps,f=t.forceNew||t["force new connection"]||t.multiplex===!1||p;let m;return f?m=new Rs(r,t):(Ir[o]||(Ir[o]=new Rs(r,t)),m=Ir[o]),a.query&&!t.query&&(t.query=a.queryKey),m.socket(a.path,t)}Object.assign(fr,{Manager:Rs,Socket:tn,io:fr,connect:fr});var Jc=S("<!> <!>",1),Xc=S('<span class="text-red-500 font-bold text-xs">Live</span>'),Qc=S('<div class="flex items-center gap-2 text-sm min-w-[150px] text-start justify-start"><!> <span class="flex gap-2 items-center"> <!></span></div>'),eu=S('<div class="flex items-center gap-2"><!> <span> </span></div>'),tu=S("<!> ",1),au=S('<span class="flex items-center gap-2"><svg class="w-4 h-4 text-green-500" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg> </span>'),ru=S('<p class="text-center text-gray-500">No data found</p>'),su=S('<!> <div class="w-full h-[350px] overflow-y-auto flex"><!></div>',1),ou=S('<div class="flex flex-row items-center justify-center space-x-4 py-4"><!> <div class="flex flex-row gap-2 items-center text-sm text-muted-foreground"><span class="p-2 rounded-md aspect-square bg-[#015a62] bg-opacity-10"> </span> of <span class="p-2 rounded-md aspect-square bg-[#015a62] bg-opacity-20"> </span> Page.</div> <!></div>'),nu=S('<video width="640" height="360" controls autoplay controlsList="nodownload" disablePictureInPicture="" class="video-player aspect-video h-[360px] w-auto svelte-wn6z6u"><source type="video/mp4"> Your browser does not support the video tag.</video>',2),lu=S('<!> <div class="flex items-center justify-center w-full h-full"><!></div>',1),iu=S('<div class="m-0"><!></div> <!>  <!>',1);function du(s,t){Ft(t,!1);const a=ra(),r=()=>X(ye(),"$theftData",a),o=()=>X(e(le),"$tableAttrs",a),l=()=>X(e(I),"$headerRows",a),p=()=>X(e(Q),"$tableBodyAttrs",a),f=()=>X(e(W),"$pageRows",a),m=()=>X(e(ve),"$pageIndex",a),x=()=>X(e(H),"$hasPreviousPage",a),b=()=>X(e(me),"$pageCount",a),A=()=>X(e(Y),"$hasNextPage",a),C=_(),$=_(),h=_(),k=_(),w=_(),R=_(),N=_(),I=_(),W=_(),le=_(),Q=_(),O=_(),ve=_(),Y=_(),H=_(),me=_();Aa();let ye=L(t,"theftData",8),re=L(t,"token",8);L(t,"dateRange",8),L(t,"selectedStore",8);let pe=_(1),Be=100,Je=5,ge=_(null),Oe=_(!1);const q=async se=>{i(Oe,!0);try{const Le=await nn.get(`https://api.moksa.ai/stream?key=${se}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${re()}`},responseType:"blob"});console.log("Response headers:",Le.headers);const de=new Blob([Le.data],{type:Le.headers["content-type"]}),He=URL.createObjectURL(de);i(ge,He),console.log("Video URL:",e(ge))}catch(Le){console.error("Error fetching video:",Le)}};M(()=>r(),()=>{i(C,Math.ceil((r()?.total||0)/Be))}),M(()=>r(),()=>{i($,Math.ceil((r()?.data?.length||0)/Je))}),M(()=>r(),()=>{console.log("Table data updated:",r())}),M(()=>r(),()=>{i(h,r().data.map(se=>{const Le=se?.createdAt?new Date(se?.createdAt):null,de=Le?Le.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"N/A",He=Le?Le.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A";return{storeName:se.name||"N/A",date:de,videoLink:"Watch Video",videoUri:se.video_uri,time:He,theftProbability:se.theftProbability,live:se.live}}))}),M(()=>e(h),()=>{i(k,st(e(h)))}),M(()=>(e(h),e(k)),()=>{i(w,wa(e(h),se=>e(k).subscribe(se)))}),M(()=>(e(w),ga),()=>{i(R,Ya(e(w),{page:nr({initialPageSize:Je}),sort:Ka(),filter:Za({fn:({filterValue:se,value:Le})=>Le.toLowerCase().includes(se.toLowerCase())}),select:ga()}))}),M(()=>(e(R),r()),()=>{i(N,e(R).createColumns(r().column.filter(se=>!["store_id","first_name","last_name","validated_by","date_validated"].includes(se.key)).sort((se,Le)=>{const de=["name","theftProbability","createdAt","profile","video_uri"];return de.indexOf(se.key)-de.indexOf(Le.key)}).map(se=>e(R).column({accessor:se.key==="name"?"storeName":se.key==="video_uri"?"videoLink":se.key==="createdAt"?"date":se.key==="profile"?"time":se.key,header:se.header==="Profile"?"Time":se.header==="Created At"?"Date":se.header==="Name"?"Store":se.header}))))}),M(()=>(e(I),e(W),e(le),e(Q),e(O),e(R),e(N)),()=>{(se=>(pt(i(I,se.headerRows),"$headerRows",a),pt(i(W,se.pageRows),"$pageRows",a),pt(i(le,se.tableAttrs),"$tableAttrs",a),pt(i(Q,se.tableBodyAttrs),"$tableBodyAttrs",a),i(O,se.pluginStates)))(e(R).createViewModel(e(N)))}),M(()=>(e(ve),e(Y),e(H),e(me),e(O)),()=>{(se=>(pt(i(ve,se.pageIndex),"$pageIndex",a),pt(i(Y,se.hasNextPage),"$hasNextPage",a),pt(i(H,se.hasPreviousPage),"$hasPreviousPage",a),pt(i(me,se.pageCount),"$pageCount",a)))(e(O).page)}),M(()=>(e(Oe),e(ge)),()=>{e(Oe)===!1&&e(ge)&&(console.log("revoking video"),URL.revokeObjectURL(e(ge)),i(ge,null))}),na(),Bt();var K=iu(),Ie=g(K),ae=c(Ie);Ua(ae,it(o,{class:"w-full",children:(se,Le)=>{var de=su(),He=g(de);Ha(He,{children:(ke,Re)=>{var xe=T(),Ce=g(xe);mt(Ce,1,l,aa,(ze,Fe)=>{var Ve=D(()=>e(Fe).attrs());Wt(ze,{get rowAttrs(){return e(Ve)},children:(j,De)=>{la(j,{class:"bg-transparent flex flex-row border-b items-center",children:(Pe,Ae)=>{var J=T(),Ge=g(J);mt(Ge,1,()=>e(Fe).cells,v=>v.id,(v,y)=>{var F=D(()=>e(y).attrs()),P=D(()=>e(y).props());Wt(v,{get attrs(){return e(F)},get props(){return e(P)},children:Gt,$$slots:{default:(U,te)=>{const je=D(()=>te.attrs),Ne=D(()=>te.props);qa(U,it(()=>e(je),{class:"text-[#727272] whitespace-nowrap h-full flex items-center justify-center flex-1 w-[14.285%]",children:(Ue,B)=>{var ce=D(()=>`hover:bg-transparent text-[#727272] opacity-60 min-w-[150px] ${e(y).id==="storeName"?"text-start justify-start":""}`);St(Ue,{variant:"ghost",get class(){return e(ce)},$$events:{click(...oe){e(Ne).sort.toggle?.apply(this,oe)}},children:(oe,he)=>{var Ke=Jc(),E=g(Ke),ue=D(()=>e(y).render());ha(E,{get of(){return e(ue)}});var G=u(E,2);or(G,{class:"ml-2 h-4 w-4"}),n(oe,Ke)},$$slots:{default:!0}})},$$slots:{default:!0}}))}}})}),n(Pe,J)},$$slots:{default:!0}})},$$slots:{default:!0}})}),n(ke,xe)},$$slots:{default:!0}});var Qe=u(He,2),z=c(Qe);{var Me=ke=>{ja(ke,it(p,{class:"w-full",children:(Re,xe)=>{var Ce=T(),ze=g(Ce);mt(ze,1,f,Fe=>Fe.id,(Fe,Ve)=>{var j=D(()=>e(Ve).attrs());Wt(Fe,{get rowAttrs(){return e(j)},children:Gt,$$slots:{default:(De,Pe)=>{const Ae=D(()=>Pe.rowAttrs);la(De,it(()=>e(Ae),{class:"border-b flex items-center w-full",children:(J,Ge)=>{var v=T(),y=g(v);mt(y,1,()=>e(Ve).cells,F=>F.id,(F,P)=>{var U=D(()=>e(P).attrs());Wt(F,{get attrs(){return e(U)},children:Gt,$$slots:{default:(te,je)=>{const Ne=D(()=>je.attrs);Da(te,it(()=>e(Ne),{class:"flex w-[14.285%] items-center justify-center flex-1 whitespace-nowrap py-2",children:(Ue,B)=>{var ce=T(),oe=g(ce);{var he=E=>{var ue=Qc(),G=c(ue);Ga(G,{class:"text-blue-600"});var we=u(G,2),fe=c(we),Ye=u(fe);{var et=Xe=>{var bt=Xc();n(Xe,bt)};ee(Ye,Xe=>{e(Ve).original.live&&Xe(et)})}d(we),d(ue),Ee(()=>Se(fe,`${e(Ve).original.storeName??""} `)),n(E,ue)},Ke=E=>{var ue=T(),G=g(ue);{var we=Ye=>{var et=eu(),Xe=c(et);Sr(Xe,{size:"20"});var bt=u(Xe,2),ut=c(bt,!0);d(bt),d(et),Ee(()=>Se(ut,e(Ve).original.employee)),n(Ye,et)},fe=Ye=>{var et=T(),Xe=g(et);{var bt=dt=>{St(dt,{variant:"link",class:"text-red-500 p-0 flex items-center gap-2",$$events:{click:()=>{q(e(Ve).original.videoUri)}},children:(yt,Ct)=>{var Ot=tu(),xt=g(Ot);Yn(xt,{size:16});var ot=u(xt);Ee(()=>Se(ot,` ${e(Ve).original.videoLink??""}`)),n(yt,Ot)},$$slots:{default:!0}})},ut=dt=>{var yt=T(),Ct=g(yt);{var Ot=ot=>{var wt=au(),Dt=u(c(wt));d(wt),Ee(()=>Se(Dt,` ${e(Ve).original.callHistory??""}`)),n(ot,wt)},xt=ot=>{var wt=D(()=>e(P).render());ha(ot,{get of(){return e(wt)}})};ee(Ct,ot=>{e(P).id==="callHistory"?ot(Ot):ot(xt,!1)},!0)}n(dt,yt)};ee(Xe,dt=>{e(P).id==="videoLink"?dt(bt):dt(ut,!1)},!0)}n(Ye,et)};ee(G,Ye=>{e(P).id==="employee"?Ye(we):Ye(fe,!1)},!0)}n(E,ue)};ee(oe,E=>{e(P).id==="storeName"?E(he):E(Ke,!1)})}n(Ue,ce)},$$slots:{default:!0}}))}}})}),n(J,v)},$$slots:{default:!0}}))}}})}),n(Re,Ce)},$$slots:{default:!0}}))},Z=ke=>{ja(ke,it(p,{class:"w-full",children:(Re,xe)=>{la(Re,{class:"border-b flex items-center w-full",children:(Ce,ze)=>{Da(Ce,{class:"flex w-[14.285%] items-center justify-center flex-1 whitespace-nowrap py-2",children:(Fe,Ve)=>{var j=ru();n(Fe,j)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}))};ee(z,ke=>{r()?.data?.length>0?ke(Me):ke(Z,!1)})}d(Qe),n(se,de)},$$slots:{default:!0}})),d(Ie);var ie=u(Ie,2);{var _e=se=>{var Le=ou(),de=c(Le),He=D(()=>!x());St(de,{size:"sm",variant:"outline",class:"bg-transparent hover:bg-transparent text-[#727272] gap-2",get disabled(){return e(He)},$$events:{click:()=>Oa(e(ve),m()-1)},children:(Ce,ze)=>{$e();var Fe=We("Previous");n(Ce,Fe)},$$slots:{default:!0}});var Qe=u(de,2),z=c(Qe),Me=c(z,!0);d(z);var Z=u(z,2),ke=c(Z,!0);d(Z),$e(),d(Qe);var Re=u(Qe,2),xe=D(()=>!A()&&e(pe)>=e(C));St(Re,{size:"sm",variant:"outline",get disabled(){return e(xe)},class:"bg-transparent hover:bg-transparent text-[#727272] gap-2",$$events:{click:()=>{m()<e($)-1&&Oa(e(ve),m()+1)}},children:(Ce,ze)=>{$e();var Fe=We("Next");n(Ce,Fe)},$$slots:{default:!0}}),d(Le),Ee(()=>{Se(Me,m()+1<10?"0"+(m()+1):m()+1),Se(ke,b()<10?"0"+b():b())}),n(se,Le)};ee(ie,se=>{r()?.data?.length>0&&se(_e)})}var Te=u(ie,2);tr(Te,{get open(){return e(Oe)},set open(se){i(Oe,se)},children:(se,Le)=>{ar(se,{class:"sm:max-w-[720px]",children:(de,He)=>{var Qe=lu(),z=g(Qe);rr(z,{children:(xe,Ce)=>{sr(xe,{children:(ze,Fe)=>{$e();var Ve=We("Video Playback");n(ze,Ve)},$$slots:{default:!0}})},$$slots:{default:!0}});var Me=u(z,2),Z=c(Me);{var ke=xe=>{var Ce=nu();Ce.muted=!0;var ze=c(Ce);$e(),d(Ce),Ee(()=>ya(ze,"src",e(ge))),n(xe,Ce)},Re=xe=>{ma(xe)};ee(Z,xe=>{e(ge)?xe(ke):xe(Re,!1)})}d(Me),n(de,Qe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),n(s,K),jt()}var cu=S("<!> <!>",1),uu=S('<div class="p-2"><!></div> <!>',1),fu=S("<!> <!>",1),pu=S("<!> Export Reports",1),hu=S('<div class="flex items-center justify-center h-full w-full"><!></div>'),vu=S('<p class="text-[#323232] dark:text-white text-lg font-semibold">No data found</p>'),gu=S('<div class="tooltip svelte-kjpj7"> </div>'),mu=S(`<section class="w-full p-4 flex flex-col max-h-[calc(100vh-75px)] overflow-y-auto hide-scrollbar"><div class="flex items-center justify-between"><span class="flex items-center border-black h-[40px] border-opacity-[18%] border-[1px] rounded-md dark:border-white"><button>7 Days</button> <button>15 Days</button> <button>30 Days</button> <button>12 Months</button> <!></span> <span class="flex items-center gap-3"><!> <!></span></div> <div class="grid grid-cols-8 grid-rows-12 gap-4 my-4 h-[1600px]"><div class="col-span-2 border rounded-md bg-gradient-to-r from-[#02A7FD] to-[#141C64] p-2 flex items-center gap-3 max-h-[100px]"><span class="size-[60px] grid place-items-center text-white bg-white bg-opacity-20 rounded-full rotate-90"><svg width="40" height="40" viewBox="0 0 22 22" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="svelte-kjpj7"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.2503 9.71873L17.5622 10.441C17.604 10.5392 17.6935 10.6045 17.8085 10.627C17.9244 10.648 18.0352 10.6195 18.1188 10.546L18.9301 9.83196C19.0128 9.75921 19.046 9.66096 19.0222 9.55896C18.9983 9.45696 18.9216 9.38046 18.8108 9.34221L18.0583 9.09096L17.2503 9.71873ZM16.1159 12.712C16.5242 12.904 16.808 13.2805 16.8122 13.7163L16.8753 17.9769C16.8838 18.6122 16.306 19.1327 15.5858 19.1402C14.8639 19.1477 14.2724 18.6392 14.2639 18.0054L14.2111 14.4302L11.3747 13.1109L10.9997 12.9362C10.9827 13.0224 10.9648 13.1087 10.9477 13.1934L10.4023 15.9047H10.398C10.3349 16.2257 10.1167 16.5212 9.77157 16.6974L5.34139 18.9826C4.71922 19.3036 3.91896 19.1206 3.55418 18.5716C3.1894 18.0241 3.39736 17.3199 4.02122 16.9989L7.92711 14.9852L8.57485 11.7692C8.54843 11.6792 8.52882 11.5869 8.51774 11.4924C8.40439 10.5804 8.37371 9.78916 8.45042 9.07149C8.95241 7.96973 9.57883 6.83872 11.2451 6.57779C12.0326 6.50129 12.8158 6.68879 13.5053 7.01204C13.5121 7.01579 13.5206 7.01954 13.5274 7.02179C13.8223 7.15979 14.0967 7.32328 14.3481 7.49954C14.3916 7.53029 14.4351 7.56104 14.4768 7.59329L14.9413 8.69953L15.3257 8.40028L15.4322 8.31778L15.572 8.21053L15.8183 8.01853L16.5598 7.44253C16.5862 7.42303 16.6118 7.40428 16.6407 7.38703C16.7328 7.32929 16.8351 7.29103 16.9399 7.27003C17.0575 7.24528 17.1802 7.24303 17.2978 7.26253C17.4811 7.29328 17.6558 7.37578 17.7887 7.50852C18.1075 7.82502 18.0743 8.30953 17.7146 8.58927L16.4277 9.58752L15.1859 10.5513C15.099 10.63 14.9899 10.693 14.8629 10.7335C14.4112 10.8798 13.9092 10.6758 13.7439 10.2768L13.0459 8.61176C13.0152 8.66201 12.9871 8.71376 12.9632 8.76551C12.7297 9.274 12.7169 10.006 12.8515 11.0829C12.8558 11.1212 12.8601 11.1579 12.8626 11.1939L16.1159 12.712ZM11.2068 10.4289C11.1804 10.4177 11.1565 10.4057 11.1301 10.3959L11.2068 10.4289ZM9.14688 6.89038C9.62671 6.46813 10.2574 6.14563 11.1386 6.00913L11.1582 6.00688C12.0966 5.91314 13.0153 6.12764 13.814 6.50188C14.1932 6.68038 14.5495 6.89339 14.8657 7.12813C15.06 7.27213 15.2389 7.42212 15.4043 7.57512L16.1304 7.01037C16.1978 6.95637 16.2719 6.91062 16.3461 6.87012C16.0563 6.39611 15.7461 5.96037 15.4162 5.56437C14.8904 4.93286 14.3168 4.39737 13.7142 3.95188C12.1742 2.81712 10.4304 2.26212 8.73097 2.13763C7.52416 2.04913 6.33948 2.17588 5.26646 2.46612C4.19514 2.75412 3.2372 3.20336 2.47788 3.75988C1.12192 4.75737 0.412832 6.09767 0.879872 7.45895C1.12873 8.18494 2.04066 9.20795 3.147 9.9609C3.74019 10.3659 4.38621 10.6884 5.0041 10.8347C5.58193 10.9727 6.13677 10.9554 6.59445 10.7004C6.92172 10.5182 7.21149 10.2069 7.44075 9.73816C7.53876 9.53865 7.62655 9.34066 7.71603 9.13891C8.06717 8.3514 8.44205 7.51063 9.14688 6.89038ZM14.1284 3.50561C14.1114 3.39611 14.1003 3.28512 14.1003 3.17185C14.1003 1.91635 15.2568 0.900879 16.6809 0.900879C18.1077 0.900879 19.2616 1.91863 19.2616 3.17185C19.2616 4.42736 18.1051 5.44283 16.6809 5.44283C16.4696 5.44283 16.2667 5.41958 16.0699 5.37983C15.4767 4.63808 14.8221 4.01635 14.1284 3.50561Z" fill="currentColor"></path></svg></span> <span><p class="text-white text-xl font-bold"> </p> <p class="text font-semibold capitalize text-white">total thefts detected</p></span></div> <div class="col-span-2 border rounded-md bg-gradient-to-r from-[#FFB156] to-[#FF007A] p-2 flex items-center gap-3 max-h-[100px]"><span class="size-[60px] grid place-items-center text-white bg-white bg-opacity-20 rounded-full rotate-90"><svg width="40" height="40" viewBox="0 0 22 22" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="svelte-kjpj7"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.2503 9.71873L17.5622 10.441C17.604 10.5392 17.6935 10.6045 17.8085 10.627C17.9244 10.648 18.0352 10.6195 18.1188 10.546L18.9301 9.83196C19.0128 9.75921 19.046 9.66096 19.0222 9.55896C18.9983 9.45696 18.9216 9.38046 18.8108 9.34221L18.0583 9.09096L17.2503 9.71873ZM16.1159 12.712C16.5242 12.904 16.808 13.2805 16.8122 13.7163L16.8753 17.9769C16.8838 18.6122 16.306 19.1327 15.5858 19.1402C14.8639 19.1477 14.2724 18.6392 14.2639 18.0054L14.2111 14.4302L11.3747 13.1109L10.9997 12.9362C10.9827 13.0224 10.9648 13.1087 10.9477 13.1934L10.4023 15.9047H10.398C10.3349 16.2257 10.1167 16.5212 9.77157 16.6974L5.34139 18.9826C4.71922 19.3036 3.91896 19.1206 3.55418 18.5716C3.1894 18.0241 3.39736 17.3199 4.02122 16.9989L7.92711 14.9852L8.57485 11.7692C8.54843 11.6792 8.52882 11.5869 8.51774 11.4924C8.40439 10.5804 8.37371 9.78916 8.45042 9.07149C8.95241 7.96973 9.57883 6.83872 11.2451 6.57779C12.0326 6.50129 12.8158 6.68879 13.5053 7.01204C13.5121 7.01579 13.5206 7.01954 13.5274 7.02179C13.8223 7.15979 14.0967 7.32328 14.3481 7.49954C14.3916 7.53029 14.4351 7.56104 14.4768 7.59329L14.9413 8.69953L15.3257 8.40028L15.4322 8.31778L15.572 8.21053L15.8183 8.01853L16.5598 7.44253C16.5862 7.42303 16.6118 7.40428 16.6407 7.38703C16.7328 7.32929 16.8351 7.29103 16.9399 7.27003C17.0575 7.24528 17.1802 7.24303 17.2978 7.26253C17.4811 7.29328 17.6558 7.37578 17.7887 7.50852C18.1075 7.82502 18.0743 8.30953 17.7146 8.58927L16.4277 9.58752L15.1859 10.5513C15.099 10.63 14.9899 10.693 14.8629 10.7335C14.4112 10.8798 13.9092 10.6758 13.7439 10.2768L13.0459 8.61176C13.0152 8.66201 12.9871 8.71376 12.9632 8.76551C12.7297 9.274 12.7169 10.006 12.8515 11.0829C12.8558 11.1212 12.8601 11.1579 12.8626 11.1939L16.1159 12.712ZM11.2068 10.4289C11.1804 10.4177 11.1565 10.4057 11.1301 10.3959L11.2068 10.4289ZM9.14688 6.89038C9.62671 6.46813 10.2574 6.14563 11.1386 6.00913L11.1582 6.00688C12.0966 5.91314 13.0153 6.12764 13.814 6.50188C14.1932 6.68038 14.5495 6.89339 14.8657 7.12813C15.06 7.27213 15.2389 7.42212 15.4043 7.57512L16.1304 7.01037C16.1978 6.95637 16.2719 6.91062 16.3461 6.87012C16.0563 6.39611 15.7461 5.96037 15.4162 5.56437C14.8904 4.93286 14.3168 4.39737 13.7142 3.95188C12.1742 2.81712 10.4304 2.26212 8.73097 2.13763C7.52416 2.04913 6.33948 2.17588 5.26646 2.46612C4.19514 2.75412 3.2372 3.20336 2.47788 3.75988C1.12192 4.75737 0.412832 6.09767 0.879872 7.45895C1.12873 8.18494 2.04066 9.20795 3.147 9.9609C3.74019 10.3659 4.38621 10.6884 5.0041 10.8347C5.58193 10.9727 6.13677 10.9554 6.59445 10.7004C6.92172 10.5182 7.21149 10.2069 7.44075 9.73816C7.53876 9.53865 7.62655 9.34066 7.71603 9.13891C8.06717 8.3514 8.44205 7.51063 9.14688 6.89038ZM14.1284 3.50561C14.1114 3.39611 14.1003 3.28512 14.1003 3.17185C14.1003 1.91635 15.2568 0.900879 16.6809 0.900879C18.1077 0.900879 19.2616 1.91863 19.2616 3.17185C19.2616 4.42736 18.1051 5.44283 16.6809 5.44283C16.4696 5.44283 16.2667 5.41958 16.0699 5.37983C15.4767 4.63808 14.8221 4.01635 14.1284 3.50561Z" fill="currentColor"></path></svg></span> <span><p class="text-white text-xl font-bold"> </p> <p class="text capitalize font-semibold text-white">total thefts prevented</p></span></div> <div class="col-span-2 border rounded-md bg-gradient-to-r from-[#FE7B7B] to-[#02A7FD] p-2 flex items-center gap-3 max-h-[100px] invisible"><span class="size-[60px] grid place-items-center text-white bg-white bg-opacity-20 rounded-full rotate-90"><svg width="40" height="40" viewBox="0 0 22 22" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="svelte-kjpj7"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.2503 9.71873L17.5622 10.441C17.604 10.5392 17.6935 10.6045 17.8085 10.627C17.9244 10.648 18.0352 10.6195 18.1188 10.546L18.9301 9.83196C19.0128 9.75921 19.046 9.66096 19.0222 9.55896C18.9983 9.45696 18.9216 9.38046 18.8108 9.34221L18.0583 9.09096L17.2503 9.71873ZM16.1159 12.712C16.5242 12.904 16.808 13.2805 16.8122 13.7163L16.8753 17.9769C16.8838 18.6122 16.306 19.1327 15.5858 19.1402C14.8639 19.1477 14.2724 18.6392 14.2639 18.0054L14.2111 14.4302L11.3747 13.1109L10.9997 12.9362C10.9827 13.0224 10.9648 13.1087 10.9477 13.1934L10.4023 15.9047H10.398C10.3349 16.2257 10.1167 16.5212 9.77157 16.6974L5.34139 18.9826C4.71922 19.3036 3.91896 19.1206 3.55418 18.5716C3.1894 18.0241 3.39736 17.3199 4.02122 16.9989L7.92711 14.9852L8.57485 11.7692C8.54843 11.6792 8.52882 11.5869 8.51774 11.4924C8.40439 10.5804 8.37371 9.78916 8.45042 9.07149C8.95241 7.96973 9.57883 6.83872 11.2451 6.57779C12.0326 6.50129 12.8158 6.68879 13.5053 7.01204C13.5121 7.01579 13.5206 7.01954 13.5274 7.02179C13.8223 7.15979 14.0967 7.32328 14.3481 7.49954C14.3916 7.53029 14.4351 7.56104 14.4768 7.59329L14.9413 8.69953L15.3257 8.40028L15.4322 8.31778L15.572 8.21053L15.8183 8.01853L16.5598 7.44253C16.5862 7.42303 16.6118 7.40428 16.6407 7.38703C16.7328 7.32929 16.8351 7.29103 16.9399 7.27003C17.0575 7.24528 17.1802 7.24303 17.2978 7.26253C17.4811 7.29328 17.6558 7.37578 17.7887 7.50852C18.1075 7.82502 18.0743 8.30953 17.7146 8.58927L16.4277 9.58752L15.1859 10.5513C15.099 10.63 14.9899 10.693 14.8629 10.7335C14.4112 10.8798 13.9092 10.6758 13.7439 10.2768L13.0459 8.61176C13.0152 8.66201 12.9871 8.71376 12.9632 8.76551C12.7297 9.274 12.7169 10.006 12.8515 11.0829C12.8558 11.1212 12.8601 11.1579 12.8626 11.1939L16.1159 12.712ZM11.2068 10.4289C11.1804 10.4177 11.1565 10.4057 11.1301 10.3959L11.2068 10.4289ZM9.14688 6.89038C9.62671 6.46813 10.2574 6.14563 11.1386 6.00913L11.1582 6.00688C12.0966 5.91314 13.0153 6.12764 13.814 6.50188C14.1932 6.68038 14.5495 6.89339 14.8657 7.12813C15.06 7.27213 15.2389 7.42212 15.4043 7.57512L16.1304 7.01037C16.1978 6.95637 16.2719 6.91062 16.3461 6.87012C16.0563 6.39611 15.7461 5.96037 15.4162 5.56437C14.8904 4.93286 14.3168 4.39737 13.7142 3.95188C12.1742 2.81712 10.4304 2.26212 8.73097 2.13763C7.52416 2.04913 6.33948 2.17588 5.26646 2.46612C4.19514 2.75412 3.2372 3.20336 2.47788 3.75988C1.12192 4.75737 0.412832 6.09767 0.879872 7.45895C1.12873 8.18494 2.04066 9.20795 3.147 9.9609C3.74019 10.3659 4.38621 10.6884 5.0041 10.8347C5.58193 10.9727 6.13677 10.9554 6.59445 10.7004C6.92172 10.5182 7.21149 10.2069 7.44075 9.73816C7.53876 9.53865 7.62655 9.34066 7.71603 9.13891C8.06717 8.3514 8.44205 7.51063 9.14688 6.89038ZM14.1284 3.50561C14.1114 3.39611 14.1003 3.28512 14.1003 3.17185C14.1003 1.91635 15.2568 0.900879 16.6809 0.900879C18.1077 0.900879 19.2616 1.91863 19.2616 3.17185C19.2616 4.42736 18.1051 5.44283 16.6809 5.44283C16.4696 5.44283 16.2667 5.41958 16.0699 5.37983C15.4767 4.63808 14.8221 4.01635 14.1284 3.50561Z" fill="currentColor"></path></svg></span> <span><p class="text-white text-xl font-bold"> </p> <p class="text capitalize font-semibold text-white">total thefts percentage</p></span></div> <div class="col-span-2 border rounded-md bg-gradient-to-r from-[#C8C303] to-[#597802] p-2 flex items-center gap-3 max-h-[100px] invisible"><span class="size-[60px] grid place-items-center text-white bg-white bg-opacity-20 rounded-full rotate-90"><svg width="40" height="40" viewBox="0 0 22 22" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="svelte-kjpj7"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.2503 9.71873L17.5622 10.441C17.604 10.5392 17.6935 10.6045 17.8085 10.627C17.9244 10.648 18.0352 10.6195 18.1188 10.546L18.9301 9.83196C19.0128 9.75921 19.046 9.66096 19.0222 9.55896C18.9983 9.45696 18.9216 9.38046 18.8108 9.34221L18.0583 9.09096L17.2503 9.71873ZM16.1159 12.712C16.5242 12.904 16.808 13.2805 16.8122 13.7163L16.8753 17.9769C16.8838 18.6122 16.306 19.1327 15.5858 19.1402C14.8639 19.1477 14.2724 18.6392 14.2639 18.0054L14.2111 14.4302L11.3747 13.1109L10.9997 12.9362C10.9827 13.0224 10.9648 13.1087 10.9477 13.1934L10.4023 15.9047H10.398C10.3349 16.2257 10.1167 16.5212 9.77157 16.6974L5.34139 18.9826C4.71922 19.3036 3.91896 19.1206 3.55418 18.5716C3.1894 18.0241 3.39736 17.3199 4.02122 16.9989L7.92711 14.9852L8.57485 11.7692C8.54843 11.6792 8.52882 11.5869 8.51774 11.4924C8.40439 10.5804 8.37371 9.78916 8.45042 9.07149C8.95241 7.96973 9.57883 6.83872 11.2451 6.57779C12.0326 6.50129 12.8158 6.68879 13.5053 7.01204C13.5121 7.01579 13.5206 7.01954 13.5274 7.02179C13.8223 7.15979 14.0967 7.32328 14.3481 7.49954C14.3916 7.53029 14.4351 7.56104 14.4768 7.59329L14.9413 8.69953L15.3257 8.40028L15.4322 8.31778L15.572 8.21053L15.8183 8.01853L16.5598 7.44253C16.5862 7.42303 16.6118 7.40428 16.6407 7.38703C16.7328 7.32929 16.8351 7.29103 16.9399 7.27003C17.0575 7.24528 17.1802 7.24303 17.2978 7.26253C17.4811 7.29328 17.6558 7.37578 17.7887 7.50852C18.1075 7.82502 18.0743 8.30953 17.7146 8.58927L16.4277 9.58752L15.1859 10.5513C15.099 10.63 14.9899 10.693 14.8629 10.7335C14.4112 10.8798 13.9092 10.6758 13.7439 10.2768L13.0459 8.61176C13.0152 8.66201 12.9871 8.71376 12.9632 8.76551C12.7297 9.274 12.7169 10.006 12.8515 11.0829C12.8558 11.1212 12.8601 11.1579 12.8626 11.1939L16.1159 12.712ZM11.2068 10.4289C11.1804 10.4177 11.1565 10.4057 11.1301 10.3959L11.2068 10.4289ZM9.14688 6.89038C9.62671 6.46813 10.2574 6.14563 11.1386 6.00913L11.1582 6.00688C12.0966 5.91314 13.0153 6.12764 13.814 6.50188C14.1932 6.68038 14.5495 6.89339 14.8657 7.12813C15.06 7.27213 15.2389 7.42212 15.4043 7.57512L16.1304 7.01037C16.1978 6.95637 16.2719 6.91062 16.3461 6.87012C16.0563 6.39611 15.7461 5.96037 15.4162 5.56437C14.8904 4.93286 14.3168 4.39737 13.7142 3.95188C12.1742 2.81712 10.4304 2.26212 8.73097 2.13763C7.52416 2.04913 6.33948 2.17588 5.26646 2.46612C4.19514 2.75412 3.2372 3.20336 2.47788 3.75988C1.12192 4.75737 0.412832 6.09767 0.879872 7.45895C1.12873 8.18494 2.04066 9.20795 3.147 9.9609C3.74019 10.3659 4.38621 10.6884 5.0041 10.8347C5.58193 10.9727 6.13677 10.9554 6.59445 10.7004C6.92172 10.5182 7.21149 10.2069 7.44075 9.73816C7.53876 9.53865 7.62655 9.34066 7.71603 9.13891C8.06717 8.3514 8.44205 7.51063 9.14688 6.89038ZM14.1284 3.50561C14.1114 3.39611 14.1003 3.28512 14.1003 3.17185C14.1003 1.91635 15.2568 0.900879 16.6809 0.900879C18.1077 0.900879 19.2616 1.91863 19.2616 3.17185C19.2616 4.42736 18.1051 5.44283 16.6809 5.44283C16.4696 5.44283 16.2667 5.41958 16.0699 5.37983C15.4767 4.63808 14.8221 4.01635 14.1284 3.50561Z" fill="currentColor"></path></svg></span> <span><p class="text-white text-xl font-bold"> </p> <p class="text capitalize font-semibold text-white">total prevention percentage</p></span></div> <div class="col-span-3 row-span-3 border rounded-md p-4 flex flex-col gap-4 h-[350px] dark:border-white/[.7]"><span class="flex items-center justify-between"><p class="text-[#323232] dark:text-white text-lg font-semibold">All Stores</p></span> <div class="flex flex-col max-h-[300px] overflow-y-auto hide-scrollbar"></div></div> <div class="col-span-5 row-span-3 border rounded-md p-4 flex flex-col gap-4 h-[350px] dark:border-white/[.7]"><span class="flex items-center justify-between"><p class="text-[#323232] dark:text-white text-lg flex items-center gap-2 font-semibold">Theft Detected</p></span> <div class="flex w-full h-full"><span class="flex flex-col w-1/4 gap-2 mt-4"><p class="text-xs text-[#475569] font-semibold">Total Thefts Detected:</p> <p class="text-xl font-semibold text-[#1E293B"> </p> <p class="text-xs text-[#475569]"> </p> <div class="circle-progress svelte-kjpj7"><svg viewBox="0 0 36 36" class="svelte-kjpj7"><path d="M18 2.0845
            a 15.9155 15.9155 0 0 1 0 31.831
            a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#FF007A" stroke-width="4" stroke-linecap="round"></path><path d="M18 2.0845
            a 15.9155 15.9155 0 0 1 0 31.831
            a 15.9155 15.9155 0 0 1 0 -31.831" fill="none" stroke="#02A7FD" stroke-width="4"></path></svg> <span class="progress-text size-10 rounded-full text-[#5B93FF] grid place-items-center bg-[#5B93FF] bg-opacity-15 svelte-kjpj7"><!></span></div> <span class="flex items-center justify-center gap-2 mt-1"><p class="flex gap-2 items-center text-xs text-[#030229] dark:text-white"><span class="w-2 h-2 rounded-full bg-gradient-to-r bg-[#02A7FD]"></span> Detected</p> <p class="flex gap-2 items-center text-xs text-[#030229] dark:text-white"><span class="w-2 h-2 rounded-full bg-[#FF007A]"></span> Prevented</p></span></span> <span class="flex w-3/4"><canvas></canvas></span></div></div> <div class="col-span-8 row-span-4 border rounded-md p-4 flex flex-col gap-2 dark:border-white/[.7]"><span class="flex items-center justify-between"><p class="text-[#323232] dark:text-white font-medium text-lg">Theft History</p></span> <span class="w-full h-full"><!></span></div> <div class="col-span-4 row-span-3 border rounded-md p-4 gap-4 h-[450px] flex flex-col dark:border-white/[.7]"><span class="flex items-center justify-between"><p class="text-[#323232] dark:text-white text-lg font-semibold">Trend for Theft</p></span> <div class="h-full w-full"><canvas></canvas></div></div> <div class="col-span-4 row-span-3 border rounded-md p-4 flex flex-col gap-4 h-[450px] dark:border-white/[.7]"><span class="flex items-center justify-between"><p class="text-[#323232] dark:text-white text-lg flex items-center gap-2 font-semibold">Suspicious Activity</p> <span class="flex items-center gap-2"><p class="flex items-center gap-2 text-xs"><span class="size-2 rounded-full bg-gradient-to-r from-[#357DFF] to-[#053895] flex-shrink-0"></span>Detected</p> <p class="flex items-center gap-2 text-xs"><span class="size-2 rounded-full bg-gradient-to-r from-[#FFB156] to-[#FF007A] flex-shrink-0"></span>Prevented</p></span></span> <div class="h-full w-full"><canvas></canvas></div></div></div></section> <!>`,1);function bu(s,t){Ft(t,!1);const a=ra(),r=()=>X(K,"$theftTrend",a),o=()=>X(Q,"$selectedStore",a),l=()=>X(le,"$dateRange",a),p=()=>X(q,"$listtheft",a),f=_(),m=_(),x=_(),b=_(),A=_(),C=_();let $=L(t,"theftandcamera",8),h=L(t,"allStores",8),k=L(t,"theftData",8),w=L(t,"moksaUserId",8),R=L(t,"token",8),N=L(t,"user",8),I=L(t,"allStoresData",8),W=_(!0),le=st("7 Days"),Q=st({value:-1,label:"All Stores"}),O=!0,ve=st(!1);const Y=h().map(ne=>({value:ne.id,label:ne.name}));let H=null,me=_(),ye=_(),re=_(),pe=null,Be=_(void 0),Je=_(void 0),ge=_("Custom"),Oe=_(!1),q=st([]),K=st([]);function Ie(){if(e(me)&&!H){const ne=e(me).getContext("2d"),at=ne.createLinearGradient(0,400,0,0);at.addColorStop(0,"#FFB156"),at.addColorStop(1,"#FF007A");const lt=ne.createLinearGradient(0,400,0,0);if(lt.addColorStop(0,"#02A7FD"),lt.addColorStop(1,"#141C64"),ne){ir.register($o,yo,ys,ws);const _t=k().data,Pt=_t.map(rt=>rt.day_of_week.trim()),Nt=_t.map(rt=>parseInt(rt.theft_detected)),Ht=_t.map(rt=>parseInt(rt.theft_prevented));H=new ir(ne,{type:"bar",data:{labels:Pt,datasets:[{label:"Theft Detected",data:Nt,backgroundColor:at,borderColor:at,borderWidth:1,borderRadius:4},{label:"Theft Prevented",data:Ht,backgroundColor:lt,borderColor:lt,borderWidth:1,borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,ticks:{stepSize:1},grid:{color:"rgba(0, 0, 0, 0.1)"}}},plugins:{legend:{display:!0},tooltip:{callbacks:{label(rt){let Vt=rt.dataset.label||"";return Vt&&(Vt+=": "),rt.parsed.y!==null&&(Vt+=rt.parsed.y),Vt}}}}}})}}}function ae(){if(e(re)&&!pe){const ne=e(re).getContext("2d");if(ne){const at=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],lt=new Map(k().data.map(rt=>[rt.day_of_week.trim(),rt])),_t=at.map(rt=>rt),Pt=_t.map(rt=>lt.get(rt)?-parseInt(lt.get(rt).theft_detected):0),Nt=_t.map(rt=>lt.get(rt)?parseInt(lt.get(rt).theft_prevented):0),Ht={labels:_t,datasets:[{label:"Detected",data:Pt,backgroundColor:rt=>{const Vt=rt.chart,{ctx:ca,chartArea:Ea}=Vt;if(!Ea)return null;const xa=ca.createLinearGradient(0,0,Vt.width,0);return xa.addColorStop(0,"rgba(4, 158, 243, 1)"),xa.addColorStop(1,"rgba(21, 29, 100, 1)"),xa},borderColor:"rgba(21, 29, 100, 1)",borderWidth:1,borderRadius:4,barThickness:20},{label:"Prevented",data:Nt,backgroundColor:rt=>{const Vt=rt.chart,{ctx:ca,chartArea:Ea}=Vt;if(!Ea)return null;const xa=ca.createLinearGradient(0,0,Vt.width,0);return xa.addColorStop(0,"rgba(255, 169, 88, 1)"),xa.addColorStop(1,"rgba(255, 1, 120, 1)"),xa},borderColor:"rgba(255, 1, 120, 1)",borderWidth:1,borderRadius:4,barThickness:20}]};pe=new ir(ne,{type:"bar",data:Ht,options:{indexAxis:"y",scales:{x:{position:"top",stacked:!1,beginAtZero:!0,grid:{display:!1},ticks:{callback(rt){return Math.abs(rt)}}},y:{stacked:!0,grid:{color:"rgba(0, 0, 0, 0.1)",drawBorder:!1}}},responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",align:"end",labels:{usePointStyle:!0,pointStyle:"circle"}},tooltip:{callbacks:{label(rt){let Vt=rt.dataset.label||"";return Vt&&(Vt+=": "),rt.parsed.x!==null&&(Vt+=Math.abs(rt.parsed.x)),Vt}}}},layout:{padding:{left:30,right:30}}}})}}}Qa(async()=>{await Promise.all([ie(),_e(-1)]),setTimeout(()=>{Ie(),ae()},100),i(W,!1)});async function ie(ne){const at=new Date;let lt=new Date(at);lt.setDate(at.getDate()-7);const _t=Ht=>Ht.toISOString().split("T")[0],Nt=await(await fetch(`https://api.moksa.ai/theft/theftListBasedOnStoreId/${o().value}/${_t(lt)}/${_t(at)}/1/100`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json"}})).json();Nt.status===200?q.set(Nt.data):console.log("no theft data")}async function _e(ne){const at=new Date,lt=new Date(at);lt.setDate(lt.getMonth()-1);const _t=Pt=>Pt.toISOString().split("T")[0];try{const Pt=await fetch(`https://api.moksa.ai/theft/theftTrendsOfAllTime/${ne}/${_t(lt)}/${_t(at)}`,{method:"GET",headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json"}});if(!Pt.ok)throw new Error("Failed to fetch theft trends");const Nt=await Pt.json();return console.log(Nt,"trends"),K.set(Nt?.data),Nt}catch(Pt){console.error("Error fetching theft trends:",Pt)}}new Date(new Date().setFullYear(new Date().getFullYear()-1)).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});let Te=st([]),se=_(0);async function Le(){if(console.log("called"),O){O=!1;return}ve.set(!0);const ne=new Date;let at=new Date(ne);switch(l()){case"7 Days":at.setDate(ne.getDate()-7);break;case"15 Days":at.setDate(ne.getDate()-15);break;case"30 Days":at.setDate(ne.getDate()-30);break;case"12 Months":at.setFullYear(ne.getFullYear()-1);break;default:at.setDate(ne.getDate()-7)}const lt=_t=>_t.toISOString().split("T")[0];console.log(o().label,o().value);try{const[_t,Pt,Nt,Ht]=await Promise.all([fetch(`https://api.moksa.ai/theft/theftDetectionDetailsByStoreid/${o().value}`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json",datetype:l()==="7 Days"?"7":l()==="15 Days"?"15":l()==="30 Days"?"30":l()==="12 Months"?"year":"7",startDate:lt(at),endDate:lt(ne)}}).then(rt=>rt.json()),fetch(`https://api.moksa.ai/theft/theftTrendsOfAllTime/${o().value}/${lt(at)}/${lt(ne)}`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json"}}).then(rt=>rt.json()),fetch(`https://api.moksa.ai/theft/theftListBasedOnStoreId/${o().value}/${lt(at)}/${lt(ne)}/1/100`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json"}}).then(rt=>rt.json()),fetch(`https://api.moksa.ai/store/getAllStoresTotals/${o().value}/${lt(at)}/${lt(ne)}`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json"}}).then(rt=>rt.json())]);console.log(_t,"theftD"),console.log(Pt,"theftT"),console.log(Nt,"theftL"),Te.set(_t),K.set(Pt),q.set(Nt.data),i(f,Ht.data.totaldetectedthefts),i(m,Ht.data.totalpreventedthefts),de(_t),He(_t),Pt.data,i(se,e(se)+1)}catch(_t){console.error("Error fetching store-wise data:",_t)}finally{ve.set(!1)}}function de(ne){if(H){const at=ne?.data.map(Pt=>l()==="7 Days"?Pt.day_of_week.trim():l()==="12 Months"?Pt.month_name.trim():Pt.date.trim()),lt=ne?.data.map(Pt=>parseInt(Pt.theft_detected)),_t=ne?.data.map(Pt=>parseInt(Pt.theft_prevented));H.data.labels=at,H.data.datasets[0].data=lt,H.data.datasets[1].data=_t,H.update()}}function He(ne){if(pe){const at=ne?.data.map(Pt=>l()==="7 Days"?Pt?.day_of_week?.trim():l()==="12 Months"?Pt?.month_name?.trim():Pt?.date?.trim()),lt=ne?.data.map(Pt=>parseInt(-Pt.theft_detected)),_t=ne?.data.map(Pt=>Number(Pt.theft_prevented));pe.data.labels=at,pe.data.datasets[0].data=lt,pe.data.datasets[1].data=_t,pe.update()}}function Qe(ne){}async function z(){if(i(ge,"Custom"),i(Be,void 0),O){O=!1;return}ve.set(!0);const ne=new Date;let at=new Date(ne);switch(l()){case"7 Days":at.setDate(ne.getDate()-7);break;case"15 Days":at.setDate(ne.getDate()-15);break;case"30 Days":at.setDate(ne.getDate()-30);break;case"12 Months":at.setFullYear(ne.getFullYear()-1);break;default:at.setDate(ne.getDate()-7)}const lt=_t=>_t.toISOString().split("T")[0];console.log(lt(at)),console.log(lt(ne)),console.log("selectedstore",o().value);try{const[_t,Pt,Nt,Ht]=await Promise.all([fetch(`https://api.moksa.ai/theft/theftDetectionDetailsByStoreid/${o().value}`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json",datetype:l()==="7 Days"?"7":l()==="15 Days"?"15":l()==="30 Days"?"30":l()==="12 Months"?"year":"7",startDate:lt(at),endDate:lt(ne)}}).then(rt=>rt.json()),fetch(`https://api.moksa.ai/theft/theftTrendsOfAllTime/${o().value}/${lt(at)}/${lt(ne)}`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json"}}).then(rt=>rt.json()),fetch(`https://api.moksa.ai/theft/theftListBasedOnStoreId/${o().value}/${lt(at)}/${lt(ne)}/1/100`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json"}}).then(rt=>rt.json()),fetch(`https://api.moksa.ai/store/getAllStoresTotals/${o().value}/${lt(at)}/${lt(ne)}`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json"}}).then(rt=>rt.json())]);console.log(Ht),console.log(_t),console.log(Pt),console.log(Nt),Te.set(_t),K.set(Pt),q.set(Nt.data),de(_t),He(_t),Pt.data,console.log(Ht),i(f,Ht.data.totaldetectedthefts),i(m,Ht.data.totalpreventedthefts),i(se,e(se)+1)}catch(_t){console.error("Error fetching data:",_t)}finally{ve.set(!1)}}async function Me(){console.log("fetching custom date data");const ne=e(Be)?.start?`${e(Be).start.year}-${String(e(Be).start.month).padStart(2,"0")}-${String(e(Be).start.day).padStart(2,"0")}`:"",at=e(Be)?.end?`${e(Be).end.year}-${String(e(Be).end.month).padStart(2,"0")}-${String(e(Be).end.day).padStart(2,"0")}`:"";console.log(ne),console.log(at);try{const[lt,_t,Pt,Nt]=await Promise.all([fetch(`https://api.moksa.ai/theft/theftDetectionDetailsByStoreid/${o().value}`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json",datetype:l()==="7 Days"?"7":l()==="15 Days"?"15":l()==="30 Days"?"30":l()==="12 Months"?"year":l()==="custom"?"custom":"7",startDate:ne,endDate:at}}).then(Ht=>Ht.json()),fetch(`https://api.moksa.ai/theft/theftTrendsOfAllTime/${o().value}/${ne}/${at}`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json"}}).then(Ht=>Ht.json()),fetch(`https://api.moksa.ai/theft/theftListBasedOnStoreId/${o().value}/${ne}/${at}/1/100`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json"}}).then(Ht=>Ht.json()),fetch(`https://api.moksa.ai/store/getAllStoresTotals/${o().value}/${ne}/${at}`,{headers:{Authorization:`Bearer ${R()}`,"Content-Type":"application/json"}}).then(Ht=>Ht.json())]);console.log(Nt),console.log(lt),console.log(_t),console.log(Pt),Te.set(lt),K.set(_t),q.set(Pt.data),i(f,Nt.data.totaldetectedthefts),i(m,Nt.data.totalpreventedthefts),de(lt),He(lt),_t.data,i(se,e(se)+1)}catch(lt){console.error("Error fetching data:",lt)}finally{ve.set(!1)}}function Z(ne){return typeof ne=="string"&&ne.includes(",")?ne.split(",")[0].trim():String(ne)}function ke(ne){const at=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),lt=Object.keys(ne[0]).join(","),_t=ne.map(Vt=>Object.values(Vt).map(ca=>Z(ca)).join(",")).join(`
`),Pt=lt+`
`+_t,Nt=new Blob([Pt],{type:"text/csv"}),Ht=URL.createObjectURL(Nt),rt=window.document.createElement("a");rt.href=Ht,rt.download=`theft&camera_${at}.csv`,document.body.appendChild(rt),rt.click(),document.body.removeChild(rt)}function Re(ne){console.log(ne);const at=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),lt=["Day of Week","Theft Count"],_t=l()==="7 Days"?ne.map(Vt=>[Vt.day_of_week.trim(),Vt.theft_count]):ne.data.map(Vt=>[Vt.day_of_week.trim(),Vt.theft_count]),Pt=[lt,..._t].map(Vt=>Vt.join(",")).join(`
`),Nt=new Blob([Pt],{type:"text/csv"}),Ht=URL.createObjectURL(Nt),rt=document.createElement("a");rt.href=Ht,rt.download=`theft_trend_${at}.csv`,document.body.appendChild(rt),rt.click(),document.body.removeChild(rt)}function xe(ne){if(!ne||ne.length===0){console.error("No data to convert to CSV");return}const at=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),lt=Object.keys(ne[0]).join(","),_t=ne.map(Vt=>Object.values(Vt).map(ca=>Z(ca)).join(",")).join(`
`),Pt=lt+`
`+_t,Nt=new Blob([Pt],{type:"text/csv"}),Ht=URL.createObjectURL(Nt),rt=document.createElement("a");rt.href=Ht,rt.download=`theft_list_${at}.csv`,document.body.appendChild(rt),rt.click(),document.body.removeChild(rt),URL.revokeObjectURL(Ht)}async function Ce(){let ne;q.subscribe(lt=>{ne=lt.data||lt})(),ne&&ne.length>0?xe(ne):console.error("No theft list data to export")}let ze={};function Fe(){h().filter(ne=>ne.id!==-1).forEach(ne=>{Ve(ne.id)})}function Ve(ne){const at=w();ze[ne]&&ze[ne].disconnect(),ze[ne]=fr("https://api.moksa.ai",{withCredentials:!0,extraHeaders:{Authorization:`Bearer ${R()}`},transports:["websocket","polling"]});const lt=ze[ne];lt.on("error",_t=>{console.log(`error for store ${ne}:`,_t)}),lt.on("connect",()=>{console.log(`connected for store in theft ${ne}`),lt.emit("joinUser",at),lt.emit("joinStore",ne)}),lt.on(`theft_store_${ne}`,_t=>{console.log(`Received theft data for store ${ne}:`,_t),ua(`Received theft data for store ${ne}:`,{description:`Store: ${ne}, Theft Probability: ${_t?.theftProbability}, Camera: ${_t?.camera_id}`});let Pt=[];return q.update(Nt=>{const Ht=Array.isArray(Nt)?Nt:[];return Nt&&Array.isArray(Nt.data)?{...Nt,data:[{storeId:ne,..._t,live:!0},...Nt.data].slice(0,100)}:(Pt=Ht,[{storeId:ne,..._t,live:!0},...Ht].slice(0,100))}),[ne,...Pt].slice(0,100)}),lt.on("disconnect",()=>{console.log(`disconnected for store ${ne}`)})}Qa(()=>{setTimeout(()=>{Fe()},500)}),mo(()=>{Object.values(ze).forEach(ne=>{console.log("disconnecting socket"),ne.disconnect()})});let j=_("");Aa();let De=_(),Pe=_(new Date),Ae=_(!1),J=_(""),Ge=_(0),v=_(0);function y(ne,at){i(Ae,!0),i(J,at),i(Ge,ne.clientX+10),i(v,ne.clientY+10)}function F(){i(Ae,!1)}M(()=>e(Be),()=>{if(e(Be)?.start&&e(Be)?.end){const ne=new Date(e(Be).start.year,e(Be).start.month-1,e(Be).start.day),at=new Date(e(Be).end.year,e(Be).end.month-1,e(Be).end.day);i(ge,`${ne.toLocaleDateString()} - ${at.toLocaleDateString()}`);const lt=Math.ceil((at.getTime()-ne.getTime())/(1e3*60*60*24));console.log(lt),le.set("custom"),setTimeout(()=>{i(Oe,!1)},200)}else i(ge,"Custom")}),M(()=>e(W),()=>{console.log("theftData",e(W))}),M(()=>Mt(I()),()=>{i(f,I().totaldetectedthefts)}),M(()=>Mt(I()),()=>{i(m,I().totalpreventedthefts)}),M(()=>(e(f),e(m)),()=>{i(x,Number(e(f))+Number(e(m)))}),M(()=>(e(x),e(f)),()=>{i(b,e(x)>0?Number(e(f))/Number(e(x))*100:0)}),M(()=>(e(x),e(m)),()=>{i(A,e(x)>0?e(m)/e(x)*100:0)}),M(()=>l(),()=>{l()!=="custom"&&z()}),M(()=>(l(),e(Be)),()=>{l()==="custom"&&(e(Be)?.start||e(Be)?.end)&&Me()}),M(()=>e(j),()=>{i(C,Y.filter(ne=>ne.label.toLowerCase().includes(e(j).toLowerCase())))}),M(()=>(l(),e(Be)),()=>{l()==="custom"?(i(De,e(Be)?.start),i(Pe,e(Be)?.end)):l()==="7 Days"?(i(De,new Date(new Date().getTime()-7*24*60*60*1e3)),i(Pe,new Date)):l()==="15 Days"?(i(De,new Date(new Date().getTime()-15*24*60*60*1e3)),i(Pe,new Date)):l()==="30 Days"?(i(De,new Date(new Date().getTime()-30*24*60*60*1e3)),i(Pe,new Date)):l()==="12 Months"&&(i(De,new Date(new Date().getTime()-12*30*24*60*60*1e3)),i(Pe,new Date))}),na(),Bt();var P=mu(),U=g(P),te=c(U),je=c(te),Ne=c(je),Ue=u(Ne,2),B=u(Ue,2),ce=u(B,2),oe=u(ce,2);wr(oe,{openFocus:!0,get open(){return e(Oe)},set open(ne){i(Oe,ne)},children:(ne,at)=>{var lt=cu(),_t=g(lt);kr(_t,{asChild:!0,children:Gt,$$slots:{default:(Nt,Ht)=>{const rt=D(()=>Ht.builder);var Vt=D(()=>[e(rt)]),ca=D(()=>`2xl:py-2 2xl:px-3 py-1 px-2  text-sm hover:bg-[#0BA5E9] hover:text-white ${l()==="custom"?"bg-[#0BA5E9] rounded-r-md text-white":"text-black dark:text-white bg-transparent dark:border-white"}`);St(Nt,{get builders(){return e(Vt)},get class(){return e(ca)},$$events:{click:()=>i(Be,void 0)},children:(Ea,xa)=>{$e();var $a=We();Ee(()=>Se($a,e(ge))),n(Ea,$a)},$$slots:{default:!0}})}}});var Pt=u(_t,2);Cr(Pt,{class:"w-auto p-0",align:"start",children:(Nt,Ht)=>{var rt=D(()=>e(Be)?.start);Dr(Nt,{initialFocus:!0,numberOfMonths:2,get placeholder(){return e(rt)},get value(){return e(Be)},set value(Vt){i(Be,Vt)},get startValue(){return e(Je)},set startValue(Vt){i(Je,Vt)},$$legacy:!0})},$$slots:{default:!0}}),n(ne,lt)},$$slots:{default:!0},$$legacy:!0}),d(je);var he=u(je,2),Ke=c(he);pr(Ke,{portal:null,children:(ne,at)=>{var lt=fu(),_t=g(lt);hr(_t,{class:"w-[150px] bg-[#F4F4F4] border text-xs px-1 border-[#E0E0E0] rounded-lg dark:bg-transparent",children:(Nt,Ht)=>{vr(Nt,{get placeholder(){return o().label}})},$$slots:{default:!0}});var Pt=u(_t,2);gr(Pt,{class:"max-h-[200px] overflow-y-auto",children:(Nt,Ht)=>{var rt=uu(),Vt=g(rt),ca=c(Vt);ia(ca,{type:"text",placeholder:"Search stores...",class:"mb-2",get value(){return e(j)},set value(xa){i(j,xa)},$$legacy:!0}),d(Vt);var Ea=u(Vt,2);mr(Ea,{children:(xa,$a)=>{var za=T(),br=g(za);{var _r=dr=>{var Lr=T(),Nr=g(Lr);mt(Nr,1,()=>e(C),aa,(fs,Hr)=>{Ca(fs,{class:"px-1",get value(){return e(Hr).value},get label(){return e(Hr).label},$$events:{click:()=>{Q.set(e(Hr)),Le()}},children:(an,zf)=>{$e();var qs=We();Ee(()=>Se(qs,e(Hr).label)),n(an,qs)},$$slots:{default:!0}})}),n(dr,Lr)},us=dr=>{Ca(dr,{disabled:!0,children:(Lr,Nr)=>{$e();var fs=We("N/A");n(Lr,fs)},$$slots:{default:!0}})};ee(br,dr=>{e(C).length>0?dr(_r):dr(us,!1)})}n(xa,za)},$$slots:{default:!0}}),n(Nt,rt)},$$slots:{default:!0}}),n(ne,lt)},$$slots:{default:!0}});var E=u(Ke,2);{var ue=ne=>{St(ne,{class:"bg-[#3D81FC] text-white flex items-center gap-1 hover:bg-white hover:text-[#3D81FC]",$$events:{click:()=>{Ce(),Re(r()),ke($())}},children:(at,lt)=>{var _t=pu(),Pt=g(_t);Ur(Pt,{size:18}),$e(),n(at,_t)},$$slots:{default:!0}})};ee(E,ne=>{N()?.role!=="Operators"&&N()?.role!=="adminNonPaid"&&N()?.role!=="storeEmployee"&&ne(ue)})}d(he),d(te);var G=u(te,2),we=c(G),fe=u(c(we),2),Ye=c(fe),et=c(Ye,!0);d(Ye),$e(2),d(fe),d(we);var Xe=u(we,2),bt=u(c(Xe),2),ut=c(bt),dt=c(ut,!0);d(ut),$e(2),d(bt),d(Xe);var yt=u(Xe,2),Ct=u(c(yt),2),Ot=c(Ct),xt=c(Ot);Ee(()=>Se(xt,`${(isNaN(e(b))?0:e(b).toFixed(2))??""}%`)),d(Ot),$e(2),d(Ct),d(yt);var ot=u(yt,2),wt=u(c(ot),2),Dt=c(wt),Yt=c(Dt);Ee(()=>Se(Yt,`${(isNaN(e(A))?0:e(A).toFixed(2))??""}%`)),d(Dt),$e(2),d(wt),d(ot);var vt=u(ot,2),kt=u(c(vt),2);mt(kt,5,$,aa,(ne,at,lt)=>{var _t=D(()=>parseInt(e(at).theft_prevented_count)),Pt=D(()=>parseInt(e(at).theft_prevented_count));Vo(ne,{get storeName(){return e(at).name},get cameraCount(){return e(at).camera_count},get managerName(){return e(at).manager},get activeCount(){return e(_t)},get totalCount(){return e(Pt)},bgColor:lt%2===0?"#F5F5F5":"white"})}),d(kt),d(vt);var Kt=u(vt,2),Xt=u(c(Kt),2),Qt=c(Xt),Jt=u(c(Qt),2),qe=c(Jt);d(Jt);var tt=u(Jt,2);const ct=D(()=>(l()==="custom"?e(De):e(De).toDateString())??""),nt=D(()=>(l()==="custom"?e(Pe):e(Pe)?.toDateString())??"");var At=c(tt);Ee(()=>Se(At,`from ${e(ct)} to ${e(nt)}`)),d(tt);var Et=u(tt,2),zt=c(Et),ta=c(zt),Zt=u(ta);d(zt);var pa=u(zt,2),fa=c(pa);xo(fa,{size:16}),d(pa),d(Et),$e(2),d(Qt);var _a=u(Qt,2),Pa=c(_a);va(Pa,ne=>i(me,ne),()=>e(me)),d(_a),d(Xt),d(Kt);var ka=u(Kt,2),V=u(c(ka),2),be=c(V);{var Ze=ne=>{var at=hu(),lt=c(at);ma(lt),d(at),n(ne,at)},ft=ne=>{var at=T(),lt=g(at);{var _t=Nt=>{var Ht=T(),rt=g(Ht);ln(rt,()=>e(se),Vt=>{var ca=D(()=>p()?.column);du(Vt,{get token(){return R()},theftData:q,get column(){return e(ca)},dateRange:le,selectedStore:Q})}),n(Nt,Ht)},Pt=Nt=>{var Ht=vu();n(Nt,Ht)};ee(lt,Nt=>{p()?.column?.length>0?Nt(_t):Nt(Pt,!1)},!0)}n(ne,at)};ee(be,ne=>{e(W)?ne(Ze):ne(ft,!1)})}d(V),d(ka);var ht=u(ka,2),Rt=u(c(ht),2),Ut=c(Rt);va(Ut,ne=>i(ye,ne),()=>e(ye)),d(Rt),d(ht);var ea=u(ht,2),Lt=u(c(ea),2),oa=c(Lt);va(oa,ne=>i(re,ne),()=>e(re)),d(Lt),d(ea),d(G),d(U);var Fa=u(U,2);{var Ja=ne=>{var at=gu(),lt=c(at,!0);d(at),Ee(()=>{ya(at,"style",`position: absolute; left: ${e(Ge)??""}px; top: ${e(v)??""}px; background: white; border: 1px solid #ccc; padding: 5px; border-radius: 4px; pointer-events: none;`),Se(lt,e(J))}),n(ne,at)};ee(Fa,ne=>{e(Ae)&&ne(Ja)})}Ee(()=>{It(Ne,`${`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="7 Days"?"bg-[#0BA5E9] rounded-l-md text-white":"text-black dark:text-white dark:border-white"}`??""} svelte-kjpj7`),It(Ue,`${`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="15 Days"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`??""} svelte-kjpj7`),It(B,`${`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="30 Days"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`??""} svelte-kjpj7`),It(ce,`${`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="12 Months"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`??""} svelte-kjpj7`),Se(et,e(f)),Se(dt,e(m)),Se(qe,`${e(f)??""}+`),ya(Zt,"stroke-dasharray",`${e(b)??""}, 100`)}),gt("click",Ne,()=>le.set("7 Days")),gt("click",Ue,()=>le.set("15 Days")),gt("click",B,()=>le.set("30 Days")),gt("click",ce,()=>le.set("12 Months")),gt("mouseenter",ta,ne=>y(ne,"Detected: "+e(f))),gt("mouseleave",ta,F),gt("mousemove",ta,ne=>{i(Ge,ne.clientX+10),i(v,ne.clientY+10)}),gt("mouseenter",Zt,ne=>y(ne,"Prevented: "+e(m))),gt("mouseleave",Zt,F),gt("mousemove",Zt,ne=>{i(Ge,ne.clientX+10),i(v,ne.clientY+10)}),n(s,P),jt()}var _u=S("<!> <!>",1),xu=S('<input type="checkbox" class="form-checkbox h-4 w-4 text-blue-600">'),$u=S('<div class="flex items-center gap-2 text-start min-w-[150px] justify-start"><div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center"><!></div> <span> </span></div>'),yu=S('<div class="flex items-center justify-center gap-2"><!> <span> </span></div>'),wu=S("<!> <!>",1),ku=S('<div class="flex flex-row items-center justify-center space-x-4 py-4"><!> <div class="flex flex-row gap-2 items-center text-sm text-muted-foreground"><span class="p-2 rounded-md aspect-square bg-[#3D81FC] bg-opacity-10"> </span> of <span class="p-2 rounded-md aspect-square bg-[#3D81FC] bg-opacity-20"> </span> Page.</div> <!></div>'),Cu=S('<div class="m-0"><!> <!></div>');function Du(s,t){Ft(t,!1);const a=ra(),r=()=>X(me(),"$efficiencyData",a),o=()=>X(ye(),"$selectedStore",a),l=()=>X(e(W),"$tableAttrs",a),p=()=>X(e(N),"$headerRows",a),f=()=>X(e(le),"$tableBodyAttrs",a),m=()=>X(e(I),"$pageRows",a),x=()=>X(e(H),"$pageCount",a),b=()=>X(e(Y),"$pageIndex",a),A=()=>X(e(ve),"$hasPreviousPage",a),C=()=>X(e(O),"$hasNextPage",a),$=_(),h=_(),k=_(),w=_(),R=_(),N=_(),I=_(),W=_(),le=_(),Q=_(),O=_(),ve=_(),Y=_(),H=_();Aa();let me=L(t,"efficiencyData",8),ye=L(t,"selectedStore",8);M(()=>(r(),o()),()=>{i($,r()?.data?.data?.map(ge=>{const Oe={};return r()?.data?.column?.forEach(q=>{q.key==="employee"?Oe[q.key]=`${ge.employee}`:q.key==="store_name"?Oe[q.key]=ge?.store_name===void 0?o():ge.store_name:Oe[q.key]=ge[q.key]}),Oe}))}),M(()=>e($),()=>{i(h,st(e($)))}),M(()=>(e($),e(h)),()=>{i(k,wa(e($),ge=>e(h).subscribe(ge)))}),M(()=>(e(k),ga),()=>{i(w,Ya(e(k),{page:nr({initialPageSize:3}),sort:Ka(),filter:Za({fn:({filterValue:ge,value:Oe})=>Oe.toLowerCase().includes(ge.toLowerCase())}),select:ga()}))}),M(()=>(e(w),r()),()=>{i(R,e(w)?.createColumns(r()?.data?.column?.filter(ge=>!["store_id","first_name","last_name"].includes(ge.key)).map(ge=>e(w).column({accessor:ge.key,header:ge.header}))))}),M(()=>(e(N),e(I),e(W),e(le),e(Q),e(w),e(R)),()=>{(ge=>(pt(i(N,ge.headerRows),"$headerRows",a),pt(i(I,ge.pageRows),"$pageRows",a),pt(i(W,ge.tableAttrs),"$tableAttrs",a),pt(i(le,ge.tableBodyAttrs),"$tableBodyAttrs",a),i(Q,ge.pluginStates)))(e(w).createViewModel(e(R)))}),M(()=>(e(O),e(ve),e(Y),e(H),e(Q)),()=>{(ge=>(pt(i(O,ge.hasNextPage),"$hasNextPage",a),pt(i(ve,ge.hasPreviousPage),"$hasPreviousPage",a),pt(i(Y,ge.pageIndex),"$pageIndex",a),pt(i(H,ge.pageCount),"$pageCount",a)))(e(Q).page)}),na(),Bt();var re=Cu(),pe=c(re);Ua(pe,it(l,{class:"w-full",children:(ge,Oe)=>{var q=wu(),K=g(q);Ha(K,{children:(ae,ie)=>{var _e=T(),Te=g(_e);mt(Te,1,p,aa,(se,Le)=>{var de=D(()=>e(Le).attrs());Wt(se,{get rowAttrs(){return e(de)},children:(He,Qe)=>{la(He,{class:"bg-transparent flex flex-row border-b items-center justify-start",children:(z,Me)=>{var Z=T(),ke=g(Z);mt(ke,1,()=>e(Le).cells,Re=>Re.id,(Re,xe)=>{var Ce=D(()=>e(xe).attrs()),ze=D(()=>e(xe).props());Wt(Re,{get attrs(){return e(Ce)},get props(){return e(ze)},children:Gt,$$slots:{default:(Fe,Ve)=>{const j=D(()=>Ve.attrs),De=D(()=>Ve.props);qa(Fe,it(()=>e(j),{class:"text-[#727272] whitespace-nowrap h-full flex items-center justify-center w-full",children:(Pe,Ae)=>{var J=D(()=>`hover:bg-transparent text-[#727272] opacity-60 min-w-[150px] ${e(xe).id==="employee"?"text-start justify-start":""}`);St(Pe,{variant:"ghost",get class(){return e(J)},$$events:{click(...Ge){e(De).sort.toggle?.apply(this,Ge)}},children:(Ge,v)=>{var y=_u(),F=g(y),P=D(()=>e(xe).render());ha(F,{get of(){return e(P)}});var U=u(F,2);or(U,{class:"ml-2 h-4 w-4"}),n(Ge,y)},$$slots:{default:!0}})},$$slots:{default:!0}}))}}})}),n(z,Z)},$$slots:{default:!0}})},$$slots:{default:!0}})}),n(ae,_e)},$$slots:{default:!0}});var Ie=u(K,2);ja(Ie,it(f,{children:(ae,ie)=>{var _e=T(),Te=g(_e);mt(Te,1,m,se=>se.id,(se,Le)=>{var de=D(()=>e(Le).attrs());Wt(se,{get rowAttrs(){return e(de)},children:Gt,$$slots:{default:(He,Qe)=>{const z=D(()=>Qe.rowAttrs);la(He,it(()=>e(z),{class:"border-b flex items-center w-full justify-between",children:(Me,Z)=>{var ke=T(),Re=g(ke);mt(Re,1,()=>e(Le).cells,xe=>xe.id,(xe,Ce)=>{var ze=D(()=>e(Ce).attrs());Wt(xe,{get attrs(){return e(ze)},children:Gt,$$slots:{default:(Fe,Ve)=>{const j=D(()=>Ve.attrs);Da(Fe,it(()=>e(j),{class:"flex items-center lg:justify-center whitespace-nowrap w-full text-left",children:(De,Pe)=>{var Ae=T(),J=g(Ae);{var Ge=y=>{var F=xu();n(y,F)},v=y=>{var F=T(),P=g(F);{var U=je=>{var Ne=$u(),Ue=c(Ne),B=c(Ue);Sr(B,{class:"w-4 h-4 text-gray-500 flex"}),d(Ue);var ce=u(Ue,2),oe=c(ce,!0);d(ce),d(Ne),Ee(()=>Se(oe,e(Le).original.employee)),n(je,Ne)},te=je=>{var Ne=T(),Ue=g(Ne);{var B=oe=>{var he=yu(),Ke=c(he);Ga(Ke,{class:"w-4 h-4"});var E=u(Ke,2),ue=c(E,!0);d(E),d(he),Ee(()=>Se(ue,e(Le)?.original?.store_name)),n(oe,he)},ce=oe=>{var he=D(()=>e(Ce).render());ha(oe,{get of(){return e(he)}})};ee(Ue,oe=>{e(Ce).id==="store_name"?oe(B):oe(ce,!1)},!0)}n(je,Ne)};ee(P,je=>{e(Ce).id==="employee"?je(U):je(te,!1)},!0)}n(y,F)};ee(J,y=>{e(Ce).id==="select"?y(Ge):y(v,!1)})}n(De,Ae)},$$slots:{default:!0}}))}}})}),n(Me,ke)},$$slots:{default:!0}}))}}})}),n(ae,_e)},$$slots:{default:!0}})),n(ge,q)},$$slots:{default:!0}}));var Be=u(pe,2);{var Je=ge=>{var Oe=ku(),q=c(Oe),K=D(()=>!A());St(q,{size:"sm",variant:"outline",class:"bg-transparent hover:bg-[#3D81FC] hover:text-white text-[#727272] gap-2",get disabled(){return e(K)},$$events:{click:()=>Oa(e(Y),b()-1)},children:(de,He)=>{$e();var Qe=We("Previous");n(de,Qe)},$$slots:{default:!0}});var Ie=u(q,2),ae=c(Ie),ie=c(ae,!0);d(ae);var _e=u(ae,2),Te=c(_e,!0);d(_e),$e(),d(Ie);var se=u(Ie,2),Le=D(()=>!C());St(se,{size:"sm",variant:"outline",get disabled(){return e(Le)},class:"bg-transparent hover:bg-[#3D81FC] hover:text-white text-[#727272] gap-2",$$events:{click:()=>Oa(e(Y),b()+1)},children:(de,He)=>{$e();var Qe=We("Next");n(de,Qe)},$$slots:{default:!0}}),d(Oe),Ee(()=>{Se(ie,b()+1<10?"0"+(b()+1):b()+1),Se(Te,x()<10?"0"+x():x())}),n(ge,Oe)};ee(Be,ge=>{x()>1&&ge(Je)})}d(re),n(s,re),jt()}var Su=S('<!> <button class=" absolute -top-1 right-4 p-2 grid place-items-center rounded-full text-[#E71D36] bg-[#E71D36]/15 cursor-pointer"><!></button>',1),Au=S('<div class="px-4 py-2"><!> <div class="space-y-4"><div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div></div> <div class="mt-6 flex justify-end space-x-3"><!> <!></div></div>'),Pu=S("<!> <!>",1);function Eu(s,t){Ft(t,!1);const a=ra(),r=()=>X(f(),"$employeeData",a);let o=_(!1),l=L(t,"token",8),p=L(t,"storeId",8),f=L(t,"employeeData",8),m=_(""),x=_(""),b=_(""),A={};const C=()=>{const h=[{name:"First Name",value:e(m)},{name:"Last Name",value:e(x)},{name:"Role",value:e(b)}];for(const k of h)if(!k.value.trim())return ua.error(`${k.name} is required`),!1;return!0},$=async()=>{if(!C()){ua.error("Please fill all the fields");return}const h=await fetch("https://api.moksa.ai/store/storeEmployee/create",{method:"POST",headers:{Authorization:`Bearer ${l()}`,"Content-Type":"application/json"},body:JSON.stringify({store_id:p(),first_name:e(m),last_name:e(x),role:e(b),photo:""})}),k=await h.json();console.log(k),h.ok?(ua.success("Employee created successfully"),k.status===201&&(A={id:k.data.id,first_name:e(m),last_name:e(x),role:e(b)},r().data.push(A)),i(o,!1)):ua.error("Failed to create employee")};Bt(),tr(s,{get open(){return e(o)},set open(h){i(o,h)},children:(h,k)=>{var w=Pu(),R=g(w);Fr(R,{children:(I,W)=>{var le=T(),Q=g(le);Tt(Q,t,"default",{},null),n(I,le)},$$slots:{default:!0}});var N=u(R,2);ar(N,{closeButton:!1,class:"sm:max-w-[460px] bg-white shadow-lg rounded-xl",children:(I,W)=>{var le=Au(),Q=c(le);rr(Q,{class:"relative",children:(K,Ie)=>{var ae=Su(),ie=g(ae);sr(ie,{class:"text-2xl font-semibold mb-6",children:(se,Le)=>{$e();var de=We("Add New User");n(se,de)},$$slots:{default:!0}});var _e=u(ie,2),Te=c(_e);yr(Te,{class:"h-4 w-4"}),d(_e),gt("click",_e,()=>i(o,!1)),n(K,ae)},$$slots:{default:!0}});var O=u(Q,2),ve=c(O),Y=c(ve);da(Y,{for:"firstName",class:"block text-sm font-medium text-gray-700",children:(K,Ie)=>{$e();var ae=We("First Name");n(K,ae)},$$slots:{default:!0}});var H=u(Y,2);ia(H,{required:!0,id:"firstName",name:"firstName",placeholder:"Enter first name",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(m)},set value(K){i(m,K)},$$legacy:!0}),d(ve);var me=u(ve,2),ye=c(me);da(ye,{for:"lastName",class:"block text-sm font-medium text-gray-700",children:(K,Ie)=>{$e();var ae=We("Last Name");n(K,ae)},$$slots:{default:!0}});var re=u(ye,2);ia(re,{required:!0,id:"lastName",name:"lastName",placeholder:"Enter last name",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(x)},set value(K){i(x,K)},$$legacy:!0}),d(me);var pe=u(me,2),Be=c(pe);da(Be,{for:"role",class:"block text-sm font-medium text-gray-700",children:(K,Ie)=>{$e();var ae=We("Employee Role");n(K,ae)},$$slots:{default:!0}});var Je=u(Be,2);ia(Je,{required:!0,id:"role",name:"role",placeholder:"Enter employee role",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return e(b)},set value(K){i(b,K)},$$legacy:!0}),d(pe),d(O);var ge=u(O,2),Oe=c(ge);St(Oe,{type:"button",variant:"outline",class:"px-4 py-2 border border-[#F2F4F7] rounded-md text-gray-700",$$events:{click:()=>i(o,!1)},children:(K,Ie)=>{$e();var ae=We("Cancel");n(K,ae)},$$slots:{default:!0}});var q=u(Oe,2);St(q,{type:"submit",class:"px-4 py-2 bg-blue-500 hover:text-blue-500 hover:bg-white text-white rounded-md",$$events:{click:$},children:(K,Ie)=>{$e();var ae=We("Submit");n(K,ae)},$$slots:{default:!0}}),d(ge),d(le),n(I,le)},$$slots:{default:!0}}),n(h,w)},$$slots:{default:!0},$$legacy:!0}),jt()}var Ru=S('<!> <button class=" absolute -top-1 right-4 p-2 grid place-items-center rounded-full text-[#E71D36] bg-[#E71D36]/15 cursor-pointer"><!></button>',1),Tu=S('<div class="px-4 py-2"><!> <div class="space-y-4"><div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div></div> <div class="mt-6 flex justify-end space-x-3"><!> <!></div></div>'),Bu=S("<!> <!>",1);function Fu(s,t){Ft(t,!1);const a=ra(),r=()=>X(f(),"$employeeData",a);let o=_(!1),l=L(t,"token",8),p=L(t,"storeId",8),f=L(t,"employeeData",8),m=L(t,"firstName",12),x=L(t,"lastName",12),b=L(t,"role",12),A=L(t,"id",8);const C=()=>{const h=[{name:"First Name",value:m()},{name:"Last Name",value:x()},{name:"Role",value:b()}];for(const k of h)if(!k.value.trim())return ua.error(`${k.name} is required`),!1;return!0},$=async()=>{if(!C()){ua.error("Please fill all the fields");return}const h=await fetch("https://api.moksa.ai/store/storeEmployee/update",{method:"POST",headers:{Authorization:`Bearer ${l()}`,"Content-Type":"application/json"},body:JSON.stringify({id:A(),store_id:p(),first_name:m(),last_name:x(),role:b(),photo:""})}),k=await h.json();if(console.log(k),h.ok){ua.success("Employee updated successfully");let w;ho(f(),as(r).data=r().data.filter(R=>R.id!==A()),as(r)),w={id:k.data.id,first_name:m(),last_name:x(),role:b()},r().data.push(w),i(o,!1)}else ua.error("Failed to update employee")};M(()=>(Mt(m()),Mt(x()),Mt(b()),Mt(A()),Mt(p())),()=>{console.log(m(),x(),b(),A(),p())}),na(),Bt(),tr(s,{get open(){return e(o)},set open(h){i(o,h)},children:(h,k)=>{var w=Bu(),R=g(w);Fr(R,{children:(I,W)=>{var le=T(),Q=g(le);Tt(Q,t,"default",{},null),n(I,le)},$$slots:{default:!0}});var N=u(R,2);ar(N,{closeButton:!1,class:"sm:max-w-[460px] bg-white shadow-lg rounded-xl",children:(I,W)=>{var le=Tu(),Q=c(le);rr(Q,{class:"relative",children:(K,Ie)=>{var ae=Ru(),ie=g(ae);sr(ie,{class:"text-2xl font-semibold mb-6",children:(se,Le)=>{$e();var de=We("Add New User");n(se,de)},$$slots:{default:!0}});var _e=u(ie,2),Te=c(_e);yr(Te,{class:"h-4 w-4"}),d(_e),gt("click",_e,()=>i(o,!1)),n(K,ae)},$$slots:{default:!0}});var O=u(Q,2),ve=c(O),Y=c(ve);da(Y,{for:"firstName",class:"block text-sm font-medium text-gray-700",children:(K,Ie)=>{$e();var ae=We("First Name");n(K,ae)},$$slots:{default:!0}});var H=u(Y,2);ia(H,{required:!0,id:"firstName",name:"firstName",placeholder:"Enter first name",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return m()},set value(K){m(K)},$$legacy:!0}),d(ve);var me=u(ve,2),ye=c(me);da(ye,{for:"lastName",class:"block text-sm font-medium text-gray-700",children:(K,Ie)=>{$e();var ae=We("Last Name");n(K,ae)},$$slots:{default:!0}});var re=u(ye,2);ia(re,{required:!0,id:"lastName",name:"lastName",placeholder:"Enter last name",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return x()},set value(K){x(K)},$$legacy:!0}),d(me);var pe=u(me,2),Be=c(pe);da(Be,{for:"role",class:"block text-sm font-medium text-gray-700",children:(K,Ie)=>{$e();var ae=We("Employee Role");n(K,ae)},$$slots:{default:!0}});var Je=u(Be,2);ia(Je,{required:!0,id:"role",name:"role",placeholder:"Enter employee role",class:"w-full border border-[#F2F4F7] rounded-md px-3 py-2",get value(){return b()},set value(K){b(K)},$$legacy:!0}),d(pe),d(O);var ge=u(O,2),Oe=c(ge);St(Oe,{type:"button",variant:"outline",class:"px-4 py-2 border border-[#F2F4F7] rounded-md text-gray-700",$$events:{click:()=>i(o,!1)},children:(K,Ie)=>{$e();var ae=We("Cancel");n(K,ae)},$$slots:{default:!0}});var q=u(Oe,2);St(q,{type:"submit",class:"px-4 py-2 bg-blue-500 hover:text-blue-500 hover:bg-white text-white rounded-md",$$events:{click:$},children:(K,Ie)=>{$e();var ae=We("Submit");n(K,ae)},$$slots:{default:!0}}),d(ge),d(le),n(I,le)},$$slots:{default:!0}}),n(h,w)},$$slots:{default:!0},$$legacy:!0}),jt()}var ju=S('<span class="flex items-center gap-4"><!> <!></span>'),Lu=S('<!> <div class="grid grid-cols-2"><div class="col-span-2 dark:text-white text-black">Are you sure ?</div></div> <!>',1),Nu=S("<!> <!>",1);function Mu(s,t){Ft(t,!1);const a=ra(),r=()=>X(m(),"$employeeData",a);let o=L(t,"empId",8),l=L(t,"token",8),p=L(t,"firstName",8),f=L(t,"lastName",8),m=L(t,"employeeData",8),x=_(!1);const b=async()=>{try{const C=await(await fetch(`https://api.moksa.ai/store/storeEmployee/deleteEmployee/${o()}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l()}`}})).json();console.log(C),ua.success("Employee deleted successfully"),ho(m(),as(r).data=r().data.filter($=>$.id!==o()),as(r)),i(x,!1)}catch(A){console.error("Error deleting user:",A),ua.error("Failed to delete employee. Please try again."),i(x,!1)}};M(()=>(Mt(o()),Mt(l()),Mt(p()),Mt(f())),()=>{console.log(o(),l(),p(),f())}),M(()=>r(),()=>{console.log(r().data)}),na(),Bt(),tr(s,{get open(){return e(x)},set open(A){i(x,A)},children:(A,C)=>{var $=Nu(),h=g($);Fr(h,{children:(w,R)=>{var N=T(),I=g(N);Tt(I,t,"default",{},null),n(w,N)},$$slots:{default:!0}});var k=u(h,2);ar(k,{class:"sm:max-w-[450px] z-[70] scale-90 sm:scale-100",children:(w,R)=>{var N=Lu(),I=g(N);rr(I,{children:(le,Q)=>{sr(le,{children:(O,ve)=>{$e();var Y=We();Ee(()=>Se(Y,`Delete Employee : ${p()??""} ${f()??""}`)),n(O,Y)},$$slots:{default:!0}})},$$slots:{default:!0}});var W=u(I,4);go(W,{children:(le,Q)=>{var O=ju(),ve=c(O);St(ve,{variant:"secondary",$$events:{click:()=>{i(x,!1)}},children:(H,me)=>{$e();var ye=We("Cancel");n(H,ye)},$$slots:{default:!0}});var Y=u(ve,2);St(Y,{variant:"destructive",$$events:{click:b},children:(H,me)=>{$e();var ye=We("Delete");n(H,ye)},$$slots:{default:!0}}),d(O),n(le,O)},$$slots:{default:!0}}),n(w,N)},$$slots:{default:!0}}),n(A,$)},$$slots:{default:!0},$$legacy:!0}),jt()}var Ou=S("<!> <!>",1),Iu=S('<span class="text-xs text-white bg-pink-500 rounded-md p-1">Live</span>'),zu=S('<div class="p-2"><!></div> <!>',1),Vu=S("<!> <!>",1),Uu=S('<span class="flex items-center justify-center h-full w-full"><!></span>'),Hu=S('<span class="flex items-center justify-center h-full w-full"><p class="text-black">No data</p></span>'),qu=S("<!> <!> <!>",1),Gu=S("<!> Add",1),Wu=S('<span class="flex items-center gap-3 my-2"><!> <span class="flex flex-col gap-4 w-full"><span class="items-center gap-2 flex"><!> <p class="text-sm text-[#727272]">Employee Id</p> <p class="ml-auto text-sm font-semibold"> </p></span> <span class="flex items-center gap-2"><!> <p class="text-sm text-[#727272]">No.of hours worked everyday</p> <span class="ml-auto text-sm font-semibold"> </span></span> <span class="flex items-center gap-2"><!> <p class="text-sm text-[#727272]"> </p></span></span></span>'),Yu=S('<div class="mx-auto my-20"><!></div>'),Ku=S('<div class="flex items-center justify-center h-full w-full my-20"><p class="text-gray-500">No Employee Details Found</p></div>'),Zu=S("<span></span>"),Ju=S('<div class="my-2"><div class="flex justify-between text-sm mb-2"><span class="text-[#323232]"> </span> <span class="font-semibold"> </span></div> <div class="w-full h-5 rounded-sm flex gap-2"></div></div>'),Xu=S('<span class="flex flex-col gap-3 mt-2"></span>'),Qu=S('<section class="w-full p-4 flex flex-col max-h-[calc(100vh-75px)] hide-scrollbar overflow-y-auto"><div class="flex items-center justify-start"><span class="flex items-center border-black h-[40px] border-opacity-[18%] border-[1px] rounded-md dark:border-white"><button>Live</button> <button>7 Days</button> <button>15 Days</button> <button>30 Days</button> <button>12 Months</button> <!></span></div> <div class="grid grid-cols-8 grid-rows-4 gap-4 mt-4"><div class="col-span-8 row-span-4 h-[400px] border rounded-md rounded-t-xl bg-white dark:bg-transparent dark:border-white/[.7] flex flex-col gap-3 flex-shrink-0"><span class="flex bg-[#050F40] h-[60px] w-full rounded-t-xl px-4 flex-shrink-0 items-center justify-between"><p class="text-white flex items-center gap-2 text-xl font-bold">Employee Tracking <!></p> <!></span> <div class="h-full w-full max-h-[400px] overflow-y-auto hide-scrollbar overflow-x-clip"><!></div></div> <div class=" col-span-3 row-span-4 border rounded-md p-2 flex flex-col flex-shrink-0 h-[550px] dark:border-white/[.7]"><div class="flex flex-col gap-3"><p class="text-[#323232] text-lg font-semibold dark:text-white">Employee Details</p> <span class="flex items-center justify-between"><!> <span class="flex items-center gap-1"><!> <!> <!></span></span> <!></div> <!></div> <div class="col-span-5 row-span-2 border rounded-md p-2 flex items-center justify-between flex-shrink-0 h-[200px] dark:border-white/[.7]"><span class="flex flex-col w-1/2 justify-start items-start h-full"><p class="text-[#323232] text-lg flex items-center gap-2 font-semibold dark:text-white">Employee Efficiency Score</p> <p class="flex items-center gap-3 mt-4 mb-2 text-[#4D6674] dark:text-white/[.8]">Based on Time with Customers <span class="text-[#0D2846] font-medium"> </span> <svg width="37" height="21" viewBox="0 0 37 21" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.14694 13.0333C4.71641 18.1 1.95293 19.7889 1 20H36.7347V1C33.1612 1.31667 32.8039 4.16667 29.2304 11.45C26.3716 17.2767 22.3217 15.7778 20.6541 14.3C17.9144 11.7667 11.5775 7.96667 8.14694 13.0333Z" fill="url(#paint0_linear_193_4188)"></path><path d="M1 20C1.95293 19.7889 4.71641 18.1 8.14694 13.0333C11.5775 7.96667 17.9144 11.7667 20.6541 14.3C22.3217 15.7778 26.3716 17.2767 29.2304 11.45C32.8039 4.16667 33.1612 1.31667 36.7347 1" stroke="#02A7FD"></path><defs><linearGradient id="paint0_linear_193_4188" x1="18.8673" y1="3.03571" x2="19.0678" y2="19.7745" gradientUnits="userSpaceOnUse"><stop stop-color="#02A7FD" stop-opacity="0.3"></stop><stop offset="1" stop-color="#00A8FF" stop-opacity="0.03"></stop></linearGradient></defs></svg></p> <p class="flex items-center gap-3 mt-4 mb-2 text-[#4D6674]">Based on Mobile <span class="text-[#0D2846] font-medium"> </span> <svg width="37" height="21" viewBox="0 0 37 21" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.14694 13.0333C4.71641 18.1 1.95293 19.7889 1 20H36.7347V1C33.1612 1.31667 32.8039 4.16667 29.2304 11.45C26.3716 17.2767 22.3217 15.7778 20.6541 14.3C17.9144 11.7667 11.5775 7.96667 8.14694 13.0333Z" fill="url(#paint0_linear_193_4188)"></path><path d="M1 20C1.95293 19.7889 4.71641 18.1 8.14694 13.0333C11.5775 7.96667 17.9144 11.7667 20.6541 14.3C22.3217 15.7778 26.3716 17.2767 29.2304 11.45C32.8039 4.16667 33.1612 1.31667 36.7347 1" stroke="#02A7FD"></path><defs><linearGradient id="paint0_linear_193_4188" x1="18.8673" y1="3.03571" x2="19.0678" y2="19.7745" gradientUnits="userSpaceOnUse"><stop stop-color="#02A7FD" stop-opacity="0.3"></stop><stop offset="1" stop-color="#00A8FF" stop-opacity="0.03"></stop></linearGradient></defs></svg></p> <p class="flex items-center gap-3 mt-4 mb-2 text-[#4D6674]">Based on Sitting Idle <span class="text-[#0D2846] font-medium"> </span> <svg width="37" height="21" viewBox="0 0 37 21" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.14694 13.0333C4.71641 18.1 1.95293 19.7889 1 20H36.7347V1C33.1612 1.31667 32.8039 4.16667 29.2304 11.45C26.3716 17.2767 22.3217 15.7778 20.6541 14.3C17.9144 11.7667 11.5775 7.96667 8.14694 13.0333Z" fill="url(#paint0_linear_193_4188)"></path><path d="M1 20C1.95293 19.7889 4.71641 18.1 8.14694 13.0333C11.5775 7.96667 17.9144 11.7667 20.6541 14.3C22.3217 15.7778 26.3716 17.2767 29.2304 11.45C32.8039 4.16667 33.1612 1.31667 36.7347 1" stroke="#02A7FD"></path><defs><linearGradient id="paint0_linear_193_4188" x1="18.8673" y1="3.03571" x2="19.0678" y2="19.7745" gradientUnits="userSpaceOnUse"><stop stop-color="#02A7FD" stop-opacity="0.3"></stop><stop offset="1" stop-color="#00A8FF" stop-opacity="0.03"></stop></linearGradient></defs></svg></p></span> <span class="h-full w-1/2 flex items-center justify-center"><div class="relative w-48 h-48"><svg class="w-full h-full" viewBox="0 0 100 100"><defs><linearGradient id="blueGradient" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="#0266FD"></stop><stop offset="100%" stop-color="#02A7FD"></stop></linearGradient></defs><circle class="text-gray-200 stroke-current" stroke-width="10" cx="50" cy="50" fill="transparent"></circle><circle class="progress-ring_circle svelte-8rruju" stroke="url(#blueGradient)" stroke-width="10" stroke-linecap="round" cx="50" cy="50" fill="transparent"></circle></svg> <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center"><span class="text-3xl font-bold"> </span> <p class="text-sm text-gray-500">Efficiency</p></div></div></span></div> <div class="col-span-5 row-span-2 border rounded-md p-2 flex flex-col flex-shrink-0 h-[334px] dark:border-white/[.7]"><span class="flex items-center justify-between"><p class="text-[#323232] text-lg flex items-center gap-2 font-semibold dark:text-white">Employee Efficiency Management</p></span> <span class="h-full w-full"><p class="text-primary font-semibold w-full h-full flex items-center justify-center">Coming Soon</p></span></div></div></section>');function e1(s,t){Ft(t,!1);const a=ra(),r=()=>X(me,"$employeeDetails",a),o=()=>X(H,"$employeeData",a),l=()=>X(re,"$dateRange",a),p=()=>X(R,"$selectedStoreId",a),f=()=>X(ye,"$selectedEmployee",a),m=()=>X(Y,"$efficiencyData",a),x=_();let b=L(t,"allStores",8),A=L(t,"token",8),C=L(t,"moksaUserId",8),$=L(t,"user",8);const h=b()?.map(qe=>({value:qe.id,label:qe.name}));let k=_("");Aa();let w=st(h?.length>0?h?.[0].label:null),R=st(h?.length>0?h?.[0].value:null);function N(qe,tt=36){if(!qe)return 0;const ct=parseFloat(qe)*60,nt=8*60;return Math.round(ct/nt*tt).toFixed(2)}function I(qe,tt,ct){const nt=parseInt(qe.substring(1,3),16),At=parseInt(qe.substring(3,5),16),Et=parseInt(qe.substring(5,7),16),zt=parseInt(tt.substring(1,3),16),ta=parseInt(tt.substring(3,5),16),Zt=parseInt(tt.substring(5,7),16),pa=Math.round(nt+ct*(zt-nt)),fa=Math.round(At+ct*(ta-At)),_a=Math.round(Et+ct*(Zt-Et));return`#${pa.toString(16).padStart(2,"0")}${fa.toString(16).padStart(2,"0")}${_a.toString(16).padStart(2,"0")}`}function W(qe){return 2*Math.PI*qe}const le=40,Q=W(le);let O=_(0),ve=_(Q-e(O)/100*Q),Y=st([]),H=st([]),me=st([]),ye=st(null),re=st("7 Days"),pe=_(void 0),Be=_(void 0),Je=_("Custom"),ge=_(!1),Oe;function q(qe){const tt=C();Oe&&Oe.disconnect(),Oe=fr("https://api.moksa.ai",{withCredentials:!0,extraHeaders:{Authorization:`Bearer ${A()}`},transports:["websocket","polling"]}),Oe.on("error",ct=>{console.log("error",ct)}),Oe.on("connect",()=>{console.log(`connected for ${qe}`),Oe.emit("joinUser",tt),Oe.emit("joinStore",qe)}),Oe.on(`employee_efficiency_store_${qe}`,ct=>{console.log(`Received live employee efficiency data for store ${qe}:`,ct),Y?.update(nt=>{console.log(nt,"current data");const At=nt?.data?.data?.findIndex(zt=>zt?.employee_id===ct?.employee_id);console.log(At,"existingEmployeeIndex");const Et=h?.some(zt=>zt?.value===ct?.store_id);if($()?.role!=="superAdmin"&&!Et)return{...nt};if(At!==-1){const zt=[...nt?.data?.data];return zt[At]={...zt[At],...ct},{data:{data:zt,column:nt?.data?.column,total:nt?.data?.total}}}else{const zt={...ct};let ta=[...nt?.data?.data];return ta.push(zt),{data:{data:ta,column:nt?.data?.column,total:nt?.data?.total}}}})}),Oe.on("disconnect",()=>{console.log("disconnected")})}let K=_(!1),Ie=_(!0);Qa(async()=>{setTimeout(()=>{},100);const qe=new Date,tt=new Date(qe);tt.setDate(tt.getDate()-15);const ct=nt=>nt.toISOString().split("T")[0];try{i(K,!0);const[nt,At]=await Promise.all([fetch(`https://api.moksa.ai/store/storeEmployee/getAllEmployeeByStoreId/${h[0].value}`,{method:"GET",headers:{Authorization:`Bearer ${A()}`,"Content-Type":"application/json"}}),fetch(`https://api.moksa.ai/store/storeEmployee/getEmployeeEfficiencyByStoreidDynamic/${h[0].value}/${ct(tt)}/1/100/${ct(qe)}`,{method:"GET",headers:{Authorization:`Bearer ${A()}`,"Content-Type":"application/json"}})]),Et=await nt.json(),zt=await At.json();console.log(Et,"empData"),console.log(zt,"effData"),H.set(Et),Y.set(zt),o()?.data?.length>0?await Te(o().data[0].id):me.set(null)}catch(nt){console.error("Error fetching data:",nt)}i(K,!1)});async function ae(){console.log("fetching custom date data");const qe=e(pe)?.start?`${e(pe).start.year}-${String(e(pe).start.month).padStart(2,"0")}-${String(e(pe).start.day).padStart(2,"0")}`:"",tt=e(pe)?.end?`${e(pe).end.year}-${String(e(pe).end.month).padStart(2,"0")}-${String(e(pe).end.day).padStart(2,"0")}`:"";console.log(qe),console.log(tt);try{i(K,!0);const nt=await(await fetch(`https://api.moksa.ai/store/storeEmployee/getEmployeeEfficiencyByStoreidDynamic/${p()}/${qe}/1/100/${tt}`,{method:"GET",headers:{Authorization:`Bearer ${A()}`,"Content-Type":"application/json"}})).json();console.log(`recieved efficiency data for ${p()}, ${l()}`,nt),Y.set(nt?.data?.data===void 0?[]:nt),await se(nt?.data?.data?.[0]?.employee_id,qe,tt),i(K,!1)}catch(ct){console.log(ct)}}async function ie(){console.log(p()),console.log("effdatabytunecallera"),i(Je,"Custom"),i(pe,void 0);const qe=new Date;let tt=new Date(qe),ct=!1;switch(l()){case"live":ct=!0;break;case"7 Days":tt.setDate(qe.getDate()-7);break;case"15 Days":tt.setDate(qe.getDate()-15);break;case"30 Days":tt.setDate(qe.getDate()-30);break;case"12 Months":tt.setFullYear(qe.getFullYear()-1);break;default:tt.setDate(qe.getDate()-7)}const nt=At=>At.toISOString().split("T")[0];try{i(K,!0);const Et=await(await fetch(`https://api.moksa.ai/store/storeEmployee/getEmployeeEfficiencyByStoreidDynamic/${p()}/${nt(tt)}/1/100/${nt(qe)}`,{method:"GET",headers:{Authorization:`Bearer ${A()}`,"Content-Type":"application/json",live:ct}})).json();Y.set(Et?.data?.data===void 0?[]:Et),await Te(f()!==null?f().id:o()?.data?.[0]?.id),i(K,!1)}catch(At){console.log(At)}}async function _e(){H.set([]);const tt=await(await fetch(`https://api.moksa.ai/store/storeEmployee/getAllEmployeeByStoreId/${p()}`,{method:"GET",headers:{Authorization:`Bearer ${A()}`,"Content-Type":"application/json"}})).json();return H.set(tt),tt}async function Te(qe){me.set([]);const tt=new Date;let ct=new Date(tt);switch(l()){case"7 Days":ct.setDate(tt.getDate()-7);break;case"15 Days":ct.setDate(tt.getDate()-15);break;case"30 Days":ct.setDate(tt.getDate()-30);break;case"12 Months":ct.setFullYear(tt.getFullYear()-1);break;default:ct.setDate(tt.getDate()-7)}const nt=At=>At.toISOString().split("T")[0];if(i(O,0),i(ve,Q-e(O)/100*Q),qe){i(Ie,!0);try{const At=await fetch(`https://api.moksa.ai/employeeEfficiency/getEmployeeEfficiencyByEmpid/${qe}/${nt(ct)}/${nt(tt)}`,{method:"GET",headers:{Authorization:`Bearer ${A()}`,"Content-Type":"application/json"}});if(!At.ok)throw new Error("Failed to fetch employees");const Et=await At.json();console.log("employee-details",Et),me.set(Et),i(O,Et?.data[0]?.efficiency_score),i(ve,Q-e(O)/100*Q)}catch(At){console.log(At)}i(Ie,!1)}}async function se(qe,tt,ct){if(me.set([]),i(O,0),i(ve,Q-e(O)/100*Q),console.log(qe,"id"),qe)try{const nt=await fetch(`https://api.moksa.ai/employeeEfficiency/getEmployeeEfficiencyByEmpid/${qe}/${tt}/${ct}`,{method:"GET",headers:{Authorization:`Bearer ${A()}`,"Content-Type":"application/json"}});if(!nt.ok)throw new Error("Failed to fetch employees");const At=await nt.json();console.log("employee-details",At),me.set(At),i(O,At.data[0].efficiency_score),i(ve,Q-e(O)/100*Q)}catch(nt){console.log(nt)}}M(()=>e(k),()=>{i(x,h.filter(qe=>qe.label.toLowerCase().includes(e(k).toLowerCase())))}),M(()=>(e(O),r()),()=>{console.log(e(O),"progress",r()?.data?.[0]?.efficiency_score)}),M(()=>e(pe),()=>{if(e(pe)?.start&&e(pe)?.end){const qe=new Date(e(pe).start.year,e(pe).start.month-1,e(pe).start.day),tt=new Date(e(pe).end.year,e(pe).end.month-1,e(pe).end.day);i(Je,`${qe.toLocaleDateString()} - ${tt.toLocaleDateString()}`);const ct=Math.ceil((tt.getTime()-qe.getTime())/(1e3*60*60*24));console.log(ct),re.set("custom"),setTimeout(()=>{i(ge,!1)},200)}else i(Je,"Custom")}),M(()=>(l(),e(pe)),()=>{l().toLowerCase()==="custom"&&(e(pe)?.start||e(pe)?.end)&&ae()}),M(()=>l(),()=>{l().toLowerCase()!=="custom"&&(console.log("getting efficiency data by time",l()),ie())}),M(()=>(p(),l()),()=>{p()!==void 0&&l().toLowerCase()==="live"&&q(p())}),na(),Bt();var Le=Qu(),de=c(Le),He=c(de),Qe=c(He),z=u(Qe,2),Me=u(z,2),Z=u(Me,2),ke=u(Z,2),Re=u(ke,2);wr(Re,{openFocus:!0,get open(){return e(ge)},set open(qe){i(ge,qe)},children:(qe,tt)=>{var ct=Ou(),nt=g(ct);kr(nt,{asChild:!0,children:Gt,$$slots:{default:(Et,zt)=>{const ta=D(()=>zt.builder);var Zt=D(()=>[e(ta)]),pa=D(()=>`2xl:py-2 2xl:px-3 py-1 px-2  text-sm hover:bg-[#0BA5E9] hover:text-white ${l()==="custom"?"bg-[#0BA5E9] text-white rounded-r-md":"text-black dark:text-white bg-transparent dark:border-white"}`);St(Et,{get builders(){return e(Zt)},get class(){return e(pa)},$$events:{click:()=>i(pe,void 0)},children:(fa,_a)=>{$e();var Pa=We();Ee(()=>Se(Pa,e(Je))),n(fa,Pa)},$$slots:{default:!0}})}}});var At=u(nt,2);Cr(At,{class:"w-auto p-0",align:"start",children:(Et,zt)=>{var ta=D(()=>e(pe)?.start);Dr(Et,{initialFocus:!0,numberOfMonths:2,get placeholder(){return e(ta)},get value(){return e(pe)},set value(Zt){i(pe,Zt)},get startValue(){return e(Be)},set startValue(Zt){i(Be,Zt)},$$legacy:!0})},$$slots:{default:!0}}),n(qe,ct)},$$slots:{default:!0},$$legacy:!0}),d(He),d(de);var xe=u(de,2),Ce=c(xe),ze=c(Ce),Fe=c(ze),Ve=u(c(Fe));{var j=qe=>{var tt=Iu();n(qe,tt)};ee(Ve,qe=>{l().toLowerCase()==="live"&&qe(j)})}d(Fe);var De=u(Fe,2);pr(De,{portal:null,children:(qe,tt)=>{var ct=Vu(),nt=g(ct);hr(nt,{class:"w-auto min-w-[150px] bg-[#3D81FC] text-white border-none text-xs px-1 rounded-lg",children:(Et,zt)=>{var ta=D(()=>h?.length>0?h?.[0]?.label:"No Stores");vr(Et,{get placeholder(){return e(ta)}})},$$slots:{default:!0}});var At=u(nt,2);gr(At,{class:"max-h-[200px] overflow-y-auto",children:(Et,zt)=>{mr(Et,{children:(ta,Zt)=>{var pa=zu(),fa=g(pa),_a=c(fa);ia(_a,{type:"text",placeholder:"Search stores...",class:"mb-2",get value(){return e(k)},set value(be){i(k,be)},$$legacy:!0}),d(fa);var Pa=u(fa,2);{var ka=be=>{var Ze=T(),ft=g(Ze);mt(ft,1,()=>e(x),aa,(ht,Rt)=>{Ca(ht,{class:"px-1",get value(){return e(Rt).value},get label(){return e(Rt).label},$$events:{click:async()=>{w.set(e(Rt).label),R.set(e(Rt).value),console.log(e(Rt).value);const Ut=await _e(e(Rt).value);console.log(Ut),await ie()}},children:(Ut,ea)=>{$e();var Lt=We();Ee(()=>Se(Lt,e(Rt).label)),n(Ut,Lt)},$$slots:{default:!0}})}),n(be,Ze)},V=be=>{Ca(be,{disabled:!0,children:(Ze,ft)=>{$e();var ht=We("No matching stores");n(Ze,ht)},$$slots:{default:!0}})};ee(Pa,be=>{e(x)?.length>0?be(ka):be(V,!1)})}n(ta,pa)},$$slots:{default:!0}})},$$slots:{default:!0}}),n(qe,ct)},$$slots:{default:!0}}),d(ze);var Pe=u(ze,2),Ae=c(Pe);{var J=qe=>{var tt=Uu(),ct=c(tt);ma(ct),d(tt),n(qe,tt)},Ge=qe=>{var tt=T(),ct=g(tt);{var nt=Et=>{Du(Et,{efficiencyData:Y,selectedStore:w})},At=Et=>{var zt=Hu();n(Et,zt)};ee(ct,Et=>{m()&&m()?.data&&m()?.data?.data?.length>0?Et(nt):Et(At,!1)},!0)}n(qe,tt)};ee(Ae,qe=>{e(K)?qe(J):qe(Ge,!1)})}d(Pe),d(Ce);var v=u(Ce,2),y=c(v),F=u(c(y),2),P=c(F);pr(P,{portal:null,children:(qe,tt)=>{var ct=qu(),nt=g(ct);hr(nt,{class:"w-[250px] bg-[#F4F4F4] border text-xs px-1 border-[#E0E0E0] rounded-lg dark:bg-transparent ",children:(zt,ta)=>{var Zt=D(()=>o()?.data?.length>0?o()?.data?.[0]?.first_name+" "+o()?.data?.[0]?.last_name:"No Employees Found");vr(zt,{get placeholder(){return e(Zt)}})},$$slots:{default:!0}});var At=u(nt,2);gr(At,{children:(zt,ta)=>{mr(zt,{class:"h-72 max-h-full overflow-y-auto",children:(Zt,pa)=>{var fa=T(),_a=g(fa);{var Pa=V=>{var be=T(),Ze=g(be);mt(Ze,1,()=>o()?.data,aa,(ft,ht)=>{Ca(ft,{class:"px-1",get value(){return e(ht).id},get label(){return e(ht).name},$$events:{click:async()=>{console.log(e(ht)),await Te(e(ht).id),ye.set(e(ht))}},children:(Rt,Ut)=>{$e();var ea=We();Ee(()=>Se(ea,`${e(ht).first_name??""} ${e(ht).last_name??""}`)),n(Rt,ea)},$$slots:{default:!0}})}),n(V,be)},ka=V=>{Ca(V,{class:"px-1",value:"0",label:"No Employees Found",children:(be,Ze)=>{$e();var ft=We("No Employees Found");n(be,ft)},$$slots:{default:!0}})};ee(_a,V=>{o()&&o().data&&o()?.data?.length>0?V(Pa):V(ka,!1)})}n(Zt,fa)},$$slots:{default:!0}})},$$slots:{default:!0}});var Et=u(At,2);$n(Et,{name:"favoriteFruit"}),n(qe,ct)},$$slots:{default:!0}});var U=u(P,2),te=c(U);Eu(te,{employeeData:H,get token(){return A()},get storeId(){return p()},children:(qe,tt)=>{St(qe,{class:"flex items-center gap-1 text-sm bg-[#389E0D] text-white hover:text-[#389E0D] hover:bg-white",children:(ct,nt)=>{var At=Gu(),Et=g(At);ko(Et,{size:20}),$e(),n(ct,At)},$$slots:{default:!0}})},$$slots:{default:!0}});var je=u(te,2),Ne=D(()=>f()===null?o()?.data?.[0]?.first_name:f()?.first_name),Ue=D(()=>f()===null?o()?.data?.[0]?.last_name:f()?.last_name),B=D(()=>f()===null?o()?.data?.[0]?.role:f()?.role),ce=D(()=>f()===null?o()?.data?.[0]?.id:f()?.id);Fu(je,{get token(){return A()},get firstName(){return e(Ne)},get lastName(){return e(Ue)},get role(){return e(B)},get id(){return e(ce)},get storeId(){return p()},employeeData:H,children:(qe,tt)=>{St(qe,{class:"text-sm bg-[#FAAD14] text-white hover:text-[#FAAD14] hover:bg-white",children:(ct,nt)=>{$s(ct,{size:20})},$$slots:{default:!0}})},$$slots:{default:!0}});var oe=u(je,2),he=D(()=>f()===null?o()?.data?.[0]?.id:f()?.id),Ke=D(()=>f()===null?o()?.data?.[0]?.first_name:f()?.first_name),E=D(()=>f()===null?o()?.data?.[0]?.last_name:f()?.last_name);Mu(oe,{employeeData:H,get empId(){return e(he)},get token(){return A()},get firstName(){return e(Ke)},get lastName(){return e(E)},children:(qe,tt)=>{St(qe,{class:"text-sm bg-[#CF1322] text-white hover:text-[#CF1322] hover:bg-white",children:(ct,nt)=>{el(ct,{size:20})},$$slots:{default:!0}})},$$slots:{default:!0}}),d(U),d(F);var ue=u(F,2);{var G=qe=>{var tt=Wu(),ct=c(tt);Sr(ct,{size:100});var nt=u(ct,2),At=c(nt),Et=c(At);Xn(Et,{size:20,class:"text-[#000065]"});var zt=u(Et,4),ta=c(zt,!0);d(zt),d(At);var Zt=u(At,2),pa=c(Zt);Jn(pa,{size:20,class:"text-[#000065]"});var fa=u(pa,4),_a=c(fa,!0);d(fa),d(Zt);var Pa=u(Zt,2),ka=c(Pa);Ga(ka,{size:20,class:"text-[#000065]"});var V=u(ka,2),be=c(V,!0);d(V),d(Pa),d(nt),d(tt),Ee(()=>{Se(ta,r()?.data?.[0]?.emp_id),Se(_a,r()?.data?.[0]?.hours_worked===null?0:r()?.data?.[0]?.hours_worked),Se(be,`${r()?.data?.[0]?.store_name}, ${r()?.data?.[0]?.address}, ${r()?.data?.[0]?.locality}-${r()?.data?.[0]?.pincode}`)}),n(qe,tt)},we=qe=>{var tt=T(),ct=g(tt);{var nt=Et=>{var zt=Yu(),ta=c(zt);ma(ta),d(zt),n(Et,zt)},At=Et=>{var zt=Ku();n(Et,zt)};ee(ct,Et=>{e(Ie)?Et(nt):Et(At,!1)},!0)}n(qe,tt)};ee(ue,qe=>{r()?.data?.length>0&&o()!==null?qe(G):qe(we,!1)})}d(y);var fe=u(y,2);{var Ye=qe=>{var tt=Xu();mt(tt,5,()=>[{label:"Total Hours With Customers",hours:r()?.data?.[0]?.total_customer,color1:"#02A7FD",color2:"#141C64"},{label:"Total Hours on Mobile",hours:r()?.data?.[0]?.total_mobile,color1:"#00FEA3",color2:"#007077"},{label:"Total Hours Sitting Idle",hours:r()?.data?.[0]?.total_idle,color1:"#FFB156",color2:"#FF007A"},{label:"Total Hours With Filling Shelves",hours:r()?.data?.[0]?.total_filling_shelves,color1:"#C8C303",color2:"#597802"}],aa,(ct,nt)=>{var At=Ju(),Et=c(At),zt=c(Et),ta=c(zt,!0);d(zt);var Zt=u(zt,2),pa=c(Zt);d(Zt),d(Et);var fa=u(Et,2);mt(fa,4,()=>Array(36),aa,(_a,Pa,ka)=>{var V=Zu();const be=D(()=>`${`w-[3%] h-full rounded-lg ${ka<N(e(nt).hours)?"":"bg-gray-200"}`??""} svelte-8rruju`),Ze=D(()=>ka<N(e(nt).hours)?`background-color: ${I(e(nt).color1,e(nt).color2,ka/(N(e(nt).hours)-1))}`:"");Ee(()=>{It(V,e(be)),ya(V,"style",e(Ze))}),n(_a,V)}),d(fa),d(At),Ee(()=>{Se(ta,e(nt).label),Se(pa,`${(e(nt).hours===null?0:e(nt).hours)??""} Hrs`)}),n(ct,At)}),d(tt),n(qe,tt)};ee(fe,qe=>{r()?.data?.length>0&&o()!==null&&qe(Ye)})}d(v);var et=u(v,2),Xe=c(et),bt=u(c(Xe),2),ut=u(c(bt)),dt=c(ut,!0);d(ut),$e(2),d(bt);var yt=u(bt,2),Ct=u(c(yt)),Ot=c(Ct,!0);d(Ct),$e(2),d(yt);var xt=u(yt,2),ot=u(c(xt)),wt=c(ot,!0);d(ot),$e(2),d(xt),d(Xe);var Dt=u(Xe,2),Yt=c(Dt),vt=c(Yt),kt=u(c(vt));ya(kt,"r",le);var Kt=u(kt);ya(Kt,"stroke-dasharray",Q),ya(Kt,"r",le),d(vt);var Xt=u(vt,2),Qt=c(Xt),Jt=c(Qt);d(Qt),$e(2),d(Xt),d(Yt),d(Dt),d(et),$e(2),d(xe),d(Le),Ee(()=>{It(Qe,`${`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="live"?"rounded-l-md bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`??""} svelte-8rruju`),It(z,`${`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="7 Days"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`??""} svelte-8rruju`),It(Me,`${`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="15 Days"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`??""} svelte-8rruju`),It(Z,`${`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="30 Days"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`??""} svelte-8rruju`),It(ke,`${`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="12 Months"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`??""} svelte-8rruju`),Se(dt,r()?.data?.[0]?.total_customer===void 0||r()?.data?.[0]?.total_customer===null?0:r()?.data?.[0]?.total_customer),Se(Ot,r()?.data?.[0]?.total_mobile===void 0||r()?.data?.[0]?.total_mobile===null?0:r()?.data?.[0]?.total_mobile),Se(wt,r()?.data?.[0]?.total_idle===void 0||r()?.data?.[0]?.total_idle===null?0:r()?.data?.[0]?.total_idle),ya(Kt,"stroke-dashoffset",e(ve)),Se(Jt,`${(r()?.data?.[0]?.efficiency_score===void 0||r()?.data?.[0]?.efficiency_score===null?0:r()?.data?.[0]?.efficiency_score)??""}%`)}),gt("click",Qe,()=>re.set("live")),gt("click",z,()=>re.set("7 Days")),gt("click",Me,()=>re.set("15 Days")),gt("click",Z,()=>re.set("30 Days")),gt("click",ke,()=>re.set("12 Months")),n(s,Le),jt()}var t1=S('<div class="flex items-center justify-center w-full h-full min-h-[200px]"><!></div>'),a1=S('<p class="w-1/5"></p>'),r1=S("<!> <!>",1),s1=S('<div class="flex items-center gap-2 min-w-[200px] justify-start"><div class="w-8 h-8 rounded text-start bg-blue-900 flex items-center justify-center flex-shrink-0"><!></div> <span> </span></div>'),o1=S('<div class="flex items-center gap-2"><span class="text-gray-600"> </span> <div> </div></div>'),n1=S('<tr class="w-full flex flex-row items-center justify-between"><td class=" p-2 w-full text-center"> </td><td class=" p-2 w-full text-center"> </td><td class=" p-2 w-full text-center"> </td><td class=" p-2 w-full text-center"> </td></tr>'),l1=S('<div class="p-4 w-[85vw] max-h-[150px] overflow-y-auto"><h3 class="font-bold mb-2">Detailed Information</h3> <table class="w-full border-collapse"><thead class="w-full"><tr class="w-full flex flex-row items-center justify-between"><th class=" p-2 w-full">Date</th><th class=" p-2 w-full">Hour</th><th class=" p-2 w-full">Customer Count</th><th class=" p-2 w-full">Customer Projections</th></tr></thead><tbody class="w-full"></tbody></table></div>'),i1=S('<div class="p-4">Loading...</div>'),d1=S("<!> <!>",1),c1=S('<p class="flex items-center justify-center whitespace-nowrap flex-1 py-2 w-1/4">No data</p>'),u1=S("<!> <!>",1),f1=S('<div class="m-0 flex flex-col justify-center items-center"><span class="rounded-t-xl w-full h-[50px] bg-transparent flex items-center justify-between px-4"><p class=" text-xl font-semibold flex items-center gap-2"> </p> <div class="flex items-center gap-4"><div class="flex items-center space-x-2"><span class="text-sm text-gray-700"> </span> <div class="flex items-center space-x-2"><!> <!></div></div></div></span> <!></div>');function p1(s,t){Ft(t,!1);const a=ra(),r=()=>X(Be(),"$selectedStore",a),o=()=>X(Je(),"$storeData",a),l=()=>X(e(me),"$pageIndex",a),p=()=>X(e(pe),"$pageSize",a),f=()=>X(Oe(),"$dateRange",a),m=()=>X(K,"$selectedStoreId",a),x=()=>X(e(N),"$data",a),b=()=>X(e(re),"$hasPreviousPage",a),A=()=>X(e(ye),"$hasNextPage",a),C=()=>X(Ie,"$loading",a),$=()=>X(e(ve),"$tableAttrs",a),h=()=>X(e(Q),"$headerRows",a),k=()=>X(e(Y),"$tableBodyAttrs",a),w=()=>X(e(O),"$pageRows",a),R=_(),N=_(),I=_(),W=_(),le=_(),Q=_(),O=_(),ve=_(),Y=_(),H=_(),me=_(),ye=_(),re=_(),pe=_();Aa();let Be=L(t,"selectedStore",8),Je=L(t,"storeData",8),ge=L(t,"token",8),Oe=L(t,"dateRange",8),q=L(t,"value",8),K=st(-1),Ie=st(!0);function ae(){Oa(e(me),l()+1)}function ie(){Oa(e(me),l()-1)}let _e=_(new Set),Te=_({});async function se(J){const Ge=q()?.start?`${q().start.year}-${String(q().start.month).padStart(2,"0")}-${String(q().start.day).padStart(2,"0")}`:"",v=q()?.end?`${q().end.year}-${String(q().end.month).padStart(2,"0")}-${String(q().end.day).padStart(2,"0")}`:"";try{return await(await fetch(`https://api.moksa.ai/people/getPeopleCount/${J}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${ge()}`,datetype:f(),pagenumber:"1",pagepersize:"100",startdate:Ge,enddate:v}})).json()}catch(y){return console.error("Error fetching data:",y),null}}function Le(J){e(_e).size>0&&!e(_e).has(J)&&e(_e).clear(),K.set(J),e(_e).has(J)?(e(_e).delete(J),i(Te,{...e(Te),[J]:null})):(e(_e).add(J),e(Te)[J]||se(J).then(Ge=>{Ge?.data?.data&&i(Te,{...e(Te),[J]:Ge.data.data})})),i(_e,e(_e))}let de=_(f());M(()=>(r(),o()),()=>{i(R,r().value!==-1?o().map(J=>({storeName:J.store,customerCount:J.noofcustomers,date:J.date&&J.hour?`${J.date}, ${J.hour}`:J.date?J.date:"N/A",busyHourProjections:"Coming Soon"})):o().map(J=>({storeName:J.store,customerCount:J.noofcustomers,busyHourProjections:J.busyhour,customerProjection:J.predicted_percentage,predictedMean:J.predictedmean,store_id:J.store_id})))}),M(()=>e(R),()=>{pt(i(N,st(e(R))),"$data",a)}),M(()=>(e(R),e(N)),()=>{i(I,wa(e(R),J=>e(N).subscribe(J)))}),M(()=>(e(I),ga),()=>{i(W,Ya(e(I),{page:nr({initialPageSize:5}),sort:Ka(),filter:Za({fn:({filterValue:J,value:Ge})=>Ge.toLowerCase().includes(J.toLowerCase())}),select:ga()}))}),M(()=>o(),()=>{o()?.length>0&&Ie.set(!1)}),M(()=>(r(),e(W)),()=>{i(le,r().value!==-1?e(W).createColumns([e(W).column({accessor:"storeName",header:"Store Name"}),e(W).column({accessor:"date",header:"Date, Hours"}),e(W).column({accessor:"customerCount",header:"Customer Count"}),e(W).column({accessor:"busyHourProjections",header:"Busy Hour Projections"})]):e(W).createColumns([e(W).column({accessor:"storeName",header:"Store Name"}),e(W).column({accessor:"customerCount",header:"Customer Count"}),e(W).column({accessor:"busyHourProjections",header:"Busy Hour Projections"}),e(W).column({accessor:"customerProjection",header:"Customer Projections"}),e(W).column({accessor:"chevron",header:"Chevron"})]))}),M(()=>(e(Q),e(O),e(ve),e(Y),e(H),e(W),e(le)),()=>{(J=>(pt(i(Q,J.headerRows),"$headerRows",a),pt(i(O,J.pageRows),"$pageRows",a),pt(i(ve,J.tableAttrs),"$tableAttrs",a),pt(i(Y,J.tableBodyAttrs),"$tableBodyAttrs",a),i(H,J.pluginStates)))(e(W).createViewModel(e(le)))}),M(()=>(e(me),e(ye),e(re),e(pe),e(H)),()=>{(J=>(pt(i(me,J.pageIndex),"$pageIndex",a),pt(i(ye,J.hasNextPage),"$hasNextPage",a),pt(i(re,J.hasPreviousPage),"$hasPreviousPage",a),pt(i(pe,J.pageSize),"$pageSize",a)))(e(H).page)}),M(()=>(f(),e(de),m(),e(Te)),()=>{f()!==e(de)&&m()!==-1&&(i(de,f()),se(m()).then(J=>{J?.data?.data&&i(Te,{...e(Te),[m()]:J.data.data})}))}),na(),Bt();var He=f1(),Qe=c(He),z=c(Qe),Me=c(z,!0);d(z);var Z=u(z,2),ke=c(Z),Re=c(ke),xe=c(Re);Ee(()=>Se(xe,`${l()+1}-${Math.min((l()+1)*p(),x().length)??""} of ${x().length??""}`)),d(Re);var Ce=u(Re,2),ze=c(Ce),Fe=D(()=>!b());St(ze,{variant:"ghost",size:"icon",get disabled(){return e(Fe)},$$events:{click:ie},children:(J,Ge)=>{wo(J,{class:"h-4 w-4"})},$$slots:{default:!0}});var Ve=u(ze,2),j=D(()=>!A());St(Ve,{variant:"ghost",size:"icon",get disabled(){return e(j)},$$events:{click:ae},children:(J,Ge)=>{ss(J,{class:"h-4 w-4"})},$$slots:{default:!0}}),d(Ce),d(ke),d(Z),d(Qe);var De=u(Qe,2);{var Pe=J=>{var Ge=t1(),v=c(Ge);ma(v),d(Ge),n(J,Ge)},Ae=J=>{Ua(J,it($,{class:"w-full",children:(Ge,v)=>{var y=u1(),F=g(y);Ha(F,{children:(je,Ne)=>{var Ue=T(),B=g(Ue);mt(B,1,h,aa,(ce,oe)=>{var he=D(()=>e(oe).attrs());Wt(ce,{get rowAttrs(){return e(he)},children:(Ke,E)=>{la(Ke,{class:"bg-transparent flex flex-row border-b items-center justify-between",children:(ue,G)=>{var we=T(),fe=g(we);mt(fe,1,()=>e(oe).cells,Ye=>Ye.id,(Ye,et)=>{var Xe=D(()=>e(et).attrs()),bt=D(()=>e(et).props());Wt(Ye,{get attrs(){return e(Xe)},get props(){return e(bt)},children:Gt,$$slots:{default:(ut,dt)=>{const yt=D(()=>dt.attrs),Ct=D(()=>dt.props);var Ot=T(),xt=g(Ot);{var ot=Dt=>{var Yt=a1();n(Dt,Yt)},wt=Dt=>{qa(Dt,it(()=>e(yt),{class:"text-[#727272] whitespace-nowrap text-sm h-full flex items-center text-center justify-center py-2 w-1/5",children:(Yt,vt)=>{var kt=D(()=>e(et).id==="storeName"?"hover:bg-transparent text-[#727272] opacity-60 text-xs min-w-[200px] flex justify-start":"hover:bg-transparent text-[#727272] opacity-60 text-xs");St(Yt,{variant:"ghost",get class(){return e(kt)},$$events:{click(...Kt){e(Ct).sort.toggle?.apply(this,Kt)}},children:(Kt,Xt)=>{var Qt=r1(),Jt=g(Qt),qe=D(()=>e(et).render());ha(Jt,{get of(){return e(qe)}});var tt=u(Jt,2);or(tt,{class:"ml-2 h-4 w-4"}),n(Kt,Qt)},$$slots:{default:!0}})},$$slots:{default:!0}}))};ee(xt,Dt=>{e(et).id==="chevron"?Dt(ot):Dt(wt,!1)})}n(ut,Ot)}}})}),n(ue,we)},$$slots:{default:!0}})},$$slots:{default:!0}})}),n(je,Ue)},$$slots:{default:!0}});var P=u(F,2);{var U=je=>{ja(je,it(k,{children:(Ne,Ue)=>{var B=T(),ce=g(B);mt(ce,1,w,oe=>oe.id,(oe,he)=>{var Ke=D(()=>e(he).attrs());Wt(oe,{get rowAttrs(){return e(Ke)},children:Gt,$$slots:{default:(E,ue)=>{const G=D(()=>ue.rowAttrs);var we=d1(),fe=g(we);la(fe,it(()=>e(G),{class:"border-b flex items-center w-full justify-between",children:(Xe,bt)=>{var ut=T(),dt=g(ut);mt(dt,1,()=>e(he).cells,yt=>yt.id,(yt,Ct)=>{var Ot=D(()=>e(Ct).attrs());Wt(yt,{get attrs(){return e(Ot)},children:Gt,$$slots:{default:(xt,ot)=>{const wt=D(()=>ot.attrs);Da(xt,it(()=>e(wt),{class:"flex items-center justify-center whitespace-nowrap flex-1 py-2 w-full",children:(Dt,Yt)=>{var vt=T(),kt=g(vt);{var Kt=Qt=>{var Jt=s1(),qe=c(Jt),tt=c(qe);Ga(tt,{class:"w-4 h-4 text-white"}),d(qe);var ct=u(qe,2),nt=c(ct,!0);d(ct),d(Jt),Ee(()=>Se(nt,e(he).original.storeName)),n(Qt,Jt)},Xt=Qt=>{var Jt=T(),qe=g(Jt);{var tt=nt=>{var At=o1(),Et=c(At),zt=c(Et,!0);d(Et);var ta=u(Et,2),Zt=c(ta);d(ta),d(At),Ee(()=>{Se(zt,e(he).original.predictedMean),It(ta,`px-2 py-1 rounded ${e(he).original.predictedMean>e(he).original.customerCount?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`),Se(Zt,`${e(he).original.customerProjection??""}%`)}),n(nt,At)},ct=nt=>{var At=T(),Et=g(At);{var zt=Zt=>{St(Zt,{variant:"ghost",size:"icon",$$events:{click:()=>Le(e(he).original.store_id)},children:(pa,fa)=>{var _a=D(()=>`w-5 h-5 text-gray-400 ${e(_e).has(e(he).original.store_id)?"rotate-90":""}`);ss(pa,{get class(){return e(_a)}})},$$slots:{default:!0}})},ta=Zt=>{var pa=D(()=>e(Ct).render());ha(Zt,{get of(){return e(pa)}})};ee(Et,Zt=>{e(Ct).id==="chevron"?Zt(zt):Zt(ta,!1)},!0)}n(nt,At)};ee(qe,nt=>{e(Ct).id==="customerProjection"?nt(tt):nt(ct,!1)},!0)}n(Qt,Jt)};ee(kt,Qt=>{e(Ct).id==="storeName"?Qt(Kt):Qt(Xt,!1)})}n(Dt,vt)},$$slots:{default:!0}}))}}})}),n(Xe,ut)},$$slots:{default:!0}}));var Ye=u(fe,2);{var et=Xe=>{la(Xe,{class:"bg-gray-50 w-full",children:(bt,ut)=>{Da(bt,{get colspan(){return e(le).length},class:"w-full",children:(dt,yt)=>{var Ct=T(),Ot=g(Ct);{var xt=ot=>{la(ot,{class:"bg-gray-50 w-full",children:(wt,Dt)=>{var Yt=T(),vt=g(Yt);{var kt=Xt=>{var Qt=l1(),Jt=u(c(Qt),2),qe=u(c(Jt));mt(qe,5,()=>e(Te)[e(he).original.store_id],aa,(tt,ct)=>{var nt=n1(),At=c(nt),Et=c(At,!0);d(At);var zt=u(At),ta=c(zt,!0);d(zt);var Zt=u(zt),pa=c(Zt,!0);d(Zt);var fa=u(Zt),_a=c(fa,!0);d(fa),d(nt),Ee(()=>{Se(Et,e(ct).date),Se(ta,e(ct).hour),Se(pa,e(ct).noofcustomers),Se(_a,e(ct).going_out_count)}),n(tt,nt)}),d(qe),d(Jt),d(Qt),n(Xt,Qt)},Kt=Xt=>{var Qt=i1();n(Xt,Qt)};ee(vt,Xt=>{e(Te)[e(he).original.store_id]?Xt(kt):Xt(Kt,!1)})}n(wt,Yt)},$$slots:{default:!0}})};ee(Ot,ot=>{e(_e).has(e(he).original.store_id)&&ot(xt)})}n(dt,Ct)},$$slots:{default:!0}})},$$slots:{default:!0}})};ee(Ye,Xe=>{e(_e).has(e(he).original.store_id)&&Xe(et)})}n(E,we)}}})}),n(Ne,B)},$$slots:{default:!0}}))},te=je=>{var Ne=T(),Ue=g(Ne);mt(Ue,1,h,aa,(B,ce)=>{la(B,{class:"bg-transparent flex flex-row border-b items-center justify-between",children:(oe,he)=>{var Ke=T(),E=g(Ke);mt(E,1,()=>e(ce).cells,ue=>ue.id,(ue,G)=>{var we=c1();n(ue,we)}),n(oe,Ke)},$$slots:{default:!0}})}),n(je,Ne)};ee(P,je=>{o().length>0?je(U):je(te,!1)})}n(Ge,y)},$$slots:{default:!0}}))};ee(De,J=>{C()?J(Pe):J(Ae,!1)})}d(He),Ee(()=>Se(Me,r().label)),n(s,He),jt()}var h1=S('<div class="flex items-center justify-center w-full h-full min-h-[200px]"><!></div>'),v1=S('<p class="w-1/5"></p>'),g1=S("<!> <!>",1),m1=S('<div class="flex items-center gap-2 min-w-[200px] justify-start"><div class="w-8 h-8 rounded text-start bg-blue-900 flex items-center justify-center flex-shrink-0"><!></div> <span> </span></div>'),b1=S('<span class="text-sm text-[#727272]"> </span>'),_1=S('<div class="flex items-center gap-2"><span class="text-gray-600"> </span></div>'),x1=S('<tr class="w-full flex flex-row items-center justify-between"><td class=" p-2 w-full text-center"> </td><td class=" p-2 w-full text-center"> </td><td class=" p-2 w-full text-center"> </td><td class=" p-2 w-full text-center"> </td></tr>'),$1=S('<div class="p-4 w-[85vw] max-h-[150px] overflow-y-auto"><h3 class="font-bold mb-2">Detailed Information</h3> <table class="w-full border-collapse"><thead class="w-full"><tr class="w-full flex flex-row items-center justify-between"><th class=" p-2 w-full">Date</th><th class=" p-2 w-full">Hour</th><th class=" p-2 w-full">Customer Count</th><th class=" p-2 w-full">Customer Projections</th></tr></thead><tbody class="w-full"></tbody></table></div>'),y1=S('<div class="p-4">Loading...</div>'),w1=S("<!> <!>",1),k1=S("<!> <!>",1),C1=S('<div class="m-0 flex flex-col items-center justify-center"><!></div>');function D1(s,t){Ft(t,!1);const a=ra(),r=()=>X(ve(),"$dateRange",a),o=()=>X(e(w),"$tableAttrs",a),l=()=>X(e(h),"$headerRows",a),p=()=>X(e(R),"$tableBodyAttrs",a),f=()=>X(e(k),"$pageRows",a),m=_(),x=_(),b=_(),A=_(),C=_(),$=_(),h=_(),k=_(),w=_(),R=_(),N=_(),I=_(),W=_(),le=_(),Q=_();Aa();let O=L(t,"liveData",8);L(t,"selectedStore",8),L(t,"allStores",8),L(t,"value",8);let ve=L(t,"dateRange",8),Y=L(t,"token",8),H=L(t,"loading",8);async function me(q){const K=new Date;let Ie=new Date(K);switch(r()){case"7":Ie.setDate(K.getDate()-7);break;case"30":Ie.setMonth(K.getMonth()-1);break;case"year":Ie.setFullYear(K.getFullYear()-1);break;default:Ie.setDate(K.getDate()-7)}const ae=ie=>ie.toISOString().split("T")[0];console.log(ae(Ie)),console.log(ae(K)),console.log(r()),console.log(q),console.log(Y());try{const _e=await(await fetch(`https://api.moksa.ai/people/getPeopleCountLive/${q}/1/100`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y()}`,datetype:r(),pagenumber:1,pagepersize:100,dropdown:!0}})).json();return console.log(_e),_e}catch(ie){return console.error(ie),null}}let ye=_(new Set),re=_({});function pe(q){e(ye).has(q)?(e(ye).delete(q),i(re,{...e(re),[q]:null})):(e(ye).add(q),i(re,{...e(re),[q]:null}),e(re)[q]||me(q).then(K=>{console.log(K),fo(re,e(re)[q]=K?.data?.data),i(re,e(re))})),i(ye,e(ye))}M(()=>Mt(O()),()=>{console.log("LivePeopleCountDataTable received new data:",O())}),M(()=>Mt(O()),()=>{i(m,O()?.data===void 0?[]:O().data)}),M(()=>e(m),()=>{console.log("mapData",e(m))}),M(()=>e(m),()=>{i(x,e(m).map(q=>({storeName:q.store,customerCount:Number(q.noofcustomers),goingOut:Number(q.going_out_count),created:q.createdAt,busyHour:q.busyhour,predictedMean:q.predictedmean,predictedPercentage:q.predicted_percentage,storeId:q.store_id})))}),M(()=>e(x),()=>{i(b,st(e(x)))}),M(()=>(e(x),e(b)),()=>{i(A,wa(e(x),q=>e(b).subscribe(q)))}),M(()=>(e(A),ga),()=>{i(C,Ya(e(A),{page:nr({initialPageSize:100}),sort:Ka(),filter:Za({fn:({filterValue:q,value:K})=>K.toLowerCase().includes(q.toLowerCase())}),select:ga()}))}),M(()=>e(C),()=>{i($,e(C).createColumns([e(C).column({accessor:"storeName",header:"Store Name"}),e(C).column({accessor:"customerCount",header:"Coming In"}),e(C).column({accessor:"busyHour",header:"Busy Hour Projections"}),e(C).column({accessor:"customerProjection",header:"Customer Projections"}),e(C).column({accessor:"goingOut",header:"Going Out"}),e(C).column({accessor:"chevron",header:"Chevron"})]))}),M(()=>(e(h),e(k),e(w),e(R),e(N),e(C),e($)),()=>{(q=>(pt(i(h,q.headerRows),"$headerRows",a),pt(i(k,q.pageRows),"$pageRows",a),pt(i(w,q.tableAttrs),"$tableAttrs",a),pt(i(R,q.tableBodyAttrs),"$tableBodyAttrs",a),i(N,q.pluginStates)))(e(C).createViewModel(e($)))}),M(()=>(e(I),e(W),e(le),e(Q),e(N)),()=>{(q=>(pt(i(I,q.pageIndex),"$pageIndex",a),i(W,q.hasNextPage),i(le,q.hasPreviousPage),pt(i(Q,q.pageSize),"$pageSize",a)))(e(N).page)}),na(),Bt();var Be=C1(),Je=c(Be);{var ge=q=>{var K=h1(),Ie=c(K);ma(Ie),d(K),n(q,K)},Oe=q=>{Ua(q,it(o,{class:"w-full",children:(K,Ie)=>{var ae=k1(),ie=g(ae);Ha(ie,{children:(Le,de)=>{var He=T(),Qe=g(He);mt(Qe,1,l,aa,(z,Me)=>{var Z=D(()=>e(Me).attrs());Wt(z,{get rowAttrs(){return e(Z)},children:(ke,Re)=>{la(ke,{class:"bg-transparent flex flex-row border-b items-center justify-between",children:(xe,Ce)=>{var ze=T(),Fe=g(ze);mt(Fe,1,()=>e(Me).cells,Ve=>Ve.id,(Ve,j)=>{var De=D(()=>e(j).attrs()),Pe=D(()=>e(j).props());Wt(Ve,{get attrs(){return e(De)},get props(){return e(Pe)},children:Gt,$$slots:{default:(Ae,J)=>{const Ge=D(()=>J.attrs),v=D(()=>J.props);var y=T(),F=g(y);{var P=te=>{var je=v1();n(te,je)},U=te=>{qa(te,it(()=>e(Ge),{class:"text-[#727272] whitespace-nowrap text-sm h-full flex items-center text-center justify-center py-2 w-1/6",children:(je,Ne)=>{var Ue=D(()=>e(j).id==="storeName"?"hover:bg-transparent text-[#727272] opacity-60 text-xs min-w-[200px] flex justify-start":"hover:bg-transparent text-[#727272] opacity-60 text-xs");St(je,{variant:"ghost",get class(){return e(Ue)},$$events:{click(...B){e(v).sort.toggle?.apply(this,B)}},children:(B,ce)=>{var oe=g1(),he=g(oe),Ke=D(()=>e(j).render());ha(he,{get of(){return e(Ke)}});var E=u(he,2);or(E,{class:"ml-2 h-4 w-4"}),n(B,oe)},$$slots:{default:!0}})},$$slots:{default:!0}}))};ee(F,te=>{e(j).id==="chevron"?te(P):te(U,!1)})}n(Ae,y)}}})}),n(xe,ze)},$$slots:{default:!0}})},$$slots:{default:!0}})}),n(Le,He)},$$slots:{default:!0}});var _e=u(ie,2);{var Te=Le=>{ja(Le,it(p,{children:(de,He)=>{var Qe=T(),z=g(Qe);mt(z,1,f,Me=>Me.id,(Me,Z)=>{var ke=D(()=>e(Z).attrs());Wt(Me,{get rowAttrs(){return e(ke)},children:Gt,$$slots:{default:(Re,xe)=>{const Ce=D(()=>xe.rowAttrs);var ze=w1(),Fe=g(ze);la(Fe,it(()=>e(Ce),{class:"border-b flex items-center w-full justify-between",children:(De,Pe)=>{var Ae=T(),J=g(Ae);mt(J,1,()=>e(Z).cells,Ge=>Ge.id,(Ge,v)=>{var y=D(()=>e(v).attrs());Wt(Ge,{get attrs(){return e(y)},children:Gt,$$slots:{default:(F,P)=>{const U=D(()=>P.attrs);Da(F,it(()=>e(U),{class:"flex items-center justify-center whitespace-nowrap flex-1 py-2 w-1/6",children:(te,je)=>{var Ne=T(),Ue=g(Ne);{var B=oe=>{var he=m1(),Ke=c(he),E=c(Ke);Ga(E,{class:"w-4 h-4 text-white"}),d(Ke);var ue=u(Ke,2),G=c(ue,!0);d(ue),d(he),Ee(()=>Se(G,e(Z).original.storeName)),n(oe,he)},ce=oe=>{var he=T(),Ke=g(he);{var E=G=>{var we=b1(),fe=c(we,!0);Ee(()=>Se(fe,new Date(e(Z).original.created).toLocaleDateString("en-US",{weekday:"short",month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}))),d(we),n(G,we)},ue=G=>{var we=T(),fe=g(we);{var Ye=Xe=>{var bt=_1(),ut=c(bt),dt=c(ut,!0);d(ut),d(bt),Ee(()=>Se(dt,e(Z).original.predictedMean)),n(Xe,bt)},et=Xe=>{var bt=T(),ut=g(bt);{var dt=Ct=>{St(Ct,{variant:"ghost",size:"icon",$$events:{click:()=>pe(e(Z).original.storeId)},children:(Ot,xt)=>{var ot=D(()=>`w-5 h-5 text-gray-400 ${e(ye).has(e(Z).original.storeId)?"rotate-90":""}`);ss(Ot,{get class(){return e(ot)}})},$$slots:{default:!0}})},yt=Ct=>{var Ot=D(()=>e(v).render());ha(Ct,{get of(){return e(Ot)}})};ee(ut,Ct=>{e(v).id==="chevron"?Ct(dt):Ct(yt,!1)},!0)}n(Xe,bt)};ee(fe,Xe=>{e(v).id==="customerProjection"?Xe(Ye):Xe(et,!1)},!0)}n(G,we)};ee(Ke,G=>{e(v).id==="created"?G(E):G(ue,!1)},!0)}n(oe,he)};ee(Ue,oe=>{e(v).id==="storeName"?oe(B):oe(ce,!1)})}n(te,Ne)},$$slots:{default:!0}}))}}})}),n(De,Ae)},$$slots:{default:!0}}));var Ve=u(Fe,2);{var j=De=>{la(De,{class:"bg-gray-50 w-full",children:(Pe,Ae)=>{Da(Pe,{get colspan(){return e($).length},class:"w-full",children:(J,Ge)=>{var v=T(),y=g(v);{var F=P=>{la(P,{class:"bg-gray-50 w-full",children:(U,te)=>{var je=T(),Ne=g(je);{var Ue=ce=>{var oe=$1(),he=u(c(oe),2),Ke=u(c(he));mt(Ke,5,()=>e(re)[e(Z).original.storeId],aa,(E,ue)=>{var G=x1(),we=c(G),fe=c(we,!0);d(we);var Ye=u(we),et=c(Ye,!0);d(Ye);var Xe=u(Ye),bt=c(Xe,!0);d(Xe);var ut=u(Xe),dt=c(ut,!0);d(ut),d(G),Ee(()=>{Se(fe,e(ue).date),Se(et,e(ue).hour),Se(bt,e(ue).noofcustomers),Se(dt,e(ue).going_out_count)}),n(E,G)}),d(Ke),d(he),d(oe),n(ce,oe)},B=ce=>{var oe=y1();n(ce,oe)};ee(Ne,ce=>{e(re)[e(Z).original.storeId]?ce(Ue):ce(B,!1)})}n(U,je)},$$slots:{default:!0}})};ee(y,P=>{e(ye).has(e(Z).original.storeId)&&P(F)})}n(J,v)},$$slots:{default:!0}})},$$slots:{default:!0}})};ee(Ve,De=>{e(ye).has(e(Z).original.storeId)&&De(j)})}n(Re,ze)}}})}),n(de,Qe)},$$slots:{default:!0}}))},se=Le=>{ja(Le,{children:(de,He)=>{var Qe=T(),z=g(Qe);mt(z,1,l,aa,(Me,Z)=>{la(Me,{class:"bg-transparent flex flex-row border-b items-center justify-between",children:(ke,Re)=>{var xe=T(),Ce=g(xe);mt(Ce,1,()=>e(Z).cells,ze=>ze.id,(ze,Fe)=>{Da(ze,{class:"flex items-center justify-center whitespace-nowrap flex-1 py-2 w-1/4",children:(Ve,j)=>{$e();var De=We("No data");n(Ve,De)},$$slots:{default:!0}})}),n(ke,xe)},$$slots:{default:!0}})}),n(de,Qe)},$$slots:{default:!0}})};ee(_e,Le=>{e(m).length>0?Le(Te):Le(se,!1)})}n(K,ae)},$$slots:{default:!0}}))};ee(Je,q=>{H()?q(ge):q(Oe,!1)})}d(Be),n(s,Be),jt()}var S1=S('<div class="p-2"><!></div> <!>',1),A1=S("<!> <!>",1),P1=S("<!> Export Reports",1),E1=S('<p class="flex items-center justify-center py-10">No live data available</p>'),R1=S("<!> <!>",1),T1=S('<section class="w-full p-4 flex flex-col max-h-[calc(100vh-75px)] overflow-y-auto hide-scrollbar"><div><div class="flex items-center justify-between w-full mb-4"><div class="w-[20rem] border rounded-md bg-gradient-to-r from-[#00FEA3] to-[#007077] p-2 flex items-center gap-3 h-[85px] mx-1"><span class="size-[60px] grid place-items-center text-white bg-white bg-opacity-20 rounded-full"><!></span> <span><p class="text-white text-xl font-bold"> </p> <p class="text-sm font-semibold text-white">stores registered</p></span></div> <div class="flex items-center justify-end gap-x-3"><!> <span class="flex items-center gap-3"><!></span></div></div> <div class="col-span-8 row-span-4 border rounded-md flex flex-col rounded-t-xl dark:border-white/[.7] max-h-[400px]"><span class="rounded-t-xl w-full h-[50px] bg-[#050F40] flex items-center justify-between px-4"><p class="text-white text-lg font-semibold flex items-center gap-2"> <span class="text-xs text-white bg-pink-500 rounded-md p-1">Live</span></p></span> <div class="h-full w-full max-h-[300px] overflow-y-auto"><!></div></div> <div class="col-span-8 row-span-4 border rounded-md p-2 flex flex-col dark:border-white/[.7] relative min-h-[450px] mt-10"><span class="flex gap-4 items-center absolute left-1/2 -translate-x-1/2 top-3"><span class="flex items-center border-black border-opacity-[18%] h-[40px] border-[1px] rounded-md dark:border-white"><button>Yesterday</button> <button>Last Week</button> <button>Last Month</button> <button>Last Year</button> <!></span></span> <div class="h-full w-full"><!></div></div></div></section>');function B1(s,t){Ft(t,!1);const a=ra(),r=()=>X(Q,"$selectedStore",a),o=()=>X($,"$dateRange",a),l=()=>X(C,"$liveData",a),p=()=>X(A,"$storeData",a),f=()=>X(le,"$loadingLive",a),m=_();let x=L(t,"allStores",8),b=L(t,"token",8),A=st([]),C=st([]),$=st("7"),h=_(void 0),k=_(void 0),w=_("Custom"),R=_(!1);const N=8,I=x()?.map(v=>({value:v.id,label:v.name}));let W=L(t,"curruser",8),le=st(!1),Q=st({value:-1,label:"All Stores"}),O=_(""),ve;Qa(async()=>{x().length>0&&H(r().value)});function Y(){ve&&ve.disconnect(),ve=fr("https://api.moksa.ai",{withCredentials:!0,extraHeaders:{Authorization:`Bearer ${b()}`},transports:["websocket","polling"]}),ve.on("error",v=>{console.log("error",v)}),ve.on("connect",()=>{console.log(`connected for ${r().value}, ${N}`),ve.emit("joinUser",N),ve.emit("joinStore",r().value)}),ve.on(`people_count_store_${r().value}`,v=>{console.log(`Received live people count for store ${r().value}:`,v),C.update(y=>{console.log(y);const F=y.data.findIndex(U=>U.store_id===v.store_id),P=I.some(U=>U?.value===v?.store_id);if(W()?.role!=="superAdmin"&&!P)return{data:y?.data};if(F!==-1){const U=[...y.data];return U[F]={...U[F],noofcustomers:v.noofcustomers.toString(),going_out_count:v.noofcustomersgoingout.toString()},{...y,data:U}}else{console.log(v);const U={store_id:v.store_id,store:v.store_name||x().find(te=>te.id===v.store_id)?.name||v.store_id,noofcustomers:v.noofcustomers.toString(),going_out_count:v.noofcustomersgoingout.toString(),busyhour:v.busyhour,predictedmean:0,predicted_percentage:0,total_count:v.going_in.toString()};return{...y,data:[...y.data,U]}}})}),ve.on("disconnect",()=>{console.log("disconnected")})}mo(()=>{ve&&ve.disconnect()});async function H(v){le.set(!0);const F=await(await fetch(`https://api.moksa.ai/people/getPeopleCountLive/${v}/1/30`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${b()}`}})).json();console.log("live 30 min data",v,F),C.set(F?.data),le.set(!1)}async function me(v){const y=new Date().toISOString().split("T")[0],F=new Date(new Date().setDate(new Date().getDate()-7)).toISOString().split("T")[0],U=await(await fetch(`https://api.moksa.ai/people/getPeopleCount/${v}/${F}/${y}`,{headers:r().value!==-1?{"Content-Type":"application/json",Authorization:`Bearer ${b()}`,datetype:7,pagenumber:1,pagepersize:100}:{"Content-Type":"application/json",Authorization:`Bearer ${b()}`,pagenumber:1,pagepersize:100},method:"GET"})).json();console.log("week data people count",U),U.status===200&&A.set(U.data.data)}async function ye(){console.log("called it instead"),i(w,"Custom");const v=new Date;let y=new Date(v);switch(o()){case"7":y.setDate(v.getDate()-7);break;case"30":y.setMonth(v.getMonth()-1);break;case"year":y.setFullYear(v.getFullYear()-1);break;case"yesterday":y.setDate(v.getDate()-1);break;default:y.setDate(v.getDate()-7)}const F=U=>U.toISOString().split("T")[0];console.log(F(y)),console.log(F(v)),console.log(o());const P=r().value;console.log(P);try{const U=await fetch(`https://api.moksa.ai/people/getPeopleCount/${P}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${b()}`,datetype:o(),pagenumber:1,pagepersize:100}});console.log(U);const te=await U.json();console.log("poeplecount",te),te.status===200&&A.set(te?.data?.data)}catch(U){console.error("Error fetching data:",U)}}async function re(){console.log("fetching custom date data",r().value);const v=e(h)?.start?`${e(h).start.year}-${String(e(h).start.month).padStart(2,"0")}-${String(e(h).start.day).padStart(2,"0")}`:"",y=e(h)?.end?`${e(h).end.year}-${String(e(h).end.month).padStart(2,"0")}-${String(e(h).end.day).padStart(2,"0")}`:"";console.log(v),console.log(y);const F=r().value;try{const P=await fetch(`https://api.moksa.ai/people/getPeopleCount/${F}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b()}`,datetype:"custom",pagenumber:1,pagepersize:100,startdate:v,enddate:y}});console.log(P);const U=await P.json();console.log("poeplecount",U),U.status===200&&A.set(U?.data?.data)}catch(P){console.error("Error fetching data:",P)}}function pe(v,y,F=[]){const P=v.filter(ce=>ce!=null),U=Object.keys(P[0]).filter(ce=>!F.includes(ce)).join(","),te=P.map(ce=>Object.keys(ce).filter(oe=>!F.includes(oe)).map(oe=>Be(ce[oe])).join(",")).join(`
`),je=U+`
`+te,Ne=new Blob([je],{type:"text/csv"}),Ue=URL.createObjectURL(Ne),B=document.createElement("a");B.href=Ue,B.download=y,document.body.appendChild(B),B.click(),document.body.removeChild(B)}function Be(v){const y=String(v);return y.includes(",")||y.includes('"')?`"${y.replace(/"/g,'""')}"`:y}M(()=>e(O),()=>{i(m,I.filter(v=>v.label.toLowerCase().includes(e(O).toLowerCase())))}),M(()=>r(),()=>{r()&&H(r()?.value)}),M(()=>e(h),()=>{if(e(h)?.start&&e(h)?.end){const v=new Date(e(h).start.year,e(h).start.month-1,e(h).start.day),y=new Date(e(h).end.year,e(h).end.month-1,e(h).end.day);i(w,`${v.toLocaleDateString()} - ${y.toLocaleDateString()}`);const F=Math.ceil((y.getTime()-v.getTime())/(1e3*60*60*24));console.log(F),$.set("custom"),setTimeout(()=>{i(R,!1)},200)}else i(w,"Custom")}),M(()=>(r(),Mt(b()),o(),e(h)),()=>{r().value!==void 0&&b()!==""&&(o()==="7 Days"?(console.log("called week data"),me(r().value)):e(h)===void 0&&o().toLowerCase()!=="custom"?(console.log("called date range function"),ye()):o().toLowerCase()==="custom"&&e(h)&&(console.log("called custom date data"),re()),Y())}),M(()=>e(k),()=>{console.log(e(k),"start value")}),na(),Bt();var Je=T1(),ge=c(Je),Oe=c(ge),q=c(Oe),K=c(q),Ie=c(K);Ga(Ie,{size:40}),d(K);var ae=u(K,2),ie=c(ae),_e=c(ie,!0);d(ie),$e(2),d(ae),d(q);var Te=u(q,2),se=c(Te);pr(se,{portal:null,children:(v,y)=>{var F=A1(),P=g(F);hr(P,{class:"w-[150px] bg-[#F4F4F4] border text-xs px-1 border-[#E0E0E0] rounded-lg bg-transparent",children:(te,je)=>{vr(te,{get placeholder(){return r().label}})},$$slots:{default:!0}});var U=u(P,2);gr(U,{class:"max-h-[200px] overflow-y-auto",children:(te,je)=>{var Ne=S1(),Ue=g(Ne),B=c(Ue);ia(B,{type:"text",placeholder:"Search stores...",class:"mb-2",get value(){return e(O)},set value(oe){i(O,oe)},$$legacy:!0}),d(Ue);var ce=u(Ue,2);mr(ce,{children:(oe,he)=>{var Ke=T(),E=g(Ke);{var ue=we=>{var fe=T(),Ye=g(fe);mt(Ye,1,()=>e(m),aa,(et,Xe)=>{Ca(et,{class:"px-1",get value(){return e(Xe).value},get label(){return e(Xe).label},$$events:{click:()=>{Q.set(e(Xe))}},children:(bt,ut)=>{$e();var dt=We();Ee(()=>Se(dt,e(Xe).label)),n(bt,dt)},$$slots:{default:!0}})}),n(we,fe)},G=we=>{Ca(we,{disabled:!0,children:(fe,Ye)=>{$e();var et=We("N/A");n(fe,et)},$$slots:{default:!0}})};ee(E,we=>{e(m).length>0?we(ue):we(G,!1)})}n(oe,Ke)},$$slots:{default:!0}}),n(te,Ne)},$$slots:{default:!0}}),n(v,F)},$$slots:{default:!0}});var Le=u(se,2),de=c(Le);St(de,{class:"flex items-center gap-1 bg-[#3D81FC] text-white hover:bg-white hover:text-[#3D81FC]",$$events:{click:()=>{const v=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});pe(l()?.data,`live_people_count_${v}.csv`),pe(p(),`people_count_${v}.csv`)}},children:(v,y)=>{var F=P1(),P=g(F);Ur(P,{size:18}),$e(),n(v,F)},$$slots:{default:!0}}),d(Le),d(Te),d(Oe);var He=u(Oe,2),Qe=c(He),z=c(Qe),Me=c(z);$e(),d(z),d(Qe);var Z=u(Qe,2),ke=c(Z);{var Re=v=>{var y=D(()=>l()||[]);D1(v,{get liveData(){return e(y)},get selectedStore(){return r()},get allStores(){return x()},get token(){return b()},dateRange:$,get value(){return e(h)},get loading(){return f()}})},xe=v=>{var y=E1();n(v,y)};ee(ke,v=>{l()?.data?.length>0?v(Re):v(xe,!1)})}d(Z),d(He);var Ce=u(He,2),ze=c(Ce),Fe=c(ze),Ve=c(Fe),j=u(Ve,2),De=u(j,2),Pe=u(De,2),Ae=u(Pe,2);wr(Ae,{openFocus:!0,get open(){return e(R)},set open(v){i(R,v)},children:(v,y)=>{var F=R1(),P=g(F);kr(P,{asChild:!0,children:Gt,$$slots:{default:(te,je)=>{const Ne=D(()=>je.builder);var Ue=D(()=>[e(Ne)]),B=D(()=>`2xl:py-2 2xl:px-3 py-1 px-2  text-sm hover:bg-[#0BA5E9] hover:text-white ${o()==="custom"?"bg-[#0BA5E9] text-white rounded-r-md":"text-black dark:text-white bg-transparent dark:border-white"}`);St(te,{get builders(){return e(Ue)},get class(){return e(B)},$$events:{click:()=>{$.set("Custom"),i(h,void 0)}},children:(ce,oe)=>{$e();var he=We();Ee(()=>Se(he,e(w))),n(ce,he)},$$slots:{default:!0}})}}});var U=u(P,2);Cr(U,{class:"w-auto p-0",align:"start",children:(te,je)=>{var Ne=D(()=>e(h)?.start);Dr(te,{initialFocus:!0,numberOfMonths:2,get placeholder(){return e(Ne)},get value(){return e(h)},set value(Ue){i(h,Ue)},get startValue(){return e(k)},set startValue(Ue){i(k,Ue)},$$legacy:!0})},$$slots:{default:!0}}),n(v,F)},$$slots:{default:!0},$$legacy:!0}),d(Fe),d(ze);var J=u(ze,2),Ge=c(J);p1(Ge,{storeData:A,selectedStore:Q,get token(){return b()},dateRange:$,get value(){return e(h)}}),d(J),d(Ce),d(ge),d(Je),Ee(()=>{Se(_e,x().length),Se(Me,`People Count: ${r().label??""} `),It(Ve,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${o()==="yesterday"?" rounded-l-md bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(j,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${o()==="7"?" bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(De,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${o()==="30"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(Pe,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${o()==="year"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`)}),gt("click",Ve,()=>{$.set("yesterday"),i(h,void 0)}),gt("click",j,()=>{$.set("7"),i(h,void 0)}),gt("click",De,()=>{$.set("30"),i(h,void 0)}),gt("click",Pe,()=>{$.set("year"),i(h,void 0)}),n(s,Je),jt()}var F1=S("<!> <!>",1),j1=S('<div class="flex items-center space-x-2"><!> <span> </span></div>'),L1=S('<div class="flex flex-col items-center w-full h-full"><span class="text-[#00051D] w-full h-full font-medium text-xs bg-[#F9F9F9] border-[#eaecfo] border-2 p-2">No. of People</span> <span class="text-[#00051D] w-full h-full font-medium text-xs bg-[#F9F9F9] border-[#eaecfo] border-2 p-2">Time Spent</span></div>'),N1=S('<div class="flex flex-col items-center w-full"><div class="flex justify-center item-center w-full gap-3 p-2"><span class="font-bold"> </span> <span class="bg-blue-500 text-white text-sm px-2 rounded"> </span></div> <div class="flex justify-center w-full p-2"><span> </span></div></div>'),M1=S("<!> <!>",1),O1=S('<div class="m-0"><!></div>');function I1(s,t){Ft(t,!1);const a=ra(),r=()=>X(R(),"$aisleData",a),o=()=>X(e(k),"$tableAttrs",a),l=()=>X(e($),"$headerRows",a),p=()=>X(e(w),"$tableBodyAttrs",a),f=()=>X(e(h),"$pageRows",a),m=_(),x=_(),b=_(),A=_(),C=_(),$=_(),h=_(),k=_(),w=_();Aa();let R=L(t,"aisleData",8);M(()=>r(),()=>{i(m,r())}),M(()=>e(m),()=>{console.log(e(m))}),M(()=>e(m),()=>{i(x,st(e(m)))}),M(()=>(e(m),e(x)),()=>{i(b,wa(e(m),W=>e(x).subscribe(W)))}),M(()=>(e(b),ga),()=>{i(A,Ya(e(b),{page:nr({initialPageSize:5}),sort:Ka(),filter:Za({fn:({filterValue:W,value:le})=>le.toLowerCase().includes(W.toLowerCase())}),select:ga()}))}),M(()=>(e(A),e(m)),()=>{i(C,e(A).createColumns([e(A).column({accessor:"store_name",header:"Name"}),e(A).column({accessor:"aisle",header:"Aisle"}),...Object.keys(e(m)[0].aisle_details).map(W=>e(A).column({accessor:W,header:W.charAt(0).toUpperCase()+W.slice(1)}))]))}),M(()=>(e($),e(h),e(k),e(w),e(A),e(C)),()=>{(W=>(pt(i($,W.headerRows),"$headerRows",a),pt(i(h,W.pageRows),"$pageRows",a),pt(i(k,W.tableAttrs),"$tableAttrs",a),pt(i(w,W.tableBodyAttrs),"$tableBodyAttrs",a)))(e(A).createViewModel(e(C)))}),na(),Bt();var N=O1(),I=c(N);Ua(I,it(o,{class:"w-full",children:(W,le)=>{var Q=M1(),O=g(Q);Ha(O,{children:(Y,H)=>{var me=T(),ye=g(me);mt(ye,1,l,aa,(re,pe)=>{var Be=D(()=>e(pe).attrs());Wt(re,{get rowAttrs(){return e(Be)},children:(Je,ge)=>{la(Je,{class:"bg-transparent flex flex-row border-b items-center justify-between",children:(Oe,q)=>{var K=T(),Ie=g(K);mt(Ie,1,()=>e(pe).cells,ae=>ae.id,(ae,ie)=>{var _e=D(()=>e(ie).attrs()),Te=D(()=>e(ie).props());Wt(ae,{get attrs(){return e(_e)},get props(){return e(Te)},children:Gt,$$slots:{default:(se,Le)=>{const de=D(()=>Le.attrs),He=D(()=>Le.props);qa(se,it(()=>e(de),{class:"text-[#727272] whitespace-nowrap text-sm h-full flex items-center text-center justify-center py-2 w-full",children:(Qe,z)=>{St(Qe,{variant:"ghost",class:"hover:bg-transparent text-[#727272] opacity-60 text-xs",$$events:{click(...Me){e(He).sort.toggle?.apply(this,Me)}},children:(Me,Z)=>{var ke=F1(),Re=g(ke),xe=D(()=>e(ie).render());ha(Re,{get of(){return e(xe)}});var Ce=u(Re,2);or(Ce,{class:"ml-2 h-4 w-4"}),n(Me,ke)},$$slots:{default:!0}})},$$slots:{default:!0}}))}}})}),n(Oe,K)},$$slots:{default:!0}})},$$slots:{default:!0}})}),n(Y,me)},$$slots:{default:!0}});var ve=u(O,2);ja(ve,it(p,{children:(Y,H)=>{var me=T(),ye=g(me);mt(ye,1,f,re=>re.id,(re,pe)=>{var Be=D(()=>e(pe).attrs());Wt(re,{get rowAttrs(){return e(Be)},children:Gt,$$slots:{default:(Je,ge)=>{const Oe=D(()=>ge.rowAttrs);la(Je,it(()=>e(Oe),{class:"border-b flex items-center w-full justify-between",children:(q,K)=>{var Ie=T(),ae=g(Ie);mt(ae,1,()=>e(pe).cells,ie=>ie.id,(ie,_e)=>{var Te=D(()=>e(_e).attrs());Wt(ie,{get attrs(){return e(Te)},children:Gt,$$slots:{default:(se,Le)=>{const de=D(()=>Le.attrs);Da(se,it(()=>e(de),{class:"flex flex-col items-center justify-center whitespace-nowrap flex-1 p-0 w-full text-center",children:(He,Qe)=>{var z=T(),Me=g(z);{var Z=Re=>{var xe=j1(),Ce=c(xe);Ga(Ce,{class:"w-6 h-6 text-blue-500"});var ze=u(Ce,2),Fe=c(ze,!0);d(ze),d(xe),Ee(()=>Se(Fe,e(pe).original.store_name)),n(Re,xe)},ke=Re=>{var xe=T(),Ce=g(xe);{var ze=Ve=>{var j=L1();n(Ve,j)},Fe=Ve=>{var j=T(),De=g(j);{var Pe=J=>{var Ge=N1(),v=c(Ge),y=c(v),F=c(y,!0);d(y);var P=u(y,2),U=c(P);d(P),d(v);var te=u(v,2),je=c(te),Ne=c(je,!0);d(je),d(te),d(Ge),Ee(()=>{Se(F,e(pe).original.aisle_details[e(_e).id].count),Se(U,`${e(pe).original.aisle_details[e(_e).id].percentage??""}%`),Se(Ne,e(pe).original.aisle_details[e(_e).id].timespent)}),n(J,Ge)},Ae=J=>{var Ge=D(()=>e(_e).render());ha(J,{get of(){return e(Ge)}})};ee(De,J=>{e(pe).original.aisle_details[e(_e).id]?J(Pe):J(Ae,!1)},!0)}n(Ve,j)};ee(Ce,Ve=>{e(_e).id==="aisle"?Ve(ze):Ve(Fe,!1)},!0)}n(Re,xe)};ee(Me,Re=>{e(_e).id==="store_name"?Re(Z):Re(ke,!1)})}n(He,z)},$$slots:{default:!0}}))}}})}),n(q,Ie)},$$slots:{default:!0}}))}}})}),n(Y,me)},$$slots:{default:!0}})),n(W,Q)},$$slots:{default:!0}})),d(N),n(s,N),jt()}var z1=S("<!> <!>",1),V1=S('<div class="p-2"><!></div> <!>',1),U1=S("<!> <!>",1),H1=S('<span class="text-xs text-white bg-pink-500 rounded-md p-1">Live</span>'),q1=S('<div class="h-full w-full"><!></div>'),G1=S('<div class="h-full w-full flex items-center justify-center min-h-[150px]"><p class="text-lg">No data found</p></div>'),W1=S('<div class="h-full w-full flex items-center justify-center min-h-[150px]"><!></div>'),Y1=S('<p class="flex items-center gap-2"><span class=" capitalize flex-shrink-0 size-2 rounded-full"></span> <span class="text-white text-sm px-2 rounded"> </span></p>'),K1=S('<span class="rounded-t-xl w-full h-[50px] flex items-center justify-between px-4 flex-shrink-0"><p class="text-lg font-semibold flex items-center gap-2">Customers Concentration</p></span> <div class="h-full w-full flex items-center justify-between p-3"><span class="w-1/4 flex flex-col gap-3"></span> <span class="w-3/4"><canvas></canvas></span></div>',1),Z1=S('<div class="h-full w-full flex items-center justify-center min-h-[150px]"><!></div>'),J1=S('<div class="h-full w-full flex items-center justify-center"><p class="text-lg">No data found</p></div>'),X1=S('<div class="col-span-8 row-span-6 border rounded-md flex flex-col rounded-t-xl dark:border-white/[.7] relative"><img alt="storeFloorImg" class=" w-full h-full max-h-[400px] rounded-md"> <canvas id="heatmapCanvas" class="absolute top-0 left-0 w-full h-full opacity-70 pointer-events-none z-[20000000]"></canvas></div>'),Q1=S('<div class="col-span-8 row-span-6 border rounded-md flex flex-col justify-center items-center rounded-t-xl dark:border-white/[.7]"><!></div>'),ef=S('<div class="col-span-8 row-span-6 border rounded-md flex flex-col justify-center items-center rounded-t-xl dark:border-white/[.7]"><p class="text-lg font-semibold">Floor map not available for this store</p></div>'),tf=S('<section class="w-full p-4 flex flex-col overflow-y-auto max-h-[calc(100vh-75px)] hide-scrollbar"><div class="flex items-center justify-between"><span class="flex items-center gap-4"><span class="flex items-center border-black h-[40px] border-opacity-[18%] border-[1px] rounded-md dark:border-white"><button>live</button> <button>1hr</button> <button>3hr</button> <button>5hr</button> <button>7hr</button> <button>1 Day</button> <button>3 Day</button> <button>7 Day</button> <!></span> <!></span></div> <div class="grid grid-cols-8 gap-4 mt-4"><div class="col-span-8 row-span-2 border rounded-md flex flex-col rounded-t-xl dark:border-white/[.7] max-h-[200px]"><span class="rounded-t-xl w-full h-[50px] bg-[#050F40] flex items-center justify-between px-4"><p class="text-white text-lg font-semibold flex items-center gap-2"> <!></p></span> <!></div> <div class="col-span-4 row-span-3 border rounded-md flex flex-col dark:border-white/[.7] min-h-[300px] max-h-[500px]"><span class="rounded-t-xl w-full h-[50px] flex items-center justify-between px-4 flex-shrink-0"><p class="text-lg font-semibold flex items-center gap-2">People Count on each aisle</p></span> <span class="h-full w-full relative"><span class="absolute bottom-0 left-0 w-[150px] h-[30px] bg-white z-[200]"></span></span></div> <div class="col-span-4 row-span-3 border rounded-md flex flex-col dark:border-white/[.7] min-h-[300px]"><!></div> <div class="col-span-8 row-span-2 flex items-center justify-between rounded-t-xl dark:border-white/[.7]"><p class="text-lg font-semibold">Heat Map</p> <div class="flex flex-col items-end"><div class="w-[200px] h-6 flex"><div class="w-1/3 h-full flex-shrink-0" style="background: linear-gradient(to right, rgb(0, 0, 255), rgb(255, 255, 0))"></div> <div class="w-1/3 h-full flex-shrink-0" style="background: linear-gradient(to right, rgb(255, 255, 0), rgb(255, 165, 0))"></div> <div class="w-1/3 h-full flex-shrink-0" style="background: linear-gradient(to right, rgb(255, 165, 0), rgb(255, 0, 0))"></div></div> <div class="flex justify-between w-[200px] text-xs mt-1"><span>low</span> <span>medium</span> <span>high</span> <span>very high</span></div></div></div> <!></div></section>');function af(s,t){Ft(t,!1);const a=ra(),r=()=>X(Y,"$heatMapData",a),o=()=>X(q,"$selectedStore",a),l=()=>X(b,"$dateRange",a),p=()=>X(A,"$floorMaps",a),f=()=>X(C,"$aisleData",a),m=_(),x=8;let b=st("7"),A=st([]),C=st(["Fetching"]),$=L(t,"allStores",8),h=L(t,"token",8),k=_(!1);const w=$()?.filter(B=>B.id!==-1)?.map(B=>({value:B.id,label:B.name}));let R=_("");const N=Aa();function I(B){q.set(B),N("select",B)}const W=async B=>{try{const ce=await fetch(`https://api.moksa.ai/store/getFloorMapByStoreid/${B}`,{method:"GET",headers:{Authorization:`Bearer ${h()}`,"Content-Type":"application/json"}});if(!ce.ok)throw new Error(`HTTP error! status: ${ce.status}`);const oe=await ce.json();return console.log(`Floor map for store ${B}:`,oe),A.update(he=>[...he,{storeId:B,img:oe.data}]),oe}catch(ce){console.error(`Error fetching floor map for store ${B}:`,ce)}},le=async()=>{await Promise.all($()?.filter(B=>B.id!==-1)?.map(B=>W(B.id)))};let Q=null,O=_(null),ve=_(!0),Y=st(null),H=_();Qa(async()=>{await le(),setTimeout(async()=>{await re()},1e3)});function me(){const B=document.getElementById("heatmapCanvas"),ce=B.getContext("2d");if(!ce)return;const oe=document.querySelector("img");B.width=oe.width,B.height=oe.height;let he=r();if(!Array.isArray(he)||!Array.isArray(he[0])){console.error("Heatmap data is not a 2D array:",he),ua.error("Incorrect heatmap data");return}const Ke=Math.max(...he.map(E=>Math.max(...E)));console.log("maxvalue",Ke);for(let E=0;E<he.length;E++)for(let ue=0;ue<he[E].length;ue++){const we=he[E][ue]/Ke*255;let fe;we<=10?fe="rgba(0, 0, 0, 0)":we<=50?fe="rgba(0,0,255,1)":we<=100?fe="rgba(255, 255, 0, 1)":we<=150?fe="rgba(255, 165, 0, 1)":we<=200&&(fe="rgba(255, 0, 0,1)"),ce.fillStyle=fe,ce.fillRect(ue/he[E].length*B.width,E/he.length*B.height,B.width/he[E].length,B.height/he.length)}}function ye(){e(H)&&e(H).disconnect(),i(H,fr("https://api.moksa.ai",{withCredentials:!0,extraHeaders:{Authorization:`Bearer ${h()}`},transports:["websocket","polling"]})),e(H).on("error",B=>{console.log("error",B)}),e(H).on("connect",()=>{console.log(`connected for ${o().value}, ${x}`),e(H).emit("joinUser",x),e(H).emit("joinStore",o().value)}),e(H).on(`aisle_count_store_${o()?.value}`,B=>{console.log(`Received aisle data for store ${o().value}:`,B),C.update(ce=>{if(console.log(ce[0],"current data"),typeof ce!="object"){ce?.findIndex(he=>he?.store_id==B?.store_id);let oe=[];return oe[0]={...B},console.log(oe,"data in arr"),oe[0]}else{let oe={...B};return oe.store_id=B.store_id?.toString(),oe.total_people_count=B.total_people_count?.toString(),[{...oe}]}})}),e(H).on(`heatmap_2d_store_${o()?.value}`,async B=>{if(console.log(`Received heatmap data for store ${o().value}:`,B),B?.heatmapValues){Y.set(B?.heatmapValues);const oe=await(await fetch(`https://api.moksa.ai/stream?key=${Q}`,{method:"GET",headers:{Authorization:`Bearer ${h()}`,"Content-Type":"application/json"}})).blob(),he=URL.createObjectURL(oe);i(O,he),i(ve,!1),setTimeout(()=>{me(r())},100)}else ua.error("heat map data issue in socket")}),e(H).on("disconnect",()=>{console.log("disconnected")})}async function re(){C.set(["Fetching"]),i(_e,"custom"),i(ae,void 0),i(ve,!0);const B=p().find(ce=>ce.storeId===o().value);if(Q=B?B?.img:null,Q!==""&&Q!==null){console.log("selectedFloorMap",Q);const ce=await fetch(`https://api.moksa.ai/people/aisleCount/getAisleCountbyStoreid/${o().value}`,{method:"GET",headers:{Authorization:`Bearer ${h()}`,"Content-Type":"application/json",datetype:l()}});if(ce.ok){console.log("aData",ce);const G=await ce.json();G?.data?.length>0?(C.set(G?.data),setTimeout(()=>{Oe()},1e3)):C.set([])}else C.set([]);if(l()==="live"){i(ve,!1);return}const he=await(await fetch(`https://api.moksa.ai/heatmap/getHeatMapByTimeAndStoreId/${l()}/${o().value}`,{method:"GET",headers:{Authorization:`Bearer ${h()}`,"Content-Type":"application/json",datetype:l()}})).json();console.log("mapData",he),Y.set(he?.data);const E=await(await fetch(`https://api.moksa.ai/stream?key=${Q}`,{method:"GET",headers:{Authorization:`Bearer ${h()}`,"Content-Type":"application/json"}})).blob(),ue=URL.createObjectURL(E);i(O,ue),i(ve,!1),setTimeout(()=>{me(r())},100)}else i(O,null),i(ve,!1)}async function pe(){console.log("updateSelectedFloorMap  custom called",l()),i(ve,!0);const B=e(ae)?.start?`${e(ae).start.year}-${String(e(ae).start.month).padStart(2,"0")}-${String(e(ae).start.day).padStart(2,"0")}`:"",ce=e(ae)?.end?`${e(ae).end.year}-${String(e(ae).end.month).padStart(2,"0")}-${String(e(ae).end.day).padStart(2,"0")}`:"";console.log(B),console.log(ce);const oe=p().find(he=>he.storeId===o().value);if(Q=oe?oe.img:null,Q!==""&&Q!==null){const he=await fetch(`https://api.moksa.ai/people/aisleCount/getAisleCountbyStoreid/${o().value}`,{method:"GET",headers:{Authorization:`Bearer ${h()}`,"Content-Type":"application/json",datetype:"custom",startdate:B,enddate:ce}});if(he.ok){console.log("aData",he);const fe=await he.json();console.log("aisleData for store",o().value,fe?.data?.data),fe?.data?.length>0?(C.set(fe?.data),setTimeout(()=>{Oe()},1e3)):C.set([])}else C.set([]);if(l()==="live"){i(ve,!1);return}const E=await(await fetch(`https://api.moksa.ai/heatmap/getHeatMapByTimeAndStoreId/custom/${o().value}`,{method:"GET",headers:{Authorization:`Bearer ${h()}`,"Content-Type":"application/json",startdate:B,enddate:ce}})).json();console.log("mapData",E),Y.set(E?.data);const G=await(await fetch(`https://api.moksa.ai/stream?key=${Q}`,{method:"GET",headers:{Authorization:`Bearer ${h()}`,"Content-Type":"application/json"}})).blob(),we=URL.createObjectURL(G);i(O,we),i(ve,!1),setTimeout(()=>{me(r())},100)}else i(O,null),i(ve,!1)}let Be=_();function Je(B){if(console.log("data",B),!B||!B[0]?.aisle_details)return{data:[],categories:[]};const ce=B[0].aisle_details,oe=[{category:[]}],he=[{seriesname:"AisleData",data:[]},{seriesname:"RemainingData",data:[]}];for(const[Ke,E]of Object.entries(ce))oe[0].category.push({label:Ke}),he[0].data.push({value:E.count,color:"#07E1A4"}),he[1].data.push({value:B[0].total_people_count-E.count,color:"#9DFFFF"});return{data:he,categories:oe}}const ge=["#1E40AF","#1D4ED8","#2563EB","#3B82F6","#065F46","#059669","#10B981","#34D399","#5B21B6","#7C3AED","#8B5CF6","#A78BFA","#DC2626","#EF4444","#F59E0B","#FBBF24","#0891B2","#06B6D4","#22D3EE","#67E8F9"];function Oe(){if(Ie&&(Ie.destroy(),Ie=null),e(K)&&!Ie){const B=e(K).getContext("2d");if(B){ir.register(vn,gn,mn,bn);const ce=f()[0].aisle_details,oe=[],he=[];for(const[Ke,E]of Object.entries(ce))he.push(Ke),oe.push(E.percentage);Ie=new ir(B,{type:"pie",data:{labels:he,datasets:[{label:"Aisle Data",data:oe,backgroundColor:ge,borderWidth:1},{label:"Remaining Data",data:[0],backgroundColor:"transparent",borderWidth:0,hidden:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label(Ke){return`${Ke.label}: ${Ke.parsed}%`}}}}}})}}}let q=st({value:w?.[0]?.value,label:w?.[0]?.label}),K=_(),Ie=null,ae=_(void 0),ie=_(void 0),_e=_("Custom");M(()=>e(R),()=>{i(m,w.filter(B=>B.label.toLowerCase().includes(e(R).toLowerCase())))}),M(()=>(o(),Mt(h()),l()),()=>{o().value!==void 0&&h()!==""&&l()==="live"&&ye()}),M(()=>(l(),e(H)),()=>{l()!=="live"&&e(H)&&e(H).disconnect()}),M(()=>(o(),l(),e(ae)),()=>{(o()||l())&&(e(ae)?.start||e(ae)?.end?pe():re())}),M(()=>f(),()=>{f()[0]==="Fetching"||f().length===0?i(Be,{data:[],categories:[]}):i(Be,Je(f()))}),M(()=>e(ae),()=>{if(e(ae)?.start&&e(ae)?.end){const B=new Date(e(ae).start.year,e(ae).start.month-1,e(ae).start.day),ce=new Date(e(ae).end.year,e(ae).end.month-1,e(ae).end.day);i(_e,`${B.toLocaleDateString()} - ${ce.toLocaleDateString()}`);const oe=Math.ceil((ce.getTime()-B.getTime())/(1e3*60*60*24));console.log(oe),b.set("custom"),setTimeout(()=>{i(k,!1)},200)}else i(_e,"Custom")}),na(),Bt();var Te=tf(),se=c(Te),Le=c(se),de=c(Le),He=c(de),Qe=u(He,2),z=u(Qe,2),Me=u(z,2),Z=u(Me,2),ke=u(Z,2),Re=u(ke,2),xe=u(Re,2),Ce=u(xe,2);wr(Ce,{openFocus:!0,get open(){return e(k)},set open(B){i(k,B)},children:(B,ce)=>{var oe=z1(),he=g(oe);kr(he,{asChild:!0,children:Gt,$$slots:{default:(E,ue)=>{const G=D(()=>ue.builder);var we=D(()=>[e(G)]),fe=D(()=>`2xl:py-2 2xl:px-3 py-1 px-2  text-sm hover:bg-[#0BA5E9] hover:text-white ${l()==="custom"?"bg-[#0BA5E9] rounded-r-md text-white":"text-black dark:text-white bg-transparent dark:border-white"}`);St(E,{get builders(){return e(we)},get class(){return e(fe)},$$events:{click:()=>i(ae,void 0)},children:(Ye,et)=>{$e();var Xe=We();Ee(()=>Se(Xe,e(_e))),n(Ye,Xe)},$$slots:{default:!0}})}}});var Ke=u(he,2);Cr(Ke,{class:"w-auto p-0 z-[600000000]",align:"start",children:(E,ue)=>{var G=D(()=>e(ae)?.start);Dr(E,{initialFocus:!0,numberOfMonths:2,get placeholder(){return e(G)},get value(){return e(ae)},set value(we){i(ae,we)},get startValue(){return e(ie)},set startValue(we){i(ie,we)},$$legacy:!0})},$$slots:{default:!0}}),n(B,oe)},$$slots:{default:!0},$$legacy:!0}),d(de);var ze=u(de,2);pr(ze,{portal:null,children:(B,ce)=>{var oe=U1(),he=g(oe);hr(he,{class:"w-[150px] bg-[#F4F4F4] border text-xs px-1 border-[#E0E0E0] rounded-lg dark:bg-transparent",children:(E,ue)=>{var G=D(()=>w.length>0?o().label:"No Stores");vr(E,{get placeholder(){return e(G)}})},$$slots:{default:!0}});var Ke=u(he,2);gr(Ke,{class:"max-h-[300px] z-[50000000000] overflow-y-auto",children:(E,ue)=>{var G=V1(),we=g(G),fe=c(we);ia(fe,{type:"text",placeholder:"Search stores...",class:"mb-2",get value(){return e(R)},set value(et){i(R,et)},$$legacy:!0}),d(we);var Ye=u(we,2);mr(Ye,{children:(et,Xe)=>{var bt=T(),ut=g(bt);{var dt=Ct=>{var Ot=T(),xt=g(Ot);mt(xt,1,()=>e(m),aa,(ot,wt)=>{Ca(ot,{class:"px-1",get value(){return e(wt).value},get label(){return e(wt).label},$$events:{click:()=>I(e(wt))},children:(Dt,Yt)=>{$e();var vt=We();Ee(()=>Se(vt,e(wt).label)),n(Dt,vt)},$$slots:{default:!0}})}),n(Ct,Ot)},yt=Ct=>{Ca(Ct,{disabled:!0,children:(Ot,xt)=>{$e();var ot=We("No matching stores");n(Ot,ot)},$$slots:{default:!0}})};ee(ut,Ct=>{e(m).length>0?Ct(dt):Ct(yt,!1)})}n(et,bt)},$$slots:{default:!0}}),n(E,G)},$$slots:{default:!0}}),n(B,oe)},$$slots:{default:!0}}),d(Le),d(se);var Fe=u(se,2),Ve=c(Fe),j=c(Ve),De=c(j),Pe=c(De),Ae=u(Pe);{var J=B=>{var ce=H1();n(B,ce)};ee(Ae,B=>{l()==="live"&&B(J)})}d(De),d(j);var Ge=u(j,2);{var v=B=>{var ce=q1(),oe=c(ce);I1(oe,{aisleData:C}),d(ce),n(B,ce)},y=B=>{var ce=T(),oe=g(ce);{var he=E=>{var ue=G1();n(E,ue)},Ke=E=>{var ue=T(),G=g(ue);{var we=fe=>{var Ye=W1(),et=c(Ye);ma(et),d(Ye),n(fe,Ye)};ee(G,fe=>{f()[0]==="Fetching"&&fe(we)},!0)}n(E,ue)};ee(oe,E=>{f().length===0?E(he):E(Ke,!1)},!0)}n(B,ce)};ee(Ge,B=>{f().length>0&&f()[0]!=="Fetching"?B(v):B(y,!1)})}d(Ve);var F=u(Ve,4),P=c(F);{var U=B=>{var ce=K1(),oe=u(g(ce),2),he=c(oe);mt(he,5,()=>Object.entries(f()[0].aisle_details),aa,(ue,G,we)=>{let fe=()=>e(G)[0],Ye=()=>e(G)[1];var et=Y1(),Xe=c(et),bt=u(Xe),ut=u(bt),dt=c(ut);Ee(()=>Se(dt,`${Ye().percentage.toFixed(2)??""}%`)),d(ut),d(et),Ee(()=>{ya(Xe,"style",`background-color: ${ge[we%ge.length]??""};`),Se(bt,`${fe()??""} `),ya(ut,"style",`background-color: ${ge[we%ge.length]??""};`)}),n(ue,et)}),d(he);var Ke=u(he,2),E=c(Ke);va(E,ue=>i(K,ue),()=>e(K)),d(Ke),d(oe),n(B,ce)},te=B=>{var ce=T(),oe=g(ce);{var he=E=>{var ue=Z1(),G=c(ue);ma(G),d(ue),n(E,ue)},Ke=E=>{var ue=T(),G=g(ue);{var we=fe=>{var Ye=J1();n(fe,Ye)};ee(G,fe=>{f().length===0&&fe(we)},!0)}n(E,ue)};ee(oe,E=>{f()[0]==="Fetching"?E(he):E(Ke,!1)},!0)}n(B,ce)};ee(P,B=>{f().length>0&&f()[0]!=="Fetching"?B(U):B(te,!1)})}d(F);var je=u(F,4);{var Ne=B=>{var ce=X1(),oe=c(ce);$e(2),d(ce),Ee(()=>ya(oe,"src",e(O))),n(B,ce)},Ue=B=>{var ce=T(),oe=g(ce);{var he=E=>{var ue=Q1(),G=c(ue);ma(G),d(ue),n(E,ue)},Ke=E=>{var ue=ef();n(E,ue)};ee(oe,E=>{e(ve)===!0?E(he):E(Ke,!1)},!0)}n(B,ce)};ee(je,B=>{e(O)!==null&&e(ve)===!1?B(Ne):B(Ue,!1)})}d(Fe),d(Te),Ee(()=>{It(He,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="live"?"bg-[#0BA5E9] rounded-l-md text-white":"text-black dark:text-white dark:border-white"}`),It(Qe,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="1hr"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(z,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="3hr"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(Me,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="5hr"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(Z,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="7hr"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(ke,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="1"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(Re,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="3"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(xe,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${l()==="7"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),Se(Pe,`${o().label??""} `)}),gt("click",He,()=>{b.set("live"),i(ae,void 0)}),gt("click",Qe,()=>{b.set("1hr"),i(ae,void 0)}),gt("click",z,()=>{b.set("3hr"),i(ae,void 0)}),gt("click",Me,()=>{b.set("5hr"),i(ae,void 0)}),gt("click",Z,()=>{b.set("7hr"),i(ae,void 0)}),gt("click",ke,()=>{b.set("1"),i(ae,void 0)}),gt("click",Re,()=>{b.set("3"),i(ae,void 0)}),gt("click",xe,()=>{b.set("7"),i(ae,void 0)}),n(s,Te),jt()}var rf=S("<!> <!>",1),sf=S('<div class="flex items-center gap-2 text-start w-full justify-start ml-5"><div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-center"><!></div> <span> </span></div>'),of=S('<img src="/images/tick.png" alt="tick" srcset="" class="w-5 h-5">'),nf=S('<img src="/images/cross.png" alt="cross" srcset="" class="w-5 h-5">'),lf=S("<p> </p>"),df=S("<p> </p>"),cf=S("<!> <!>",1),uf=S('<img alt="Safety Data Image" class="max-w-full w-auto h-[300px] object-contain border">'),ff=S('<!> <div class="flex items-center justify-center w-full h-full"><!></div>',1),pf=S('<div class="m-0"><!></div> <!>',1);function hf(s,t){Ft(t,!1);const a=ra(),r=()=>X(e(h),"$tableAttrs",a),o=()=>X(e(C),"$headerRows",a),l=()=>X(e(k),"$tableBodyAttrs",a),p=()=>X(e($),"$pageRows",a),f=_(),m=_(),x=_(),b=_(),A=_(),C=_(),$=_(),h=_(),k=_();let w=L(t,"token",8);Aa();let R=L(t,"data",8),N=_(!1),I=_(null);async function W(Y){i(N,!0),i(I,null);try{const H=await fetch(`https://api.moksa.ai/stream?key=${Y}`,{method:"GET",headers:{Authorization:`Bearer ${w()}`,"Content-Type":"application/json"}});if(!H.ok)throw new Error("Failed to get image");const me=await H.blob(),ye=URL.createObjectURL(me);i(I,ye),console.log("Image URL:",e(I))}catch(H){console.error("Error fetching image:",H)}}M(()=>Mt(R()),()=>{console.log("livetabledata",R())}),M(()=>(e(N),e(I)),()=>{e(N)===!1&&e(I)&&URL.revokeObjectURL(e(I))}),M(()=>Mt(R()),()=>{i(f,R()?.map(Y=>({employee:`${Y.first_name?Y.first_name+" "+Y.last_name:Y.emp_id}`,masks:Y.wearing_mask,gloves:Y.wearing_gloves,hairnet:Y.wearing_hair_net,uniform:Y.wearing_uniform,apron:"Coming Soon",videoLink:"Link",videourl:Y.img_link,date:Y.createdAt})))}),M(()=>e(f),()=>{i(m,st(e(f)))}),M(()=>(e(f),e(m)),()=>{i(x,wa(e(f),Y=>e(m).subscribe(Y)))}),M(()=>(e(x),ga),()=>{i(b,Ya(e(x),{page:nr({initialPageSize:100}),sort:Ka(),filter:Za({fn:({filterValue:Y,value:H})=>H.toLowerCase().includes(Y.toLowerCase())}),select:ga()}))}),M(()=>e(b),()=>{i(A,e(b).createColumns([e(b).column({accessor:"employee",header:"Employee"}),e(b).column({accessor:"date",header:"Date"}),e(b).column({accessor:"masks",header:"Masks"}),e(b).column({accessor:"gloves",header:"Gloves"}),e(b).column({accessor:"hairnet",header:"Hairnet"}),e(b).column({accessor:"uniform",header:"Uniform"}),e(b).column({accessor:"videoLink",header:"Image Link"})]))}),M(()=>(e(C),e($),e(h),e(k),e(b),e(A)),()=>{(Y=>(pt(i(C,Y.headerRows),"$headerRows",a),pt(i($,Y.pageRows),"$pageRows",a),pt(i(h,Y.tableAttrs),"$tableAttrs",a),pt(i(k,Y.tableBodyAttrs),"$tableBodyAttrs",a)))(e(b).createViewModel(e(A)))}),na(),Bt();var le=pf(),Q=g(le),O=c(Q);Ua(O,it(r,{class:"w-full",children:(Y,H)=>{var me=cf(),ye=g(me);Ha(ye,{children:(pe,Be)=>{var Je=T(),ge=g(Je);mt(ge,1,o,aa,(Oe,q)=>{var K=D(()=>e(q).attrs());Wt(Oe,{get rowAttrs(){return e(K)},children:(Ie,ae)=>{la(Ie,{class:"bg-transparent flex flex-row border-b items-center justify-between",children:(ie,_e)=>{var Te=T(),se=g(Te);mt(se,1,()=>e(q).cells,Le=>Le.id,(Le,de)=>{var He=D(()=>e(de).attrs()),Qe=D(()=>e(de).props());Wt(Le,{get attrs(){return e(He)},get props(){return e(Qe)},children:Gt,$$slots:{default:(z,Me)=>{const Z=D(()=>Me.attrs),ke=D(()=>Me.props);qa(z,it(()=>e(Z),{class:"text-[#727272] whitespace-nowrap text-sm h-full flex items-center text-center justify-center py-2 w-1/4",children:(Re,xe)=>{St(Re,{variant:"ghost",class:"hover:bg-transparent text-[#727272] opacity-60 text-xs",$$events:{click(...Ce){e(ke).sort.toggle?.apply(this,Ce)}},children:(Ce,ze)=>{var Fe=rf(),Ve=g(Fe),j=D(()=>e(de).render());ha(Ve,{get of(){return e(j)}});var De=u(Ve,2);or(De,{class:"ml-2 h-4 w-4"}),n(Ce,Fe)},$$slots:{default:!0}})},$$slots:{default:!0}}))}}})}),n(ie,Te)},$$slots:{default:!0}})},$$slots:{default:!0}})}),n(pe,Je)},$$slots:{default:!0}});var re=u(ye,2);ja(re,it(l,{children:(pe,Be)=>{var Je=T(),ge=g(Je);mt(ge,1,p,Oe=>Oe.id,(Oe,q)=>{var K=D(()=>e(q).attrs());Wt(Oe,{get rowAttrs(){return e(K)},children:Gt,$$slots:{default:(Ie,ae)=>{const ie=D(()=>ae.rowAttrs);la(Ie,it(()=>e(ie),{class:"border-b flex items-center w-full justify-between",children:(_e,Te)=>{var se=T(),Le=g(se);mt(Le,1,()=>e(q).cells,de=>de.id,(de,He)=>{var Qe=D(()=>e(He).attrs());Wt(de,{get attrs(){return e(Qe)},children:Gt,$$slots:{default:(z,Me)=>{const Z=D(()=>Me.attrs);Da(z,it(()=>e(Z),{class:"flex items-center justify-center whitespace-nowrap flex-1 py-2 w-1/4 text-center",children:(ke,Re)=>{var xe=T(),Ce=g(xe);{var ze=Ve=>{var j=sf(),De=c(j),Pe=c(De);Sr(Pe,{class:"w-4 h-4 text-gray-600"}),d(De);var Ae=u(De,2),J=c(Ae,!0);d(Ae),d(j),Ee(()=>Se(J,e(q).original.employee)),n(Ve,j)},Fe=Ve=>{var j=T(),De=g(j);{var Pe=J=>{var Ge=T(),v=g(Ge);{var y=P=>{var U=of();n(P,U)},F=P=>{var U=T(),te=g(U);{var je=Ue=>{var B=nf();n(Ue,B)},Ne=Ue=>{var B=lf(),ce=c(B,!0);d(B),Ee(()=>Se(ce,e(q).original[e(He).id])),n(Ue,B)};ee(te,Ue=>{e(q).original[e(He).id]==="false"?Ue(je):Ue(Ne,!1)},!0)}n(P,U)};ee(v,P=>{e(q).original[e(He).id]==="true"?P(y):P(F,!1)})}n(J,Ge)},Ae=J=>{var Ge=T(),v=g(Ge);{var y=P=>{St(P,{variant:"link",class:"text-red-500",$$events:{click:()=>W(e(q).original.videourl)},children:(U,te)=>{$e();var je=We();Ee(()=>Se(je,e(q).original.videoLink)),n(U,je)},$$slots:{default:!0}})},F=P=>{var U=T(),te=g(U);{var je=Ue=>{var B=df();const ce=D(()=>new Date(e(q).original.date)),oe=D(()=>e(ce).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit",hour:"numeric",minute:"numeric"}));var he=c(B,!0);d(B),Ee(()=>Se(he,e(oe))),n(Ue,B)},Ne=Ue=>{var B=D(()=>e(He).render());ha(Ue,{get of(){return e(B)}})};ee(te,Ue=>{e(He).id==="date"?Ue(je):Ue(Ne,!1)},!0)}n(P,U)};ee(v,P=>{e(He).id==="videoLink"?P(y):P(F,!1)},!0)}n(J,Ge)};ee(De,J=>{["uniform","masks","gloves","hairnet"].includes(e(He).id)?J(Pe):J(Ae,!1)},!0)}n(Ve,j)};ee(Ce,Ve=>{e(He).id==="employee"?Ve(ze):Ve(Fe,!1)})}n(ke,xe)},$$slots:{default:!0}}))}}})}),n(_e,se)},$$slots:{default:!0}}))}}})}),n(pe,Je)},$$slots:{default:!0}})),n(Y,me)},$$slots:{default:!0}})),d(Q);var ve=u(Q,2);tr(ve,{get open(){return e(N)},set open(Y){i(N,Y)},children:(Y,H)=>{ar(Y,{class:"sm:max-w-[720px]",children:(me,ye)=>{var re=ff(),pe=g(re);rr(pe,{children:(q,K)=>{sr(q,{children:(Ie,ae)=>{$e();var ie=We("Safety Event Image View");n(Ie,ie)},$$slots:{default:!0}})},$$slots:{default:!0}});var Be=u(pe,2),Je=c(Be);{var ge=q=>{var K=uf();Ee(()=>ya(K,"src",e(I))),n(q,K)},Oe=q=>{ma(q)};ee(Je,q=>{e(I)?q(ge):q(Oe,!1)})}d(Be),n(me,re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),n(s,le),jt()}var vf=S('<p class="w-1/5"></p>'),gf=S("<!> <!>",1),mf=S('<div class="flex items-center justify-center w-full h-full min-h-[250px]"><!></div>'),bf=S('<div class="flex items-center gap-2 text-left w-full justify-start ml-5"><div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-center"><!></div> <span> </span></div>'),_f=S('<img src="/images/tick.png" alt="tick" srcset="" class="w-5 h-5">'),xf=S('<img src="/images/cross.png" alt="cross" srcset="" class="w-5 h-5">'),$f=S("<p> </p>"),yf=S("<p> </p>"),wf=S("<!> <!>",1),kf=S('<div class="flex flex-row items-center justify-center space-x-4 py-4"><!> <div class="flex flex-row gap-2 items-center text-sm text-muted-foreground"><span class="p-2 rounded-md aspect-square bg-[#3D81FC] bg-opacity-10"> </span> of <span class="p-2 rounded-md aspect-square bg-[#3D81FC] bg-opacity-20"> </span> Page.</div> <!></div>'),Cf=S('<img alt="Safety Data Image" class="max-w-full w-auto h-[300px] object-contain border">'),Df=S('<!> <div class="flex items-center justify-center w-full h-full"><!></div>',1),Sf=S('<div class="m-0"><!> <!></div> <!>',1);function Af(s,t){Ft(t,!1);const a=ra(),r=()=>X(re(),"$dateRange",a),o=()=>X(pe(),"$selectedStore",a),l=()=>X(e(Y),"$pageIndex",a),p=()=>X(e(H),"$pageCount",a),f=()=>X(e(W),"$tableAttrs",a),m=()=>X(e(N),"$headerRows",a),x=()=>X(e(le),"$tableBodyAttrs",a),b=()=>X(e(I),"$pageRows",a),A=()=>X(e(ve),"$hasPreviousPage",a),C=()=>X(e(O),"$hasNextPage",a),$=_(),h=_(),k=_(),w=_(),R=_(),N=_(),I=_(),W=_(),le=_(),Q=_(),O=_(),ve=_(),Y=_(),H=_();let me=L(t,"safetyData",12),ye=L(t,"token",8),re=L(t,"dateRange",8),pe=L(t,"selectedStore",8),Be=L(t,"value",8),Je=_(!1),ge=_(null);async function Oe(z){i(Je,!0),i(ge,null);try{const Me=await fetch(`https://api.moksa.ai/stream?key=${z}`,{method:"GET",headers:{Authorization:`Bearer ${ye()}`,"Content-Type":"application/json"}});if(!Me.ok)throw new Error("Failed to get image");const Z=await Me.blob(),ke=URL.createObjectURL(Z);i(ge,ke),console.log("Image URL:",e(ge))}catch(Me){console.error("Error fetching image:",Me)}}Aa();let q=1,K=me().data.length,Ie=_(0);const ae=async()=>{q++,console.log(r(),o().value);const z=new Date;let Me=new Date(z);switch(r()){case"7 Days":Me.setDate(z.getDate()-7);break;case"15 Days":Me.setDate(z.getDate()-15);break;case"30 Days":Me.setDate(z.getDate()-30);break;case"12 Months":Me.setFullYear(z.getFullYear()-1);break;default:Me.setDate(z.getDate()-7)}const Z=Be()?.start?`${Be().start.year}-${String(Be().start.month).padStart(2,"0")}-${String(Be().start.day).padStart(2,"0")}`:"",ke=Be()?.end?`${Be().end.year}-${String(Be().end.month).padStart(2,"0")}-${String(Be().end.day).padStart(2,"0")}`:"",Re=Ce=>Ce.toISOString().split("T")[0];return(await fetch(`https://api.moksa.ai/store/storeEmployee/getSafetyDetailsOfAllEmployeesByStore/${o().value}/${q}/100/${r()==="custom"?Z:Re(Me)}/${r()==="custom"?ke:Re(z)}`,{method:"GET",headers:{Authorization:`Bearer ${ye()}`}})).json()};let ie=_(!1);async function _e(z){if(Oa(e(Y),z),i(Ie,z),l()===p()-1&&K<me().total){i(ie,!0);const Me=await ae();console.log("new data",Me),me(me().data=[...me().data,...Me?.data?.data],!0),K=me().data.length,e(h).set(e($)),i(ie,!1)}}M(()=>Mt(me()),()=>{console.log("safetyData",me())}),M(()=>(r(),o()),()=>{(r()||o())&&i(Ie,0)}),M(()=>(e(Je),e(ge)),()=>{e(Je)===!1&&e(ge)&&URL.revokeObjectURL(e(ge))}),M(()=>Mt(me()),()=>{i($,me().data&&me()?.data?.map(z=>({masks:z.wearing_mask,uniform:z.wearing_uniform,employee:`${z.first_name} ${z.last_name}`,gloves:z.wearing_gloves,hairnet:z.wearing_hair_net,breakingSOPs:"Coming Soon",videoLink:"Image",videourl:z.img_link,date:z.createdAt})))}),M(()=>e($),()=>{i(h,st(e($)))}),M(()=>(e($),e(h)),()=>{i(k,wa(e($),z=>e(h).subscribe(z)))}),M(()=>(e(k),e(Ie),ga),()=>{i(w,Ya(e(k),{page:nr({initialPageSize:3,initialPageIndex:e(Ie)}),sort:Ka(),filter:Za({fn:({filterValue:z,value:Me})=>Me.toLowerCase().includes(z.toLowerCase())}),select:ga()}))}),M(()=>e(w),()=>{i(R,e(w).createColumns([e(w).column({accessor:"employee",header:"Employee"}),e(w).column({accessor:"date",header:"Date"}),e(w).column({accessor:"gloves",header:"Gloves"}),e(w).column({accessor:"hairnet",header:"Hairnet"}),e(w).column({accessor:"masks",header:"Masks"}),e(w).column({accessor:"uniform",header:"Uniform"}),e(w).column({accessor:"videoLink",header:"Image"})]))}),M(()=>(e(N),e(I),e(W),e(le),e(Q),e(w),e(R)),()=>{(z=>(pt(i(N,z.headerRows),"$headerRows",a),pt(i(I,z.pageRows),"$pageRows",a),pt(i(W,z.tableAttrs),"$tableAttrs",a),pt(i(le,z.tableBodyAttrs),"$tableBodyAttrs",a),i(Q,z.pluginStates)))(e(w).createViewModel(e(R)))}),M(()=>(e(O),e(ve),e(Y),e(H),e(Q)),()=>{(z=>(pt(i(O,z.hasNextPage),"$hasNextPage",a),pt(i(ve,z.hasPreviousPage),"$hasPreviousPage",a),pt(i(Y,z.pageIndex),"$pageIndex",a),pt(i(H,z.pageCount),"$pageCount",a)))(e(Q).page)}),na(),Bt();var Te=Sf(),se=g(Te),Le=c(se);Ua(Le,it(f,{class:"w-full",children:(z,Me)=>{var Z=wf(),ke=g(Z);Ha(ke,{children:(ze,Fe)=>{var Ve=T(),j=g(Ve);mt(j,1,m,aa,(De,Pe)=>{var Ae=D(()=>e(Pe).attrs());Wt(De,{get rowAttrs(){return e(Ae)},children:(J,Ge)=>{la(J,{class:"bg-transparent flex flex-row border-b items-center justify-between",children:(v,y)=>{var F=T(),P=g(F);mt(P,1,()=>e(Pe).cells,U=>U.id,(U,te)=>{var je=D(()=>e(te).attrs()),Ne=D(()=>e(te).props());Wt(U,{get attrs(){return e(je)},get props(){return e(Ne)},children:Gt,$$slots:{default:(Ue,B)=>{const ce=D(()=>B.attrs),oe=D(()=>B.props);var he=T(),Ke=g(he);{var E=G=>{var we=vf();n(G,we)},ue=G=>{qa(G,it(()=>e(ce),{class:"text-[#727272] whitespace-nowrap text-sm h-full flex items-center text-center justify-center py-2 w-full",children:(we,fe)=>{St(we,{variant:"ghost",class:"hover:bg-transparent text-[#727272] opacity-60 text-xs",$$events:{click(...Ye){e(oe).sort.toggle?.apply(this,Ye)}},children:(Ye,et)=>{var Xe=gf(),bt=g(Xe),ut=D(()=>e(te).render());ha(bt,{get of(){return e(ut)}});var dt=u(bt,2);or(dt,{class:"ml-2 h-4 w-4"}),n(Ye,Xe)},$$slots:{default:!0}})},$$slots:{default:!0}}))};ee(Ke,G=>{e(te).id==="chevron"?G(E):G(ue,!1)})}n(Ue,he)}}})}),n(v,F)},$$slots:{default:!0}})},$$slots:{default:!0}})}),n(ze,Ve)},$$slots:{default:!0}});var Re=u(ke,2);{var xe=ze=>{var Fe=mf(),Ve=c(Fe);ma(Ve),d(Fe),n(ze,Fe)},Ce=ze=>{ja(ze,it(x,{children:(Fe,Ve)=>{var j=T(),De=g(j);mt(De,1,b,Pe=>Pe.id,(Pe,Ae)=>{var J=D(()=>e(Ae).attrs());Wt(Pe,{get rowAttrs(){return e(J)},children:Gt,$$slots:{default:(Ge,v)=>{const y=D(()=>v.rowAttrs);la(Ge,it(()=>e(y),{class:"border-b flex items-center w-full justify-between",children:(F,P)=>{var U=T(),te=g(U);mt(te,1,()=>e(Ae).cells,je=>je.id,(je,Ne)=>{var Ue=D(()=>e(Ne).attrs());Wt(je,{get attrs(){return e(Ue)},children:Gt,$$slots:{default:(B,ce)=>{const oe=D(()=>ce.attrs);Da(B,it(()=>e(oe),{class:"flex items-center justify-center whitespace-nowrap flex-1 py-2 text-center",children:(he,Ke)=>{var E=T(),ue=g(E);{var G=fe=>{var Ye=bf(),et=c(Ye),Xe=c(et);Sr(Xe,{class:"w-4 h-4 text-gray-600"}),d(et);var bt=u(et,2),ut=c(bt,!0);d(bt),d(Ye),Ee(()=>Se(ut,e(Ae).original.employee)),n(fe,Ye)},we=fe=>{var Ye=T(),et=g(Ye);{var Xe=ut=>{var dt=T(),yt=g(dt);{var Ct=xt=>{var ot=_f();n(xt,ot)},Ot=xt=>{var ot=T(),wt=g(ot);{var Dt=vt=>{var kt=xf();n(vt,kt)},Yt=vt=>{var kt=$f(),Kt=c(kt,!0);d(kt),Ee(()=>Se(Kt,e(Ae).original[e(Ne).id])),n(vt,kt)};ee(wt,vt=>{e(Ae).original[e(Ne).id]==="false"?vt(Dt):vt(Yt,!1)},!0)}n(xt,ot)};ee(yt,xt=>{e(Ae).original[e(Ne).id]==="true"?xt(Ct):xt(Ot,!1)})}n(ut,dt)},bt=ut=>{var dt=T(),yt=g(dt);{var Ct=xt=>{St(xt,{variant:"link",class:"text-red-500",$$events:{click:()=>Oe(e(Ae).original.videourl)},children:(ot,wt)=>{$e();var Dt=We();Ee(()=>Se(Dt,e(Ae).original.videoLink)),n(ot,Dt)},$$slots:{default:!0}})},Ot=xt=>{var ot=T(),wt=g(ot);{var Dt=vt=>{var kt=yf();const Kt=D(()=>new Date(e(Ae).original.date)),Xt=D(()=>e(Kt).toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit",hour:"numeric",minute:"numeric"}));var Qt=c(kt,!0);d(kt),Ee(()=>Se(Qt,e(Xt))),n(vt,kt)},Yt=vt=>{var kt=D(()=>e(Ne).render());ha(vt,{get of(){return e(kt)}})};ee(wt,vt=>{e(Ne).id==="date"?vt(Dt):vt(Yt,!1)},!0)}n(xt,ot)};ee(yt,xt=>{e(Ne).id==="videoLink"?xt(Ct):xt(Ot,!1)},!0)}n(ut,dt)};ee(et,ut=>{["masks","uniform","gloves","hairnet"].includes(e(Ne).id)?ut(Xe):ut(bt,!1)},!0)}n(fe,Ye)};ee(ue,fe=>{e(Ne).id==="employee"?fe(G):fe(we,!1)})}n(he,E)},$$slots:{default:!0}}))}}})}),n(F,U)},$$slots:{default:!0}}))}}})}),n(Fe,j)},$$slots:{default:!0}}))};ee(Re,ze=>{e(ie)?ze(xe):ze(Ce,!1)})}n(z,Z)},$$slots:{default:!0}}));var de=u(Le,2);{var He=z=>{var Me=kf(),Z=c(Me),ke=D(()=>!A());St(Z,{size:"sm",variant:"outline",class:"bg-transparent hover:bg-[#3D81FC] hover:text-white text-[#727272] gap-2",get disabled(){return e(ke)},$$events:{click:()=>_e(l()-1)},children:(De,Pe)=>{$e();var Ae=We("Previous");n(De,Ae)},$$slots:{default:!0}});var Re=u(Z,2),xe=c(Re),Ce=c(xe,!0);d(xe);var ze=u(xe,2),Fe=c(ze,!0);d(ze),$e(),d(Re);var Ve=u(Re,2),j=D(()=>!C());St(Ve,{size:"sm",variant:"outline",get disabled(){return e(j)},class:"bg-transparent hover:bg-[#3D81FC] hover:text-white text-[#727272] gap-2",$$events:{click:()=>_e(l()+1)},children:(De,Pe)=>{$e();var Ae=We("Next");n(De,Ae)},$$slots:{default:!0}}),d(Me),Ee(()=>{Se(Ce,l()+1<10?"0"+(l()+1):l()+1),Se(Fe,p()<10?"0"+p():p())}),n(z,Me)};ee(de,z=>{p()>1&&z(He)})}d(se);var Qe=u(se,2);tr(Qe,{get open(){return e(Je)},set open(z){i(Je,z)},children:(z,Me)=>{ar(z,{class:"sm:max-w-[720px]",children:(Z,ke)=>{var Re=Df(),xe=g(Re);rr(xe,{children:(j,De)=>{sr(j,{children:(Pe,Ae)=>{$e();var J=We("Safety Event Image View");n(Pe,J)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ce=u(xe,2),ze=c(Ce);{var Fe=j=>{var De=Cf();Ee(()=>ya(De,"src",e(ge))),n(j,De)},Ve=j=>{ma(j)};ee(ze,j=>{e(ge)?j(Fe):j(Ve,!1)})}d(Ce),n(Z,Re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),n(s,Te),jt()}var Pf=S("<!> <!>",1),Ef=S('<div class="p-2"><!></div> <!>',1),Rf=S("<!> <!>",1),Tf=S("<!> Export Reports",1),Bf=S('<p class="text-center text-gray-500 min-h-[350px] py-4">No Live Data found</p>'),Ff=S('<p class="text-center text-gray-500">No data found for the selected store</p>'),jf=S('<section class="w-full p-4 flex flex-col max-h-[calc(100vh-75px)] overflow-y-auto hide-scrollbar"><div class="flex items-center justify-between"><span class="flex items-center border-black h-[40px] border-opacity-[18%] border-[1px] rounded-md dark:border-white"><button>7 Days</button> <button>15 Days</button> <button>30 Days</button> <button>12 Months</button> <!></span> <span class="flex items-center gap-3"><!> <!></span></div> <div class="grid grid-cols-8 grid-rows-4 gap-4 mt-4"><div class="col-span-8 row-span-4 border rounded-md flex flex-col rounded-t-xl dark:border-white/[.7]"><span class="rounded-t-xl w-full h-[50px] bg-[#050F40] flex items-center justify-between px-4 flex-shrink-0"><p class="text-white text-lg font-semibold flex items-center gap-2"> <span class="text-xs text-white bg-pink-500 rounded-md p-1">Live</span></p></span> <div class="h-full w-full min-h-[350px] max-h-[350px] overflow-y-scroll overflow-x-clip"><!></div></div> <div class="col-span-8 row-span-4 border rounded-md flex flex-col min-h-[200px] dark:border-white/[.7]"><span class="rounded-t-xl w-full h-[50px] bg-transparent flex items-center justify-between px-4 flex-shrink-0"><p class=" text-lg font-semibold flex items-center gap-2">Safety Procedures</p></span> <div class="h-full w-full"><!></div></div></div></section>');function Lf(s,t){Ft(t,!1);const a=ra(),r=()=>X($,"$dateRange",a),o=()=>X(C,"$selectedStore",a),l=()=>X(b,"$safetyData",a),p=()=>X(O,"$liveData",a),f=_();let m=L(t,"allStores",8),x=L(t,"token",8),b=st([]);const A=m()?.filter(j=>j.hasKitchen).map(j=>({value:j.id,label:j.name}));let C=st(A[0]),$=st("7 Days"),h=_(void 0),k=_(void 0),w=_("Custom"),R=_(!1),N=L(t,"user",8),I=0;async function W(j){const De=new Date;let Pe=new Date(De);switch(i(w,"Custom"),i(h,void 0),r()){case"7 Days":Pe.setDate(De.getDate()-7);break;case"15 Days":Pe.setDate(De.getDate()-15);break;case"30 Days":Pe.setDate(De.getDate()-30);break;case"12 Months":Pe.setFullYear(De.getFullYear()-1);break;default:Pe.setDate(De.getDate()-7)}const Ae=J=>J.toISOString().split("T")[0];console.log(Ae(Pe)),console.log(Ae(De));try{const[J,Ge]=await Promise.all([fetch(`https://api.moksa.ai/store/storeEmployee/getSafetyDetailsOfAllEmployeesByStore/${o().value}/1/100/${Ae(Pe)}/${Ae(De)}`,{method:"GET",headers:{Authorization:`Bearer ${x()}`,"Content-Type":"application/json"}}),fetch(`https://api.moksa.ai/store/storeEmployee/getSafetyDetailsOfAllEmployeesByStore/${o().value}/1/100/${Ae(Pe)}/${Ae(De)}`,{method:"GET",headers:{Authorization:`Bearer ${x()}`,"Content-Type":"application/json",live:"true"}})]),v=await J.json(),y=await Ge.json();console.log(`recieved safety data for ${o().value}, ${r()}`,v),console.log(`recieved live safety records for ${o().value}, ${r()}`,y),b.set(v?.data?.data===void 0?[]:v?.data),I=v?.data.total,O.set(y?.data?.data===void 0?[]:y?.data?.data)}catch(J){console.log(J)}}async function le(j){const De=e(h)?.start?`${e(h).start.year}-${String(e(h).start.month).padStart(2,"0")}-${String(e(h).start.day).padStart(2,"0")}`:"",Pe=e(h)?.end?`${e(h).end.year}-${String(e(h).end.month).padStart(2,"0")}-${String(e(h).end.day).padStart(2,"0")}`:"";console.log(De),console.log(Pe);try{const J=await(await fetch(`https://api.moksa.ai/store/storeEmployee/getSafetyDetailsOfAllEmployeesByStore/${o().value}/1/100/${De}/${Pe}`,{method:"GET",headers:{Authorization:`Bearer ${x()}`,"Content-Type":"application/json"}})).json();console.log(`recieved safety data for ${o().value}, ${r()}`,J),b.set(J?.data?.data===void 0?[]:J?.data)}catch(Ae){console.log(Ae)}}let Q={},O=st([]);function ve(j){Y(),H(j)}function Y(){Object.values(Q).forEach(j=>{console.log("disconnecting socket"),j.disconnect()}),Q={}}function H(j){const De=N()?.moksaId;Q[j]&&Q[j].disconnect(),Q[j]=fr("https://api.moksa.ai",{withCredentials:!0,extraHeaders:{Authorization:`Bearer ${x()}`},transports:["websocket","polling"]});const Pe=Q[j];Pe.on("error",Ae=>{console.log(`error for store ${j}:`,Ae)}),Pe.on("connect",()=>{console.log(`connected for safety socket ${j}`),Pe.emit("joinUser",De),Pe.emit("joinStore",j)}),Pe.on(`employee_safety_store_${j}`,Ae=>{console.log(`Received employee_safety for store ${j}:`,Ae),O.update(J=>[{storeId:j,...Ae},...J].slice(0,100))}),Pe.on("disconnect",()=>{console.log(`disconnected for store ${j}`)})}function me(j){const De=String(j);return De.includes(",")||De.includes('"')?`"${De.replace(/"/g,'""')}"`:De}function ye(j,De,Pe=[]){console.log(j,"arr");const Ae=Object.keys(j?.data).filter(P=>!Pe.length||!Pe.includes(P)).join(","),J=j?.data?.map(P=>Object.keys(P).filter(U=>!Pe.length||!Pe.includes(U)).map(U=>me(P[U])).join(",")).join(`
`),Ge=Ae+`
`+J,v=new Blob([Ge],{type:"text/csv"}),y=URL.createObjectURL(v),F=document.createElement("a");F.href=y,F.download=De,document.body.appendChild(F),F.click(),document.body.removeChild(F)}let re=_("");const pe=Aa();function Be(j){O.set([]),C.set(j),pe("select",j)}M(()=>e(h),()=>{if(e(h)?.start&&e(h)?.end){const j=new Date(e(h).start.year,e(h).start.month-1,e(h).start.day),De=new Date(e(h).end.year,e(h).end.month-1,e(h).end.day);i(w,`${j.toLocaleDateString()} - ${De.toLocaleDateString()}`);const Pe=Math.ceil((De.getTime()-j.getTime())/(1e3*60*60*24));console.log(Pe),$.set("custom"),setTimeout(()=>{i(R,!1)},200)}else i(w,"Custom")}),M(()=>(o(),r()),()=>{(o()||r())&&(r().toLowerCase()==="custom"?le(r()):W(r()))}),M(()=>o(),()=>{o()&&ve(o().value)}),M(()=>e(re),()=>{i(f,A.filter(j=>j.label.toLowerCase().includes(e(re).toLowerCase())))}),na(),Bt();var Je=jf(),ge=c(Je),Oe=c(ge),q=c(Oe),K=u(q,2),Ie=u(K,2),ae=u(Ie,2),ie=u(ae,2);wr(ie,{openFocus:!0,get open(){return e(R)},set open(j){i(R,j)},children:(j,De)=>{var Pe=Pf(),Ae=g(Pe);kr(Ae,{asChild:!0,children:Gt,$$slots:{default:(Ge,v)=>{const y=D(()=>v.builder);var F=D(()=>[e(y)]),P=D(()=>`2xl:py-2 2xl:px-3 py-1 px-2  text-sm hover:bg-[#0BA5E9] hover:text-white ${r()==="custom"?"bg-[#0BA5E9] rounded-r-md text-white":"text-black dark:text-white bg-transparent dark:border-white"}`);St(Ge,{get builders(){return e(F)},get class(){return e(P)},$$events:{click:()=>i(h,void 0)},children:(U,te)=>{$e();var je=We();Ee(()=>Se(je,e(w))),n(U,je)},$$slots:{default:!0}})}}});var J=u(Ae,2);Cr(J,{class:"w-auto p-0 ",align:"start",children:(Ge,v)=>{var y=D(()=>e(h)?.start);Dr(Ge,{initialFocus:!0,numberOfMonths:2,get placeholder(){return e(y)},get value(){return e(h)},set value(F){i(h,F)},get startValue(){return e(k)},set startValue(F){i(k,F)},$$legacy:!0})},$$slots:{default:!0}}),n(j,Pe)},$$slots:{default:!0},$$legacy:!0}),d(Oe);var _e=u(Oe,2),Te=c(_e);pr(Te,{portal:null,children:(j,De)=>{var Pe=Rf(),Ae=g(Pe);hr(Ae,{class:"w-[150px] bg-[#F4F4F4] border text-xs px-1 border-[#E0E0E0] rounded-lg dark:bg-transparent",children:(Ge,v)=>{var y=D(()=>A.length>0?o()?.label:"No Stores");vr(Ge,{get placeholder(){return e(y)}})},$$slots:{default:!0}});var J=u(Ae,2);gr(J,{class:"max-h-[200px] overflow-y-auto",children:(Ge,v)=>{var y=Ef(),F=g(y),P=c(F);ia(P,{type:"text",placeholder:"Search stores...",class:"mb-2",get value(){return e(re)},set value(te){i(re,te)},$$legacy:!0}),d(F);var U=u(F,2);mr(U,{children:(te,je)=>{var Ne=T(),Ue=g(Ne);{var B=oe=>{var he=T(),Ke=g(he);mt(Ke,1,()=>e(f),aa,(E,ue)=>{Ca(E,{class:"px-1",get value(){return e(ue).value},get label(){return e(ue).label},$$events:{click:()=>Be(e(ue))},children:(G,we)=>{$e();var fe=We();Ee(()=>Se(fe,e(ue).label)),n(G,fe)},$$slots:{default:!0}})}),n(oe,he)},ce=oe=>{Ca(oe,{disabled:!0,children:(he,Ke)=>{$e();var E=We("N/A");n(he,E)},$$slots:{default:!0}})};ee(Ue,oe=>{e(f).length>0?oe(B):oe(ce,!1)})}n(te,Ne)},$$slots:{default:!0}}),n(Ge,y)},$$slots:{default:!0}}),n(j,Pe)},$$slots:{default:!0}});var se=u(Te,2);St(se,{class:"flex items-center gap-1 bg-[#3D81FC] text-white hover:bg-white hover:text-[#3D81FC]",$$events:{click:()=>{const j=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});ye(l(),`safety_${j}.csv`,["floormap","logo","updatedAt"])}},children:(j,De)=>{var Pe=Tf(),Ae=g(Pe);Ur(Ae,{size:18}),$e(),n(j,Pe)},$$slots:{default:!0}}),d(_e),d(ge);var Le=u(ge,2),de=c(Le),He=c(de),Qe=c(He),z=c(Qe);$e(),d(Qe),d(He);var Me=u(He,2),Z=c(Me);{var ke=j=>{hf(j,{get data(){return p()},get token(){return x()}})},Re=j=>{var De=Bf();n(j,De)};ee(Z,j=>{p().length>0?j(ke):j(Re,!1)})}d(Me),d(de);var xe=u(de,2),Ce=u(c(xe),2),ze=c(Ce);{var Fe=j=>{Af(j,{get token(){return x()},get safetyData(){return l()},dateRange:$,selectedStore:C,get value(){return e(h)}})},Ve=j=>{var De=Ff();n(j,De)};ee(ze,j=>{l().data&&l().data.length>0?j(Fe):j(Ve,!1)})}d(Ce),d(xe),d(Le),d(Je),Ee(()=>{It(q,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${r()==="7 Days"?"bg-[#0BA5E9] rounded-l-md text-white":"text-black dark:text-white dark:border-white"}`),It(K,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${r()==="15 Days"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(Ie,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${r()==="30 Days"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),It(ae,`2xl:py-2 2xl:px-3 h-full py-1 px-2 border-r border-black border-opacity-[18%]  text-sm ${r()==="12 Months"?"bg-[#0BA5E9] text-white":"text-black dark:text-white dark:border-white"}`),Se(z,`Safety Procedures for ${o().label??""} `)}),gt("click",q,()=>$.set("7 Days")),gt("click",K,()=>$.set("15 Days")),gt("click",Ie,()=>$.set("30 Days")),gt("click",ae,()=>$.set("12 Months")),n(s,Je),jt()}var Nf=S("<div>loading ...</div>"),Mf=S('<main class="flex flex-row-reverse h-[100vh] w-[100vw]"><div class=" flex flex-col gap-5 items-center justify-center px-2 bg-gradient-to-b from-[#000610] via-[#050E41] to-[#000307] h-[calc(100vh-75px)]"><span class="group flex-col flex items-center justify-center gap-0.5"><button><!></button> <p>Dashboard</p></span> <span class="group flex-col flex items-center justify-center gap-0.5"><button><!></button> <p>Stores</p></span> <span class="group flex-col flex items-center justify-center gap-0.5"><button><svg width="22" height="22" viewBox="0 0 22 22" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M17.2503 9.71873L17.5622 10.441C17.604 10.5392 17.6935 10.6045 17.8085 10.627C17.9244 10.648 18.0352 10.6195 18.1188 10.546L18.9301 9.83196C19.0128 9.75921 19.046 9.66096 19.0222 9.55896C18.9983 9.45696 18.9216 9.38046 18.8108 9.34221L18.0583 9.09096L17.2503 9.71873ZM16.1159 12.712C16.5242 12.904 16.808 13.2805 16.8122 13.7163L16.8753 17.9769C16.8838 18.6122 16.306 19.1327 15.5858 19.1402C14.8639 19.1477 14.2724 18.6392 14.2639 18.0054L14.2111 14.4302L11.3747 13.1109L10.9997 12.9362C10.9827 13.0224 10.9648 13.1087 10.9477 13.1934L10.4023 15.9047H10.398C10.3349 16.2257 10.1167 16.5212 9.77157 16.6974L5.34139 18.9826C4.71922 19.3036 3.91896 19.1206 3.55418 18.5716C3.1894 18.0241 3.39736 17.3199 4.02122 16.9989L7.92711 14.9852L8.57485 11.7692C8.54843 11.6792 8.52882 11.5869 8.51774 11.4924C8.40439 10.5804 8.37371 9.78916 8.45042 9.07149C8.95241 7.96973 9.57883 6.83872 11.2451 6.57779C12.0326 6.50129 12.8158 6.68879 13.5053 7.01204C13.5121 7.01579 13.5206 7.01954 13.5274 7.02179C13.8223 7.15979 14.0967 7.32328 14.3481 7.49954C14.3916 7.53029 14.4351 7.56104 14.4768 7.59329L14.9413 8.69953L15.3257 8.40028L15.4322 8.31778L15.572 8.21053L15.8183 8.01853L16.5598 7.44253C16.5862 7.42303 16.6118 7.40428 16.6407 7.38703C16.7328 7.32929 16.8351 7.29103 16.9399 7.27003C17.0575 7.24528 17.1802 7.24303 17.2978 7.26253C17.4811 7.29328 17.6558 7.37578 17.7887 7.50852C18.1075 7.82502 18.0743 8.30953 17.7146 8.58927L16.4277 9.58752L15.1859 10.5513C15.099 10.63 14.9899 10.693 14.8629 10.7335C14.4112 10.8798 13.9092 10.6758 13.7439 10.2768L13.0459 8.61176C13.0152 8.66201 12.9871 8.71376 12.9632 8.76551C12.7297 9.274 12.7169 10.006 12.8515 11.0829C12.8558 11.1212 12.8601 11.1579 12.8626 11.1939L16.1159 12.712ZM11.2068 10.4289C11.1804 10.4177 11.1565 10.4057 11.1301 10.3959L11.2068 10.4289ZM9.14688 6.89038C9.62671 6.46813 10.2574 6.14563 11.1386 6.00913L11.1582 6.00688C12.0966 5.91314 13.0153 6.12764 13.814 6.50188C14.1932 6.68038 14.5495 6.89339 14.8657 7.12813C15.06 7.27213 15.2389 7.42212 15.4043 7.57512L16.1304 7.01037C16.1978 6.95637 16.2719 6.91062 16.3461 6.87012C16.0563 6.39611 15.7461 5.96037 15.4162 5.56437C14.8904 4.93286 14.3168 4.39737 13.7142 3.95188C12.1742 2.81712 10.4304 2.26212 8.73097 2.13763C7.52416 2.04913 6.33948 2.17588 5.26646 2.46612C4.19514 2.75412 3.2372 3.20336 2.47788 3.75988C1.12192 4.75737 0.412832 6.09767 0.879872 7.45895C1.12873 8.18494 2.04066 9.20795 3.147 9.9609C3.74019 10.3659 4.38621 10.6884 5.0041 10.8347C5.58193 10.9727 6.13677 10.9554 6.59445 10.7004C6.92172 10.5182 7.21149 10.2069 7.44075 9.73816C7.53876 9.53865 7.62655 9.34066 7.71603 9.13891C8.06717 8.3514 8.44205 7.51063 9.14688 6.89038ZM14.1284 3.50561C14.1114 3.39611 14.1003 3.28512 14.1003 3.17185C14.1003 1.91635 15.2568 0.900879 16.6809 0.900879C18.1077 0.900879 19.2616 1.91863 19.2616 3.17185C19.2616 4.42736 18.1051 5.44283 16.6809 5.44283C16.4696 5.44283 16.2667 5.41958 16.0699 5.37983C15.4767 4.63808 14.8221 4.01635 14.1284 3.50561Z" fill="currentColor"></path></svg></button> <p>Theft</p></span> <span class="group flex-col flex items-center justify-center gap-0.5"><button><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M11.2398 10.7935C13.6183 10.7935 15.5464 8.86535 15.5464 6.48684C15.5464 4.10834 13.6183 2.18018 11.2398 2.18018C8.86127 2.18018 6.93311 4.10834 6.93311 6.48684C6.93311 8.86535 8.86127 10.7935 11.2398 10.7935Z" fill="currentColor"></path><path d="M14 18.6665H18.6667V19.5998H14V18.6665Z" fill="currentColor"></path><path d="M10.0001 20.0002V22.0002C10.0001 22.177 10.0703 22.3465 10.1954 22.4716C10.3204 22.5966 10.49 22.6668 10.6668 22.6668H22.0001C22.1769 22.6668 22.3465 22.5966 22.4715 22.4716C22.5965 22.3465 22.6668 22.177 22.6668 22.0002V15.3335C22.6668 15.1567 22.5965 14.9871 22.4715 14.8621C22.3465 14.7371 22.1769 14.6668 22.0001 14.6668H17.3334V13.6868C17.3334 13.51 17.2632 13.3404 17.1382 13.2154C17.0131 13.0904 16.8436 13.0202 16.6668 13.0202C16.49 13.0202 16.3204 13.0904 16.1954 13.2154C16.0703 13.3404 16.0001 13.51 16.0001 13.6868V14.6668H14.6668V12.2802C13.5339 12.0948 12.388 12.0011 11.2401 12.0002C8.70864 11.9894 6.20553 12.5332 3.90677 13.5935C3.52843 13.772 3.20924 14.0554 2.98709 14.4099C2.76493 14.7644 2.64914 15.1752 2.65344 15.5935V20.0002H10.0001ZM21.3334 21.3335H11.3334V16.0002H16.0001V16.2802C16.0001 16.457 16.0703 16.6265 16.1954 16.7516C16.3204 16.8766 16.49 16.9468 16.6668 16.9468C16.8436 16.9468 17.0131 16.8766 17.1382 16.7516C17.2632 16.6265 17.3334 16.457 17.3334 16.2802V16.0002H21.3334V21.3335Z" fill="currentColor"></path></svg></button> <p>Employee <br> Efficiency</p></span> <span class="group flex-col flex items-center justify-center gap-0.5"><button><!></button> <p>People <br> Counter</p></span> <span class="group flex-col flex items-center justify-center gap-0.5"><button><!></button> <p>Heat Map</p></span> <span class="group flex-col flex items-center justify-center gap-0.5"><button><!></button> <p>Kitchen Safety</p></span></div> <!></main>');function Of(s,t){Ft(t,!1);const a=ra(),r=()=>X(W,"$allStores",a),o=()=>X(Wn,"$analyticsData",a),l=()=>X(pe,"$allStoresLackKitchen",a),p=()=>X(le,"$allStoresData",a),f=()=>X(Y,"$aisleData",a),m=()=>X(Q,"$theftandcamera",a),x=()=>X(H,"$busyness",a),b=()=>X(me,"$efficiency",a),A=()=>X(ye,"$safetyDetails",a),C=()=>X(O,"$theftData",a),$=()=>X(re,"$storePeopleCount",a),h=()=>X(cn,"$nodes",a);let k=_(1),w=L(t,"moksa",24,()=>({})),R={moksaToken:w()?.token},N=w(),I=w()?.user?.moksaId,W=st([]),le=st([]),Q=st([]),O=st([]),ve=st([]),Y=st([]),H=st([]),me=st([]),ye=st([]),re=st([]),pe=st(!1);M(()=>r(),()=>{pe.set(r().length>0?r().every(q=>!q?.hasKitchen):!0)}),M(()=>o(),()=>{o()&&(W.set(o()?.stores?.data?.data),le.set(o()?.allstoreData?.data),Q.set(o()?.theftandcamera?.data?.data),O.set(o()?.theftData),ve.set(o()?.usersData),Y.set(o()?.aisleData?.data?.data),H.set(o()?.busyness?.data),me.set(o()?.efficiency?.data),ye.set(o()?.safetyDetails?.data),re.set(o()?.storePeopleCount?.data?.data))}),na(),Bt();var Be=T(),Je=g(Be);{var ge=q=>{var K=Nf();n(q,K)},Oe=q=>{var K=Mf(),Ie=c(K),ae=c(Ie),ie=c(ae),_e=c(ie);Qn(_e,{class:"h-[22px] w-[22px]"}),d(ie);var Te=u(ie,2);d(ae);var se=u(ae,2),Le=c(se),de=c(Le);Ga(de,{class:"h-[22px] w-[22px]"}),d(Le);var He=u(Le,2);d(se);var Qe=u(se,2),z=c(Qe),Me=u(z,2);d(Qe);var Z=u(Qe,2),ke=c(Z),Re=u(ke,2);d(Z);var xe=u(Z,2),Ce=c(xe),ze=c(Ce);Co(ze,{class:"h-[22px] w-[22px]"}),d(Ce);var Fe=u(Ce,2);d(xe);var Ve=u(xe,2),j=c(Ve),De=c(j);Kn(De,{class:"h-[22px] w-[22px]"}),d(j);var Pe=u(j,2);d(Ve);var Ae=u(Ve,2),J=c(Ae),Ge=c(J);tl(Ge,{class:"h-[22px] w-[22px]"}),d(J);var v=u(J,2);d(Ae),d(Ie);var y=u(Ie,2);{var F=U=>{var te=D(()=>R?.moksaToken);rc(U,{moksaUserId:I,get allStores(){return r()},get allStoresData(){return p()},get aisleData(){return f()},get theftandcamera(){return m()},get busyness(){return x()},get efficiency(){return b()},get safetyDetails(){return A()},get theftData(){return C()},get storePeopleCount(){return $()},get token(){return e(te)},user:N})},P=U=>{var te=T(),je=g(te);{var Ne=B=>{var ce=D(()=>R?.moksaToken);Gi(B,{get allStores(){return r()},get theftandcamera(){return m()},get nodes(){return h()},moksaUserId:I,user:N,get token(){return e(ce)}})},Ue=B=>{var ce=T(),oe=g(ce);{var he=E=>{var ue=D(()=>R?.moksaToken);bu(E,{get theftandcamera(){return m()},get allStores(){return r()},get allStoresData(){return p()},get theftData(){return C()},get token(){return e(ue)},moksaUserId:I,user:N})},Ke=E=>{var ue=T(),G=g(ue);{var we=Ye=>{var et=D(()=>R?.moksaToken);e1(Ye,{get allStores(){return r()},get token(){return e(et)},moksaUserId:I,user:N})},fe=Ye=>{var et=T(),Xe=g(et);{var bt=dt=>{var yt=D(()=>R?.moksaToken);B1(dt,{get allStores(){return r()},get token(){return e(yt)},curruser:N})},ut=dt=>{var yt=T(),Ct=g(yt);{var Ot=ot=>{var wt=D(()=>R?.moksaToken);af(ot,{get allStores(){return r()},get token(){return e(wt)}})},xt=ot=>{var wt=T(),Dt=g(wt);{var Yt=vt=>{var kt=D(()=>R?.moksaToken);Lf(vt,{get allStores(){return r()},get token(){return e(kt)},user:N})};ee(Dt,vt=>{e(k)===7&&vt(Yt)},!0)}n(ot,wt)};ee(Ct,ot=>{e(k)===6?ot(Ot):ot(xt,!1)},!0)}n(dt,yt)};ee(Xe,dt=>{e(k)===5?dt(bt):dt(ut,!1)},!0)}n(Ye,et)};ee(G,Ye=>{e(k)===4?Ye(we):Ye(fe,!1)},!0)}n(E,ue)};ee(oe,E=>{e(k)===3?E(he):E(Ke,!1)},!0)}n(B,ce)};ee(je,B=>{e(k)===2?B(Ne):B(Ue,!1)},!0)}n(U,te)};ee(y,U=>{e(k)===1?U(F):U(P,!1)})}d(K),Ee(()=>{It(ie,xr(e(k)!==1?" disabled:cursor-not-allowed text-white h-[40px] w-[40px] rounded-full shadow-md  border-2 border-solid  dark:border-white bg-transparent group-hover:text-black group-hover:bg-gradient-to-r group-hover:from-[#EBE60B] group-hover:to-[#07E1A4] group-hover:border-none grid place-items-center ":"disabled:cursor-not-allowed relative border-none rounded-full shadow-md h-[40px] w-[40px] text-black bg-gradient-to-r from-[#EBE60B] to-[#07E1A4] grid place-items-center "),""),It(Te,`pointer-events-none text-center text-xs ${e(k)!==1?"group-hover:text-[#07E1A4] text-white dark:group-hover:text-[#07E1A4]":" text-[#07E1A4]"}`),It(Le,xr(e(k)!==2?" disabled:cursor-not-allowed text-white h-[40px] w-[40px] rounded-full shadow-md  border-2 border-solid  dark:border-white bg-transparent group-hover:text-black group-hover:bg-gradient-to-r group-hover:from-[#EBE60B] group-hover:to-[#07E1A4] group-hover:border-none grid place-items-center ":"disabled:cursor-not-allowed relative border-none rounded-full shadow-md h-[40px] w-[40px] text-black bg-gradient-to-r from-[#EBE60B] to-[#07E1A4] grid place-items-center "),""),It(He,`text-center pointer-events-none text-xs ${e(k)!==2?"group-hover:text-[#07E1A4] text-white dark:group-hover:text-[#07E1A4]":" text-[#07E1A4]"}`),It(z,xr(e(k)!==3?" disabled:cursor-not-allowed text-white h-[40px] w-[40px] rounded-full shadow-md  border-2 border-solid  dark:border-white bg-transparent group-hover:text-black group-hover:bg-gradient-to-r group-hover:from-[#EBE60B] group-hover:to-[#07E1A4] group-hover:border-none grid place-items-center ":"disabled:cursor-not-allowed relative border-none rounded-full shadow-md h-[40px] w-[40px] text-black bg-gradient-to-r from-[#EBE60B] to-[#07E1A4] grid place-items-center "),""),It(Me,`text-center pointer-events-none text-xs ${e(k)!==3?"group-hover:text-[#07E1A4] text-white dark:group-hover:text-[#07E1A4]":" text-[#07E1A4]"}`),It(ke,xr(e(k)!==4?" disabled:cursor-not-allowed text-white h-[40px] w-[40px] rounded-full shadow-md  border-2 border-solid  dark:border-white bg-transparent group-hover:text-black group-hover:bg-gradient-to-r group-hover:from-[#EBE60B] group-hover:to-[#07E1A4] group-hover:border-none grid place-items-center ":"disabled:cursor-not-allowed relative border-none rounded-full shadow-md h-[40px] w-[40px] text-black bg-gradient-to-r from-[#EBE60B] to-[#07E1A4] grid place-items-center "),""),It(Re,`text-center pointer-events-none text-xs ${e(k)!==4?"group-hover:text-[#07E1A4] text-white dark:group-hover:text-[#07E1A4]":" text-[#07E1A4]"}`),It(Ce,xr(e(k)!==5?" disabled:cursor-not-allowed text-white h-[40px] w-[40px] rounded-full shadow-md  border-2 border-solid  dark:border-white bg-transparent group-hover:text-black group-hover:bg-gradient-to-r group-hover:from-[#EBE60B] group-hover:to-[#07E1A4] group-hover:border-none grid place-items-center ":"disabled:cursor-not-allowed relative border-none rounded-full shadow-md h-[40px] w-[40px] text-black bg-gradient-to-r from-[#EBE60B] to-[#07E1A4] grid place-items-center "),""),It(Fe,`text-center pointer-events-none text-xs ${e(k)!==5?"group-hover:text-[#07E1A4] text-white dark:group-hover:text-[#07E1A4]":" text-[#07E1A4]"}`),It(j,xr(e(k)!==6?" disabled:cursor-not-allowed text-white h-[40px] w-[40px] rounded-full shadow-md  border-2 border-solid  dark:border-white bg-transparent group-hover:text-black group-hover:bg-gradient-to-r group-hover:from-[#EBE60B] group-hover:to-[#07E1A4] group-hover:border-none grid place-items-center ":"disabled:cursor-not-allowed relative border-none rounded-full shadow-md h-[40px] w-[40px] text-black bg-gradient-to-r from-[#EBE60B] to-[#07E1A4] grid place-items-center "),""),It(Pe,`text-center pointer-events-none text-xs ${e(k)!==6?"group-hover:text-[#07E1A4] text-white dark:group-hover:text-[#07E1A4]":" text-[#07E1A4]"}`),J.disabled=l(),It(J,xr(e(k)!==7?" disabled:cursor-not-allowed text-white h-[40px] w-[40px] rounded-full shadow-md  border-2 border-solid  dark:border-white bg-transparent group-hover:text-black group-hover:bg-gradient-to-r group-hover:from-[#EBE60B] group-hover:to-[#07E1A4] group-hover:border-none grid place-items-center ":"disabled:cursor-not-allowed relative border-none rounded-full shadow-md h-[40px] w-[40px] text-black bg-gradient-to-r from-[#EBE60B] to-[#07E1A4] grid place-items-center "),""),It(v,`text-center pointer-events-none text-xs ${e(k)!==7?"group-hover:text-[#07E1A4] text-white dark:group-hover:text-[#07E1A4]":" text-[#07E1A4]"}`)}),gt("click",ie,()=>i(k,1)),gt("click",Le,()=>i(k,2)),gt("click",z,()=>i(k,3)),gt("click",ke,()=>i(k,4)),gt("click",Ce,()=>i(k,5)),gt("click",j,()=>i(k,6)),gt("click",J,()=>i(k,7)),n(q,K)};ee(Je,q=>{r()?q(Oe,!1):q(ge)})}n(s,Be),jt()}var If=S('<div class="hidden lg:block"><!></div>');function zp(s,t){let a=L(t,"moksa",24,()=>({}));var r=If(),o=c(r);Of(o,{get moksa(){return a()}}),d(r),n(s,r)}export{zp as default};
