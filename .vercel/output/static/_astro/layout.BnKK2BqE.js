import{i as Me}from"./legacy.CS2Xrhg9.js";import{f as s,p as Ve,l as Be,a as Ye,s as a,w as i,b as Re,e as o,g as t,t as ne,r as l,j as Pe,c as A,d as xt,m as Q,aM as Bt}from"./effects.BhUQh3a6.js";import{c as Z,a as e,t as r,b as C,e as Ne}from"./template.gBe-IW8Y.js";import{i as xe,s as wt,h as Gt,r as st,b as lt,c as Wt}from"./attributes.Bzn9xiO9.js";import{e as Ee,i as Ie}from"./each.CE_wtWlh.js";import{s as Je}from"./class.DrPxmDwO.js";import{s as Ge,m as Nt,d as At,a as ye}from"./store.Cu8l1F6D.js";import{L as ze}from"./label.fszyJLBn.js";import{I as Se}from"./input.BKj2mia6.js";import{B as Ae}from"./button.KrNygnVt.js";import{s as ce}from"./render.B8Ti1KQa.js";import{l as Xe,s as He,p as Ue}from"./props.B2sXXNEW.js";import{t as Ce}from"./Toaster.svelte_svelte_type_style_lang.BeLkcojC.js";import{w as Oe}from"./index.Syity6yz.js";import{s as Le}from"./this.CmfLgYlZ.js";import"./create.DJFv7QJ3.js";import{R as nt,T as dt,D as it,a as ct,b as vt,c as Tt}from"./index.ck8vIaH5.js";import{C as qt}from"./checkbox.zkmSZOFD.js";import{p as Qe}from"./pb.BjVtZEqq.js";import{c as Jt}from"./camera.BqdwQ55i.js";import{s as yt}from"./node.Bxisulq9.js";import"./ui.AXpcjr67.js";import{X as Ut}from"./x.CDbvqleL.js";import{D as gt}from"./dialog-footer.Dy_2Ln0-.js";import{P as at}from"./plus.DC_SRpzN.js";import{S as Pt}from"./separator.Ct86z5eC.js";import{a as rt,p as Lt,i as Xt}from"./panels.Cbe4C8wU.js";import{C as Ht,T as Kt}from"./trash-2.CtJtqbw4.js";import{I as Ke}from"./Icon.DvIACLrv.js";import{b as Qt}from"./props.BuR-EMCo.js";import{T as jt,a as Et,b as ot,c as Fe,d as It,e as De}from"./table-row.CBhE8vFB.js";import{e as kt}from"./events.D3ZRZFsE.js";import{R as Yt,T as Zt,D as ea,G as ta}from"./index.Cb-bx87I.js";import{S as bt}from"./search.C-L6lnsI.js";import{A as aa,T as ra}from"./trash.BqMi3Eq7.js";import{D as Ft}from"./dropdown-menu-item.B69BJlTw.js";import{R as Dt,T as Ct,P as zt}from"./index.BAWMrix_.js";import{c as sa}from"./utils.CC9b3hXT.js";import{S as Mt}from"./switch.Bud3bc4E.js";import{u as Vt}from"./user.DTKNVqgd.js";import{L as ht}from"./loader-circle.GLjY1Qqv.js";import{R as la,T as oa,a as St,b as _t}from"./index.Bv5ivVzj.js";import{a as na}from"./userLogs.FmCv2qlm.js";import{C as da}from"./chevron-right.CaU_NBzd.js";import"./create.CF7Sq6TA.js";import"./updater.1_cAstJq.js";import"./index-client.CAqXSNTC.js";import"./input.sl8v-pyr.js";import"./index.Dc6kRK_F.js";import"./focus.B8v0om3D.js";import"./create.gm8meUqM.js";import"./helpers.DnLv66qw.js";import"./userDetails.C512u9q6.js";function ia(X,$){const P=Xe($,["children","$$slots","$$events","$$legacy"]);Ke(X,He({name:"arrow-down-0-1"},()=>P,{iconNode:[["path",{d:"m3 16 4 4 4-4"}],["path",{d:"M7 20V4"}],["rect",{x:"15",y:"4",width:"4",height:"6",ry:"2"}],["path",{d:"M17 20v-6h-2"}],["path",{d:"M15 20h4"}]],children:(g,x)=>{var f=Z(),S=s(f);Le(S,$,"default",{},null),e(g,f)},$$slots:{default:!0}}))}function ca(X,$){const P=Xe($,["children","$$slots","$$events","$$legacy"]);Ke(X,He({name:"arrow-down-1-0"},()=>P,{iconNode:[["path",{d:"m3 16 4 4 4-4"}],["path",{d:"M7 20V4"}],["path",{d:"M17 10V4h-2"}],["path",{d:"M15 10h4"}],["rect",{x:"15",y:"14",width:"4",height:"6",ry:"2"}]],children:(g,x)=>{var f=Z(),S=s(f);Le(S,$,"default",{},null),e(g,f)},$$slots:{default:!0}}))}function Rt(X,$){const P=Xe($,["children","$$slots","$$events","$$legacy"]);Ke(X,He({name:"eye-closed"},()=>P,{iconNode:[["path",{d:"m15 18-.722-3.25"}],["path",{d:"M2 8a10.645 10.645 0 0 0 20 0"}],["path",{d:"m20 15-1.726-2.05"}],["path",{d:"m4 15 1.726-2.05"}],["path",{d:"m9 18 .722-3.25"}]],children:(g,x)=>{var f=Z(),S=s(f);Le(S,$,"default",{},null),e(g,f)},$$slots:{default:!0}}))}function Ot(X,$){const P=Xe($,["children","$$slots","$$events","$$legacy"]);Ke(X,He({name:"eye"},()=>P,{iconNode:[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(g,x)=>{var f=Z(),S=s(f);Le(S,$,"default",{},null),e(g,f)},$$slots:{default:!0}}))}function va(X,$){const P=Xe($,["children","$$slots","$$events","$$legacy"]);Ke(X,He({name:"lock-keyhole-open"},()=>P,{iconNode:[["circle",{cx:"12",cy:"16",r:"1"}],["rect",{width:"18",height:"12",x:"3",y:"10",rx:"2"}],["path",{d:"M7 10V7a5 5 0 0 1 9.33-2.5"}]],children:(g,x)=>{var f=Z(),S=s(f);Le(S,$,"default",{},null),e(g,f)},$$slots:{default:!0}}))}function ua(X,$){const P=Xe($,["children","$$slots","$$events","$$legacy"]);Ke(X,He({name:"lock-keyhole"},()=>P,{iconNode:[["circle",{cx:"12",cy:"16",r:"1"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3"}]],children:(g,x)=>{var f=Z(),S=s(f);Le(S,$,"default",{},null),e(g,f)},$$slots:{default:!0}}))}function fa(X,$){const P=Xe($,["children","$$slots","$$events","$$legacy"]);Ke(X,He({name:"menu"},()=>P,{iconNode:[["line",{x1:"4",x2:"20",y1:"12",y2:"12"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18"}]],children:(g,x)=>{var f=Z(),S=s(f);Le(S,$,"default",{},null),e(g,f)},$$slots:{default:!0}}))}var pa=r("Add Cameras to Door <!>",1),$a=r('<div class="h-4 w-full rounded-t-3xl"></div> <!>',1),ma=r('<p class="text-primary p-5">No Cameras to add</p>'),_a=r('<div class="flex flex-row gap-2 items-center"><!> <!></div>'),xa=r("<!> Add Cameras",1),ha=r('<span class="flex items-center gap-4"><!> <!></span>'),ga=r('<form class="flex gap-8 flex-row w-full flex-wrap items-center justify-start p-5 mx-6"></form> <!>',1),ba=r("<!> <!>",1),wa=r("<!> <!>",1);function ya(X,$){Ve($,!1);const P=Ge(),z=()=>ye(ee,"$selectedCamerasIds",P),g=()=>ye(k,"$dialogOpen",P),x=()=>ye(Jt,"$cameras",P);let f=Ue($,"doorId",8),S=Ue($,"doorName",8),R=Ue($,"selectedCamerasIdsArr",8),k=Oe(!1),ee=Oe(R()||[]);const Y=localStorage.getItem("$selectedNode"),fe=async()=>{let T=z().length<=1?"Camera":"Cameras";await Qe.collection("atlas_door").update(f(),{cameraId:z()}).then(()=>{z().map(async I=>{await Qe.collection("camera").update(I,{doorId:f()})}),Ce.success(`${z().length} ${T} added to ${S()}`)}).catch(I=>{console.log("Failed to add cameras",I),Ce.error(`Failed to add ${T}`)}),k.set(!1)},_e=(T,I)=>{I?ee.update(W=>[...W,T]):ee.update(W=>W.filter(B=>B!==T))};Be(()=>yt,()=>{Y&&yt.set(Y)}),Ye(),Me(),nt(X,{get open(){return Nt(),g()},set open(T){At(k,T)},children:(T,I)=>{var W=wa(),B=s(W);dt(B,{children:(pe,le)=>{var L=Z(),de=s(L);Le(de,$,"default",{},null),e(pe,L)},$$slots:{default:!0}});var M=a(B,2);it(M,{class:"sm:max-w-[600px] scale-90 sm:scale-100 p-0",closeButton:!1,roundedLarge:!0,children:(pe,le)=>{var L=ba(),de=s(L);ct(de,{children:(w,m)=>{var q=$a(),ae=a(s(q),2);vt(ae,{class:"flex justify-between w-full items-center px-6 pt-4",children:(U,J)=>{i();var y=pa(),j=a(s(y));Tt(j,{class:"rounded-full p-1 bg-gray-300 dark:bg-gray-800",children:(re,D)=>{Ut(re,{class:"size-5 font-thin"})},$$slots:{default:!0}}),e(U,y)},$$slots:{default:!0}}),e(w,q)},$$slots:{default:!0}});var te=a(de,2);{var u=w=>{var m=ma();e(w,m)},n=w=>{var m=ga(),q=s(m);Ee(q,5,x,Ie,(U,J,y)=>{var j=_a(),re=o(j),D=Pe(()=>z().includes(t(J).id));qt(re,{id:`camera-checkbox-${y}`,get checked(){return t(D)},onCheckedChange:O=>_e(t(J).id,O)});var b=a(re,2);ze(b,{for:`camera-checkbox-${y}`,class:"capitalize",children:(O,F)=>{i();var ie=C();ne(()=>ce(ie,t(J).name)),e(O,ie)},$$slots:{default:!0}}),l(j),e(U,j)}),l(q);var ae=a(q,2);gt(ae,{class:"px-6 pb-6",children:(U,J)=>{var y=ha(),j=o(y);Ae(j,{variant:"secondary",$$events:{click:()=>k.set(!1)},children:(D,b)=>{i();var O=C("Cancel");e(D,O)},$$slots:{default:!0}});var re=a(j,2);Ae(re,{variant:"default",type:"submit",class:"mt-auto flex items-center gap-1 w-full",$$events:{click:D=>{D.preventDefault(),fe()}},children:(D,b)=>{var O=xa(),F=s(O);at(F,{size:16}),i(),e(D,O)},$$slots:{default:!0}}),l(y),e(U,y)},$$slots:{default:!0}}),Ne("submit",q,fe),e(w,m)};xe(te,w=>{x().length<=0?w(u):w(n,!1)})}e(pe,L)},$$slots:{default:!0}}),e(T,W)},$$slots:{default:!0},$$legacy:!0}),Re()}const Pa=()=>typeof window>"u"?"https://api.cieloview.com":window&&window.api?.navigate?"https://localhost:5671":"https://api.cieloview.com";var ka=r("<!> Camera",1),Fa=r("<!> Unlocked...",1),Da=r("<!> Unlock Door",1),Ca=r('<div><div class="text-sm font-bold"> </div> <div class="text-xs font-medium"> </div> <div class="text-xs font-medium"> </div></div>'),za=r('<div class="grid grid-cols-3 drop-shadow-lg gap-4"></div>'),Sa=r('<span class="w-[1px] h-[75px] bg-primary block mx-auto"></span> <!>',1),Na=r('<div class="node flex flex-col justify-center items-center"><div><span class="flex flex-col items-start"><p class="font-semibold text-[18px] text-nowrap"> </p> <p class="text-sm font-medium text-gray-500"> </p></span> <!> <span class="flex items-center gap-2 justify-between"><p class="text-[12px] font-medium"><span class="text-gray-500">Version:</span> </p> <p class="text-[12px] font-medium"><span class="text-gray-500">Sites:</span> </p> <p class="text-[12px] font-medium"><span class="text-gray-500">Unid:</span> </p></span> <!> <div class="flex justify-between gap-3"><!> <!></div></div> <!></div>'),Aa=r('<p class="text-brand-foreground dark:text-brand text-xl font-medium">No doors with this name found</p>'),Ta=r('<p class="text-brand-foreground dark:text-brand font-medium text-lg text-center pt-5 w-full">No Doors found</p>'),Ua=r('<div class="flex justify-start flex-wrap items-start px-10 gap-4"><!></div>');function La(X,$){Ve($,!1);const P=Ge(),z=()=>ye(R(),"$search",P),g=()=>ye(rt,"$activePanel",P),x=()=>ye(Y,"$unlockedDoors",P),f=Q();let S=Ue($,"data",8),R=Ue($,"search",8),k=null,ee=Q(null),Y=Oe([]);const fe=Pa();async function _e(M){try{(await fetch(`${fe}/unlock/${g()}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({unId:M})})).ok?(Y.update(le=>[...le,M]),Ce(`Door with unId:${M} unlocked successfully!`),setTimeout(()=>{Y.update(le=>le.includes(M)?le.filter(L=>L!==M):le),Ce(`Door with unId:${M} locked automatically.`)},6e4)):Ce.error("Failed to unlock the door. Please try again.")}catch(pe){console.error("Error unlocking door:",pe)}}Be(()=>(xt(S()),z()),()=>{A(f,S()?.filter(M=>M.name.toLowerCase().includes(z().toLowerCase())))}),Ye(),Me();var T=Ua(),I=o(T);{var W=M=>{var pe=Z(),le=s(pe);{var L=te=>{var u=Z(),n=s(u);Ee(n,1,()=>t(f),Ie,(w,m,q)=>{var ae=Na(),U=o(ae);Je(U,"pt-2 pb-2 px-4 rounded-lg flex flex-col gap-1 cursor-pointer drop-shadow-lg relative w-max bg-[#f9f9f9] border border-black border-opacity-5 text-black dark:bg-[#FFFFFF14] dark:text-white");var J=o(U),y=o(J),j=o(y,!0);l(y);var re=a(y,2),D=o(re);l(re),l(J);var b=a(J,2);Pt(b,{class:"my-1"});var O=a(b,2),F=o(O),ie=a(o(F));l(F);var G=a(F,2),ve=a(o(G));l(G);var $e=a(G,2),E=a(o($e));l($e),l(O);var se=a(O,2);Pt(se,{class:"my-1"});var c=a(se,2),oe=o(c);ya(oe,{get doorId(){return t(m).id},get doorName(){return t(m).name},get selectedCamerasIdsArr(){return t(m).cameraId},children:(p,v)=>{Ae(p,{class:"py-1 bg-[#111C09] dark:bg-black dark:text-white flex gap-1.5 items-center",size:"sm",children:(d,_)=>{var he=ka(),H=s(he);Ht(H,{size:18}),i(),e(d,he)},$$slots:{default:!0}})},$$slots:{default:!0}});var N=a(oe,2),ge=Pe(()=>x().includes(t(m).unid));Ae(N,{get disabled(){return t(ge)},class:"py-1 bg-[#111C09] dark:bg-black dark:text-white flex gap-1.5 items-center disabled:cursor-not-allowed",size:"sm",$$events:{click:()=>_e(t(m).unid)},children:(p,v)=>{var d=Z(),_=s(d);{var he=K=>{var me=Fa(),we=s(me);va(we,{size:18,class:"dark:text-white"}),i(),e(K,me)},H=K=>{var me=Da(),we=s(me);ua(we,{size:18,class:"dark:text-white"}),i(),e(K,me)};xe(_,K=>{x().includes(t(m).unid)?K(he):K(H,!1)})}e(p,d)},$$slots:{default:!0}}),l(c),l(U);var h=a(U,2);{var V=p=>{var v=Sa(),d=a(s(v),2);{var _=he=>{var H=za();Ee(H,5,()=>t(m).logicalChildren,Ie,(K,me,we)=>{var ue=Ca();Je(ue,"node border-2 rounded-lg relative flex flex-col col-span-1 p-2");var be=o(ue),je=o(be);l(be);var We=a(be,2),Ze=o(We);l(We);var ke=a(We,2),Te=o(ke);l(ke),l(ue),ne(()=>{ce(je,`Name: ${t(me).name??""}`),ce(Ze,`Child ID: ${t(me).unid??""}`),ce(Te,`Type: ${t(me).type??""}`)}),Ne("click",ue,()=>{t(ee)===we?A(ee,null):A(ee,we)}),e(K,ue)}),l(H),e(he,H)};xe(d,he=>{t(m).logicalChildren&&t(m).logicalChildren.length>0&&he(_)})}e(p,v)};xe(h,p=>{k===q&&p(V)})}l(ae),ne(()=>{ce(j,t(m).name),ce(D,`Address ${t(m).address??""}`),ce(ie,` ${t(m).version??""}`),ce(ve,` ${(t(m).logicalChildren?.length>0?t(m).logicalChildren.length:"N/A")??""}`),ce(E,` ${t(m).unid??""}`)}),e(w,ae)}),e(te,u)},de=te=>{var u=Aa();e(te,u)};xe(le,te=>{t(f).length>0?te(L):te(de,!1)})}e(M,pe)},B=M=>{var pe=Ta();e(M,pe)};xe(I,M=>{S()?.length>0?M(W):M(B,!1)})}l(T),e(X,T),Re()}var ja=r("Event Media <!>",1),Ea=r('<div class="h-4 w-full bg-brand rounded-t-3xl"></div> <!>',1),Ia=r('<img alt="Event" class="w-full h-auto max-h-[350px]" loading="lazy">'),Ma=r('<p class="text-center text-gray-500">Video saving was not started at this moment.</p>'),Va=r('<div class="w-full h-auto max-h-[400px] "><video autoplay preload="auto" width="100%" height="90%" controls><source class="w-full h-auto max-h-[200px]"></video></div>',2),Ra=r('<!> <div class="flex items-center justify-evenly rounded-lg border-black/[.13] border-solid border-[1px] p-1 w-[250px] mx-auto mt-4 dark:border-white/[.13] dark:bg-white/10"><button>Videos</button></div> <div style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));"><!></div>',1),Oa=r("<!> <!>",1);function Ba(X,$){Ve($,!1);let P=Q(!1),z=Ue($,"imageUrls",24,()=>[]),g=Ue($,"videoPath",8),x=Q("videos");Me(),nt(X,{get open(){return t(P)},set open(f){A(P,f)},children:(f,S)=>{var R=Oa(),k=s(R);dt(k,{children:(Y,fe)=>{var _e=Z(),T=s(_e);Le(T,$,"default",{},null),e(Y,_e)},$$slots:{default:!0}});var ee=a(k,2);it(ee,{class:"sm:max-w-[720px] max-h-[650px] z-[70] scale-90 sm:scale-100 p-0",closeButton:!1,roundedLarge:!0,children:(Y,fe)=>{var _e=Ra(),T=s(_e);ct(T,{children:(L,de)=>{var te=Ea(),u=a(s(te),2);vt(u,{class:"flex justify-between w-full items-center px-6 pt-4",children:(n,w)=>{i();var m=ja(),q=a(s(m));Tt(q,{class:"rounded-full p-1 bg-gray-300 dark:bg-gray-800",children:(ae,U)=>{Ut(ae,{class:"size-5 font-thin"})},$$slots:{default:!0}}),e(n,m)},$$slots:{default:!0}}),e(L,te)},$$slots:{default:!0}});var I=a(T,2),W=o(I);l(I);var B=a(I,2),M=o(B);{var pe=L=>{var de=Z(),te=s(de);Ee(te,1,z,Ie,(u,n)=>{var w=Ia();ne(()=>wt(w,"src","data:image/jpeg;base64,"+t(n))),Gt(w),e(u,w)}),e(L,de)},le=L=>{var de=Z(),te=s(de);{var u=n=>{var w=Z(),m=s(w);{var q=U=>{var J=Ma();e(U,J)},ae=U=>{var J=Va(),y=o(J),j=o(y);l(y),l(J),ne(()=>wt(j,"src",g())),e(U,J)};xe(m,U=>{g()===""?U(q):U(ae,!1)})}e(n,w)};xe(te,n=>{t(x)==="videos"&&n(u)},!0)}e(L,de)};xe(M,L=>{t(x)==="images"?L(pe):L(le,!1)})}l(B),ne(()=>{Je(W,`rounded-lg text-xs leading-[18px] px-[10px] py-[3px] font-medium w-1/2 h-full ${t(x)==="videos"?"text-white bg-brand-foreground dark:bg-black":"bg-transparent"}`),Je(B,`grid gap-4 ${(z().length>2||g()!==""?"overflow-y-auto":"")??""} max-h-[400px] m-5`)}),Ne("click",W,()=>A(x,"videos")),e(Y,_e)},$$slots:{default:!0}}),e(f,R)},$$slots:{default:!0},$$legacy:!0}),Re()}var Ga=r("Oldest First <!>",1),Wa=r("Newest First<!>",1),qa=r("<!> <!>",1),Ja=r("<!> <!>",1),Xa=r('<div class="flex justify-center items-center h-full"><p class="text-xl font-medium">No events to display</p></div>'),Ha=r('<input type="checkbox">'),Ka=r("<!> <!> <!> <!> <!> <!> <!> <!>",1),Qa=r('<input type="checkbox">'),Ya=r('<span class="flex items-center capitalize font-semibold"> </span>'),Za=r("<!> <!> <!> <!> <!> <!> <!> <!>",1),er=r("<!> <!>",1),tr=r('<div class="top-bar py-4 flex justify-between items-center"><span class="flex flex-col gap-1"><span class="flex items-center gap-2"><p class="text-xl font-medium">Events</p> <p class="text-[#0070FF] bg-[#0070FF]/[.2] text-sm rounded-full px-2 py-.5 font-medium mt-1">Super Admin</p></span></span> <div class="flex items-center gap-4"><span class="relative"><!> <!></span> <!></div></div> <!>',1);function ar(X,$){Ve($,!1);const P=Ge(),z=()=>ye(R,"$selectedEvents",P),g=()=>ye(kt,"$events",P),x=()=>ye(S(),"$search",P),f=()=>ye(ee,"$filteredData",P);let S=Ue($,"search",24,()=>Oe("")),R=Oe([]),k=Q(!1);const ee=Oe([]),Y=u=>{z().includes(u)?R.update(n=>n.filter(w=>w!==u)):R.update(n=>[...n,u])},fe=()=>{t(k)?R.set([]):R.set(g().map(u=>u.id))};function _e(u){let n=[...f()];u==="asc"?n.sort((w,m)=>new Date(w.created).getTime()-new Date(m.created).getTime()):u==="dsc"&&n.sort((w,m)=>new Date(m.created).getTime()-new Date(w.created).getTime()),ee.set(n)}Be(()=>(z(),g()),()=>{A(k,z().length===g().length)}),Be(()=>x(),()=>{kt.subscribe(u=>{const n=x().toLowerCase(),w=u.filter(m=>m.expand.user.username.toLowerCase().includes(n));ee.set(w)})}),Ye(),Me();var T=tr(),I=s(T),W=a(o(I),2),B=o(W),M=o(B);Se(M,{placeholder:"Search by user name",class:"w-[250px] pl-8",get value(){return Nt(),x()},set value(u){At(S(),u)},$$legacy:!0});var pe=a(M,2);bt(pe,{size:18,class:"absolute top-1/2 -translate-y-1/2 left-2"}),l(B);var le=a(B,2);Yt(le,{children:(u,n)=>{var w=Ja(),m=s(w);Zt(m,{asChild:!0,children:Bt,$$slots:{default:(ae,U)=>{const J=Pe(()=>U.builder);var y=Pe(()=>[t(J)]);Ae(ae,{get builders(){return t(y)},class:"text-xs h-10",variant:"outline",size:"sm",children:(j,re)=>{aa(j,{size:17})},$$slots:{default:!0}})}}});var q=a(m,2);ea(q,{class:"w-36 mr-8",children:(ae,U)=>{ta(ae,{children:(J,y)=>{var j=qa(),re=s(j);Ft(re,{class:"flex items-center justify-between gap-2",$$events:{click:()=>_e("asc")},children:(b,O)=>{i();var F=Ga(),ie=a(s(F));ia(ie,{size:16}),e(b,F)},$$slots:{default:!0}});var D=a(re,2);Ft(D,{class:"flex items-center justify-between gap-2",$$events:{click:()=>_e("dsc")},children:(b,O)=>{i();var F=Wa(),ie=a(s(F));ca(ie,{size:16}),e(b,F)},$$slots:{default:!0}}),e(J,j)},$$slots:{default:!0}})},$$slots:{default:!0}}),e(u,w)},$$slots:{default:!0}}),l(W),l(I);var L=a(I,2);{var de=u=>{var n=Xa();e(u,n)},te=u=>{jt(u,{class:"mx-auto w-full flex flex-col pb-10",children:(n,w)=>{var m=er(),q=s(m);Et(q,{class:"border-2 border-[#e4e4e4] border-solid rounded-lg bg-[#f9f9f9] dark:bg-[#e4e4e4]/[.25] dark:border-none",children:(U,J)=>{ot(U,{class:"bg-transparent flex items-center justify-between p-3 gap-4",children:(y,j)=>{var re=Ka(),D=s(re);Fe(D,{class:"text-[#727272] h-full text-sm text-medium",children:(E,se)=>{var c=Ha();st(c),ne(()=>lt(c,t(k))),Ne("change",c,fe),e(E,c)},$$slots:{default:!0}});var b=a(D,2);Fe(b,{class:"text-[#727272] dark:text-[#FFFFFF]/70 h-full text-sm text-medium w-full",children:(E,se)=>{i();var c=C("Event Category");e(E,c)},$$slots:{default:!0}});var O=a(b,2);Fe(O,{class:"text-[#727272] dark:text-[#FFFFFF]/70 h-full text-sm text-medium w-full",children:(E,se)=>{i();var c=C("Description");e(E,c)},$$slots:{default:!0}});var F=a(O,2);Fe(F,{class:"text-[#727272] dark:text-[#FFFFFF]/70 h-full text-sm text-medium w-full",children:(E,se)=>{i();var c=C("Device Name");e(E,c)},$$slots:{default:!0}});var ie=a(F,2);Fe(ie,{class:"text-[#727272] dark:text-[#FFFFFF]/70 h-full text-sm text-medium w-full",children:(E,se)=>{i();var c=C("User");e(E,c)},$$slots:{default:!0}});var G=a(ie,2);Fe(G,{class:"text-[#727272] dark:text-[#FFFFFF]/70 h-full text-sm text-medium w-full",children:(E,se)=>{i();var c=C("Media");e(E,c)},$$slots:{default:!0}});var ve=a(G,2);Fe(ve,{class:"text-[#727272] dark:text-[#FFFFFF]/70 h-full text-sm text-medium w-full",children:(E,se)=>{i();var c=C("Priority");e(E,c)},$$slots:{default:!0}});var $e=a(ve,2);Fe($e,{class:"text-[#727272] dark:text-[#FFFFFF]/70 h-full text-sm text-medium w-full",children:(E,se)=>{i();var c=C("Created At");e(E,c)},$$slots:{default:!0}}),e(y,re)},$$slots:{default:!0}})},$$slots:{default:!0}});var ae=a(q,2);It(ae,{class:"overflow-y-scroll max-h-[calc(100vh-285px)] hide-scrollbar pb-10",children:(U,J)=>{var y=Z(),j=s(y);Ee(j,1,f,Ie,(re,D)=>{const b=Pe(()=>t(D)),O=Pe(()=>t(b).bgColor),F=Pe(()=>z().includes(t(b).id));var ie=Pe(()=>`background-color: rgb(${t(O)?.red??""}, ${t(O)?.green??""}, ${t(O)?.blue??""});`);ot(re,{class:"bg-transparent cursor-pointer flex items-center justify-between gap-4 mt-4 px-3 rounded-lg  border-2 border-solid border-[#e4e4e4] dark:border-none dark:bg-[#e4e4e4]/[.13]",get style(){return t(ie)},children:(G,ve)=>{var $e=Za(),E=s($e);De(E,{class:"text-[#727272] dark:text-white h-full",children:(p,v)=>{var d=Qa();st(d),ne(()=>lt(d,t(F))),Ne("change",d,()=>Y(t(b).id)),e(p,d)},$$slots:{default:!0}});var se=a(E,2);De(se,{class:"text-black h-full w-full dark:text-white",children:(p,v)=>{var d=Ya(),_=o(d,!0);l(d),ne(()=>ce(_,t(b)?.event_category)),e(p,d)},$$slots:{default:!0}});var c=a(se,2);De(c,{class:"text-[#727272] dark:text-white h-full w-full text-sm ",children:(p,v)=>{i();var d=C();ne(()=>ce(d,t(b)?.description?t(b)?.description:"N/A")),e(p,d)},$$slots:{default:!0}});var oe=a(c,2);De(oe,{class:"text-[#727272] dark:text-white h-full w-full text-sm",children:(p,v)=>{i();var d=C();ne(()=>ce(d,t(b).deviceName)),e(p,d)},$$slots:{default:!0}});var N=a(oe,2);De(N,{class:"text-[#727272] dark:text-white h-full w-full text-sm ",children:(p,v)=>{i();var d=C();ne(()=>ce(d,t(b)?.expand?.user?.username?t(b)?.expand.user.username:"N/A")),e(p,d)},$$slots:{default:!0}});var ge=a(N,2);De(ge,{class:"text-[#727272] dark:text-white h-full w-full text-sm pl-6",children:(p,v)=>{var d=Z(),_=s(d);{var he=K=>{var me=Pe(()=>Object.values(t(b).imageUrl));Ba(K,{get imageUrls(){return t(me)},get videoPath(){return t(b).videoPath},children:(we,ue)=>{i();var be=C("View");e(we,be)},$$slots:{default:!0}})},H=K=>{var me=C("N/A");e(K,me)};xe(_,K=>{t(b)?.imageUrl&&typeof t(b).imageUrl=="object"&&Object.keys(t(b).imageUrl).length>0||t(b)?.videoPath?K(he):K(H,!1)})}e(p,d)},$$slots:{default:!0}});var h=a(ge,2);De(h,{class:"text-[#727272] dark:text-white h-full w-full text-sm",children:(p,v)=>{i();var d=C();ne(()=>ce(d,t(b)?.priority)),e(p,d)},$$slots:{default:!0}});var V=a(h,2);De(V,{class:"text-[#727272] dark:text-white h-full w-full text-sm",children:(p,v)=>{i();var d=C();ne(()=>ce(d,new Date(t(b)?.created).toLocaleString())),e(p,d)},$$slots:{default:!0}}),e(G,$e)},$$slots:{default:!0}})}),e(U,y)},$$slots:{default:!0}}),e(n,m)},$$slots:{default:!0}})};xe(L,u=>{f().length===0?u(de):u(te,!1)})}return e(X,T),Qt($,"filteredData",ee),Re({filteredData:ee})}var rr=r("<!> Add User",1),sr=r('<input type="checkbox">'),lr=r("<!> <!> <!> <!> <!> <!> <!> <!>",1),or=r('<input type="checkbox" class="checked:bg-red-500">'),nr=r('<span class="flex items-center capitalize font-semibold"> </span>'),dr=r('<p> <span class="text-brand-foreground dark:text-brand font-medium"> </span></p>'),ir=r('<p class="text-brand-foreground dark:text-brand font-medium">No emails found</p>'),cr=r("<!> <!>",1),vr=r('<p> <span class="text-brand-foreground dark:text-brand font-medium"> </span></p>'),ur=r('<p class="text-brand-foreground dark:text-brand font-medium">No phone numbers found</p>'),fr=r("<!> <!>",1),pr=r("<!> <!> <!> <!> <!> <!> <!> <!>",1),$r=r('<p class="text-brand-foreground dark:text-brand font-medium text-lg text-center pt-5">No users found</p>'),mr=r("<!> <!>",1),_r=r('<div class="top-bar py-4 flex justify-between items-center"><span class="flex items-center gap-4 py-4"><span class="flex flex-col gap-1"><span class="flex items-center gap-2"><p class="text-xl font-medium">Users</p> <p class="text-[#0070FF] bg-[#0070FF]/[.2] text-sm rounded-full px-2 py-.5 font-medium mt-1">Super Admin</p></span></span> <span class="relative"><!> <!></span></span> <span class="flex items-center gap-4"><button class="flex items-center gap-1 p-2"><!> Delete</button> <!></span></div> <!>',1);function xr(X,$){Ve($,!1);const P=Ge(),z=()=>ye(k,"$selectedUsers",P),g=Q(),x=Q();let f=Ue($,"data",8),S=Ue($,"currSess",8,""),R=Q(""),k=Oe([]),ee=n=>{z().includes(n)?k.update(w=>w.filter(m=>m!==n)):k.update(w=>[...w,n])};const Y=()=>{t(g)?k.set([]):k.set(f().map(n=>n.id))};async function fe(n){(await fetch("/api/atlas/deleteUser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({unid:n,token:S()})})).ok?Ce("User deleted successfully!"):Ce.error("Failed to delete user, please try again!")}const _e=()=>{console.log(k),k.length!==0?k.forEach(n=>fe(n.unid)):Ce.error("No user Selected")};Be(()=>(z(),xt(f())),()=>{A(g,z().length===f().length)}),Be(()=>(xt(f()),t(R)),()=>{A(x,f()?f().filter(n=>n.username.toLowerCase().includes(t(R).toLowerCase())):[])}),Ye(),Me();var T=_r(),I=s(T),W=o(I),B=a(o(W),2),M=o(B);Se(M,{placeholder:"Search by username",class:"w-[250px] pl-8",$$events:{input:n=>A(R,n.target.value)}});var pe=a(M,2);bt(pe,{size:18,class:"absolute top-1/2 -translate-y-1/2 left-2"}),l(B),l(W);var le=a(W,2),L=o(le),de=o(L);Kt(de,{size:18}),i(),l(L);var te=a(L,2);Ae(te,{variant:"brand",class:"flex items-center gap-1 p-2 rounded-md",children:(n,w)=>{var m=rr(),q=s(m);at(q,{size:16}),i(),e(n,m)},$$slots:{default:!0}}),l(le),l(I);var u=a(I,2);jt(u,{class:"mx-auto w-full flex flex-col pb-10",children:(n,w)=>{var m=mr(),q=s(m);Et(q,{class:"border-2 border-[#e4e4e4] border-solid rounded-lg dark:border-none dark:bg-[#e4e4e4]/[.25]",children:(y,j)=>{ot(y,{class:"bg-transparent flex items-center justify-between p-3 w-full",children:(re,D)=>{var b=lr(),O=s(b);Fe(O,{class:"text-[#727272] h-full w-[5%] text-start dark:text-primary",children:(c,oe)=>{var N=sr();st(N),ne(()=>lt(N,t(g))),Ne("change",N,Y),e(c,N)},$$slots:{default:!0}});var F=a(O,2);Fe(F,{class:"text-[#727272] dark:text-[#FFFFFF]/70 text-start h-full w-[9%]",children:(c,oe)=>{i();var N=C("Username");e(c,N)},$$slots:{default:!0}});var ie=a(F,2);Fe(ie,{class:"text-[#727272]  dark:text-[#FFFFFF]/70 text-center h-full w-[12.5%]",children:(c,oe)=>{i();var N=C("Email");e(c,N)},$$slots:{default:!0}});var G=a(ie,2);Fe(G,{class:"text-[#727272]  dark:text-[#FFFFFF]/70 text-center h-full w-[12.5%]",children:(c,oe)=>{i();var N=C("Phone Number");e(c,N)},$$slots:{default:!0}});var ve=a(G,2);Fe(ve,{class:"text-[#727272]  dark:text-[#FFFFFF]/70 text-center h-full w-[12.5%]",children:(c,oe)=>{i();var N=C("Role");e(c,N)},$$slots:{default:!0}});var $e=a(ve,2);Fe($e,{class:"text-[#727272]  dark:text-[#FFFFFF]/70 text-center h-full w-[12.5%]",children:(c,oe)=>{i();var N=C("Version");e(c,N)},$$slots:{default:!0}});var E=a($e,2);Fe(E,{class:"text-[#727272]  dark:text-[#FFFFFF]/70 text-center pr-0 h-full w-[12.5%]",children:(c,oe)=>{i();var N=C("Last Modified By");e(c,N)},$$slots:{default:!0}});var se=a(E,2);Fe(se,{class:"text-[#727272]  dark:text-[#FFFFFF]/70 text-center h-full w-[12.5%]",children:(c,oe)=>{i();var N=C("Last Modified");e(c,N)},$$slots:{default:!0}}),e(re,b)},$$slots:{default:!0}})},$$slots:{default:!0}});var ae=a(q,2);{var U=y=>{It(y,{class:"overflow-y-scroll max-h-[calc(100vh-285px)] hide-scrollbar pb-10",children:(j,re)=>{var D=Z(),b=s(D);Ee(b,1,()=>t(x),Ie,(O,F)=>{const ie=Pe(()=>new Date(t(F).lastModified)),G=Pe(()=>z().includes(t(F).id));ot(O,{class:"bg-transparent cursor-pointer flex items-center justify-between gap-4 mt-4 px-3 rounded-lg  border-2 border-solid border-[#e4e4e4]/[.80] dark:border-none dark:bg-[#e4e4e4]/[.13]",children:(ve,$e)=>{var E=pr(),se=s(E);De(se,{class:"text-[#727272] h-full",children:(v,d)=>{var _=or();st(_),ne(()=>lt(_,t(G))),Ne("change",_,()=>ee(t(F).id)),e(v,_)},$$slots:{default:!0}});var c=a(se,2);De(c,{class:"text-black h-full w-[12.5%] text-start dark:text-white pl-7",children:(v,d)=>{var _=nr(),he=o(_,!0);l(_),ne(()=>ce(he,t(F).username===""?"N/A":t(F).username)),e(v,_)},$$slots:{default:!0}});var oe=a(c,2);De(oe,{class:"text-[#727272] h-full text-sm w-[10%] text-start",children:(v,d)=>{Dt(v,{children:(_,he)=>{var H=cr(),K=s(H);Ct(K,{class:"bg-brand-foreground dark:bg-brand text-white px-2 py-1 rounded-md",children:(we,ue)=>{i();var be=C("Emails");e(we,be)},$$slots:{default:!0}});var me=a(K,2);zt(me,{class:"w-max",children:(we,ue)=>{var be=Z(),je=s(be);{var We=ke=>{var Te=Z(),ut=s(Te);Ee(ut,1,()=>t(F).email_ids,Ie,(ft,pt,$t)=>{var qe=dr(),et=o(qe);et.nodeValue=`${$t+1} : `;var tt=a(et),mt=o(tt,!0);l(tt),l(qe),ne(()=>ce(mt,t(pt).emailAddress)),e(ft,qe)}),e(ke,Te)},Ze=ke=>{var Te=ir();e(ke,Te)};xe(je,ke=>{t(F).email_ids.length>0?ke(We):ke(Ze,!1)})}e(we,be)},$$slots:{default:!0}}),e(_,H)},$$slots:{default:!0}})},$$slots:{default:!0}});var N=a(oe,2);De(N,{class:"text-[#727272] h-full text-sm w-[12.5%] text-start",children:(v,d)=>{Dt(v,{children:(_,he)=>{var H=fr(),K=s(H);Ct(K,{class:"bg-brand-foreground dark:bg-brand text-white px-2 py-1 rounded-md",children:(we,ue)=>{i();var be=C("Numbers");e(we,be)},$$slots:{default:!0}});var me=a(K,2);zt(me,{class:"w-max",children:(we,ue)=>{var be=Z(),je=s(be);{var We=ke=>{var Te=Z(),ut=s(Te);Ee(ut,1,()=>t(F).phone_number,Ie,(ft,pt,$t)=>{var qe=vr(),et=o(qe);et.nodeValue=`${$t+1} : `;var tt=a(et),mt=o(tt,!0);l(tt),l(qe),ne(()=>ce(mt,t(pt).phoneNumber)),e(ft,qe)}),e(ke,Te)},Ze=ke=>{var Te=ur();e(ke,Te)};xe(je,ke=>{t(F).phone_number!==null&&t(F).phone_number.length>0?ke(We):ke(Ze,!1)})}e(we,be)},$$slots:{default:!0}}),e(_,H)},$$slots:{default:!0}})},$$slots:{default:!0}});var ge=a(N,2);De(ge,{class:"text-[#727272] dark:text-white h-full text-sm w-[12.5%] text-start pl-12",children:(v,d)=>{i();var _=C();ne(()=>ce(_,t(F)?.role)),e(v,_)},$$slots:{default:!0}});var h=a(ge,2);De(h,{class:"text-[#727272] dark:text-white h-full text-sm w-[12.5%] text-start pl-14",children:(v,d)=>{i();var _=C();ne(()=>ce(_,t(F).version)),e(v,_)},$$slots:{default:!0}});var V=a(h,2);De(V,{class:"text-[#727272] dark:text-white h-full flex items-start justify-center text-sm w-[12.5%] text-start",children:(v,d)=>{i();var _=C();ne(()=>ce(_,t(F).last_modified_by)),e(v,_)},$$slots:{default:!0}});var p=a(V,2);De(p,{class:"text-[#727272] dark:text-white h-full text-sm w-[12.5%] text-center",children:(v,d)=>{i();var _=C();ne(()=>ce(_,t(ie).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))),e(v,_)},$$slots:{default:!0}}),e(ve,E)},$$slots:{default:!0}})}),e(j,D)},$$slots:{default:!0}})},J=y=>{var j=$r();e(y,j)};xe(ae,y=>{t(x).length>0?y(U):y(J,!1)})}e(n,m)},$$slots:{default:!0}}),Ne("click",L,_e),e(X,T),Re()}var hr=r('Delete Panel : <span class="font-semibold text-brand-foreground dark:text-brand capitalize"> </span>',1),gr=r('<span class="flex items-center gap-4"><!> <!></span>'),br=r('<!> <div class="grid grid-cols-2"><div class="col-span-2">Are you sure you would like to delete Panel : <span class="font-semibold text-brand-foreground dark:text-brand capitalize"> </span></div></div> <!>',1),wr=r('<div class="p-4 text-center"><p class="text-lg font-medium text-brand-foreground dark:text-brand">Please select a panel to delete first.</p></div>'),yr=r("<!> <!>",1);function Pr(X,$){Ve($,!1);const P=Ge(),z=()=>ye(rt,"$activePanel",P),g=()=>ye(Lt,"$panels",P);let x=Q(),f=Q(!1),S=Q(!1);const R=async()=>{t(x)?(A(f,!0),t(x).users.length>0&&await Promise.all(t(x).users.map(k=>Qe.collection("atlas_users").delete(k))),await Qe.collection("atlas").delete(t(x).id),Ce.success("Panel deleted successfully.")):Ce.error("Error deleting panel. Please try again by selecting a panel."),A(S,!1),A(f,!1)};Be(()=>(z(),g()),()=>{z()&&A(x,g().find(k=>k.id===z()))}),Ye(),Me(),nt(X,{get open(){return t(S)},set open(k){A(S,k)},children:(k,ee)=>{var Y=yr(),fe=s(Y);dt(fe,{children:(T,I)=>{var W=Z(),B=s(W);Le(B,$,"default",{},null),e(T,W)},$$slots:{default:!0}});var _e=a(fe,2);it(_e,{class:"sm:max-w-[720px] z-[70] scale-90 sm:scale-100",children:(T,I)=>{var W=Z(),B=s(W);{var M=le=>{var L=br(),de=s(L);ct(de,{children:(q,ae)=>{vt(q,{children:(U,J)=>{i();var y=hr(),j=a(s(y)),re=o(j,!0);l(j),ne(()=>ce(re,t(x)?.name)),e(U,y)},$$slots:{default:!0}})},$$slots:{default:!0}});var te=a(de,2),u=o(te),n=a(o(u)),w=o(n,!0);l(n),l(u),l(te);var m=a(te,2);gt(m,{children:(q,ae)=>{var U=gr(),J=o(U);Ae(J,{variant:"secondary",$$events:{click:()=>{A(S,!1)}},children:(j,re)=>{i();var D=C("Cancel");e(j,D)},$$slots:{default:!0}});var y=a(J,2);Ae(y,{variant:"destructive",get disabled(){return t(f)},$$events:{click:R},children:(j,re)=>{i();var D=C();ne(()=>ce(D,t(f)?"Deleting...":"Delete")),e(j,D)},$$slots:{default:!0}}),l(U),e(q,U)},$$slots:{default:!0}}),ne(()=>ce(w,t(x)?.name)),e(le,L)},pe=le=>{var L=wr();e(le,L)};xe(B,le=>{t(x)?le(M):le(pe,!1)})}e(T,W)},$$slots:{default:!0}}),e(k,Y)},$$slots:{default:!0},$$legacy:!0}),Re()}var kr=r('<li class="cursor-pointer hover:scale-125"><!></li>'),Fr=r('<article><!> <div class="grid gap-1 cursor-pointer"><h3 class="text-base capitalize"> </h3> <p class="text-xs"> </p></div> <ul class="flex flex-row gap-2 ml-auto p-0 list-none cursor-pointer"><!></ul></article>');function Dr(X,$){Ve($,!1);const P=Ge(),z=()=>ye(rt,"$activePanel",P);let g=Ue($,"panelData",8);Me();var x=Fr();const f=Pe(()=>Wt(sa("flex items-center gap-4 p-4 dark:border hover:border hover:border-brand-foreground dark:hover:border-brand rounded-xl shadow-md text-base z-10 w-full px-4 bg-[#f9f9f9] dark:bg-white/20",{"border border-black dark:border-white":g().id===z()})));var S=o(x);fa(S,{class:" h-4 w-4 my-handle cursor-grab flex-shrink-0"});var R=a(S,2),k=o(R),ee=o(k,!0);l(k);var Y=a(k,2),fe=o(Y);l(Y),l(R);var _e=a(R,2),T=o(_e);Pr(T,{children:(I,W)=>{var B=kr(),M=o(B);ra(M,{class:"size-4"}),l(B),e(I,B)},$$slots:{default:!0}}),l(_e),l(x),ne(()=>{Je(x,t(f),""),ce(ee,g()?.name),ce(fe,`IP: ${g()?.ip_addr??""}`)}),Ne("click",x,()=>{rt.update(I=>I===g().id?"":g().id)}),e(X,x),Re()}var Cr=r("<!> <i>Adding Panel...</i>",1),zr=r("<!> Add Panel",1),Sr=r('<span class="flex items-center gap-4"><!> <!></span>'),Nr=r('<!> <div class="grid grid-cols-2 gap-4 py-4"><div class="col-span-2 flex items-center gap-4"><!> <!></div> <div class="col-span-2 flex items-center gap-4"><!> <!></div> <div class="col-span-2 flex items-center gap-4"><!> <div class="relative w-full"><!>  <span class="text-white/60 absolute inset-y-3 right-2"><!></span></div></div> <div class="col-span-2 flex items-center gap-4"><!> <!></div> <div class="col-span-2 flex items-center gap-4"><!> <!></div> <div class="col-span-2 flex items-center gap-4 py-1"><!> <!></div></div> <!>',1),Ar=r("<!> <!>",1);function Tr(X,$){Ve($,!1);const P=Ge(),z=()=>ye(Vt,"$user",P);let g=Q(!1),x=Q(""),f=Q(""),S=Q(""),R=Q(""),k=Q(""),ee=Q(!1),Y=Q(!1),fe=Q(!1);async function _e(T){try{A(Y,!0);const I=T||{name:t(x),username:t(f),password:t(S),ip_addr:t(R),httpPort:t(k),ssl:t(ee),session:z()?.session[0]};await Qe.collection("atlas").create(I),A(g,!1),Ce.success("Panel added successfully"),setTimeout(()=>{location.reload()},3e3)}catch(I){console.error("Error adding panel:",I),Ce.error("Failed to add panel")}finally{A(Y,!1)}}Me(),nt(X,{get open(){return t(g)},set open(T){A(g,T)},children:(T,I)=>{var W=Ar(),B=s(W);dt(B,{children:(pe,le)=>{var L=Z(),de=s(L);Le(de,$,"default",{},null),e(pe,L)},$$slots:{default:!0}});var M=a(B,2);it(M,{class:"sm:max-w-[600px] z-[70] scale-90 sm:scale-100",children:(pe,le)=>{var L=Nr(),de=s(L);ct(de,{children:(h,V)=>{vt(h,{children:(p,v)=>{i();var d=C("Add New Panel");e(p,d)},$$slots:{default:!0}})},$$slots:{default:!0}});var te=a(de,2),u=o(te),n=o(u);ze(n,{class:"w-24",for:"name",children:(h,V)=>{i();var p=C("Name");e(h,p)},$$slots:{default:!0}});var w=a(n,2);Se(w,{type:"text",class:"text-base",placeholder:"Name",get value(){return t(x)},set value(h){A(x,h)},$$legacy:!0}),l(u);var m=a(u,2),q=o(m);ze(q,{class:"w-24",for:"user-name",children:(h,V)=>{i();var p=C("Username");e(h,p)},$$slots:{default:!0}});var ae=a(q,2);Se(ae,{type:"text",class:"text-base",placeholder:"Username",get value(){return t(f)},set value(h){A(f,h)},$$legacy:!0}),l(m);var U=a(m,2),J=o(U);ze(J,{class:"w-24",for:"password",children:(h,V)=>{i();var p=C("Password");e(h,p)},$$slots:{default:!0}});var y=a(J,2),j=o(y),re=Pe(()=>t(fe)?"text":"password");Se(j,{class:"text-base",id:"password",name:"password",placeholder:"Password",get type(){return t(re)},autocapitalize:"off",autocomplete:"off",get value(){return t(S)},set value(h){A(S,h)},$$legacy:!0});var D=a(j,2),b=o(D);{var O=h=>{Ot(h,{size:16,class:"transition-all ease-in-out"})},F=h=>{Rt(h,{size:16,class:"transition-all ease-in-out"})};xe(b,h=>{t(fe)?h(O):h(F,!1)})}l(D),l(y),l(U);var ie=a(U,2),G=o(ie);ze(G,{class:"w-24",for:"server-ip",children:(h,V)=>{i();var p=C("Server IP");e(h,p)},$$slots:{default:!0}});var ve=a(G,2);Se(ve,{type:"text",class:"text-base",placeholder:"Server IP",get value(){return t(R)},set value(h){A(R,h)},$$legacy:!0}),l(ie);var $e=a(ie,2),E=o($e);ze(E,{class:"w-24",for:"server-port",children:(h,V)=>{i();var p=C("Server Port");e(h,p)},$$slots:{default:!0}});var se=a(E,2);Se(se,{type:"text",class:"text-base",placeholder:"Server Port",get value(){return t(k)},set value(h){A(k,h)},$$legacy:!0}),l($e);var c=a($e,2),oe=o(c);ze(oe,{class:"w-24",for:"ssl",children:(h,V)=>{i();var p=C("SSL");e(h,p)},$$slots:{default:!0}});var N=a(oe,2);Mt(N,{id:"ssl",get checked(){return t(ee)},set checked(h){A(ee,h)},$$legacy:!0}),l(c),l(te);var ge=a(te,2);gt(ge,{children:(h,V)=>{var p=Sr(),v=o(p);Ae(v,{variant:"secondary",$$events:{click:()=>{A(g,!1)}},children:(_,he)=>{i();var H=C("Cancel");e(_,H)},$$slots:{default:!0}});var d=a(v,2);Ae(d,{class:"mt-auto flex items-center gap-1 w-full",get disabled(){return t(Y)},$$events:{click:()=>_e()},children:(_,he)=>{var H=Z(),K=s(H);{var me=ue=>{var be=Cr(),je=s(be);ht(je,{class:"animate-spin"}),i(2),e(ue,be)},we=ue=>{var be=zr(),je=s(be);at(je,{size:16}),i(),e(ue,be)};xe(K,ue=>{t(Y)?ue(me):ue(we,!1)})}e(_,H)},$$slots:{default:!0}}),l(p),e(h,p)},$$slots:{default:!0}}),Ne("click",D,()=>{A(fe,!t(fe))}),e(pe,L)},$$slots:{default:!0}}),e(T,W)},$$slots:{default:!0},$$legacy:!0}),Re()}var Ur=r('<div class="w-full h-full flex items-center justify-center"><!></div>'),Lr=r("<!> <!>",1),jr=r('<div class="top-bar py-4 flex justify-between items-center"><span class="flex items-center justify-between gap-4 py-4 w-full"><span class="flex flex-col gap-1"><span class="flex items-center gap-2"><p class="text-xl font-medium">Doors</p> <p class="text-[#0070FF] bg-[#0070FF]/[.2] text-sm rounded-full px-2 py-.5 font-medium mt-1">Super Admin</p></span></span> <span class="relative"><!> <!></span></span></div> <div class="max-h-[70vh] overflow-y-auto"><!></div>',1),Er=r("<!> <!> <!> <!>",1),Ir=r('<div class="w-full h-[calc(100vh-75px)] relative"><!></div>'),Mr=r('<div class="w-full h-[calc(100vh-75px)] flex flex-col justify-center items-center p-4 bg-gray-100 dark:bg-black"><div class="text-center"><h1 class="text-2xl font-bold text-brand-foreground dark:text-brand mb-4">Welcome to Atlas Panel</h1> <p class="text-lg text-gray-60 mb-8 dark:text-slate-200">Please select a panel to access the system features.</p></div></div>'),Vr=r('<div class="w-full h-[calc(100vh-75px)] flex flex-col justify-center items-center p-4 bg-gray-100 dark:bg-black"><div class="text-center"><h1 class="text-2xl font-bold text-brand-foreground dark:text-brand mb-4">Welcome to Atlas Panel</h1> <p class="text-lg text-gray-600 mb-8 dark:text-slate-200">Please add a panel to access the features.</p></div></div>'),Rr=r("Name <!>",1),Or=r("Username <!>",1),Br=r('Password <div class="relative"><!>  <span class="text-white/60 absolute inset-y-3 right-2"><!></span></div>',1),Gr=r("Server IP <!>",1),Wr=r("Server Port <!>",1),qr=r("SSL <!>",1),Jr=r("<!> <i>Adding Panel...</i>",1),Xr=r("<!> Add",1),Hr=r('<p class="text-center text-xl font-bold text-brand-foreground dark:text-brand">Connect Panel</p> <!> <!> <!> <!> <!> <!> <!>',1),Kr=r("<!> Add Panel",1),Qr=r('<div class="flex flex-col h-[calc(100vh-75px)]"><p class="text-center text-xl font-bold mb-4 text-brand-foreground dark:text-brand">Atlas panels</p> <div class="flex flex-col gap-4 h-full pb-10 max-h-[calc(100vh-200px)] overflow-y-auto"></div> <!></div>'),Yr=r('<section class="h-full w-full flex justify-between relative items-center max-h-[calc(100vh-75px)]"><!> <button><!></button> <div id="infopanel"><!></div></section>');function Ys(X,$){Ve($,!1);const P=Ge(),z=()=>ye(Vt,"$user",P),g=()=>ye(rt,"$activePanel",P),x=()=>ye(Lt,"$panels",P),f=()=>ye(Xt,"$isPanelLoading",P);let S=Oe(""),R=Q(!0),k=Q(""),ee=Q(""),Y=Q(""),fe=Q(""),_e=Q([]),T=Q([]),I=Q(""),W=Q(!1),B=Q(!1),M=Q(!1);async function pe(u=null){try{A(B,!0);const n=u||{name:t(I),username:t(Y),password:t(fe),ip_addr:t(k),httpPort:t(ee),ssl:t(W),session:z()?.session[0]};await Qe.collection("atlas").create(n),na(`User added panel ${t(I)}`,z()?.email||"",z()?.id||""),A(R,!1),Ce.success("Panel added successfully"),setTimeout(()=>{location.reload()},3e3)}catch(n){console.error("Error adding panel:",n),Ce.error("Failed to add panel")}finally{A(B,!1)}}Be(()=>(g(),x()),()=>{if(g()){const u=x().find(n=>n.id===g());u&&(A(_e,u.expand?.doors||[]),A(T,u.expand?.users||[]))}}),Ye(),Me();var le=Z(),L=s(le);{var de=u=>{var n=Ur(),w=o(n);ht(w,{size:32,class:"animate-spin"}),l(n),e(u,n)},te=u=>{var n=Yr(),w=o(n);{var m=D=>{var b=Ir(),O=o(b);la(O,{value:"doors",class:"px-4",children:(F,ie)=>{var G=Er(),ve=s(G);oa(ve,{class:"flex items-center justify-center gap-4 max-w-[500px] mx-auto mt-4 rounded-lg",children:(c,oe)=>{var N=Lr(),ge=s(N);St(ge,{value:"doors",class:"w-1/2 rounded-lg",children:(V,p)=>{i();var v=C("Doors");e(V,v)},$$slots:{default:!0}});var h=a(ge,2);St(h,{value:"events",class:"w-1/2 rounded-lg",children:(V,p)=>{i();var v=C("Events");e(V,v)},$$slots:{default:!0}}),e(c,N)},$$slots:{default:!0}});var $e=a(ve,2);_t($e,{value:"users",children:(c,oe)=>{var N=Pe(()=>t(T)||[]);xr(c,{get data(){return t(N)}})},$$slots:{default:!0}});var E=a($e,2);_t(E,{value:"doors",children:(c,oe)=>{var N=jr(),ge=s(N),h=o(ge),V=a(o(h),2),p=o(V);Se(p,{placeholder:"Search",class:"w-[250px] pl-8 active:border-brand",$$events:{input:he=>S.set(he.target.value)}});var v=a(p,2);bt(v,{size:18,class:"absolute top-1/2 -translate-y-1/2 left-2"}),l(V),l(h),l(ge);var d=a(ge,2),_=o(d);La(_,{get data(){return t(_e)},search:S}),l(d),e(c,N)},$$slots:{default:!0}});var se=a(E,2);_t(se,{value:"events",children:(c,oe)=>{ar(c,{})},$$slots:{default:!0}}),e(F,G)},$$slots:{default:!0}}),l(b),e(D,b)},q=D=>{var b=Z(),O=s(b);{var F=G=>{var ve=Mr();e(G,ve)},ie=G=>{var ve=Vr();e(G,ve)};xe(O,G=>{x()?.length>0&&!g()?G(F):G(ie,!1)},!0)}e(D,b)};xe(w,D=>{x()?.length>0&&g()?D(m):D(q,!1)})}var ae=a(w,2),U=o(ae),J=Pe(()=>`${t(R)?"rotate-0 ":"rotate-180"} transition-transform ease-in-out duration-700`);da(U,{get class(){return t(J)}}),l(ae);var y=a(ae,2),j=o(y);{var re=D=>{var b=Z(),O=s(b);{var F=G=>{var ve=Hr(),$e=a(s(ve),2);ze($e,{class:"flex flex-col gap-2",children:(V,p)=>{i();var v=Rr(),d=a(s(v));Se(d,{id:"name",name:"name",placeholder:"Panel name",autocapitalize:"off",autocomplete:"off",get value(){return t(I)},set value(_){A(I,_)},$$legacy:!0}),e(V,v)},$$slots:{default:!0}});var E=a($e,2);ze(E,{class:"flex flex-col gap-2",children:(V,p)=>{i();var v=Or(),d=a(s(v));Se(d,{id:"username",name:"username",placeholder:"Username",autocapitalize:"off",autocomplete:"off",get value(){return t(Y)},set value(_){A(Y,_)},$$legacy:!0}),e(V,v)},$$slots:{default:!0}});var se=a(E,2);ze(se,{class:"flex flex-col gap-2",children:(V,p)=>{i();var v=Br(),d=a(s(v)),_=o(d),he=Pe(()=>t(M)?"text":"password");Se(_,{id:"password",name:"password",placeholder:"password",get type(){return t(he)},autocapitalize:"off",autocomplete:"off",get value(){return t(fe)},set value(ue){A(fe,ue)},$$legacy:!0});var H=a(_,2),K=o(H);{var me=ue=>{Ot(ue,{size:16,class:"transition-all ease-in-out"})},we=ue=>{Rt(ue,{size:16,class:"transition-all ease-in-out"})};xe(K,ue=>{t(M)?ue(me):ue(we,!1)})}l(H),l(d),Ne("click",H,()=>{A(M,!t(M))}),e(V,v)},$$slots:{default:!0}});var c=a(se,2);ze(c,{class:"flex flex-col gap-2",children:(V,p)=>{i();var v=Gr(),d=a(s(v));Se(d,{id:"serverIp",name:"serverIp",placeholder:"serverIP",get value(){return t(k)},set value(_){A(k,_)},$$legacy:!0}),e(V,v)},$$slots:{default:!0}});var oe=a(c,2);ze(oe,{class:"flex flex-col gap-2",children:(V,p)=>{i();var v=Wr(),d=a(s(v));Se(d,{id:"serverPort",name:"serverPort",placeholder:"Server Port",get value(){return t(ee)},set value(_){A(ee,_)},$$legacy:!0}),e(V,v)},$$slots:{default:!0}});var N=a(oe,2);ze(N,{class:"flex flex-row items-center gap-4",children:(V,p)=>{i();var v=qr(),d=a(s(v));Mt(d,{get checked(){return t(W)},set checked(_){A(W,_)},$$legacy:!0}),e(V,v)},$$slots:{default:!0}});var ge=a(N,2),h=Pe(()=>!t(k)||!t(ee)||!t(Y)||!t(fe)||t(B));Ae(ge,{type:"button",get disabled(){return t(h)},class:"disabled:cursor-not-allowed flex items-center gap-2",$$events:{click:()=>pe()},children:(V,p)=>{var v=Z(),d=s(v);{var _=H=>{var K=Jr(),me=s(K);ht(me,{class:"animate-spin"}),i(2),e(H,K)},he=H=>{var K=Xr(),me=s(K);at(me,{class:"size-4"}),i(),e(H,K)};xe(d,H=>{t(B)?H(_):H(he,!1)})}e(V,v)},$$slots:{default:!0}}),e(G,ve)},ie=G=>{var ve=Qr(),$e=a(o(ve),2);Ee($e,5,x,Ie,(se,c)=>{Dr(se,{get panelData(){return t(c)}})}),l($e);var E=a($e,2);Tr(E,{children:(se,c)=>{Ae(se,{class:"mt-auto flex items-center gap-1 w-full",children:(oe,N)=>{var ge=Kr(),h=s(ge);at(h,{size:16}),i(),e(oe,ge)},$$slots:{default:!0}})},$$slots:{default:!0}}),l(ve),e(G,ve)};xe(O,G=>{x()?.length===0?G(F):G(ie,!1)})}e(D,b)};xe(j,D=>{t(R)&&D(re)})}l(y),l(n),ne(()=>{Je(ae,`absolute ${t(R)?"right-[20%] xl:right-[18rem]":"right-0"} py-1 rounded-l-md bg-[#f9f9f9] dark:bg-slate-800 top-1/2 -translate-y-1/2 shadow-md transition-position ease-in-out duration-500`),Je(y,`h-[calc(100vh-75px)] border-solid
     border-x-[1px]
     transition-width ease-in-out duration-500 overflow-y-scroll flex flex-col gap-6
    ${t(R)?"w-1/4 p-4":" p-0 w-0"} relative max-w-72`)}),Ne("click",ae,()=>A(R,!t(R))),e(u,n)};xe(L,u=>{f()?u(de):u(te,!1)})}e(X,le),Re()}export{Ys as default};
