import{d as B,a as D,s as N,i as E,m as k,t as T,b as F,c as G,e as H,l as L}from"./stores.CtjRazAU.js";import{i as Q}from"./legacy.BEeXhY1S.js";import{p as R,l as o,a as X,b as Y,f as y,t as Z,s as $,g as w,m as ee,d as r,c as te}from"./effects.cxkQmux7.js";import{h as ae,a as d,c as I,t as x}from"./template.BwN7TRoD.js";import{s as se,i as J}from"./attributes.92vqw3Y3.js";import{h as O}from"./html.BFAOKdD3.js";import{p as a}from"./props.DbzmGua_.js";import{s as oe,a as U}from"./store.c-pxfM0-.js";import{o as re}from"./index-client.CyLyvevL.js";import{d as me,s as ie,a as le,b as q}from"./mode.BcneFSwF.js";import"./index.BUf4ql09.js";var de=x('<meta name="theme-color">'),ne=x("<!> <!>",1);function Ke(ce,e){R(e,!1);const b=oe(),P=()=>U(k,"$modeStorageKeyStore",b),V=()=>U(T,"$themeStorageKeyStore",b),n=ee();let W=a(e,"track",8,!0),v=a(e,"defaultMode",8,"system"),m=a(e,"themeColors",24,()=>{}),C=a(e,"disableTransitions",8,!0),c=a(e,"darkClassNames",24,()=>["dark"]),f=a(e,"lightClassNames",24,()=>[]),p=a(e,"defaultTheme",8,""),K=a(e,"nonce",8,""),g=a(e,"themeStorageKey",8,"mode-watcher-theme"),h=a(e,"modeStorageKey",8,"mode-watcher-mode");re(()=>{const S=B.subscribe(()=>{}),l=D.subscribe(()=>{});N.tracking(W()),N.query();const i=localStorage.getItem(P());ie(E(i)?i:v());const u=localStorage.getItem(V());return le(u||p()),()=>{S(),l()}});const M=me({defaultMode:v(),themeColors:m(),darkClassNames:c(),lightClassNames:f(),defaultTheme:p(),modeStorageKey:h(),themeStorageKey:g()});o(()=>r(C()),()=>{F.set(C())}),o(()=>r(m()),()=>{G.set(m())}),o(()=>r(c()),()=>{H.set(c())}),o(()=>r(f()),()=>{L.set(f())}),o(()=>r(h()),()=>{k.set(h())}),o(()=>r(g()),()=>{T.set(g())}),o(()=>r(K()),()=>{te(n,typeof window>"u"?K():"")}),X(),Q(),ae(S=>{var l=ne(),i=y(l);{var u=t=>{var s=de();Z(()=>se(s,"content",m().dark)),d(t,s)};J(i,t=>{m()&&t(u)})}var j=$(i,2);{var z=t=>{var s=I(),_=y(s);O(_,()=>`<script nonce=${w(n)}>(`+q.toString()+")("+JSON.stringify(M)+");<\/script>",!1,!1),d(t,s)},A=t=>{var s=I(),_=y(s);O(_,()=>"<script>("+q.toString()+")("+JSON.stringify(M)+");<\/script>",!1,!1),d(t,s)};J(j,t=>{w(n)?t(z):t(A,!1)})}d(S,l)}),Y()}export{Ke as ModeWatcher};
